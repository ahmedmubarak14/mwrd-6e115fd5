const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-BUQEk1zi.js","assets/ui-vendor-4UBc2IRE.js","assets/react-vendor-DUwTobZx.js","assets/supabase-vendor-BXYHCDmN.js","assets/web-BVPONY3-.js","assets/web--FH55Y82.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,r=(e,r,n)=>((e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n)(e,"symbol"!=typeof r?r+"":r,n);import{j as n,S as s,P as a,c as i,a as o,u as l,B as c,b as d,d as u,e as m,f as h,R as p,g as f,h as x,i as g,k as v,l as y,m as j,o as b,s as w,n as N,p as _,q as S,r as k,t as C,v as E,_ as O,w as M,x as P,y as A,z as T,A as D,C as R,D as L,E as q,F as I,G as F,H as z,I as B,J as $,K as U,L as V,M as W,N as H,O as Y,Q as K,T as G,U as X,V as Q,W as Z,X as J,Y as ee,Z as te,$ as re,a0 as ne,a1 as se,a2 as ae,a3 as ie,a4 as oe,a5 as le,a6 as ce,a7 as de,a8 as ue,a9 as me,aa as he,ab as pe,ac as fe,ad as xe,ae as ge,af as ve,ag as ye,ah as je,ai as be}from"./ui-vendor-4UBc2IRE.js";import{a as we,r as Ne,$ as _e,b as Se,R as ke,c as Ce,d as Ee}from"./react-vendor-DUwTobZx.js";import{c as Oe,_ as Me}from"./supabase-vendor-BXYHCDmN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Pe,Ae,Te=we;
/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function De(){return De=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},De.apply(this,arguments)}e=Te.createRoot,Te.hydrateRoot,(Ae=Pe||(Pe={})).Pop="POP",Ae.Push="PUSH",Ae.Replace="REPLACE";const Re="popstate";function Le(e){return void 0===e&&(e={}),function(e,t,r,n){void 0===n&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=Pe.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(De({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=Pe.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function m(e,t){o=Pe.Push;let r=ze(f.location,e,t);c=d()+1;let n=Fe(r,c),u=f.createHref(r);try{i.pushState(n,"",u)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(u)}a&&l&&l({action:o,location:f.location,delta:1})}function h(e,t){o=Pe.Replace;let r=ze(f.location,e,t);c=d();let n=Fe(r,c),s=f.createHref(r);i.replaceState(n,"",s),a&&l&&l({action:o,location:f.location,delta:0})}function p(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"==typeof e?e:Be(e);return r=r.replace(/ $/,"%20"),qe(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let f={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Re,u),l=e,()=>{s.removeEventListener(Re,u),l=null}},createHref:e=>t(s,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:m,replace:h,go:e=>i.go(e)};return f}(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return ze("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Be(t)},0,e)}function qe(e,t){if(!1===e||null==e)throw new Error(t)}function Ie(e,t){if(!e)try{throw new Error(t)}catch(r){}}function Fe(e,t){return{usr:e.state,key:e.key,idx:t}}function ze(e,t,r,n){return void 0===r&&(r=null),De({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?$e(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function Be(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function $e(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var Ue,Ve;function We(e,t,r){return void 0===r&&(r="/"),function(e,t,r,n){let s="string"==typeof t?$e(t):t,a=at(s.pathname||"/",r);if(null==a)return null;let i=He(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=st(a);o=rt(i[l],e,n)}return o}(e,t,r,!1)}function He(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(qe(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=ct([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(qe(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),He(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:tt(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of Ye(e.path))s(e,t,n);else s(e,t)}),t}function Ye(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=Ye(n.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(Ve=Ue||(Ue={})).data="data",Ve.deferred="deferred",Ve.redirect="redirect",Ve.error="error";const Ke=/^:[\w-]+$/,Ge=3,Xe=2,Qe=1,Ze=10,Je=-2,et=e=>"*"===e;function tt(e,t){let r=e.split("/"),n=r.length;return r.some(et)&&(n+=Je),t&&(n+=Xe),r.filter(e=>!et(e)).reduce((e,t)=>e+(Ke.test(t)?Ge:""===t?Qe:Ze),n)}function rt(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=nt({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=nt({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:ct([a,d.pathname]),pathnameBase:dt(ct([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=ct([a,d.pathnameBase]))}return i}function nt(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);Ie("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function st(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Ie(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function at(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function it(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ot(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function lt(e,t,r,n){let s;void 0===n&&(n=!1),"string"==typeof e?s=$e(e):(s=De({},e),qe(!s.pathname||!s.pathname.includes("?"),it("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),it("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),it("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:s=""}="string"==typeof e?$e(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:ut(n),hash:mt(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const ct=e=>e.join("/").replace(/\/\/+/g,"/"),dt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ut=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",mt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const ht=["post","put","patch","delete"];new Set(ht);const pt=["get",...ht];
/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ft.apply(this,arguments)}new Set(pt);const xt=Ne.createContext(null),gt=Ne.createContext(null),vt=Ne.createContext(null),yt=Ne.createContext(null),jt=Ne.createContext({outlet:null,matches:[],isDataRoute:!1}),bt=Ne.createContext(null);function wt(){return null!=Ne.useContext(yt)}function Nt(){return wt()||qe(!1),Ne.useContext(yt).location}function _t(e){Ne.useContext(vt).static||Ne.useLayoutEffect(e)}function St(){let{isDataRoute:e}=Ne.useContext(jt);return e?function(){let{router:e}=function(){let e=Ne.useContext(xt);return e||qe(!1),e}(Tt.UseNavigateStable),t=Rt(Dt.UseNavigateStable),r=Ne.useRef(!1);_t(()=>{r.current=!0});let n=Ne.useCallback(function(n,s){void 0===s&&(s={}),r.current&&("number"==typeof n?e.navigate(n):e.navigate(n,ft({fromRouteId:t},s)))},[e,t]);return n}():function(){wt()||qe(!1);let e=Ne.useContext(xt),{basename:t,future:r,navigator:n}=Ne.useContext(vt),{matches:s}=Ne.useContext(jt),{pathname:a}=Nt(),i=JSON.stringify(ot(s,r.v7_relativeSplatPath)),o=Ne.useRef(!1);_t(()=>{o.current=!0});let l=Ne.useCallback(function(r,s){if(void 0===s&&(s={}),!o.current)return;if("number"==typeof r)return void n.go(r);let l=lt(r,JSON.parse(i),a,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ct([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[t,n,i,a,e]);return l}()}const kt=Ne.createContext(null);function Ct(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=Ne.useContext(vt),{matches:s}=Ne.useContext(jt),{pathname:a}=Nt(),i=JSON.stringify(ot(s,n.v7_relativeSplatPath));return Ne.useMemo(()=>lt(e,JSON.parse(i),a,"path"===r),[e,i,a,r])}function Et(e,t){return function(e,t,r,n){wt()||qe(!1);let{navigator:s}=Ne.useContext(vt),{matches:a}=Ne.useContext(jt),i=a[a.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=Nt();if(t){var u;let e="string"==typeof t?$e(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||qe(!1),c=e}else c=d;let m=c.pathname||"/",h=m;if("/"!==l){let e=l.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=We(e,{pathname:h}),f=function(e,t,r,n){var s;void 0===t&&(t=[]);void 0===r&&(r=null);void 0===n&&(n=null);if(null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=n)&&a.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,o=null==(s=r)?void 0:s.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||qe(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,n,s)=>{let a,d=!1,u=null,m=null;r&&(a=o&&n.route.id?o[n.route.id]:void 0,u=n.route.errorElement||Mt,l&&(c<0&&0===s?(d=!0,m=null):c===s&&(d=!0,m=n.route.hydrateFallbackElement||null)));let h=t.concat(i.slice(0,s+1)),p=()=>{let t;return t=a?u:d?m:n.route.Component?Ne.createElement(n.route.Component,null):n.route.element?n.route.element:e,Ne.createElement(At,{match:n,routeContext:{outlet:e,matches:h,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?Ne.createElement(Pt,{location:r.location,revalidation:r.revalidation,component:u,error:a,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:ct([l,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ct([l,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,r,n);if(t&&f)return Ne.createElement(yt.Provider,{value:{location:ft({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Pe.Pop}},f);return f}(e,t)}function Ot(){let e=function(){var e;let t=Ne.useContext(bt),r=function(){let e=Ne.useContext(gt);return e||qe(!1),e}(Dt.UseRouteError),n=Rt(Dt.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ne.createElement(Ne.Fragment,null,Ne.createElement("h2",null,"Unexpected Application Error!"),Ne.createElement("h3",{style:{fontStyle:"italic"}},t),r?Ne.createElement("pre",{style:n},r):null,null)}const Mt=Ne.createElement(Ot,null);class Pt extends Ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?Ne.createElement(jt.Provider,{value:this.props.routeContext},Ne.createElement(bt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function At(e){let{routeContext:t,match:r,children:n}=e,s=Ne.useContext(xt);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),Ne.createElement(jt.Provider,{value:t},n)}var Tt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Tt||{}),Dt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Dt||{});function Rt(e){let t=function(){let e=Ne.useContext(jt);return e||qe(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||qe(!1),r.route.id}function Lt(e){let{to:t,replace:r,state:n,relative:s}=e;wt()||qe(!1);let{future:a,static:i}=Ne.useContext(vt),{matches:o}=Ne.useContext(jt),{pathname:l}=Nt(),c=St(),d=lt(t,ot(o,a.v7_relativeSplatPath),l,"path"===s),u=JSON.stringify(d);return Ne.useEffect(()=>c(JSON.parse(u),{replace:r,state:n,relative:s}),[c,u,s,r,n]),null}function qt(e){return function(e){let t=Ne.useContext(jt).outlet;return t?Ne.createElement(kt.Provider,{value:e},t):t}(e.context)}function It(e){qe(!1)}function Ft(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Pe.Pop,navigator:a,static:i=!1,future:o}=e;wt()&&qe(!1);let l=t.replace(/^\/*/,"/"),c=Ne.useMemo(()=>({basename:l,navigator:a,static:i,future:ft({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);"string"==typeof n&&(n=$e(n));let{pathname:d="/",search:u="",hash:m="",state:h=null,key:p="default"}=n,f=Ne.useMemo(()=>{let e=at(d,l);return null==e?null:{location:{pathname:e,search:u,hash:m,state:h,key:p},navigationType:s}},[l,d,u,m,h,p,s]);return null==f?null:Ne.createElement(vt.Provider,{value:c},Ne.createElement(yt.Provider,{children:r,value:f}))}function zt(e){let{children:t,location:r}=e;return Et(Bt(t),r)}function Bt(e,t){void 0===t&&(t=[]);let r=[];return Ne.Children.forEach(e,(e,n)=>{if(!Ne.isValidElement(e))return;let s=[...t,n];if(e.type===Ne.Fragment)return void r.push.apply(r,Bt(e.props.children,s));e.type!==It&&qe(!1),e.props.index&&e.props.children&&qe(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Bt(e.props.children,s)),r.push(a)}),r}
/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$t.apply(this,arguments)}function Ut(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function Vt(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Promise(()=>{});const Wt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ht=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(mte){}const Yt=Ne.createContext({isTransitioning:!1}),Kt=_e.startTransition;function Gt(e){let{basename:t,children:r,future:n,window:s}=e,a=Ne.useRef();null==a.current&&(a.current=Le({window:s,v5Compat:!0}));let i=a.current,[o,l]=Ne.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=Ne.useCallback(e=>{c&&Kt?Kt(()=>l(e)):l(e)},[l,c]);return Ne.useLayoutEffect(()=>i.listen(d),[i,d]),Ne.createElement(Ft,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const Xt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Qt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=Ne.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u}=e,m=Ut(e,Wt),{basename:h}=Ne.useContext(vt),p=!1;if("string"==typeof c&&Qt.test(c)&&(r=c,Xt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=at(t.pathname,h);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:p=!0}catch(mte){}let f=function(e,t){let{relative:r}=void 0===t?{}:t;wt()||qe(!1);let{basename:n,navigator:s}=Ne.useContext(vt),{hash:a,pathname:i,search:o}=Ct(e,{relative:r}),l=i;return"/"!==n&&(l="/"===i?n:ct([n,i])),s.createHref({pathname:l,search:o,hash:a})}(c,{relative:s}),x=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=void 0===t?{}:t,l=St(),c=Nt(),d=Ct(e,{relative:i});return Ne.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==n?n:Be(c)===Be(d);l(e,{replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,n,s,r,e,a,i,o])}(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:u});return Ne.createElement("a",$t({},m,{href:r||f,onClick:p||a?n:function(e){n&&n(e),e.defaultPrevented||x(e)},ref:t,target:l}))}),Jt=Ne.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:c}=e,d=Ut(e,Ht),u=Ct(o,{relative:d.relative}),m=Nt(),h=Ne.useContext(gt),{navigator:p,basename:f}=Ne.useContext(vt),x=null!=h&&function(e,t){void 0===t&&(t={});let r=Ne.useContext(Yt);null==r&&qe(!1);let{basename:n}=function(){let e=Ne.useContext(xt);return e||qe(!1),e}(er.useViewTransitionState),s=Ct(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=at(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=at(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=nt(s.pathname,i)||null!=nt(s.pathname,a)}(u)&&!0===l,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,v=m.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(v=v.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&f&&(y=at(y,f)||y);const j="/"!==g&&g.endsWith("/")?g.length-1:g.length;let b,w=v===g||!a&&v.startsWith(g)&&"/"===v.charAt(j),N=null!=y&&(y===g||!a&&y.startsWith(g)&&"/"===y.charAt(g.length)),_={isActive:w,isPending:N,isTransitioning:x},S=w?r:void 0;b="function"==typeof s?s(_):[s,w?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let k="function"==typeof i?i(_):i;return Ne.createElement(Zt,$t({},d,{"aria-current":S,className:b,ref:t,style:k,to:o,viewTransition:l}),"function"==typeof c?c(_):c)});var er,tr,rr,nr;function sr(e){let t=Ne.useRef(Vt(e)),r=Ne.useRef(!1),n=Nt(),s=Ne.useMemo(()=>function(e,t){let r=Vt(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),a=St(),i=Ne.useCallback((e,t)=>{const n=Vt("function"==typeof e?e(s):e);r.current=!0,a("?"+n,t)},[a,s]);return[s,i]}(tr=er||(er={})).UseScrollRestoration="useScrollRestoration",tr.UseSubmit="useSubmit",tr.UseSubmitFetcher="useSubmitFetcher",tr.UseFetcher="useFetcher",tr.useViewTransitionState="useViewTransitionState",(nr=rr||(rr={})).UseFetcher="useFetcher",nr.UseFetchers="useFetchers",nr.UseScrollRestoration="useScrollRestoration";const ar={"en-US":{clientGroups:{overview:"Overview",workspace:"Workspace",network:"Network",account:"Account"},nav:{home:"Home",dashboard:"Dashboard",requests:"Requests",offers:"Offers",orders:"Orders",messages:"Messages",analytics:"Analytics",vendors:"Vendors",manageSubscription:"Manage Subscription"},vendor:{dashboard:{welcome:"Welcome to Your Vendor Dashboard",crVerificationStatus:"CR Verification Status",crVerificationDesc:"Commercial Registration verification",profileCompletionTitle:"Profile Completion",profileCompletionDesc:"Complete your vendor profile",activeOffersCount:"Active Offers",activeOffersCountDesc:"Currently active offers",totalEarningsTitle:"Total Earnings",totalEarningsDesc:"Total earned from projects",performanceTitle:"Performance",performanceDesc:"Your vendor performance metrics",quickActions:"Quick Actions",quickActionsDesc:"Common tasks and shortcuts",browseRFQs:"Browse RFQs",newRequests:"New requests available",submitOffer:"Submit Offer",createNewOffer:"Create new offer",messages:"Messages",unreadMessages:"Unread messages",updateProfile:"Update Profile",recentActivity:"Recent Activity",newRFQReceived:"New RFQ Received",constructionProject:"Construction Project",hoursAgo:"2 hours ago",offerSubmitted:"Offer Submitted",officeRenovation:"Office Renovation",profileUpdateRequired:"Profile Update Required",completeVerification:"Complete verification",dayAgo:"1 day ago",performanceOverview:"Performance Overview",profileCompletion:"Profile Completion",successRateTitle:"Success Rate",successRateDesc:"Percentage of successful projects",monthlyRevenueTitle:"Monthly Revenue",monthlyRevenueDesc:"Revenue this month",completedProjectsTitle:"Completed Projects",completedProjectsDesc:"Total completed projects",clientRatingTitle:"Client Rating",clientRatingDesc:"Average client rating"},cr:{verificationRequired:"Verification Required",completeVerification:"Complete your Commercial Registration verification to access all features",updateCR:"Update CR",verified:"Verified",pending:"Pending",rejected:"Rejected",underReview:"Under Review"},browseRequests:{title:"Browse Requests",subtitle:"Find and bid on procurement opportunities",searchPlaceholder:"Search requests..."}},messages:{title:"Messages",subtitle:"Communicate with clients and manage conversations",searchAndActions:"Search & Actions",unknownUser:"Unknown User"},orders:{title:"Orders",subtitle:"Manage your orders and track deliveries",noOrders:"No orders yet"},common:{save:"Save",cancel:"Cancel",back:"Back",next:"Next",previous:"Previous",errorLoadingDashboard:"Error Loading Dashboard",tryAgain:"Try Again",good:"Good",needsWork:"Needs Work",vsLastMonth:"vs last month",completed:"Completed"},profile:{title:"Profile",subtitle:"Manage your personal information and account settings",editProfile:"Edit Profile"}},"ar-SA":{clientGroups:{overview:"نظرة عامة",workspace:"مساحة العمل",network:"الشبكة",account:"الحساب"},nav:{home:"الرئيسية",dashboard:"لوحة التحكم",requests:"الطلبات",offers:"العروض",orders:"الأوامر",messages:"الرسائل",analytics:"التحليلات",vendors:"الموردين",manageSubscription:"إدارة الاشتراك"},vendor:{dashboard:{welcome:"مرحباً بك في لوحة تحكم المورد",crVerificationStatus:"حالة التحقق من السجل التجاري",crVerificationDesc:"التحقق من السجل التجاري",profileCompletionTitle:"اكتمال الملف الشخصي",profileCompletionDesc:"أكمل ملفك الشخصي كمورد",activeOffersCount:"العروض النشطة",activeOffersCountDesc:"العروض النشطة حالياً",totalEarningsTitle:"إجمالي الأرباح",totalEarningsDesc:"إجمالي الأرباح من المشاريع",performanceTitle:"الأداء",performanceDesc:"مقاييس أداء المورد",quickActions:"الإجراءات السريعة",quickActionsDesc:"المهام الشائعة والاختصارات",browseRFQs:"تصفح طلبات المناقصات",newRequests:"طلبات جديدة متاحة",submitOffer:"تقديم عرض",createNewOffer:"إنشاء عرض جديد",messages:"الرسائل",unreadMessages:"رسائل غير مقروءة",updateProfile:"تحديث الملف الشخصي",recentActivity:"النشاط الأخير",newRFQReceived:"تم استلام طلب مناقصة جديد",constructionProject:"مشروع بناء",hoursAgo:"منذ ساعتين",offerSubmitted:"تم تقديم عرض",officeRenovation:"تجديد مكتب",profileUpdateRequired:"مطلوب تحديث الملف الشخصي",completeVerification:"أكمل التحقق",dayAgo:"منذ يوم",performanceOverview:"نظرة عامة على الأداء",profileCompletion:"اكتمال الملف الشخصي",successRateTitle:"معدل النجاح",successRateDesc:"نسبة المشاريع الناجحة",monthlyRevenueTitle:"الإيرادات الشهرية",monthlyRevenueDesc:"الإيرادات هذا الشهر",completedProjectsTitle:"المشاريع المكتملة",completedProjectsDesc:"إجمالي المشاريع المكتملة",clientRatingTitle:"تقييم العملاء",clientRatingDesc:"متوسط تقييم العملاء"},cr:{verificationRequired:"التحقق مطلوب",completeVerification:"أكمل التحقق من السجل التجاري للوصول إلى جميع الميزات",updateCR:"تحديث السجل التجاري",verified:"تم التحقق",pending:"في الانتظار",rejected:"مرفوض",underReview:"قيد المراجعة"},browseRequests:{title:"تصفح الطلبات",subtitle:"اعثر على فرص المناقصات وقدم عروضك",searchPlaceholder:"البحث في الطلبات..."}},messages:{title:"الرسائل",subtitle:"تواصل مع العملاء وإدارة المحادثات",searchAndActions:"البحث والإجراءات",unknownUser:"مستخدم غير معروف"},orders:{title:"الأوامر",subtitle:"إدارة أوامرك وتتبع التسليم",noOrders:"لا توجد أوامر بعد"},common:{save:"حفظ",cancel:"إلغاء",back:"العودة",next:"التالي",previous:"السابق",errorLoadingDashboard:"خطأ في تحميل لوحة التحكم",tryAgain:"حاول مرة أخرى",good:"جيد",needsWork:"يحتاج عمل",vsLastMonth:"مقارنة بالشهر الماضي",completed:"مكتمل"},profile:{title:"الملف الشخصي",subtitle:"إدارة معلوماتك الشخصية وإعدادات الحساب",editProfile:"تعديل الملف الشخصي"}}};const ir=new class{constructor(){r(this,"isDevelopment",!1),r(this,"enableDebugMode",!1)}log(e,t,r,...n){(new Date).toISOString(),e.toUpperCase(),(null==r?void 0:r.component)&&r.component;"error"!==e&&"warn"!==e&&(this.isDevelopment||this.enableDebugMode)}debug(e,t,...r){this.log("debug",e,t,...r)}info(e,t,...r){this.log("info",e,t,...r)}warn(e,t,...r){this.log("warn",e,t,...r)}error(e,t,...r){this.log("error",e,t,...r)}createComponentLogger(e){return{debug:(t,r,...n)=>this.debug(t,{component:e,metadata:r},...n),info:(t,r,...n)=>this.info(t,{component:e,metadata:r},...n),warn:(t,r,...n)=>this.warn(t,{component:e,metadata:r},...n),error:(t,r,...n)=>this.error(t,{component:e,metadata:r},...n)}}},or=e=>ir.createComponentLogger(e),lr=Ne.createContext(void 0),cr=()=>{const e=Ne.useContext(lr);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},dr=or("LanguageProvider"),ur=({children:e})=>{dr.debug("Starting initialization");const[t,r]=Ne.useState(()=>{dr.debug("Initializing useState");try{const e=localStorage.getItem("language"),t="ar"===e||"en"===e?e:"en";return dr.info("Initial language loaded",{language:t}),t}catch(e){return dr.warn("Failed to access localStorage",{error:e}),"en"}}),s="ar"===t;Ne.useEffect(()=>{try{localStorage.setItem("language",t)}catch(e){dr.warn("Failed to save language to localStorage",{error:e})}document.documentElement.lang=t,document.documentElement.dir=s?"rtl":"ltr",document.body.classList.remove("lang-en","lang-ar"),document.body.classList.add(`lang-${t}`),document.body.style.fontFamily=s?"'Cairo', 'Noto Sans Arabic', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif":"'Cairo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},[t,s]);return n.jsx(lr.Provider,{value:{language:t,setLanguage:r,t:e=>((e,t="en")=>{const r=ar["ar"===t?"ar-SA":"en-US"],n=e.split(".");let s=r;for(const a of n){if(!s||"object"!=typeof s||!(a in s)){s=null;break}s=s[a]}if("string"==typeof s)return s;if("en"!==t){let e=ar["en-US"];for(const t of n){if(!e||"object"!=typeof e||!(t in e)){e=null;break}e=e[t]}if("string"==typeof e)return e}return n[n.length-1]||e})(e,t),isRTL:s,formatNumber:e=>"ar"===t?new Intl.NumberFormat("ar-SA").format(e):new Intl.NumberFormat("en-US").format(e),formatDate:e=>"ar"===t?new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(e):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e),formatCurrency:(e,r="SAR")=>"ar"===t?new Intl.NumberFormat("ar-SA",{style:"currency",currency:r}).format(e):new Intl.NumberFormat("en-US",{style:"currency",currency:r}).format(e)},children:e})},mr=Oe("https://jpxqywtitjjphkiuokov.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpweHF5d3RpdGpqcGhraXVva292Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5Nzc5MjgsImV4cCI6MjA3MTU1MzkyOH0.2867pqseQHwJKM4648nIDqfwL3SQiBw3Lf2qgA-i0vI",{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10},heartbeatIntervalMs:3e4,reconnectAfterMs:e=>Math.min(1e3*e,1e4),timeout:2e4,transport:"undefined"!=typeof WebSocket?WebSocket:void 0},global:{headers:{"User-Agent":"SupplyChain-Client"}}}),hr=e=>{try{setTimeout(()=>{Me(async()=>{const{toast:e}=await Promise.resolve().then(()=>xp);return{toast:e}},void 0).then(({toast:t})=>{t({title:"Error",description:e,variant:"destructive"})}).catch(()=>{})},0)}catch(t){}},pr=e=>{try{setTimeout(()=>{Me(async()=>{const{toast:e}=await Promise.resolve().then(()=>xp);return{toast:e}},void 0).then(({toast:t})=>{t({title:"Info",description:e})}).catch(()=>{})},0)}catch(t){}},fr=e=>{var t;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return!1;const r=null==(t=e.split("@")[1])?void 0:t.toLowerCase();return!["10minutemail.com","temp-mail.org","guerrillamail.com"].includes(r)},xr=e=>e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").trim(),gr=async(e,t)=>{try{await mr.from("audit_log").insert({action:"security_event",entity_type:"security",entity_id:crypto.randomUUID(),new_values:{event:e,details:t,timestamp:(new Date).toISOString()}})}catch(r){}};const vr=new class{constructor(){r(this,"attempts",new Map)}isAllowed(e,t=5,r=3e5){const n=Date.now(),s=this.attempts.get(e);return!s||n>s.resetTime?(this.attempts.set(e,{count:1,resetTime:n+r}),!0):!(s.count>=t)&&(s.count++,!0)}reset(e){this.attempts.delete(e)}},yr=Ne.createContext(void 0),jr=({children:e})=>{const[t,r]=Ne.useState(null),[s,a]=Ne.useState(null),[i,o]=Ne.useState(null),[l,c]=Ne.useState(!0);Ne.useEffect(()=>{const{data:{subscription:e}}=mr.auth.onAuthStateChange((e,n)=>{var s;a(n),r((null==n?void 0:n.user)??null),"SIGNED_IN"===e&&(null==n?void 0:n.user)?gr("user_login_success",{user_id:n.user.id,email:n.user.email,login_method:"password"}):"SIGNED_OUT"===e?gr("user_logout",{user_id:null==t?void 0:t.id}):"TOKEN_REFRESHED"===e&&gr("token_refresh",{user_id:null==(s=null==n?void 0:n.user)?void 0:s.id}),(null==n?void 0:n.user)?setTimeout(()=>{d(n.user.id)},0):(o(null),c(!1))});return mr.auth.getSession().then(({data:{session:e},error:t})=>{t&&(ir.error("Session retrieval error",{error:t.message}),gr("session_retrieval_error",{error:t.message})),a(e),r((null==e?void 0:e.user)??null),(null==e?void 0:e.user)?d(e.user.id):c(!1)}),()=>e.unsubscribe()},[]);const d=async e=>{var t,r,n;try{const{data:s,error:a}=await mr.from("user_profiles").select("*").eq("user_id",e).maybeSingle();if(a&&(ir.error("Error fetching user profile",{userId:e,error:a.message}),gr("profile_fetch_error",{user_id:e,error:a.message})),s)return void o(s);const{data:i}=await mr.auth.getUser(),l=i.user,c=(null==l?void 0:l.email)??"",d=(null==(t=null==l?void 0:l.user_metadata)?void 0:t.role)??"client",{data:u,error:m}=await mr.from("user_profiles").insert({user_id:e,email:c,role:d,full_name:(null==(r=null==l?void 0:l.user_metadata)?void 0:r.full_name)??null,company_name:(null==(n=null==l?void 0:l.user_metadata)?void 0:n.company_name)??null}).select("*").single();m?gr("profile_creation_error",{user_id:e,error:m.message}):u&&(o(u),gr("profile_created",{user_id:e}),pr("Your profile was created successfully."))}catch(s){gr("profile_operation_exception",{user_id:e,error:s instanceof Error?s.message:"Unknown error"})}finally{c(!1)}},u={user:t,session:s,userProfile:i,loading:l,signIn:async(e,t)=>{const r=`signin_${e}`;if(!vr.isAllowed(r,5,9e5)){const t=new Error("Too many login attempts. Please try again later.");return gr("login_rate_limit_exceeded",{email:e,attempts:5}),hr("Too many login attempts. Please try again later."),{error:t}}if(!fr(e)){const t=new Error("Invalid email domain");return gr("invalid_email_domain",{email:e}),hr("Invalid email domain"),{error:t}}try{c(!0);const{error:n}=await mr.auth.signInWithPassword({email:e.toLowerCase().trim(),password:t});return n?(gr("login_failed",{email:e,error:n.message,error_code:n.status}),hr(n.message)):(vr.reset(r),pr("Successfully signed in!")),{error:n}}catch(n){return gr("login_exception",{email:e,error:n instanceof Error?n.message:"Unknown error"}),hr("An unexpected error occurred during sign in"),{error:n}}finally{c(!1)}},signUp:async(e,t,r)=>{const n=`signup_${e}`;if(!vr.isAllowed(n,3,18e5)){const t=new Error("Too many signup attempts. Please try again later.");return gr("signup_rate_limit_exceeded",{email:e}),hr("Too many signup attempts. Please try again later."),{error:t}}if(!fr(e)){const t=new Error("Invalid email domain");return gr("invalid_email_domain_signup",{email:e}),hr("Invalid email domain"),{error:t}}try{c(!0);const s=`${window.location.origin}/`,{error:a}=await mr.auth.signUp({email:e.toLowerCase().trim(),password:t,options:{emailRedirectTo:s,data:r}});return a?(gr("signup_failed",{email:e,error:a.message,error_code:a.status}),hr(a.message)):(gr("signup_success",{email:e}),vr.reset(n),pr("Account created successfully! Please check your email to verify your account.")),{error:a}}catch(s){return gr("signup_exception",{email:e,error:s instanceof Error?s.message:"Unknown error"}),hr("An unexpected error occurred during sign up"),{error:s}}finally{c(!1)}},signOut:async()=>{try{const e=t;o(null),r(null),a(null);const{error:n}=await mr.auth.signOut();if(n)throw gr("logout_failed",{user_id:null==e?void 0:e.id,error:n.message}),n;pr("You have been signed out successfully.")}catch(e){hr("Error signing out")}},resetPassword:async e=>{const t=`reset_${e}`;if(!vr.isAllowed(t,3,18e5)){const t=new Error("Too many password reset attempts. Please try again later.");return gr("password_reset_rate_limit_exceeded",{email:e}),hr("Too many password reset attempts. Please try again later."),{error:t}}try{const t=`${window.location.origin}/reset-password`,{error:r}=await mr.auth.resetPasswordForEmail(e.toLowerCase().trim(),{redirectTo:t});return r?(gr("password_reset_failed",{email:e,error:r.message}),hr(r.message)):(gr("password_reset_requested",{email:e}),pr("Password reset email sent! Please check your inbox.")),{error:r}}catch(r){return gr("password_reset_exception",{email:e,error:r instanceof Error?r.message:"Unknown error"}),hr("An unexpected error occurred during password reset"),{error:r}}},updateProfile:async e=>{if(!t||!i)return!1;try{const{error:r}=await mr.from("user_profiles").update(e).eq("user_id",t.id);if(r)throw r;return o({...i,...e}),gr("profile_updated",{user_id:t.id,updated_fields:Object.keys(e)}),pr("Profile updated successfully."),!0}catch(r){return gr("profile_update_failed",{user_id:t.id,error:r instanceof Error?r.message:"Unknown error"}),hr("Failed to update profile"),!1}}};return n.jsx(yr.Provider,{value:u,children:e})},br=()=>{const e=Ne.useContext(yr);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};const wr=Ne.createContext(void 0),Nr=["/","/landing","/pricing","/suppliers","/why-start-with-mwrd","/why-move-to-mwrd","/privacy-policy","/terms-and-conditions","/support"],_r=["/dashboard","/vendor-dashboard","/admin","/profile","/settings","/analytics","/orders","/messages","/my-offers","/browse-requests","/requests","/expert-consultation","/manage-subscription"],Sr=({children:e})=>{const t=Nt(),[r,s]=function(e,t){const[r,n]=Ne.useState(()=>{try{const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return t}});return[r,t=>{try{const s=t instanceof Function?t(r):t;n(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(s){}}]}("theme","light"),[a,i]=Ne.useState(r),[o,l]=Ne.useState("light"),c=_r.some(e=>t.pathname.startsWith(e)),d=Nr.some(e=>t.pathname===e||"/"===e&&"/"===t.pathname);Ne.useEffect(()=>{const e=window.document.documentElement,t=()=>{if(d)return"light";if(c){if("system"===a)try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch(e){return"light"}return a}return"light"};try{const r=t();if(l(r),e.classList.remove("light","dark"),e.classList.add(r),e.setAttribute("data-theme",r),c&&"system"===a&&!d){const r=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{try{const r=t();l(r),e.classList.remove("light","dark"),e.classList.add(r),e.setAttribute("data-theme",r)}catch(r){}};return r.addEventListener("change",n),()=>r.removeEventListener("change",n)}}catch(r){e.classList.remove("light","dark"),e.classList.add("light"),e.setAttribute("data-theme","light"),l("light")}},[a,c,d,t.pathname]);return n.jsx(wr.Provider,{value:{theme:d?"light":a,setTheme:e=>{c&&!d&&(i(e),s(e))},resolvedTheme:o,isDashboardRoute:c,forceLightMode:d},children:e})},kr=or("ProductionReadiness"),Cr=or("ProductionMonitoringProvider"),Er=Ne.createContext(void 0),Or=({children:e})=>{const t=(e=>{const t=Ne.useRef(),[r,n]=Ne.useState(null),s=or(`PerformanceMonitor-${e}`);return Ne.useEffect(()=>{t.current=performance.now();const e=()=>{if("memory"in performance)return performance.memory},r=()=>"connection"in navigator&&navigator.connection.effectiveType||"unknown",a=()=>{const s=performance.now()-(t.current||0),a=t.current||0;n({renderTime:s,componentMountTime:a,memoryUsage:e(),connectionSpeed:r(),isOnline:navigator.onLine})};return a(),window.addEventListener("online",a),window.addEventListener("offline",a),s.debug("Component mounted",{mountTime:t.current,renderTime:performance.now()-(t.current||0)}),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",a)}},[e]),r})("App"),[r,s]=Ne.useState(null),[a,i]=Ne.useState(0),[o,l]=Ne.useState(0),[c,d]=Ne.useState(!0),u=()=>{var e;try{const r=(()=>{const e=[];try{const t=void 0;e.push({name:"Environment Variables",status:t?"passed":"failed",message:t?"All required environment variables are present":"Missing required environment variables",severity:"critical"})}catch{e.push({name:"Environment Variables",status:"warning",message:"Could not verify environment variables",severity:"medium"})}const t=null!==document.querySelector("[data-error-boundary]");e.push({name:"Error Boundary",status:t?"passed":"warning",message:t?"Error boundary is active":"Error boundary not detected in DOM",severity:"medium"});const r="performance"in window&&"mark"in performance;e.push({name:"Performance Monitoring",status:r?"passed":"warning",message:r?"Performance API available":"Performance API not available",severity:"low"});const n="navigator"in window&&"onLine"in navigator;e.push({name:"Network Status Monitoring",status:n?"passed":"warning",message:n?"Network status monitoring available":"Network status monitoring not available",severity:"low"});const s="https:"===window.location.protocol||"localhost"===window.location.hostname;e.push({name:"Secure Protocol",status:s?"passed":"failed",message:s?"Using secure HTTPS protocol":"Not using secure HTTPS protocol",severity:"critical"});const a="serviceWorker"in navigator;e.push({name:"Service Worker Support",status:a?"passed":"warning",message:a?"Service Worker support available":"Service Worker not supported",severity:"low"});let i=!1;try{const e="__test_storage__";localStorage.setItem(e,"test"),localStorage.removeItem(e),i=!0}catch{i=!1}e.push({name:"Local Storage",status:i?"passed":"warning",message:i?"Local Storage is available":"Local Storage is not available",severity:"medium"});const o=e.filter(e=>"failed"===e.status),l=e.filter(e=>"warning"===e.status),c=e.filter(e=>"passed"===e.status);return kr.info("Production readiness check completed",{total:e.length,passed:c.length,warnings:l.length,failed:o.length,criticalIssues:o.filter(e=>"critical"===e.severity).length}),o.length>0&&kr.error("Production readiness failures",{failures:o.map(e=>({name:e.name,message:e.message,severity:e.severity}))}),e})(),n=(e=>{const t={critical:40,high:25,medium:15,low:5};let r=0,n=0;return e.forEach(e=>{const s=t[e.severity];r+=s,"passed"===e.status?n+=s:"warning"===e.status&&(n+=.5*s)}),Math.round(n/r*100)})(r),i=[(null==t?void 0:t.renderTime)&&t.renderTime>100,(null==(e=null==t?void 0:t.memoryUsage)?void 0:e.usedJSHeapSize)&&t.memoryUsage.usedJSHeapSize>104857600,!(null==t?void 0:t.isOnline),"slow-2g"===(null==t?void 0:t.connectionSpeed)||"2g"===(null==t?void 0:t.connectionSpeed)].filter(Boolean).length>0;s({performance:t,readinessScore:n,readinessChecks:r,isLowPerformance:i,enableOptimizations:i||n<80,errorCount:a,warningCount:o}),Cr.info("Production metrics refreshed",{readinessScore:n,isLowPerformance:i,errorCount:a,warningCount:o,performanceRenderTime:null==t?void 0:t.renderTime})}catch(r){Cr.error("Error refreshing production metrics",{error:r})}};Ne.useEffect(()=>{if(!t)return;u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[t,a,o]);const m={metrics:r,isMonitoring:c,reportError:(e,t)=>{i(e=>e+1),Cr.error("Production error reported",{error:e.message,stack:e.stack,context:t,timestamp:(new Date).toISOString()})},reportWarning:(e,t)=>{l(e=>e+1),Cr.warn("Production warning reported",{message:e,context:t,timestamp:(new Date).toISOString()})},refreshMetrics:u};return n.jsx(Er.Provider,{value:m,children:e})};function Mr(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Mr(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Mr(e))&&(n&&(n+=" "),n+=t);return n}const Ar=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Tr=Pr,Dr=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Tr(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{const t=null==r?void 0:r[e],n=null==a?void 0:a[e];if(null===t)return null;const i=Ar(t)||Ar(n);return s[e][i]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...o}[t]):{...a,...o}[t]===r})?[...e,r,n]:e},[]);return Tr(e,i,l,null==r?void 0:r.class,null==r?void 0:r.className)},Rr=Ne.createContext({});const Lr="undefined"!=typeof window,qr=Lr?Ne.useLayoutEffect:Ne.useEffect,Ir=Ne.createContext(null);function Fr(e,t){-1===e.indexOf(t)&&e.push(t)}function zr(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Br=(e,t,r)=>r>t?t:r<e?e:r;const $r={},Ur=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Vr(e){return"object"==typeof e&&null!==e}const Wr=e=>/^0[^.\s]+$/u.test(e);function Hr(e){let t;return()=>(void 0===t&&(t=e()),t)}const Yr=e=>e,Kr=(e,t)=>r=>t(e(r)),Gr=(...e)=>e.reduce(Kr),Xr=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n};class Qr{constructor(){this.subscriptions=[]}add(e){return Fr(this.subscriptions,e),()=>zr(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let s=0;s<n;s++){const n=this.subscriptions[s];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zr=e=>1e3*e,Jr=e=>e/1e3;function en(e,t){return t?e*(1e3/t):0}const tn=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function rn(e,t,r,n){if(e===t&&r===n)return Yr;const s=t=>function(e,t,r,n,s){let a,i,o=0;do{i=t+(r-t)/2,a=tn(i,n,s)-e,a>0?r=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,r);return e=>0===e||1===e?e:tn(s(e),t,n)}const nn=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sn=e=>t=>1-e(1-t),an=rn(.33,1.53,.69,.99),on=sn(an),ln=nn(on),cn=e=>(e*=2)<1?.5*on(e):.5*(2-Math.pow(2,-10*(e-1))),dn=e=>1-Math.sin(Math.acos(e)),un=sn(dn),mn=nn(dn),hn=rn(.42,0,1,1),pn=rn(0,0,.58,1),fn=rn(.42,0,.58,1),xn=e=>Array.isArray(e)&&"number"==typeof e[0],gn={linear:Yr,easeIn:hn,easeInOut:fn,easeOut:pn,circIn:dn,circInOut:mn,circOut:un,backIn:on,backInOut:ln,backOut:an,anticipate:cn},vn=e=>{if(xn(e)){e.length;const[t,r,n,s]=e;return rn(t,r,n,s)}return"string"==typeof e?gn[e]:e},yn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],jn={value:null,addProjectionMetrics:null};function bn(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=yn.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(o)}const d={schedule:(e,t=!1,a=!1)=>{const o=a&&s?r:n;return t&&i.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{o=e,s?a=!0:(s=!0,[r,n]=[n,r],r.forEach(c),t&&jn.value&&jn.value.frameloop[t].push(l),l=0,r.clear(),s=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:m,render:h,postRender:p}=i,f=()=>{const a=$r.useManualTiming?s.timestamp:performance.now();r=!1,$r.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(a-s.timestamp,40),1)),s.timestamp=a,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),u.process(s),m.process(s),h.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(f))};return{schedule:yn.reduce((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(r||(r=!0,n=!0,s.isProcessing||e(f)),o.schedule(t,a,i)),t},{}),cancel:e=>{for(let t=0;t<yn.length;t++)i[yn[t]].cancel(e)},state:s,steps:i}}const{schedule:wn,cancel:Nn,state:_n,steps:Sn}=bn("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Yr,!0);let kn;function Cn(){kn=void 0}const En={now:()=>(void 0===kn&&En.set(_n.isProcessing||$r.useManualTiming?_n.timestamp:performance.now()),kn),set:e=>{kn=e,queueMicrotask(Cn)}},On=e=>t=>"string"==typeof t&&t.startsWith(e),Mn=On("--"),Pn=On("var(--"),An=e=>!!Pn(e)&&Tn.test(e.split("/*")[0].trim()),Tn=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Dn={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Rn={...Dn,transform:e=>Br(0,1,e)},Ln={...Dn,default:1},qn=e=>Math.round(1e5*e)/1e5,In=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Fn=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zn=(e,t)=>r=>Boolean("string"==typeof r&&Fn.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),Bn=(e,t,r)=>n=>{if("string"!=typeof n)return n;const[s,a,i,o]=n.match(In);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},$n={...Dn,transform:e=>Math.round((e=>Br(0,255,e))(e))},Un={test:zn("rgb","red"),parse:Bn("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+$n.transform(e)+", "+$n.transform(t)+", "+$n.transform(r)+", "+qn(Rn.transform(n))+")"};const Vn={test:zn("#"),parse:function(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}},transform:Un.transform},Wn=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Hn=Wn("deg"),Yn=Wn("%"),Kn=Wn("px"),Gn=Wn("vh"),Xn=Wn("vw"),Qn=(()=>({...Yn,parse:e=>Yn.parse(e)/100,transform:e=>Yn.transform(100*e)}))(),Zn={test:zn("hsl","hue"),parse:Bn("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Yn.transform(qn(t))+", "+Yn.transform(qn(r))+", "+qn(Rn.transform(n))+")"},Jn={test:e=>Un.test(e)||Vn.test(e)||Zn.test(e),parse:e=>Un.test(e)?Un.parse(e):Zn.test(e)?Zn.parse(e):Vn.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Un.transform(e):Zn.transform(e),getAnimatableNone:e=>{const t=Jn.parse(e);return t.alpha=0,Jn.transform(t)}},es=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const ts="number",rs="color",ns=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ss(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(ns,e=>(Jn.test(e)?(n.color.push(a),s.push(rs),r.push(Jn.parse(e))):e.startsWith("var(")?(n.var.push(a),s.push("var"),r.push(e)):(n.number.push(a),s.push(ts),r.push(parseFloat(e))),++a,"${}")).split("${}");return{values:r,split:i,indexes:n,types:s}}function as(e){return ss(e).values}function is(e){const{split:t,types:r}=ss(e),n=t.length;return e=>{let s="";for(let a=0;a<n;a++)if(s+=t[a],void 0!==e[a]){const t=r[a];s+=t===ts?qn(e[a]):t===rs?Jn.transform(e[a]):e[a]}return s}}const os=e=>"number"==typeof e?0:Jn.test(e)?Jn.getAnimatableNone(e):e;const ls={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(In))?void 0:t.length)||0)+((null==(r=e.match(es))?void 0:r.length)||0)>0},parse:as,createTransformer:is,getAnimatableNone:function(e){const t=as(e);return is(e)(t.map(os))}};function cs(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function ds(e,t){return r=>r>0?t:e}const us=(e,t,r)=>e+(t-e)*r,ms=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},hs=[Vn,Un,Zn];function ps(e){const t=(r=e,hs.find(e=>e.test(r)));var r;if(!Boolean(t))return!1;let n=t.parse(e);return t===Zn&&(n=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let s=0,a=0,i=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,o=2*r-n;s=cs(o,n,e+1/3),a=cs(o,n,e),i=cs(o,n,e-1/3)}else s=a=i=r;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*i),alpha:n}}(n)),n}const fs=(e,t)=>{const r=ps(e),n=ps(t);if(!r||!n)return ds(e,t);const s={...r};return e=>(s.red=ms(r.red,n.red,e),s.green=ms(r.green,n.green,e),s.blue=ms(r.blue,n.blue,e),s.alpha=us(r.alpha,n.alpha,e),Un.transform(s))},xs=new Set(["none","hidden"]);function gs(e,t){return r=>us(e,t,r)}function vs(e){return"number"==typeof e?gs:"string"==typeof e?An(e)?ds:Jn.test(e)?fs:bs:Array.isArray(e)?ys:"object"==typeof e?Jn.test(e)?fs:js:ds}function ys(e,t){const r=[...e],n=r.length,s=e.map((e,r)=>vs(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=s[t](e);return r}}function js(e,t){const r={...e,...t},n={};for(const s in r)void 0!==e[s]&&void 0!==t[s]&&(n[s]=vs(e[s])(e[s],t[s]));return e=>{for(const t in n)r[t]=n[t](e);return r}}const bs=(e,t)=>{const r=ls.createTransformer(t),n=ss(e),s=ss(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?xs.has(e)&&!s.values.length||xs.has(t)&&!n.values.length?function(e,t){return xs.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):Gr(ys(function(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}(n,s),s.values),r):ds(e,t)};function ws(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return us(e,t,r);return vs(e)(e,t)}const Ns=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>wn.update(t,e),stop:()=>Nn(t),now:()=>_n.isProcessing?_n.timestamp:En.now()}},_s=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(1e4*e(a/(s-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Ss=2e4;function ks(e){let t=0;let r=e.next(t);for(;!r.done&&t<Ss;)t+=50,r=e.next(t);return t>=Ss?1/0:t}function Cs(e,t,r){const n=Math.max(t-5,0);return en(r-e(n),t-n)}const Es=100,Os=10,Ms=1,Ps=0,As=800,Ts=.3,Ds=.3,Rs={granular:.01,default:2},Ls={granular:.005,default:.5},qs=.01,Is=10,Fs=.05,zs=1,Bs=.001;function $s({duration:e=As,bounce:t=Ts,velocity:r=Ps,mass:n=Ms}){let s,a,i=1-t;i=Br(Fs,zs,i),e=Br(qs,Is,Jr(e)),i<1?(s=t=>{const n=t*i,s=n*e,a=n-r,o=Vs(t,i),l=Math.exp(-s);return Bs-a/o*l},a=t=>{const n=t*i*e,a=n*r+r,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-n),c=Vs(Math.pow(t,2),i);return(-s(t)+Bs>0?-1:1)*((a-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-r)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(r-t)));const o=function(e,t,r){let n=r;for(let s=1;s<Us;s++)n-=e(n)/t(n);return n}(s,a,5/e);if(e=Zr(e),isNaN(o))return{stiffness:Es,damping:Os,duration:e};{const t=Math.pow(o,2)*n;return{stiffness:t,damping:2*i*Math.sqrt(n*t),duration:e}}}const Us=12;function Vs(e,t){return e*Math.sqrt(1-t*t)}const Ws=["duration","bounce"],Hs=["stiffness","damping","mass"];function Ys(e,t){return t.some(t=>void 0!==e[t])}function Ks(e=Ds,t=Ts){const r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:h}=function(e){let t={velocity:Ps,stiffness:Es,damping:Os,mass:Ms,isResolvedFromDuration:!1,...e};if(!Ys(e,Hs)&&Ys(e,Ws))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(1.2*r),s=n*n,a=2*Br(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ms,stiffness:s,damping:a}}else{const r=$s(e);t={...t,...r,mass:Ms},t.isResolvedFromDuration=!0}return t}({...r,velocity:-Jr(r.velocity||0)}),p=m||0,f=c/(2*Math.sqrt(l*d)),x=i-a,g=Jr(Math.sqrt(l/d)),v=Math.abs(x)<5;let y;if(n||(n=v?Rs.granular:Rs.default),s||(s=v?Ls.granular:Ls.default),f<1){const e=Vs(g,f);y=t=>{const r=Math.exp(-f*g*t);return i-r*((p+f*g*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===f)y=e=>i-Math.exp(-g*e)*(x+(p+g*x)*e);else{const e=g*Math.sqrt(f*f-1);y=t=>{const r=Math.exp(-f*g*t),n=Math.min(e*t,300);return i-r*((p+f*g*x)*Math.sinh(n)+e*x*Math.cosh(n))/e}}const j={calculatedDuration:h&&u||null,next:e=>{const t=y(e);if(h)o.done=e>=u;else{let r=0===e?p:0;f<1&&(r=0===e?Zr(p):Cs(y,e,t));const a=Math.abs(r)<=n,l=Math.abs(i-t)<=s;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(ks(j),Ss),t=_s(t=>j.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return j}function Gs({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],m={done:!1,value:u},h=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=r*t;const f=u+p,x=void 0===i?f:i(f);x!==f&&(p=x-u);const g=e=>-p*Math.exp(-e/n),v=e=>x+g(e),y=e=>{const t=g(e),r=v(e);m.done=Math.abs(t)<=c,m.value=m.done?x:r};let j,b;const w=e=>{var t;(t=m.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(j=e,b=Ks({keyframes:[m.value,h(m.value)],velocity:Cs(v,e,m.value),damping:s,stiffness:a,restDelta:c,restSpeed:d}))};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return b||void 0!==j||(t=!0,y(e),w(e)),void 0!==j&&e>=j?b.next(e-j):(!t&&y(e),m)}}}function Xs(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,r){const n=[],s=r||$r.mix||ws,a=e.length-1;for(let i=0;i<a;i++){let r=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Yr:t;r=Gr(e,r)}n.push(r)}return n}(t,n,s),l=o.length,c=r=>{if(i&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);const s=Xr(e[n],e[n+1],r);return o[n](s)};return r?t=>c(Br(e[0],e[a-1],t)):c}function Qs(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Xr(0,t,n);e.push(us(r,1,s))}}(t,e.length-1),t}function Zs({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(n)?n.map(vn):vn(n),a={done:!1,value:t[0]},i=function(e,t){return e.map(e=>e*t)}(r&&r.length===t.length?r:Qs(t),e),o=Xs(i,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map(()=>c||fn).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}Ks.applyToOptions=e=>{const t=function(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(ks(n),Ss);return{type:"keyframes",ease:e=>n.next(s*e).value/t,duration:Jr(s)}}(e,100,Ks);return e.ease=t.ease,e.duration=Zr(t.duration),e.type="keyframes",e};const Js=e=>null!==e;function ea(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(Js),i=s<0||t&&"loop"!==r&&t%2==1?0:a.length-1;return i&&void 0!==n?n:a[i]}const ta={decay:Gs,inertia:Gs,tween:Zs,keyframes:Zs,spring:Ks};function ra(e){"string"==typeof e.type&&(e.type=ta[e.type])}class na{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const sa=e=>e/100;class aa extends na{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:r}=this.options;r&&r.updatedAt!==En.now()&&this.tick(En.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;ra(e);const{type:t=Zs,repeat:r=0,repeatDelay:n=0,repeatType:s,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Zs;o!==Zs&&"number"!=typeof i[0]&&(this.mixKeyframes=Gr(sa,ws(i[0],i[1])),i=[0,100]);const l=o({...e,keyframes:i});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...i].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=ks(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:n,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:m,type:h,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const x=this.currentTime-l*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?x<0:x>n;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let v=this.currentTime,y=r;if(d){const e=Math.min(this.currentTime,n)/i;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(r=1-r,m&&(r-=m/i)):"mirror"===u&&(y=a)),v=Br(0,1,r)*i}const j=g?{done:!1,value:c[0]}:y.next(v);s&&(j.value=s(j.value));let{done:b}=j;g||null===o||(b=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return w&&h!==Gs&&(j.value=ea(c,this.options,f,this.speed)),p&&p(j.value),w&&this.finish(),j}then(e,t){return this.finished.then(e,t)}get duration(){return Jr(this.calculatedDuration)}get time(){return Jr(this.currentTime)}set time(e){var t;e=Zr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(En.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Jr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:r=Ns,startTime:n}=this.options;this.driver||(this.driver=r(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(En.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const ia=e=>180*e/Math.PI,oa=e=>{const t=ia(Math.atan2(e[1],e[0]));return ca(t)},la={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:oa,rotateZ:oa,skewX:e=>ia(Math.atan(e[1])),skewY:e=>ia(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ca=e=>((e%=360)<0&&(e+=360),e),da=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ua=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ma={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:da,scaleY:ua,scale:e=>(da(e)+ua(e))/2,rotateX:e=>ca(ia(Math.atan2(e[6],e[5]))),rotateY:e=>ca(ia(Math.atan2(-e[2],e[0]))),rotateZ:oa,rotate:oa,skewX:e=>ia(Math.atan(e[4])),skewY:e=>ia(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ha(e){return e.includes("scale")?1:0}function pa(e,t){if(!e||"none"===e)return ha(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=ma,s=r;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=la,s=t}if(!s)return ha(t);const a=n[t],i=s[1].split(",").map(fa);return"function"==typeof a?a(i):i[a]}function fa(e){return parseFloat(e.trim())}const xa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ga=(()=>new Set(xa))(),va=e=>e===Dn||e===Kn,ya=new Set(["x","y","z"]),ja=xa.filter(e=>!ya.has(e));const ba={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>pa(t,"x"),y:(e,{transform:t})=>pa(t,"y")};ba.translateX=ba.x,ba.translateY=ba.y;const wa=new Set;let Na=!1,_a=!1,Sa=!1;function ka(){if(_a){const e=Array.from(wa).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=function(e){const t=[];return ja.forEach(r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(([t,r])=>{var n;null==(n=e.getValue(t))||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}_a=!1,Na=!1,wa.forEach(e=>e.complete(Sa)),wa.clear()}function Ca(){wa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(_a=!0)})}class Ea{constructor(e,t,r,n,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(wa.add(this),Na||(Na=!0,wn.read(Ca),wn.resolveKeyframes(ka))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;if(null===e[0]){const s=null==n?void 0:n.get(),a=e[e.length-1];if(void 0!==s)e[0]=s;else if(r&&t){const n=r.readValue(t,a);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=a),n&&void 0===s&&n.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wa.delete(this)}cancel(){"scheduled"===this.state&&(wa.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Oa=Hr(()=>void 0!==window.ScrollTimeline),Ma={};function Pa(e,t){const r=Hr(e);return()=>Ma[t]??r()}const Aa=Pa(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(mte){return!1}return!0},"linearEasing"),Ta=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Da={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ta([0,.65,.55,1]),circOut:Ta([.55,0,1,.45]),backIn:Ta([.31,.01,.66,-.59]),backOut:Ta([.33,1.53,.69,.99])};function Ra(e,t){return e?"function"==typeof e?Aa()?_s(e,t):"ease-out":xn(e)?Ta(e):Array.isArray(e)?e.map(e=>Ra(e,t)||Da.easeOut):Da[e]:void 0}function La(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:r};l&&(d.offset=l);const u=Ra(o,s);Array.isArray(u)&&(d.easing=u);const m={delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(m.pseudoElement=c);return e.animate(d,m)}function qa(e){return"function"==typeof e&&"applyToOptions"in e}class Ia extends na{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:n,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return qa(e)&&Aa()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=La(t,r,n,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=ea(n,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,r){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,r):e.style[t]=r}(t,r,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(mte){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const r=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return Jr(Number(r))}get time(){return Jr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Zr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&(null==(r=this.animation.effect)||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Oa()?(this.animation.timeline=e,Yr):t(this)}}const Fa={anticipate:cn,backInOut:ln,circInOut:mn};function za(e){"string"==typeof e.ease&&e.ease in Fa&&(e.ease=Fa[e.ease])}class Ba extends Ia{constructor(e){za(e),ra(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:n,element:s,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const i=new aa({...a,autoplay:!1}),o=Zr(this.finishedTime??this.time);t.setWithVelocity(i.sample(o-10).value,i.sample(o).value,10),i.stop()}}const $a=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!ls.test(e)&&"0"!==e||e.startsWith("url(")));function Ua(e){e.duration=0,e.type}const Va=new Set(["opacity","clipPath","filter","transform"]),Wa=Hr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Ha extends na{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:a="loop",keyframes:i,name:o,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=En.now();const m={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:s,repeatType:a,name:o,motionValue:l,element:c,...d},h=(null==c?void 0:c.KeyframeResolver)||Ea;this.keyframeResolver=new h(i,(e,t,r)=>this.onKeyframesResolved(e,t,m,!r),o,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,r,n){this.keyframeResolver=void 0;const{name:s,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=r;this.resolvedAt=En.now(),function(e,t,r,n){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=$a(s,t),o=$a(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||qa(r))&&n)}(e,s,a,i)||(!$r.instantAnimations&&o||null==c||c(ea(e,r,t)),e[0]=e[e.length-1],Ua(r),r.repeat=0);const d={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},u=!l&&function(e){var t;const{motionValue:r,name:n,repeatDelay:s,repeatType:a,damping:i,type:o}=e;if(!((null==(t=null==r?void 0:r.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return Wa()&&n&&Va.has(n)&&("transform"!==n||!c)&&!l&&!s&&"mirror"!==a&&0!==i&&"inertia"!==o}(d)?new Ba({...d,element:d.motionValue.owner.current}):new aa(d);u.finished.then(()=>this.notifyFinished()).catch(Yr),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),Sa=!0,Ca(),ka(),Sa=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const Ya=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ka(e,t,r=1){const[n,s]=function(e){const t=Ya.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const e=a.trim();return Ur(e)?parseFloat(e):e}return An(s)?Ka(s,t,r+1):s}function Ga(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const Xa=new Set(["width","height","top","left","right","bottom",...xa]),Qa=e=>t=>t.test(e),Za=[Dn,Kn,Yn,Hn,Xn,Gn,{test:e=>"auto"===e,parse:e=>e}],Ja=e=>Za.find(Qa(e));function ei(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Wr(e))}const ti=new Set(["brightness","contrast","saturate","opacity"]);function ri(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(In)||[];if(!n)return e;const s=r.replace(n,"");let a=ti.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const ni=/\b([a-z-]*)\(.*?\)/gu,si={...ls,getAnimatableNone:e=>{const t=e.match(ni);return t?t.map(ri).join(" "):e}},ai={...Dn,transform:Math.round},ii={borderWidth:Kn,borderTopWidth:Kn,borderRightWidth:Kn,borderBottomWidth:Kn,borderLeftWidth:Kn,borderRadius:Kn,radius:Kn,borderTopLeftRadius:Kn,borderTopRightRadius:Kn,borderBottomRightRadius:Kn,borderBottomLeftRadius:Kn,width:Kn,maxWidth:Kn,height:Kn,maxHeight:Kn,top:Kn,right:Kn,bottom:Kn,left:Kn,padding:Kn,paddingTop:Kn,paddingRight:Kn,paddingBottom:Kn,paddingLeft:Kn,margin:Kn,marginTop:Kn,marginRight:Kn,marginBottom:Kn,marginLeft:Kn,backgroundPositionX:Kn,backgroundPositionY:Kn,...{rotate:Hn,rotateX:Hn,rotateY:Hn,rotateZ:Hn,scale:Ln,scaleX:Ln,scaleY:Ln,scaleZ:Ln,skew:Hn,skewX:Hn,skewY:Hn,distance:Kn,translateX:Kn,translateY:Kn,translateZ:Kn,x:Kn,y:Kn,z:Kn,perspective:Kn,transformPerspective:Kn,opacity:Rn,originX:Qn,originY:Qn,originZ:Kn},zIndex:ai,fillOpacity:Rn,strokeOpacity:Rn,numOctaves:ai},oi={...ii,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:si,WebkitFilter:si},li=e=>oi[e];function ci(e,t){let r=li(e);return r!==si&&(r=ls),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const di=new Set(["auto","none","0"]);class ui extends Ea{constructor(e,t,r,n,s){super(e,t,r,n,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"==typeof r&&(r=r.trim(),An(r))){const n=Ka(r,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!Xa.has(r)||2!==e.length)return;const[n,s]=e,a=Ja(n),i=Ja(s);if(a!==i)if(va(a)&&va(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else ba[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let n=0;n<e.length;n++)(null===e[n]||ei(e[n]))&&r.push(n);r.length&&function(e,t,r){let n,s=0;for(;s<e.length&&!n;){const t=e[s];"string"==typeof t&&!di.has(t)&&ss(t).values.length&&(n=e[s]),s++}if(n&&r)for(const a of t)e[a]=ci(r,n)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ba[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=ba[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}const mi=(e,t)=>t&&"number"==typeof e?t.transform(e):e;class hi{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const r=En.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=En.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Qr);const r=this.events[e].add(t);return"change"===e?()=>{r(),wn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=En.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return en(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pi(e,t){return new hi(e,t)}const{schedule:fi,cancel:xi}=bn(queueMicrotask,!1),gi={x:!1,y:!1};function vi(){return gi.x||gi.y}function yi(e,t){const r=function(e){if(e instanceof EventTarget)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function ji(e){return!("touch"===e.pointerType||vi())}const bi=(e,t)=>!!t&&(e===t||bi(e,t.parentElement)),wi=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,Ni=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const _i=new WeakSet;function Si(e){return t=>{"Enter"===t.key&&e(t)}}function ki(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ci(e){return wi(e)&&!vi()}function Ei(e,t,r={}){const[n,s,a]=yi(e,r),i=e=>{const n=e.currentTarget;if(!Ci(e))return;_i.add(n);const a=t(n,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),_i.has(n)&&_i.delete(n),Ci(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{i(e,n===window||n===document||r.useGlobalTarget||bi(n,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return n.forEach(e=>{var t;(r.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),Vr(t=e)&&"offsetHeight"in t&&(e.addEventListener("focus",e=>((e,t)=>{const r=e.currentTarget;if(!r)return;const n=Si(()=>{if(_i.has(r))return;ki(r,"down");const e=Si(()=>{ki(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>ki(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)})(e,s)),function(e){return Ni.has(e.tagName)||-1!==e.tabIndex}(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function Oi(e){return Vr(e)&&"ownerSVGElement"in e}const Mi=e=>Boolean(e&&e.getVelocity),Pi=[...Za,Jn,ls],Ai=Ne.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});const Ti=Ne.createContext({strict:!1}),Di={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ri={};for(const pte in Di)Ri[pte]={isEnabled:e=>Di[pte].some(t=>!!e[t])};const Li=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qi(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Li.has(e)}let Ii=e=>!qi(e);try{"function"==typeof(Fi=require("@emotion/is-prop-valid").default)&&(Ii=e=>e.startsWith("on")?!qi(e):Fi(e))}catch{}var Fi;const zi=Ne.createContext({});function Bi(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function $i(e){return"string"==typeof e||Array.isArray(e)}const Ui=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vi=["initial",...Ui];function Wi(e){return Bi(e.animate)||Vi.some(t=>$i(e[t]))}function Hi(e){return Boolean(Wi(e)||e.variants)}function Yi(e){const{initial:t,animate:r}=function(e,t){if(Wi(e)){const{initial:t,animate:r}=e;return{initial:!1===t||$i(t)?t:void 0,animate:$i(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,Ne.useContext(zi));return Ne.useMemo(()=>({initial:t,animate:r}),[Ki(t),Ki(r)])}function Ki(e){return Array.isArray(e)?e.join(" "):e}const Gi={};function Xi(e,{layout:t,layoutId:r}){return ga.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!Gi[e]||"opacity"===e)}const Qi={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zi=xa.length;function Ji(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(ga.has(l))i=!0;else if(Mn(l))s[l]=e;else{const t=mi(e,ii[l]);l.startsWith("origin")?(o=!0,a[l]=t):n[l]=t}}if(t.transform||(i||r?n.transform=function(e,t,r){let n="",s=!0;for(let a=0;a<Zi;a++){const i=xa[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=mi(o,ii[i]);l||(s=!1,n+=`${Qi[i]||i}(${e}) `),r&&(t[i]=e)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=a;n.transformOrigin=`${e} ${t} ${r}`}}const eo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function to(e,t,r){for(const n in t)Mi(t[n])||Xi(n,r)||(e[n]=t[n])}function ro(e,t){const r={};return to(r,e.style||{},e),Object.assign(r,function({transformTemplate:e},t){return Ne.useMemo(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{}};return Ji(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),r}function no(e,t){const r={},n=ro(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const so={offset:"stroke-dashoffset",array:"stroke-dasharray"},ao={offset:"strokeDashoffset",array:"strokeDasharray"};function io(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,c,d){if(Ji(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:m}=e;u.transform&&(m.transform=u.transform,delete u.transform),(m.transform||u.transformOrigin)&&(m.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),m.transform&&(m.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==r&&(u.y=r),void 0!==n&&(u.scale=n),void 0!==s&&function(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?so:ao;e[a.offset]=Kn.transform(-n);const i=Kn.transform(t),o=Kn.transform(r);e[a.array]=`${i} ${o}`}(u,s,a,i,!1)}const oo=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),lo=e=>"string"==typeof e&&"svg"===e.toLowerCase();function co(e,t,r,n){const s=Ne.useMemo(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return io(r,t,lo(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const t={};to(t,e.style,e),s.style={...t,...s.style}}return s}const uo=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mo(e){return"string"==typeof e&&!e.includes("-")&&!!(uo.indexOf(e)>-1||/[A-Z]/u.test(e))}function ho(e,t,r,{latestValues:n},s,a=!1){const i=(mo(e)?co:no)(t,n,s,e),o=function(e,t,r){const n={};for(const s in e)"values"===s&&"object"==typeof e.values||(Ii(s)||!0===r&&qi(s)||!t&&!qi(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}(t,"string"==typeof e,a),l=e!==Ne.Fragment?{...o,...i,ref:r}:{},{children:c}=t,d=Ne.useMemo(()=>Mi(c)?c.get():c,[c]);return Ne.createElement(e,{...l,children:d})}function po(e){const t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function fo(e,t,r,n){if("function"==typeof t){const[s,a]=po(n);t=t(void 0!==r?r:e.custom,s,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,a]=po(n);t=t(void 0!==r?r:e.custom,s,a)}return t}function xo(e){return Mi(e)?e.get():e}function go(e,t,r,n){const s={},a=n(e,{});for(const m in a)s[m]=xo(a[m]);let{initial:i,animate:o}=e;const l=Wi(e),c=Hi(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!=typeof u&&!Bi(u)){const t=Array.isArray(u)?u:[u];for(let r=0;r<t.length;r++){const n=fo(e,t[r]);if(n){const{transitionEnd:e,transition:t,...r}=n;for(const n in r){let e=r[n];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[n]=e)}for(const n in e)s[n]=e[n]}}}return s}const vo=e=>(t,r)=>{const n=Ne.useContext(zi),s=Ne.useContext(Ir),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:go(r,n,s,e),renderState:t()}}(e,t,n,s);return r?a():function(e){const t=Ne.useRef(null);return null===t.current&&(t.current=e()),t.current}(a)};function yo(e,t,r){var n;const{style:s}=e,a={};for(const i in s)(Mi(s[i])||t.style&&Mi(t.style[i])||Xi(i,e)||void 0!==(null==(n=null==r?void 0:r.getValue(i))?void 0:n.liveStyle))&&(a[i]=s[i]);return a}const jo=vo({scrapeMotionValuesFromProps:yo,createRenderState:eo});function bo(e,t,r){const n=yo(e,t,r);for(const s in e)if(Mi(e[s])||Mi(t[s])){n[-1!==xa.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return n}const wo=vo({scrapeMotionValuesFromProps:bo,createRenderState:oo}),No=Symbol.for("motionComponentSymbol");function _o(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function So(e,t,r){return Ne.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):_o(r)&&(r.current=n))},[t])}const ko=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Co="data-"+ko("framerAppearId"),Eo=Ne.createContext({});function Oo(e,t,r,n,s){var a,i;const{visualElement:o}=Ne.useContext(zi),l=Ne.useContext(Ti),c=Ne.useContext(Ir),d=Ne.useContext(Ai).reducedMotion,u=Ne.useRef(null);n=n||l.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:d}));const m=u.current,h=Ne.useContext(Eo);!m||m.projection||!s||"html"!==m.type&&"svg"!==m.type||function(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Mo(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(i)||o&&_o(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:c})}(u.current,r,s,h);const p=Ne.useRef(!1);Ne.useInsertionEffect(()=>{m&&p.current&&m.update(r,c)});const f=r[Co],x=Ne.useRef(Boolean(f)&&!(null==(a=window.MotionHandoffIsComplete)?void 0:a.call(window,f))&&(null==(i=window.MotionHasOptimisedAnimation)?void 0:i.call(window,f)));return qr(()=>{m&&(p.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),Ne.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,f)}),x.current=!1),m.enteringChildren=void 0)}),m}function Mo(e){if(e)return!1!==e.options.allowProjection?e.projection:Mo(e.parent)}function Po(e,{forwardMotionProps:t=!1}={},r,s){r&&function(e){for(const t in e)Ri[t]={...Ri[t],...e[t]}}(r);const a=mo(e)?wo:jo;function i(r,i){let o;const l={...Ne.useContext(Ai),...r,layoutId:Ao(r)},{isStatic:c}=l,d=Yi(r),u=a(r,c);if(!c&&Lr){Ne.useContext(Ti).strict;const t=function(e){const{drag:t,layout:r}=Ri;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);o=t.MeasureLayout,d.visualElement=Oo(e,u,l,s,t.ProjectionNode)}return n.jsxs(zi.Provider,{value:d,children:[o&&d.visualElement?n.jsx(o,{visualElement:d.visualElement,...l}):null,ho(e,r,So(u,d.visualElement,i),u,c,t)]})}i.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const o=Ne.forwardRef(i);return o[No]=e,o}function Ao({layoutId:e}){const t=Ne.useContext(Rr).id;return t&&void 0!==e?t+"-"+e:e}function To(e,t){if("undefined"==typeof Proxy)return Po;const r=new Map,n=(r,n)=>Po(r,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(s,a)=>"create"===a?n:(r.has(a)||r.set(a,Po(a,void 0,e,t)),r.get(a))})}function Do({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Ro(e){return void 0===e||1===e}function Lo({scale:e,scaleX:t,scaleY:r}){return!Ro(e)||!Ro(t)||!Ro(r)}function qo(e){return Lo(e)||Io(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Io(e){return Fo(e.x)||Fo(e.y)}function Fo(e){return e&&"0%"!==e}function zo(e,t,r){return r+t*(e-r)}function Bo(e,t,r,n,s){return void 0!==s&&(e=zo(e,s,n)),zo(e,r,n)+t}function $o(e,t=0,r=1,n,s){e.min=Bo(e.min,t,r,n,s),e.max=Bo(e.max,t,r,n,s)}function Uo(e,{x:t,y:r}){$o(e.x,t.translate,t.scale,t.originPoint),$o(e.y,r.translate,r.scale,r.originPoint)}const Vo=.999999999999,Wo=1.0000000000001;function Ho(e,t){e.min=e.min+t,e.max=e.max+t}function Yo(e,t,r,n,s=.5){$o(e,t,r,us(e.min,e.max,s),n)}function Ko(e,t){Yo(e.x,t.x,t.scaleX,t.scale,t.originX),Yo(e.y,t.y,t.scaleY,t.scale,t.originY)}function Go(e,t){return Do(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const Xo=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Qo={current:null},Zo={current:!1};const Jo=new WeakMap;const el=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tl{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:s,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ea,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=En.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,wn.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=i,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Wi(t),this.isVariantNode=Hi(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==o[u]&&Mi(e)&&e.set(o[u])}}mount(e){var t;this.current=e,Jo.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Zo.current||function(){if(Zo.current=!0,Lr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qo.current=e.matches;e.addEventListener("change",t),t()}else Qo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Qo.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Nn(this.notifyUpdate),Nn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ga.has(e);r&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&wn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Ri){const t=Ri[e];if(!t)continue;const{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<el.length;r++){const t=el[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,r){for(const n in t){const s=t[n],a=r[n];if(Mi(s))e.addValue(n,s);else if(Mi(a))e.addValue(n,pi(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(n);e.addValue(n,pi(void 0!==t?t:s,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=pi(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var n;return null!=r&&("string"==typeof r&&(Ur(r)||Wr(r))?r=parseFloat(r):(n=r,!Pi.find(Qa(n))&&ls.test(t)&&(r=ci(e,t))),this.setBaseTarget(e,Mi(r)?r.get():r)),Mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let n;if("string"==typeof r||"object"==typeof r){const s=fo(this.props,r,null==(t=this.presenceContext)?void 0:t.custom);s&&(n=s[e])}if(r&&void 0!==n)return n;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||Mi(s)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Qr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){fi.render(this.render)}}class rl extends tl{constructor(){super(...arguments),this.KeyframeResolver=ui}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function nl(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];for(i in null==s||s.applyProjectionStyles(a,n),r)a.setProperty(i,r[i])}class sl extends rl{constructor(){super(...arguments),this.type="html",this.renderInstance=nl}readValueFromInstance(e,t){var r,n;if(ga.has(t))return(null==(r=this.projection)?void 0:r.isProjecting)?ha(t):((e,t)=>{const{transform:r="none"}=getComputedStyle(e);return pa(r,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),s=(Mn(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof s?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Go(e,t)}build(e,t,r){Ji(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return yo(e,t,r)}}const al=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class il extends rl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xo}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ga.has(t)){const e=li(t);return e&&e.default||0}return t=al.has(t)?t:ko(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return bo(e,t,r)}build(e,t,r){io(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,n){!function(e,t,r,n){nl(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(al.has(s)?s:ko(s),t.attrs[s])}(e,t,0,n)}mount(e){this.isSVGTag=lo(e.tagName),super.mount(e)}}const ol=(e,t)=>mo(e)?new il(t):new sl(t,{allowProjection:e!==Ne.Fragment});function ll(e,t,r){const n=e.getProps();return fo(n,t,void 0!==r?r:n.custom,e)}const cl=e=>Array.isArray(e);function dl(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,pi(r))}function ul(e){return cl(e)?e[e.length-1]||0:e}function ml(e,t){const r=e.getValue("willChange");if(n=r,Boolean(Mi(n)&&n.add))return r.add(t);if(!r&&$r.WillChange){const r=new $r.WillChange("auto");e.addValue("willChange",r),r.add(t)}var n}function hl(e){return e.props[Co]}const pl=e=>null!==e;const fl={type:"spring",stiffness:500,damping:25,restSpeed:10},xl={type:"keyframes",duration:.8},gl={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vl=(e,{keyframes:t})=>t.length>2?xl:ga.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:fl:gl;const yl=(e,t,r,n={},s,a)=>i=>{const o=Ga(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=Zr(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};(function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,vl(e,d)),d.duration&&(d.duration=Zr(d.duration)),d.repeatDelay&&(d.repeatDelay=Zr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Ua(d),0===d.delay&&(u=!0)),($r.instantAnimations||$r.skipAnimations)&&(u=!0,Ua(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(pl),a=t&&"loop"!==r&&t%2==1?0:s.length-1;return a&&void 0!==n?n:s[a]}(d.keyframes,o);if(void 0!==e)return void wn.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new aa(d):new Ha(d)};function jl({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function bl(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),n=o[d];if(void 0===n||c&&jl(c,d))continue;const s={delay:r,...Ga(a||{},d)},i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(n)&&n===i&&!s.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=hl(e);if(t){const e=window.MotionHandoffAnimation(t,d,wn);null!==e&&(s.startTime=e,u=!0)}}ml(e,d),t.start(yl(d,t,n,e.shouldReduceMotion&&Xa.has(d)?{type:!1}:s,e,u));const m=t.animation;m&&l.push(m)}return i&&Promise.all(l).then(()=>{wn.update(()=>{i&&function(e,t){const r=ll(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a)dl(e,i,ul(a[i]))}(e,i)})}),l}function wl(e,t,r,n=0,s=1){const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*n;return"function"==typeof r?r(a,i):1===s?a*n:o-a*n}function Nl(e,t,r={}){var n;const s=ll(e,t,"exit"===r.type?null==(n=e.presenceContext)?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(a=r.transitionOverride);const i=s?()=>Promise.all(bl(e,s,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:s=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Nl(l,t,{...i,delay:r+("function"==typeof n?0:n)+wl(e.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,s,i,o,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(r.delay)])}function _l(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Sl=Vi.length;function kl(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&kl(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<Sl;r++){const n=Vi[r],s=e.props[n];($i(s)||!1===s)&&(t[n]=s)}return t}const Cl=[...Ui].reverse(),El=Ui.length;function Ol(e){return t=>Promise.all(t.map(({animation:t,options:r})=>function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>Nl(e,t,r));n=Promise.all(s)}else if("string"==typeof t)n=Nl(e,t,r);else{const s="function"==typeof t?ll(e,t,r.custom):t;n=Promise.all(bl(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,t,r)))}function Ml(e){let t=Ol(e),r=Tl(),n=!0;const s=t=>(r,n)=>{var s;const a=ll(e,n,"exit"===t?null==(s=e.presenceContext)?void 0:s.custom:void 0);if(a){const{transition:e,transitionEnd:t,...n}=a;r={...r,...n,...t}}return r};function a(a){const{props:i}=e,o=kl(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<El;t++){const m=Cl[t],h=r[m],p=void 0!==i[m]?i[m]:o[m],f=$i(p),x=m===a?h.isActive:null;!1===x&&(u=t);let g=p===o[m]&&p!==i[m]&&f;if(g&&n&&e.manuallyAnimateOnMount&&(g=!1),h.protectedKeys={...d},!h.isActive&&null===x||!p&&!h.prevProp||Bi(p)||"boolean"==typeof p)continue;const v=Pl(h.prevProp,p);let y=v||m===a&&h.isActive&&!g&&f||t>u&&f,j=!1;const b=Array.isArray(p)?p:[p];let w=b.reduce(s(m),{});!1===x&&(w={});const{prevResolvedValues:N={}}=h,_={...N,...w},S=t=>{y=!0,c.has(t)&&(j=!0,c.delete(t)),h.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in _){const t=w[e],r=N[e];if(d.hasOwnProperty(e))continue;let n=!1;n=cl(t)&&cl(r)?!_l(t,r):t!==r,n?null!=t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):h.protectedKeys[e]=!0}h.prevProp=p,h.prevResolvedValues=w,h.isActive&&(d={...d,...w}),n&&e.blockInitialAnimation&&(y=!1);const k=g&&v;y&&(!k||j)&&l.push(...b.map(t=>{const r={type:m};if("string"==typeof t&&n&&!k&&e.manuallyAnimateOnMount&&e.parent){const{parent:n}=e,s=ll(n,t);if(n.enteringChildren&&s){const{delayChildren:t}=s.transition||{};r.delay=wl(n.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(c.size){const t={};if("boolean"!=typeof i.initial){const r=ll(e,Array.isArray(i.initial)?i.initial[0]:i.initial);r&&r.transition&&(t.transition=r.transition)}c.forEach(r=>{const n=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=n??null}),l.push({animation:t})}let m=Boolean(l.length);return!n||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(m=!1),n=!1,m?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,n){var s;if(r[t].isActive===n)return Promise.resolve();null==(s=e.variantChildren)||s.forEach(e=>{var r;return null==(r=e.animationState)?void 0:r.setActive(t,n)}),r[t].isActive=n;const i=a(t);for(const e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=Tl(),n=!0}}}function Pl(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!_l(t,e)}function Al(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tl(){return{animate:Al(!0),whileInView:Al(),whileHover:Al(),whileTap:Al(),whileDrag:Al(),whileFocus:Al(),exit:Al()}}class Dl{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Rl=0;const Ll={animation:{Feature:class extends Dl{constructor(e){super(e),e.animationState||(e.animationState=Ml(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bi(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends Dl{constructor(){super(...arguments),this.id=Rl++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function ql(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Il(e){return{point:{x:e.pageX,y:e.pageY}}}function Fl(e,t,r,n){return ql(e,t,(e=>t=>wi(t)&&e(t,Il(t)))(r),n)}function zl(e){return e.max-e.min}function Bl(e,t,r,n=.5){e.origin=n,e.originPoint=us(t.min,t.max,e.origin),e.scale=zl(r)/zl(t),e.translate=us(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function $l(e,t,r,n){Bl(e.x,t.x,r.x,n?n.originX:void 0),Bl(e.y,t.y,r.y,n?n.originY:void 0)}function Ul(e,t,r){e.min=r.min+t.min,e.max=e.min+zl(t)}function Vl(e,t,r){e.min=t.min-r.min,e.max=e.min+zl(t)}function Wl(e,t,r){Vl(e.x,t.x,r.x),Vl(e.y,t.y,r.y)}function Hl(e){return[e("x"),e("y")]}const Yl=({current:e})=>e?e.ownerDocument.defaultView:null,Kl=(e,t)=>Math.abs(e-t);class Gl{constructor(e,t,{transformPagePoint:r,contextWindow:n=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Zl(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=Kl(e.x,t.x),n=Kl(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!r)return;const{point:n}=e,{timestamp:s}=_n;this.history.push({...n,timestamp:s});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Xl(t,this.transformPagePoint),wn.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Zl("pointercancel"===e.type?this.lastMoveEventInfo:Xl(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,a),n&&n(e,a)},!wi(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=n||window;const i=Xl(Il(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=_n;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,Zl(i,this.history)),this.removeListeners=Gr(Fl(this.contextWindow,"pointermove",this.handlePointerMove),Fl(this.contextWindow,"pointerup",this.handlePointerUp),Fl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nn(this.updatePoint)}}function Xl(e,t){return t?{point:t(e.point)}:e}function Ql(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zl({point:e},t){return{point:e,delta:Ql(e,ec(t)),offset:Ql(e,Jl(t)),velocity:tc(t,.1)}}function Jl(e){return e[0]}function ec(e){return e[e.length-1]}function tc(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=ec(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Zr(t)));)r--;if(!n)return{x:0,y:0};const a=Jr(s.timestamp-n.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function rc(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function nc(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}const sc=.35;function ac(e,t,r){return{min:ic(e,t),max:ic(e,r)}}function ic(e,t){return"number"==typeof e?e:e[t]||0}const oc=new WeakMap;class lc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new Gl(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Il(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:s}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=r)||"y"===a?gi[a]?null:(gi[a]=!0,()=>{gi[a]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hl(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Yn.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=zl(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&wn.postRender(()=>s(e,t)),ml(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:s,onDrag:a}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:i}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Hl(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:r,contextWindow:Yl(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,n=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!n||!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&wn.postRender(()=>i(r,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!cc(e,n,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?us(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?us(r,e,n.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,s=this.constraints;t&&_o(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,{top:t,left:r,bottom:n,right:s}){return{x:rc(e.x,r,s),y:rc(e.y,t,n)}}(n.layoutBox,t),this.elastic=function(e=sc){return!1===e?e=0:!0===e&&(e=sc),{x:ac(e,"left","right"),y:ac(e,"top","bottom")}}(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Hl(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!_o(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const s=function(e,t,r){const n=Go(e,r),{scroll:s}=t;return s&&(Ho(n.x,s.offset.x),Ho(n.y,s.offset.y)),n}(r,n.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:nc(e.x,t.x),y:nc(e.y,t.y)}}(n.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Do(e))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Hl(i=>{if(!cc(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=n?200:1e6,d=n?40:1e7,u={type:"inertia",velocity:r?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ml(this.visualElement,e),r.start(yl(e,r,0,t,this.visualElement,!1))}stopAnimation(){Hl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hl(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hl(t=>{const{drag:r}=this.getProps();if(!cc(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,s=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:a}=n.layout.layoutBox[t];s.set(e[t]-us(r,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!_o(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Hl(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();n[e]=function(e,t){let r=.5;const n=zl(e),s=zl(t);return s>n?r=Xr(t.min,t.max-n,e.min):n>s&&(r=Xr(e.min,e.max-s,t.min)),Br(0,1,r)}({min:r,max:r},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hl(t=>{if(!cc(t,e,null))return;const r=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];r.set(us(s,a,n[t]))})}addListeners(){if(!this.visualElement.current)return;oc.set(this.visualElement,this);const e=Fl(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();_o(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),wn.read(t);const s=ql(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Hl(t=>{const r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),n(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:s=!1,dragElastic:a=sc,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:s,dragElastic:a,dragMomentum:i}}}function cc(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}const dc=e=>(t,r)=>{e&&wn.postRender(()=>e(t,r))};const uc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const hc={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Kn.test(e))return e;e=parseFloat(e)}return`${mc(e,t.target.x)}% ${mc(e,t.target.y)}%`}},pc={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=ls.parse(e);if(s.length>5)return n;const a=ls.createTransformer(e),i="number"!=typeof s[0]?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const c=us(o,l,.5);return"number"==typeof s[2+i]&&(s[2+i]/=c),"number"==typeof s[3+i]&&(s[3+i]/=c),a(s)}};let fc=!1;class xc extends Ne.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:s}=e;!function(e){for(const t in e)Gi[t]=e[t],Mn(t)&&(Gi[t].isCSSVariable=!0)}(vc),s&&(t.group&&t.group.add(s),r&&r.register&&n&&r.register(s),fc&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),uc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:s}=this.props,{projection:a}=r;return a?(a.isPresent=s,fc=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||wn.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fi.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;fc=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gc(e){const[t,r]=function(e=!0){const t=Ne.useContext(Ir);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=Ne.useId();Ne.useEffect(()=>{if(e)return s(a)},[e]);const i=Ne.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}(),s=Ne.useContext(Rr);return n.jsx(xc,{...e,layoutGroup:s,switchLayoutGroup:Ne.useContext(Eo),isPresent:t,safeToRemove:r})}const vc={borderRadius:{...hc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hc,borderTopRightRadius:hc,borderBottomLeftRadius:hc,borderBottomRightRadius:hc,boxShadow:pc};const yc=(e,t)=>e.depth-t.depth;class jc{constructor(){this.children=[],this.isDirty=!1}add(e){Fr(this.children,e),this.isDirty=!0}remove(e){zr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yc),this.isDirty=!1,this.children.forEach(e)}}const bc=["TopLeft","TopRight","BottomLeft","BottomRight"],wc=bc.length,Nc=e=>"string"==typeof e?parseFloat(e):e,_c=e=>"number"==typeof e||Kn.test(e);function Sc(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const kc=Ec(0,.5,un),Cc=Ec(.5,.95,Yr);function Ec(e,t,r){return n=>n<e?0:n>t?1:r(Xr(e,t,n))}function Oc(e,t){e.min=t.min,e.max=t.max}function Mc(e,t){Oc(e.x,t.x),Oc(e.y,t.y)}function Pc(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ac(e,t,r,n,s){return e=zo(e-=t,1/r,n),void 0!==s&&(e=zo(e,1/s,n)),e}function Tc(e,t,[r,n,s],a,i){!function(e,t=0,r=1,n=.5,s,a=e,i=e){Yn.test(t)&&(t=parseFloat(t),t=us(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=us(a.min,a.max,n);e===a&&(o-=t),e.min=Ac(e.min,t,r,o,s),e.max=Ac(e.max,t,r,o,s)}(e,t[r],t[n],t[s],t.scale,a,i)}const Dc=["x","scaleX","originX"],Rc=["y","scaleY","originY"];function Lc(e,t,r,n){Tc(e.x,t,Dc,r?r.x:void 0,n?n.x:void 0),Tc(e.y,t,Rc,r?r.y:void 0,n?n.y:void 0)}function qc(e){return 0===e.translate&&1===e.scale}function Ic(e){return qc(e.x)&&qc(e.y)}function Fc(e,t){return e.min===t.min&&e.max===t.max}function zc(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bc(e,t){return zc(e.x,t.x)&&zc(e.y,t.y)}function $c(e){return zl(e.x)/zl(e.y)}function Uc(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Vc{constructor(){this.members=[]}add(e){Fr(this.members,e),e.scheduleRender()}remove(e){if(zr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Wc=["","X","Y","Z"];let Hc=0;function Yc(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Kc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=hl(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",wn,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Kc(n)}function Gc({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(e={},r=(null==t?void 0:t())){this.id=Hc++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Zc),this.nodes.forEach(ad),this.nodes.forEach(id),this.nodes.forEach(Jc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new jc)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Qr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var r;this.isSVG=Oi(t)&&!(Oi(r=t)&&"svg"===r.tagName),this.instance=t;const{layoutId:n,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||n)&&(this.isLayoutDirty=!0),e){let r,n=0;const s=()=>this.root.updateBlockedByResize=!1;wn.read(()=>{n=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==n&&(n=e,this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){const r=En.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Nn(n),e(a-t))};return wn.setup(n,!0),()=>Nn(n)}(s,250),uc.hasAnimatedSinceResize&&(uc.hasAnimatedSinceResize=!1,this.nodes.forEach(sd)))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&a&&(n||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||md,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!Bc(this.targetLayout,n),c=!t&&r;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Ga(s,"layout"),onPlay:i,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||sd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(od),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Kc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(td);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(rd);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nd),this.nodes.forEach(Xc),this.nodes.forEach(Qc)):this.nodes.forEach(rd),this.clearAllSnapshots();const e=En.now();_n.delta=Br(0,1e3/60,e-_n.timestamp),_n.timestamp=e,_n.isProcessing=!0,Sn.update.process(_n),Sn.preRender.process(_n),Sn.render.process(_n),_n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ed),this.sharedNodes.forEach(ld)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||zl(this.snapshot.measuredBox.x)||zl(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Ic(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,a=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||qo(this.latestValues)||a)&&(s(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);var n;return e&&(r=this.removeTransform(r)),fd((n=r).x),fd(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const r=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(gd))){const{scroll:e}=this.root;e&&(Ho(r.x,e.offset.x),Ho(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r={x:{min:0,max:0},y:{min:0,max:0}};if(Mc(r,e),null==(t=this.scroll)?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:s,options:a}=t;t!==this.root&&s&&a.layoutScroll&&(s.wasRoot&&Mc(r,e),Ho(r.x,s.offset.x),Ho(r.y,s.offset.y))}return r}applyTransform(e,t=!1){const r={x:{min:0,max:0},y:{min:0,max:0}};Mc(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ko(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),qo(e.latestValues)&&Ko(r,e.latestValues)}return qo(this.latestValues)&&Ko(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Mc(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!qo(e.latestValues))continue;Lo(e.latestValues)&&e.updateSnapshot();const n=Xo();Mc(n,e.measurePageBox()),Lc(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return qo(this.latestValues)&&Lc(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:a}=this.options;if(this.layout&&(s||a)){if(this.resolvedRelativeTargetAt=_n.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Wl(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Mc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var i,o,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Ul(i.x,o.x,l.x),Ul(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Mc(this.target,this.layout.layoutBox),Uo(this.target,this.targetDelta)):Mc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Wl(this.relativeTargetOrigin,this.target,e.target),Mc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Lo(this.parent.latestValues)&&!Io(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===_n.timestamp&&(n=!1),n)return;const{layout:s,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!a)return;Mc(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,r,n=!1){const s=r.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:s}=a.options;s&&s.props.style&&"contents"===s.props.style.display||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ko(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Uo(e,i)),n&&qo(a.latestValues)&&Ko(e,a.latestValues))}t.x<Wo&&t.x>Vo&&(t.x=1),t.y<Wo&&t.y>Vo&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Pc(this.prevProjectionDelta.x,this.projectionDelta.x),Pc(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),$l(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Uc(this.projectionDelta.x,this.prevProjectionDelta.x)&&Uc(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const r=this.snapshot,n=r?r.latestValues:{},s={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(ud));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,m,h,p,f,x;cd(a.x,e.x,r),cd(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wl(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,p=this.relativeTargetOrigin,f=i,x=r,dd(h.x,p.x,f.x,x),dd(h.y,p.y,f.y,x),u&&(l=this.relativeTarget,m=u,Fc(l.x,m.x)&&Fc(l.y,m.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Mc(u,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,r,n,s,a){s?(e.opacity=us(0,r.opacity??1,kc(n)),e.opacityExit=us(t.opacity??1,0,Cc(n))):a&&(e.opacity=us(t.opacity??1,r.opacity??1,n));for(let i=0;i<wc;i++){const s=`border${bc[i]}Radius`;let a=Sc(t,s),o=Sc(r,s);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||_c(a)===_c(o)?(e[s]=Math.max(us(Nc(a),Nc(o),n),0),(Yn.test(o)||Yn.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||r.rotate)&&(e.rotate=us(t.rotate||0,r.rotate||0,n))}(s,n,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,r,n;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(n=null==(r=this.resumingFrom)?void 0:r.currentAnimation)||n.stop(),this.pendingAnimation&&(Nn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wn.update(()=>{uc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pi(0)),this.currentAnimation=function(e,t,r){const n=Mi(e)?e:pi(e);return n.start(yl("",n,t,r)),n.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:s}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&xd(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=zl(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=zl(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}Mc(t,r),Ko(t,s),$l(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Vc);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&Yc("z",e,n,this.animationValues);for(let s=0;s<Wc.length;s++)Yc(`rotate${Wc[s]}`,e,n,this.animationValues),Yc(`skew${Wc[s]}`,e,n,this.animationValues);e.render();for(const s in n)e.setStaticValue(s,n[s]),this.animationValues&&(this.animationValues[s]=n[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=xo(null==t?void 0:t.pointerEvents)||"",void(e.transform=r?r(this.latestValues,""):"none");const n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=xo(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!qo(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1));e.visibility="";const s=n.animationValues||n.latestValues;this.applyTransformsToTarget();let a=function(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=(null==r?void 0:r.z)||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:a,skewX:i,skewY:o}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),s&&(n+=`rotateX(${s}deg) `),a&&(n+=`rotateY(${a}deg) `),i&&(n+=`skewX(${i}deg) `),o&&(n+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);r&&(a=r(s,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;e.transformOrigin=`${100*i.origin}% ${100*o.origin}% 0`,n.animationValues?e.opacity=n===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=n===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in Gi){if(void 0===s[l])continue;const{correct:t,applyTo:r,isCSSVariable:i}=Gi[l],o="none"===a?s[l]:t(s[l],n);if(r){const t=r.length;for(let n=0;n<t;n++)e[r[n]]=o}else i?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=n===this?xo(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(td),this.root.sharedNodes.clear()}}}function Xc(e){e.updateLayout()}function Qc(e){var t;const r=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:s}=e.options,a=r.source!==e.layout.source;"size"===s?Hl(e=>{const n=a?r.measuredBox[e]:r.layoutBox[e],s=zl(n);n.min=t[e].min,n.max=n.min+s}):xd(s,r.layoutBox,t)&&Hl(n=>{const s=a?r.measuredBox[n]:r.layoutBox[n],i=zl(t[n]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};$l(i,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?$l(o,e.applyTransform(n,!0),r.measuredBox):$l(o,t,r.layoutBox);const l=!Ic(i);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:s,layout:a}=n;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};Wl(i,r.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Wl(o,t,a.layoutBox),Bc(i,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Zc(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Jc(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ed(e){e.clearSnapshot()}function td(e){e.clearMeasurements()}function rd(e){e.isLayoutDirty=!1}function nd(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ad(e){e.resolveTargetDelta()}function id(e){e.calcProjection()}function od(e){e.resetSkewAndRotation()}function ld(e){e.removeLeadSnapshot()}function cd(e,t,r){e.translate=us(t.translate,0,r),e.scale=us(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function dd(e,t,r,n){e.min=us(t.min,r.min,n),e.max=us(t.max,r.max,n)}function ud(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const md={duration:.45,ease:[.4,0,.1,1]},hd=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),pd=hd("applewebkit/")&&!hd("chrome/")?Math.round:Yr;function fd(e){e.min=pd(e.min),e.max=pd(e.max)}function xd(e,t,r){return"position"===e||"preserve-aspect"===e&&(n=$c(t),s=$c(r),a=.2,!(Math.abs(n-s)<=a));var n,s,a}function gd(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const vd=Gc({attachResizeListener:(e,t)=>ql(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yd={current:void 0},jd=Gc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yd.current){const e=new vd({});e.mount(window),e.setOptions({layoutScroll:!0}),yd.current=e}return yd.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),bd={pan:{Feature:class extends Dl{constructor(){super(...arguments),this.removePointerDownListener=Yr}onPointerDown(e){this.session=new Gl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:dc(e),onStart:dc(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&wn.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=Fl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Dl{constructor(e){super(e),this.removeGroupControls=Yr,this.removeListeners=Yr,this.controls=new lc(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yr}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:jd,MeasureLayout:gc}};function wd(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);const s=n["onHover"+r];s&&wn.postRender(()=>s(t,Il(t)))}function Nd(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);const s=n["onTap"+("End"===r?"":r)];s&&wn.postRender(()=>s(t,Il(t)))}const _d=new WeakMap,Sd=new WeakMap,kd=e=>{const t=_d.get(e.target);t&&t(e)},Cd=e=>{e.forEach(kd)};function Ed(e,t,r){const n=function({root:e,...t}){const r=e||document;Sd.has(r)||Sd.set(r,{});const n=Sd.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Cd,{root:e,...t})),n[s]}(t);return _d.set(e,r),n.observe(e),()=>{_d.delete(e),n.unobserve(e)}}const Od={some:0,all:1};const Md={inView:{Feature:class extends Dl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:Od[n]};return Ed(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),a=t?r:n;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=Ei(e,(e,t)=>(Nd(this.node,t,"Start"),(e,{success:t})=>Nd(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Dl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(mte){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gr(ql(this.node.current,"focus",()=>this.onFocus()),ql(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){const[n,s,a]=yi(e,r),i=e=>{if(!ji(e))return;const{target:r}=e,n=t(r,e);if("function"!=typeof n||!r)return;const a=e=>{ji(e)&&(n(e),r.removeEventListener("pointerleave",a))};r.addEventListener("pointerleave",a,s)};return n.forEach(e=>{e.addEventListener("pointerenter",i,s)}),a}(e,(e,t)=>(wd(this.node,t,"Start"),e=>wd(this.node,e,"End"))))}unmount(){}}}},Pd=To({...Ll,...Md,...bd,...{layout:{ProjectionNode:jd,MeasureLayout:gc}}},ol),Ad=e=>{const t=Ld(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Td(r,t)||Rd(e)},getConflictingClassGroupIds:(e,t)=>{const s=r[e]||[];return t&&n[e]?[...s,...n[e]]:s}}},Td=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?Td(e.slice(1),s):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(i)))?void 0:r.classGroupId},Dd=/^\[(.+)\]$/,Rd=e=>{if(Dd.test(e)){const t=Dd.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Ld=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return zd(Object.entries(e.classGroups),r).forEach(([e,r])=>{qd(r,n,e,t)}),n},qd=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Id(t,e)).classGroupId=r)}if("function"==typeof e)return Fd(e)?void qd(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,s])=>{qd(s,Id(t,e),r,n)})})},Id=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},Fd=e=>e.isThemeGetter,zd=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Bd=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(s,a)=>{r.set(s,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(s(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):s(e,t)}}},$d=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,s=t[0],a=t.length,i=e=>{const r=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===s&&(n||e.slice(u,u+a)===t)){r.push(e.slice(l,u)),l=u+a;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===r.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:r,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return r?e=>r({className:e,parseClassName:i}):i},Ud=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Vd=/\s+/;function Wd(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Hd(e))&&(n&&(n+=" "),n+=t);return n}const Hd=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Hd(e[n]))&&(r&&(r+=" "),r+=t);return r};function Yd(e,...t){let r,n,s,a=function(o){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Bd(e.cacheSize),parseClassName:$d(e),...Ad(e)}))(l),n=r.cache.get,s=r.cache.set,a=i,i(o)};function i(e){const t=n(e);if(t)return t;const a=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(Vd);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(e);let m=Boolean(u),h=n(m?d.substring(0,u):d);if(!h){if(!m){o=e+(o.length>0?" "+o:o);continue}if(h=n(d),!h){o=e+(o.length>0?" "+o:o);continue}m=!1}const p=Ud(t).join(":"),f=c?p+"!":p,x=f+h;if(a.includes(x))continue;a.push(x);const g=s(h,m);for(let r=0;r<g.length;++r){const e=g[r];a.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,r);return s(e,a),a}return function(){return a(Wd.apply(null,arguments))}}const Kd=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Gd=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xd=/^\d+\/\d+$/,Qd=new Set(["px","full","screen"]),Zd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ru=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nu=e=>au(e)||Qd.has(e)||Xd.test(e),su=e=>vu(e,"length",yu),au=e=>Boolean(e)&&!Number.isNaN(Number(e)),iu=e=>vu(e,"number",au),ou=e=>Boolean(e)&&Number.isInteger(Number(e)),lu=e=>e.endsWith("%")&&au(e.slice(0,-1)),cu=e=>Gd.test(e),du=e=>Zd.test(e),uu=new Set(["length","size","percentage"]),mu=e=>vu(e,uu,ju),hu=e=>vu(e,"position",ju),pu=new Set(["image","url"]),fu=e=>vu(e,pu,wu),xu=e=>vu(e,"",bu),gu=()=>!0,vu=(e,t,r)=>{const n=Gd.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},yu=e=>Jd.test(e)&&!eu.test(e),ju=()=>!1,bu=e=>tu.test(e),wu=e=>ru.test(e),Nu=Yd(()=>{const e=Kd("colors"),t=Kd("spacing"),r=Kd("blur"),n=Kd("brightness"),s=Kd("borderColor"),a=Kd("borderRadius"),i=Kd("borderSpacing"),o=Kd("borderWidth"),l=Kd("contrast"),c=Kd("grayscale"),d=Kd("hueRotate"),u=Kd("invert"),m=Kd("gap"),h=Kd("gradientColorStops"),p=Kd("gradientColorStopPositions"),f=Kd("inset"),x=Kd("margin"),g=Kd("opacity"),v=Kd("padding"),y=Kd("saturate"),j=Kd("scale"),b=Kd("sepia"),w=Kd("skew"),N=Kd("space"),_=Kd("translate"),S=()=>["auto",cu,t],k=()=>[cu,t],C=()=>["",nu,su],E=()=>["auto",au,cu],O=()=>["","0",cu],M=()=>[au,cu];return{cacheSize:500,separator:":",theme:{colors:[gu],spacing:[nu,su],blur:["none","",du,cu],brightness:M(),borderColor:[e],borderRadius:["none","","full",du,cu],borderSpacing:k(),borderWidth:C(),contrast:M(),grayscale:O(),hueRotate:M(),invert:O(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[lu,su],inset:S(),margin:S(),opacity:M(),padding:k(),saturate:M(),scale:M(),sepia:O(),skew:M(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",cu]}],container:["container"],columns:[{columns:[du]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",cu]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ou,cu]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",cu]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",ou,cu]}],"grid-cols":[{"grid-cols":[gu]}],"col-start-end":[{col:["auto",{span:["full",ou,cu]},cu]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[gu]}],"row-start-end":[{row:["auto",{span:[ou,cu]},cu]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",cu]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",cu]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",cu,t]}],"min-w":[{"min-w":[cu,t,"min","max","fit"]}],"max-w":[{"max-w":[cu,t,"none","full","min","max","fit","prose",{screen:[du]},du]}],h:[{h:[cu,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[cu,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[cu,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[cu,t,"auto","min","max","fit"]}],"font-size":[{text:["base",du,su]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",iu]}],"font-family":[{font:[gu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",cu]}],"line-clamp":[{"line-clamp":["none",au,iu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nu,cu]}],"list-image":[{"list-image":["none",cu]}],"list-style-type":[{list:["none","disc","decimal",cu]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nu,su]}],"underline-offset":[{"underline-offset":["auto",nu,cu]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cu]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cu]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",hu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fu]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[nu,cu]}],"outline-w":[{outline:[nu,su]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[nu,su]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",du,xu]}],"shadow-color":[{shadow:[gu]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",du,cu]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",cu]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",cu]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",cu]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ou,cu]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",cu]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cu]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cu]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[nu,su,iu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function _u(...e){return Nu(Pr(e))}const Su=Dr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium ring-offset-ring-offset transition-all duration-200 focus-visible:outline-2 focus-visible:outline-focus-outline focus-visible:outline-offset-2 focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:cursor-not-allowed [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 rtl-transition",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary-hover hover:shadow-md active:bg-primary-active focus-visible:ring-focus-ring/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-error-hover hover:shadow-danger/50 active:bg-error-active focus-visible:ring-error/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",outline:"border border-border bg-background text-foreground shadow-sm hover:bg-outline-hover hover:border-border-strong active:bg-outline-active focus-visible:ring-focus-ring/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary-hover active:bg-secondary-active focus-visible:ring-focus-ring/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",ghost:"text-foreground hover:bg-secondary hover:text-foreground active:bg-secondary-active focus-visible:ring-focus-ring/30 disabled:bg-transparent disabled:text-button-disabled-foreground",link:"text-primary underline-offset-4 hover:underline hover:text-primary-hover active:text-primary-active focus-visible:ring-focus-ring/30 disabled:text-button-disabled-foreground disabled:no-underline",success:"bg-success text-success-foreground shadow-sm hover:bg-success-hover hover:shadow-success/50 active:bg-success-active focus-visible:ring-success/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",warning:"bg-warning text-warning-foreground shadow-sm hover:bg-warning-hover hover:shadow-warning/50 active:bg-warning-active focus-visible:ring-warning/30 disabled:bg-warning-disabled disabled:text-warning-disabled-foreground disabled:shadow-none",info:"bg-info text-info-foreground shadow-sm hover:bg-info-hover hover:shadow-info/50 active:bg-info-active focus-visible:ring-info/30 disabled:bg-info-disabled disabled:text-info-disabled-foreground disabled:shadow-none",accent:"bg-accent text-accent-foreground shadow-sm hover:bg-accent-hover hover:shadow-accent/50 active:bg-accent-active focus-visible:ring-focus-ring/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:shadow-none",premium:"bg-gradient-primary text-primary-foreground shadow-primary hover:shadow-primary hover:scale-[1.02] active:scale-[0.98] focus-visible:ring-primary/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:shadow-none",glass:"bg-glass text-foreground border border-glass-border backdrop-blur-sm hover:bg-glass-strong active:bg-glass/80 focus-visible:ring-focus-ring/30 disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:backdrop-blur-none"},size:{xs:"h-7 px-2 text-xs rounded",sm:"h-8 px-3 text-sm rounded-md",default:"h-10 px-4 text-sm rounded-md",lg:"h-11 px-6 text-base rounded-md",xl:"h-12 px-8 text-lg rounded-lg",icon:"h-10 w-10 rounded-md","icon-sm":"h-8 w-8 rounded-md","icon-lg":"h-11 w-11 rounded-md"},loading:{true:"cursor-wait",false:""}},defaultVariants:{variant:"default",size:"default",loading:!1}}),ku=Ne.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,loading:i=!1,loadingText:o,children:l,disabled:c,animation:d="none",...u},m)=>a?n.jsx(s,{className:_u(Su({variant:t,size:r,loading:i,className:e})),ref:m,...u,children:l}):"none"===d?n.jsx("button",{className:_u(Su({variant:t,size:r,loading:i,className:e})),ref:m,disabled:c||i,...u,children:n.jsxs(n.Fragment,{children:[i&&n.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i&&o||l]})}):n.jsx(Pd.button,{className:_u(Su({variant:t,size:r,loading:i,className:e})),ref:m,disabled:c||i,...{spring:{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17}},lift:{whileHover:{y:-2},whileTap:{y:0},transition:{type:"tween",duration:.15}},scale:{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"tween",duration:.1}},glow:{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"tween",duration:.2}},none:{}}[d],...u,children:n.jsxs(n.Fragment,{children:[i&&n.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i&&o||l]})}));ku.displayName="Button";const Cu=Dr("rounded-lg bg-card text-card-foreground transition-all duration-200",{variants:{variant:{default:"shadow-sm border border-border/50",elevated:"shadow-md hover:shadow-lg border border-border/30",outlined:"border border-border",ghost:"shadow-none border-0",glass:"bg-glass border border-border/30 backdrop-blur-sm",gradient:"bg-gradient-subtle border border-border/20"},padding:{none:"",sm:"p-4",default:"p-6",lg:"p-8"},interactive:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"default",padding:"none",interactive:!1}}),Eu=Ne.forwardRef(({className:e,variant:t,padding:r,interactive:s,hoverEffect:a="none",onClick:i,...o},l)=>"none"===a?n.jsx("div",{ref:l,className:_u(Cu({variant:t,padding:r,interactive:s}),e),onClick:i,...o}):n.jsx(Pd.div,{ref:l,className:_u(Cu({variant:t,padding:r,interactive:s}),e),...{lift:{whileHover:{y:-8,transition:{type:"tween",duration:.2}}},tilt:{whileHover:{rotateY:5,rotateX:5,scale:1.02,transition:{type:"spring",stiffness:300}}},glow:{whileHover:{scale:1.02,transition:{type:"tween",duration:.2}}},scale:{whileHover:{scale:1.05,transition:{type:"spring",stiffness:300}}},none:{}}[a],whileTap:s?{scale:.98}:void 0,onClick:i,...o}));Eu.displayName="Card";const Ou=Ne.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:_u("flex flex-col space-y-1.5 p-6",e),...t}));Ou.displayName="CardHeader";const Mu=Ne.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:_u("text-xl font-semibold leading-tight tracking-tight text-foreground",e),...t}));Mu.displayName="CardTitle";const Pu=Ne.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:_u("text-sm text-muted-foreground",e),...t}));Pu.displayName="CardDescription";const Au=Ne.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:_u("p-6 pt-0",e),...t}));Au.displayName="CardContent";Ne.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:_u("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";
/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Tu=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Du=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),Ru=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Lu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Ne.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>Ne.createElement("svg",{ref:l,...Lu,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:Du("lucide",s),...!a&&!Ru(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>Ne.createElement(e,t)),...Array.isArray(a)?a:[a]])),Iu=(e,t)=>{const r=Ne.forwardRef(({className:r,...n},s)=>{return Ne.createElement(qu,{ref:s,iconNode:t,className:Du(`lucide-${a=Tu(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n});var a});return r.displayName=Tu(e),r},Fu=Iu("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),zu=Iu("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Bu=Iu("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),$u=Iu("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Uu=Iu("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Vu=Iu("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Wu=Iu("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Hu=Iu("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Yu=Iu("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ku=Iu("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Gu=Iu("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Xu=Iu("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Qu=Iu("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zu=Iu("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ju=Iu("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),em=Iu("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),tm=Iu("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),rm=Iu("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),nm=Iu("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),sm=Iu("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),am=Iu("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),im=Iu("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),om=Iu("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),lm=Iu("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),cm=Iu("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),dm=Iu("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),um=Iu("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),mm=Iu("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),hm=Iu("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),pm=Iu("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),fm=Iu("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),xm=Iu("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),gm=Iu("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),vm=Iu("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),ym=Iu("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),jm=Iu("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),bm=Iu("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),wm=Iu("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Nm=Iu("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),_m=Iu("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Sm=Iu("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),km=Iu("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Cm=Iu("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]),Em=Iu("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Om=Iu("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Mm=Iu("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Pm=Iu("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Am=Iu("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),Tm=Iu("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Dm=Iu("file-x",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]),Rm=Iu("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Lm=Iu("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),qm=Iu("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Im=Iu("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Fm=Iu("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),zm=Iu("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),Bm=Iu("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),$m=Iu("heart-handshake",[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]]),Um=Iu("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Vm=Iu("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Wm=Iu("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Hm=Iu("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Ym=Iu("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Km=Iu("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Gm=Iu("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Xm=Iu("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Qm=Iu("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Zm=Iu("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),Jm=Iu("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),eh=Iu("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),th=Iu("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),rh=Iu("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),nh=Iu("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),sh=Iu("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]),ah=Iu("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),ih=Iu("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),oh=Iu("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),lh=Iu("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),ch=Iu("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),dh=Iu("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),uh=Iu("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),mh=Iu("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),hh=Iu("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]),ph=Iu("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),fh=Iu("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xh=Iu("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),gh=Iu("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),vh=Iu("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]),yh=Iu("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),jh=Iu("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),bh=Iu("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),wh=Iu("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Nh=Iu("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_h=Iu("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]]),Sh=Iu("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),kh=Iu("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ch=Iu("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Eh=Iu("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Oh=Iu("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Mh=Iu("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ph=Iu("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Ah=Iu("square-x",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Th=Iu("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Dh=Iu("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Rh=Iu("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Lh=Iu("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),qh=Iu("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Ih=Iu("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Fh=Iu("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),zh=Iu("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Bh=Iu("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),$h=Iu("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Uh=Iu("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Vh=Iu("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Wh=Iu("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Hh=Iu("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Yh=Iu("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Kh=Iu("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Gh=Iu("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Xh=Iu("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Qh=Iu("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),Zh=Iu("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Jh=Iu("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ep=Iu("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),tp=Iu("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),rp=Iu("workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),np=Iu("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),sp=Iu("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ap=Iu("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class ip extends Ne.Component{constructor(e){super(e),r(this,"retryCount",0),r(this,"maxRetries",3),r(this,"reportErrorToService",async(e,t,r)=>{try{const n={errorId:r,message:e.message,stack:e.stack,componentStack:t.componentStack,userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString(),userId:null};ir.error("Error reported to monitoring service",{errorReport:n})}catch(n){ir.error("Failed to report error to monitoring service",{originalError:e.message,reportingError:n instanceof Error?n.message:"Unknown error"})}}),r(this,"handleRetry",()=>{this.retryCount<this.maxRetries?(this.retryCount++,ir.info(`Retrying component render (attempt ${this.retryCount}/${this.maxRetries})`),this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})):ir.warn("Maximum retry attempts reached, not retrying")}),r(this,"handleGoHome",()=>{ir.info("User navigating to home page from error boundary"),window.location.href="/"}),r(this,"handleReload",()=>{ir.info("User reloading page from error boundary"),window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(e,t){const r=this.state.errorId||`error_${Date.now()}`;ir.error("Component error boundary caught error",{errorId:r,error:e.message,stack:e.stack,componentStack:t.componentStack,metadata:{userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString(),retryCount:this.retryCount}}),this.props.onError&&this.props.onError(e,t),this.setState({errorInfo:t}),this.reportErrorToService(e,t,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:n.jsxs(Eu,{className:"w-full max-w-lg",children:[n.jsxs(Ou,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(Uh,{className:"h-12 w-12 text-destructive"})}),n.jsx(Mu,{className:"text-xl font-semibold",children:"Something went wrong"}),n.jsx(Pu,{children:"We apologize for the inconvenience. The application encountered an unexpected error."})]}),n.jsxs(Au,{className:"space-y-4",children:[this.props.showDetails&&!1,n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[this.retryCount<this.maxRetries&&n.jsxs(ku,{onClick:this.handleRetry,className:"flex-1",children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),"Try Again"]}),n.jsxs(ku,{onClick:this.handleReload,variant:"outline",className:"flex-1",children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),"Reload Page"]}),this.props.showHomeButton&&n.jsxs(ku,{onClick:this.handleGoHome,variant:"outline",className:"flex-1",children:[n.jsx(Um,{className:"h-4 w-4 mr-2"}),"Go Home"]})]}),n.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["If this problem persists, please contact support.",this.state.errorId&&n.jsxs("div",{className:"mt-1",children:["Reference ID: ",n.jsx("code",{className:"bg-muted px-1 rounded",children:this.state.errorId})]})]})]})]})}):this.props.children}}let op=0;const lp=new Map,cp=e=>{if(lp.has(e))return;const t=setTimeout(()=>{lp.delete(e),hp({type:"REMOVE_TOAST",toastId:e})},1e6);lp.set(e,t)},dp=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?cp(r):e.toasts.forEach(e=>{cp(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},up=[];let mp={toasts:[]};function hp(e){mp=dp(mp,e),up.forEach(e=>{e(mp)})}function pp({...e}){const t=(op=(op+1)%Number.MAX_SAFE_INTEGER,op.toString()),r=()=>hp({type:"DISMISS_TOAST",toastId:t});return hp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>hp({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function fp(){const[e,t]=Ne.useState(mp);return Ne.useEffect(()=>(up.push(t),()=>{const e=up.indexOf(t);e>-1&&up.splice(e,1)}),[e]),{...e,toast:pp,dismiss:e=>hp({type:"DISMISS_TOAST",toastId:e})}}const xp=Object.freeze(Object.defineProperty({__proto__:null,reducer:dp,toast:pp,useToast:fp},Symbol.toStringTag,{value:"Module"}));var gp=Ne.forwardRef((e,t)=>n.jsx(a.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));gp.displayName="VisuallyHidden";var vp="ToastProvider",[yp,jp,bp]=i("Toast"),[wp,Np]=o("Toast",[bp]),[_p,Sp]=wp(vp),kp=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=Ne.useState(null),[d,u]=Ne.useState(0),m=Ne.useRef(!1),h=Ne.useRef(!1);return r.trim(),n.jsx(yp.Provider,{scope:t,children:n.jsx(_p,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:Ne.useCallback(()=>u(e=>e+1),[]),onToastRemove:Ne.useCallback(()=>u(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:o})})};kp.displayName=vp;var Cp="ToastViewport",Ep=["F8"],Op="toast.viewportPause",Mp="toast.viewportResume",Pp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=Ep,label:i="Notifications ({hotkey})",...o}=e,d=Sp(Cp,r),u=jp(r),m=Ne.useRef(null),h=Ne.useRef(null),p=Ne.useRef(null),f=Ne.useRef(null),x=l(t,f,d.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=d.toastCount>0;Ne.useEffect(()=>{const e=e=>{var t;0!==s.length&&s.every(t=>e[t]||e.code===t)&&(null==(t=f.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),Ne.useEffect(()=>{const e=m.current,t=f.current;if(v&&e&&t){const r=()=>{if(!d.isClosePausedRef.current){const e=new CustomEvent(Op);t.dispatchEvent(e),d.isClosePausedRef.current=!0}},n=()=>{if(d.isClosePausedRef.current){const e=new CustomEvent(Mp);t.dispatchEvent(e),d.isClosePausedRef.current=!1}},s=t=>{!e.contains(t.relatedTarget)&&n()},a=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",s),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",a),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[v,d.isClosePausedRef]);const y=Ne.useCallback(({tabbingDirection:e})=>{const t=u().map(t=>{const r=t.ref.current,n=[r,...Gp(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[u]);return Ne.useEffect(()=>{const e=f.current;if(e){const t=t=>{var r,n,s;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(r=h.current)||r.focus());const o=y({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===a);Xp(o.slice(l+1))?t.preventDefault():i?null==(n=h.current)||n.focus():null==(s=p.current)||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[u,y]),n.jsxs(c,{ref:m,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&n.jsx(Tp,{ref:h,onFocusFromOutsideViewport:()=>{Xp(y({tabbingDirection:"forwards"}))}}),n.jsx(yp.Slot,{scope:r,children:n.jsx(a.ol,{tabIndex:-1,...o,ref:x})}),v&&n.jsx(Tp,{ref:p,onFocusFromOutsideViewport:()=>{Xp(y({tabbingDirection:"backwards"}))}})]})});Pp.displayName=Cp;var Ap="ToastFocusProxy",Tp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=Sp(Ap,r);return n.jsx(gp,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const r=e.relatedTarget;!(null==(t=i.viewport)?void 0:t.contains(r))&&s()}})});Tp.displayName=Ap;var Dp="Toast",Rp=Ne.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,c]=d({prop:s,defaultProp:a,onChange:i});return n.jsx(u,{present:r||l,children:n.jsx(Ip,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:m(e.onPause),onResume:m(e.onResume),onSwipeStart:h(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:h(e.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:h(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:h(e.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),c(!1)})})})});Rp.displayName=Dp;var[Lp,qp]=wp(Dp,{onClose(){}}),Ip=Ne.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:i,open:o,onClose:c,onEscapeKeyDown:d,onPause:u,onResume:f,onSwipeStart:x,onSwipeMove:g,onSwipeCancel:v,onSwipeEnd:y,...j}=e,b=Sp(Dp,r),[w,N]=Ne.useState(null),_=l(t,e=>N(e)),S=Ne.useRef(null),k=Ne.useRef(null),C=i||b.duration,E=Ne.useRef(0),O=Ne.useRef(C),M=Ne.useRef(0),{onToastAdd:P,onToastRemove:A}=b,T=m(()=>{var e;(null==w?void 0:w.contains(document.activeElement))&&(null==(e=b.viewport)||e.focus()),c()}),D=Ne.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(M.current),E.current=(new Date).getTime(),M.current=window.setTimeout(T,e))},[T]);Ne.useEffect(()=>{const e=b.viewport;if(e){const t=()=>{D(O.current),null==f||f()},r=()=>{const e=(new Date).getTime()-E.current;O.current=O.current-e,window.clearTimeout(M.current),null==u||u()};return e.addEventListener(Op,r),e.addEventListener(Mp,t),()=>{e.removeEventListener(Op,r),e.removeEventListener(Mp,t)}}},[b.viewport,C,u,f,D]),Ne.useEffect(()=>{o&&!b.isClosePausedRef.current&&D(C)},[o,C,b.isClosePausedRef,D]),Ne.useEffect(()=>(P(),()=>A()),[P,A]);const R=Ne.useMemo(()=>w?Hp(w):null,[w]);return b.viewport?n.jsxs(n.Fragment,{children:[R&&n.jsx(Fp,{__scopeToast:r,role:"status","aria-live":"foreground"===s?"assertive":"polite","aria-atomic":!0,children:R}),n.jsx(Lp,{scope:r,onClose:T,children:we.createPortal(n.jsx(yp.ItemSlot,{scope:r,children:n.jsx(p,{asChild:!0,onEscapeKeyDown:h(d,()=>{b.isFocusedToastEscapeKeyDownRef.current||T(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(a.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":b.swipeDirection,...j,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:h(e.onKeyDown,e=>{"Escape"===e.key&&(null==d||d(e.nativeEvent),e.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:h(e.onPointerDown,e=>{0===e.button&&(S.current={x:e.clientX,y:e.clientY})}),onPointerMove:h(e.onPointerMove,e=>{if(!S.current)return;const t=e.clientX-S.current.x,r=e.clientY-S.current.y,n=Boolean(k.current),s=["left","right"].includes(b.swipeDirection),a=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,i=s?a(0,t):0,o=s?0:a(0,r),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};n?(k.current=c,Yp("toast.swipeMove",g,d,{discrete:!1})):Kp(c,b.swipeDirection,l)?(k.current=c,Yp("toast.swipeStart",x,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(S.current=null)}),onPointerUp:h(e.onPointerUp,e=>{const t=k.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),k.current=null,S.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};Kp(t,b.swipeDirection,b.swipeThreshold)?Yp("toast.swipeEnd",y,n,{discrete:!0}):Yp("toast.swipeCancel",v,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),Fp=e=>{const{__scopeToast:t,children:r,...s}=e,a=Sp(Dp,t),[i,o]=Ne.useState(!1),[l,c]=Ne.useState(!1);return function(e=()=>{}){const t=m(e);x(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>o(!0)),Ne.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:n.jsx(f,{asChild:!0,children:n.jsx(gp,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},zp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(a.div,{...s,ref:t})});zp.displayName="ToastTitle";var Bp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(a.div,{...s,ref:t})});Bp.displayName="ToastDescription";var $p=Ne.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(Wp,{altText:r,asChild:!0,children:n.jsx(Vp,{...s,ref:t})}):null});$p.displayName="ToastAction";var Up="ToastClose",Vp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,i=qp(Up,r);return n.jsx(Wp,{asChild:!0,children:n.jsx(a.button,{type:"button",...s,ref:t,onClick:h(e.onClick,i.onClose)})})});Vp.displayName=Up;var Wp=Ne.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...i}=e;return n.jsx(a.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function Hp(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...Hp(e))}}),t}function Yp(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?g(s,a):s.dispatchEvent(a)}var Kp=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return"left"===t||"right"===t?a&&n>r:!a&&s>r};function Gp(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Xp(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Qp=Pp,Zp=Rp,Jp=zp,ef=Bp,tf=$p,rf=Vp;const nf=kp,sf=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Qp,{ref:r,className:_u("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));sf.displayName=Qp.displayName;const af=Dr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),of=Ne.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(Zp,{ref:s,className:_u(af({variant:t}),e),...r}));of.displayName=Zp.displayName;Ne.forwardRef(({className:e,...t},r)=>n.jsx(tf,{ref:r,className:_u("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=tf.displayName;const lf=Ne.forwardRef(({className:e,...t},r)=>n.jsx(rf,{ref:r,className:_u("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(sp,{className:"h-4 w-4"})}));lf.displayName=rf.displayName;const cf=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Jp,{ref:r,className:_u("text-sm font-semibold",e),...t}));cf.displayName=Jp.displayName;const df=Ne.forwardRef(({className:e,...t},r)=>n.jsx(ef,{ref:r,className:_u("text-sm opacity-90",e),...t}));function uf(){const{toasts:e}=fp();return n.jsxs(nf,{children:[e.map(function({id:e,title:t,description:r,action:s,...a}){return n.jsxs(of,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[t&&n.jsx(cf,{children:t}),r&&n.jsx(df,{children:r})]}),s,n.jsx(lf,{})]},e)}),n.jsx(sf,{})]})}df.displayName=ef.displayName;let mf=!1;const hf=or("GlobalErrorHandler"),pf=()=>{if("undefined"!=typeof window&&!mf){mf=!0;const e=e=>{var t,r;hf.error("Unhandled promise rejection",{reason:e.reason});const n=e.reason;let s="Unexpected Error",a="An unexpected error occurred. Please try again.";(null==(t=null==n?void 0:n.message)?void 0:t.includes("Network"))?(s="Network Error",a="Please check your internet connection and try again."):(null==(r=null==n?void 0:n.message)?void 0:r.includes("auth"))?(s="Authentication Error",a="Please sign in again to continue."):404===(null==n?void 0:n.status)?(s="Not Found",a="The requested resource was not found."):(null==n?void 0:n.status)>=500&&(s="Server Error",a="Our servers are experiencing issues. Please try again later."),hf.error("Parsed error",{title:s,description:a})},t=e=>{hf.error("Global JavaScript error",{error:e.error}),hf.error("Application Error: Something went wrong. The page may need to be refreshed.")},r=()=>{hf.info("Back Online: Your internet connection has been restored.")},n=()=>{hf.warn("Connection Lost: Please check your internet connection.")};window.addEventListener("unhandledrejection",e),window.addEventListener("error",t),window.addEventListener("online",r),window.addEventListener("offline",n)}return null},ff=()=>{const[e,t]=Ne.useState({isMobile:!1,isTablet:!1,isDesktop:!0,isTouchDevice:!1,isIOS:!1,isAndroid:!1,orientation:"landscape",screenSize:"lg"});return Ne.useEffect(()=>{const e=()=>{const e=navigator.userAgent.toLowerCase(),r=window.innerWidth,n=window.innerHeight,s=r<768,a=r>=768&&r<1024,i=r>=1024,o="ontouchstart"in window||navigator.maxTouchPoints>0,l=/iphone|ipad|ipod/.test(e),c=/android/.test(e);let d="lg";d=r<640?"sm":r<768?"md":r<1024?"lg":r<1280?"xl":"2xl",t({isMobile:s,isTablet:a,isDesktop:i,isTouchDevice:o,isIOS:l,isAndroid:c,orientation:n>r?"portrait":"landscape",screenSize:d})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e};
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var xf,gf;(gf=xf||(xf={})).Unimplemented="UNIMPLEMENTED",gf.Unavailable="UNAVAILABLE";class vf extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const yf=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,r;return(null==e?void 0:e.androidBridge)?"android":(null===(r=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"})(e),a=e=>{var t;return null===(t=r.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},i=new Map;return r.convertFileSrc||(r.convertFileSrc=e=>e),r.getPlatform=s,r.handleError=t=>e.console.error(t),r.isNativePlatform=()=>"web"!==s(),r.isPluginAvailable=e=>{const t=i.get(e);return!!(null==t?void 0:t.platforms.has(s()))||!!a(e)},r.registerPlugin=(e,o={})=>{const l=i.get(e);if(l)return l.proxy;const c=s(),d=a(e);let u;const m=n=>{let s;const a=(...a)=>{const i=(async()=>(!u&&c in o?u=u="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!u&&"web"in o&&(u=u="function"==typeof o.web?await o.web():o.web),u))().then(t=>{const i=((t,n)=>{var s,a;if(!d){if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t);throw new vf(`"${e}" plugin is not implemented on ${c}`,xf.Unimplemented)}{const a=null==d?void 0:d.methods.find(e=>n===e.name);if(a)return"promise"===a.rtype?t=>r.nativePromise(e,n.toString(),t):(t,s)=>r.nativeCallback(e,n.toString(),t,s);if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t)}})(t,n);if(i){const e=i(...a);return s=null==e?void 0:e.remove,e}throw new vf(`"${e}.${n}()" is not implemented on ${c}`,xf.Unimplemented)});return"addListener"===n&&(i.remove=async()=>s()),i};return a.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(a,"name",{value:n,writable:!1,configurable:!1}),a},h=m("addListener"),p=m("removeListener"),f=(e,t)=>{const r=h({eventName:e},t),n=async()=>{const n=await r;p({eventName:e,callbackId:n},t)},s=new Promise(e=>r.then(()=>e({remove:n})));return s.remove=async()=>{await n()},s},x=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?f:h;case"removeListener":return p;default:return m(t)}}});return n[e]=x,i.set(e,{name:e,proxy:x,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),x},r.Exception=vf,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},jf=(e=>e.Capacitor=yf(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),bf=jf.registerPlugin;class wf{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),r&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const n=this.listeners[e];if(n)n.forEach(e=>e(t));else if(r){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new jf.Exception(e,xf.Unimplemented)}unavailable(e="not available"){return new jf.Exception(e,xf.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Nf=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_f=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Sf extends wf{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[r,n]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=_f(r).trim(),n=_f(n).trim(),t[r]=n}),t}async setCookie(e){try{const t=Nf(e.key),r=Nf(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${n}; path=${s}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}bf("CapacitorCookies",{web:()=>new Sf});const kf=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((r,n,s)=>(r[n]=e[t[s]],r),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)r.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[r,n]of Object.entries(e.data||{}))t.set(r,n);r.body=t.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,r)=>{t.append(r,e)});else for(const r of Object.keys(e.data))t.append(r,e.data[r]);r.body=t;const n=new Headers(r.headers);n.delete("content-type"),r.headers=n}else(n.includes("application/json")||"object"==typeof e.data)&&(r.body=JSON.stringify(e.data));return r};class Cf extends wf{async request(e){const t=kf(e,e.webFetchExtra),r=((e,t=!0)=>e?Object.entries(e).reduce((e,r)=>{const[n,s]=r;let a,i;return Array.isArray(s)?(i="",s.forEach(e=>{a=t?encodeURIComponent(e):e,i+=`${n}=${a}&`}),i.slice(0,-1)):(a=t?encodeURIComponent(s):s,i=`${n}=${a}`),`${e}&${i}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,s=await fetch(n,t),a=s.headers.get("content-type")||"";let i,o,{responseType:l="text"}=s.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await s.blob(),i=await(async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const e=n.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},n.onerror=e=>r(e),n.readAsDataURL(e)}))(o);break;case"json":i=await s.json();break;default:i=await s.text()}const c={};return s.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}bf("CapacitorHttp",{web:()=>new Cf});const Ef=bf("PushNotifications",{});var Of,Mf,Pf,Af;(Mf=Of||(Of={})).Heavy="HEAVY",Mf.Medium="MEDIUM",Mf.Light="LIGHT",(Af=Pf||(Pf={})).Success="SUCCESS",Af.Warning="WARNING",Af.Error="ERROR";const Tf=bf("Haptics",{web:()=>Me(()=>import("./web-BUQEk1zi.js"),__vite__mapDeps([0,1,2,3])).then(e=>new e.HapticsWeb)}),Df=bf("Network",{web:()=>Me(()=>import("./web-BVPONY3-.js"),__vite__mapDeps([4,1,2,3])).then(e=>new e.NetworkWeb)});var Rf,Lf,qf,If;(Lf=Rf||(Rf={})).Dark="DARK",Lf.Light="LIGHT",Lf.Default="DEFAULT",(If=qf||(qf={})).None="NONE",If.Slide="SLIDE",If.Fade="FADE";const Ff=bf("StatusBar"),zf=bf("SplashScreen",{web:()=>Me(()=>import("./web--FH55Y82.js"),__vite__mapDeps([5,1,2,3])).then(e=>new e.SplashScreenWeb)}),Bf=()=>{const[e,t]=Ne.useState({isNative:!1,platform:"web",networkStatus:null,pushToken:null}),r=or("useCapacitor");Ne.useEffect(()=>((async()=>{const e=jf.isNativePlatform(),r=jf.getPlatform();t(t=>({...t,isNative:e,platform:r}));const a=await Df.getStatus();t(e=>({...e,networkStatus:a})),Df.addListener("networkStatusChange",e=>{t(t=>({...t,networkStatus:e}))}),e&&(await n(),await s(),await zf.hide())})(),()=>{Df.removeAllListeners(),jf.isNativePlatform()&&Ef.removeAllListeners()}),[]);const n=async()=>{try{"granted"===(await Ef.requestPermissions()).receive&&(await Ef.register(),Ef.addListener("registration",e=>{t(t=>({...t,pushToken:e.value})),r.info("Push registration success:",{tokenLength:e.value.length})}),Ef.addListener("registrationError",e=>{r.error("Push registration error:",{error:e})}),Ef.addListener("pushNotificationReceived",e=>{r.info("Push notification received:",{title:e.title})}),Ef.addListener("pushNotificationActionPerformed",e=>{r.info("Push notification action performed:",{actionId:e.actionId})}))}catch(e){r.error("Push notification setup failed:",{error:e})}},s=async()=>{try{await Ff.setStyle({style:Rf.Default}),await Ff.setBackgroundColor({color:"#ffffff"}),await Ff.show()}catch(e){r.error("Status bar setup failed:",{error:e})}};return{...e,triggerHaptic:async(e=Of.Medium)=>{if(jf.isNativePlatform())try{await Tf.impact({style:e})}catch(t){r.error("Haptic feedback failed:",{error:t})}},setStatusBarStyle:async e=>{if(jf.isNativePlatform())try{await Ff.setStyle({style:e})}catch(t){r.error("Status bar style change failed:",{error:t})}}}},$f=()=>{Nt();const{userProfile:e}=br(),{triggerHaptic:t}=Bf(),{isMobile:r}=ff(),{isRTL:s}=cr(),a=async()=>{await t()};if(!r)return null;const i=(()=>{const t=[{path:"/dashboard",label:s?"الرئيسية":"Home",icon:Um},{path:"/search",label:s?"البحث":"Search",icon:jh}];return"admin"===(null==e?void 0:e.role)?t.push({path:"/admin/dashboard",label:s?"الإدارة":"Admin",icon:dh},{path:"/admin/users",label:s?"المستخدمون":"Users",icon:Xh}):"vendor"===(null==e?void 0:e.role)?t.push({path:"/vendor-dashboard",label:s?"المورد":"Vendor",icon:dh},{path:"/profile",label:s?"الملف الشخصي":"Profile",icon:Xh}):t.push({path:"/requests",label:s?"الطلبات":"Requests",icon:Tm},{path:"/profile",label:s?"الملف الشخصي":"Profile",icon:Xh}),t})();return n.jsx("nav",{className:_u("fixed bottom-0 left-0 right-0 z-50 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","mobile-bottom-nav safe-area-padding-bottom"),children:n.jsx("div",{className:"flex items-center justify-around py-2 px-4 max-w-screen-xl mx-auto",children:i.map(e=>n.jsx("div",{className:"flex-1 max-w-20",children:n.jsxs(Jt,{to:e.path,onClick:a,className:({isActive:e})=>_u("flex flex-col items-center justify-center p-2 min-w-0 flex-1 transition-colors","hover:bg-accent/50 rounded-lg haptic-button",e?"text-primary":"text-muted-foreground"),children:[n.jsx(e.icon,{className:"h-5 w-5 mb-1"}),n.jsx("span",{className:"text-xs font-medium truncate",children:e.label})]},e.path)},e.path))})})},Uf=()=>n.jsx("div",{className:"h-20 w-full shrink-0"}),Vf=()=>{const e=Nt(),t=St();br();const{triggerHaptic:r}=Bf();ff();const{t:s,isRTL:a}=cr();Ne.useState(!1);const i=async e=>{await r(),e()};return n.jsxs(n.Fragment,{children:[n.jsx("header",{className:_u("sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","mobile-header safe-area-padding-top")}),"/dashboard"===e.pathname&&n.jsx("div",{className:"border-b bg-muted/50 p-2",children:n.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>i(()=>t("/requests/create")),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(fh,{className:"h-3 w-3"}),a?"طلب جديد":"New Request"]}),n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>i(()=>t("/search")),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(jh,{className:"h-3 w-3"}),a?"البحث":"Search"]}),n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>i(()=>t("/messages")),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(rh,{className:"h-3 w-3"}),a?"الرسائل":"Messages"]})]})})]})},Wf=()=>{const{isNative:e,networkStatus:t}=Bf(),[r,s]=Ne.useState(new Date);return Ne.useEffect(()=>{const e=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(e)},[]),e?n.jsxs("div",{className:_u("h-6 bg-background border-b flex items-center justify-between px-2 text-xs font-medium","status-bar safe-area-padding-top"),children:[n.jsx("div",{className:"flex items-center",children:n.jsx("span",{children:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:_u("w-2 h-2 rounded-full",(null==t?void 0:t.connected)?"bg-green-500":"bg-red-500")}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-2 border border-foreground/50 rounded-sm relative",children:n.jsx("div",{className:"w-4/5 h-full bg-green-500 rounded-sm"})}),n.jsx("div",{className:"w-1 h-1 bg-foreground/50 rounded-r ml-px"})]})]})]}):null},Hf=({onInstall:e,onDismiss:t})=>{const[r,s]=Ne.useState(!1),{t:a,isRTL:i}=cr(),o=()=>{s(!0),null==t||t()};return r?null:n.jsx(Eu,{className:_u("fixed bottom-20 left-4 right-4 z-50 shadow-lg border-2 border-primary/20","animate-slide-up"),children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:_u("flex items-center gap-3",i&&"flex-row-reverse"),children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:n.jsx(Ch,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:_u("flex-1",i&&"text-right"),children:[n.jsx("h3",{className:"font-semibold text-sm mb-1",children:i?"تثبيت التطبيق":"Install MWRD App"}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:i?"احصل على تجربة أفضل مع التطبيق المثبت على جهازك":"Get the best experience with our installed app"}),n.jsxs("div",{className:_u("flex gap-2",i&&"flex-row-reverse"),children:[n.jsxs(ku,{size:"sm",onClick:()=>{e(),s(!0)},className:"flex items-center gap-2 text-xs",children:[n.jsx(Sm,{className:"h-3 w-3"}),i?"تثبيت":"Install"]}),n.jsx(ku,{size:"sm",variant:"ghost",onClick:o,className:"text-xs",children:i?"لاحقاً":"Later"})]})]}),n.jsx(ku,{variant:"ghost",size:"icon",onClick:o,className:"h-6 w-6 shrink-0",children:n.jsx(sp,{className:"h-3 w-3"})})]})})})},Yf=({isOffline:e,onDismiss:t})=>{const{t:r,isRTL:s}=cr();return e?n.jsx(Eu,{className:_u("fixed top-4 left-4 right-4 z-50 border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950","animate-slide-down"),children:n.jsx(Au,{className:"p-3",children:n.jsxs("div",{className:_u("flex items-center gap-3",s&&"flex-row-reverse"),children:[n.jsx(tp,{className:"h-4 w-4 text-orange-600 shrink-0"}),n.jsxs("div",{className:_u("flex-1",s&&"text-right"),children:[n.jsx("p",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:s?"غير متصل بالإنترنت":"No internet connection"}),n.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-300",children:s?"بعض الميزات قد لا تعمل بشكل صحيح":"Some features may not work properly"})]}),t&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:t,className:"h-6 w-6 shrink-0 hover:bg-orange-100 dark:hover:bg-orange-900",children:n.jsx(sp,{className:"h-3 w-3"})})]})})}):null},Kf=({children:e})=>{const t=Nt(),{isMobile:r,isTablet:s,orientation:a,screenSize:i}=ff(),{isInstalled:o,isInstallable:l,installApp:c}=(()=>{const[e,t]=Ne.useState(!1),[r,n]=Ne.useState(!1),[s,a]=Ne.useState(null);return Ne.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,r=window.matchMedia("(display-mode: fullscreen)").matches,n=window.matchMedia("(display-mode: minimal-ui)").matches;t(e||r||n)})();const e=e=>{e.preventDefault(),a(e),n(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),{isInstalled:e,isInstallable:r,installApp:async()=>{if(!s)return!1;s.prompt();const e=await s.userChoice;return"accepted"===e.outcome&&(t(!0),n(!1)),a(null),"accepted"===e.outcome}}})(),{isNative:d,networkStatus:u,triggerHaptic:m}=Bf(),[h,p]=Ne.useState(!1);Ne.useEffect(()=>{u&&p(!u.connected)},[u]);const f=r&&!["/login","/register","/forgot-password","/reset-password"].includes(t.pathname),x=!d||r;return r||s?n.jsxs("div",{className:_u("min-h-screen bg-background flex flex-col","mobile-app-shell","landscape"===a&&r&&"landscape-mode"),children:[d&&n.jsx(Wf,{}),n.jsx(Yf,{isOffline:h,onDismiss:()=>p(!1)}),!d&&l&&n.jsx(Hf,{onInstall:async()=>{await m();await c()}}),x&&n.jsx(Vf,{}),n.jsx("main",{className:_u("flex-1 overflow-auto",f&&"pb-16","safe-area-padding"),children:e||n.jsx(qt,{})}),f&&n.jsx($f,{})]}):n.jsx(n.Fragment,{children:e||n.jsx(qt,{})})},Gf=Dr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary-hover shadow-sm",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary-hover",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",success:"border-transparent bg-success text-success-foreground hover:bg-success/90 shadow-sm",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm",info:"border-transparent bg-info text-info-foreground hover:bg-info/90 shadow-sm",accent:"border-transparent bg-accent text-accent-foreground hover:bg-accent-hover shadow-sm",outline:"border border-border text-foreground bg-background hover:bg-secondary hover:border-border-strong",ghost:"border-transparent text-muted-foreground hover:bg-secondary hover:text-foreground",premium:"border-transparent bg-gradient-primary text-white shadow-sm hover:shadow-primary/30"},size:{sm:"px-2 py-0.5 text-xs",default:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"},rounded:{default:"rounded-full",sm:"rounded-md",lg:"rounded-lg"}},defaultVariants:{variant:"default",size:"default",rounded:"default"}});function Xf({className:e,variant:t,size:r,rounded:s,...a}){return n.jsx("div",{className:_u(Gf({variant:t,size:r,rounded:s}),e),...a})}function Qf(e,[t,r]){return Math.min(r,Math.max(t,e))}var Zf="ScrollArea",[Jf,ex]=o(Zf),[tx,rx]=Jf(Zf),nx=Ne.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:i,scrollHideDelay:o=600,...c}=e,[d,u]=Ne.useState(null),[m,h]=Ne.useState(null),[p,f]=Ne.useState(null),[x,g]=Ne.useState(null),[y,j]=Ne.useState(null),[b,w]=Ne.useState(0),[N,_]=Ne.useState(0),[S,k]=Ne.useState(!1),[C,E]=Ne.useState(!1),O=l(t,e=>u(e)),M=v(i);return n.jsx(tx,{scope:r,type:s,dir:M,scrollHideDelay:o,scrollArea:d,viewport:m,onViewportChange:h,content:p,onContentChange:f,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:k,scrollbarY:y,onScrollbarYChange:j,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:_,children:n.jsx(a.div,{dir:M,...c,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});nx.displayName=Zf;var sx="ScrollAreaViewport",ax=Ne.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,asChild:i,nonce:o,...c}=e,d=rx(sx,r),u=Ne.useRef(null),m=l(t,u,d.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n"},nonce:o}),n.jsx(a.div,{"data-radix-scroll-area-viewport":"",...c,asChild:i,ref:m,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Ax({asChild:i,children:s},e=>n.jsx("div",{"data-radix-scroll-area-content":"",ref:d.onContentChange,style:{minWidth:d.scrollbarXEnabled?"fit-content":void 0},children:e}))})]})});ax.displayName=sx;var ix="ScrollAreaScrollbar",ox=Ne.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=rx(ix,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l="horizontal"===e.orientation;return Ne.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),"hover"===a.type?n.jsx(lx,{...s,ref:t,forceMount:r}):"scroll"===a.type?n.jsx(cx,{...s,ref:t,forceMount:r}):"auto"===a.type?n.jsx(dx,{...s,ref:t,forceMount:r}):"always"===a.type?n.jsx(ux,{...s,ref:t}):null});ox.displayName=ix;var lx=Ne.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=rx(ix,e.__scopeScrollArea),[i,o]=Ne.useState(!1);return Ne.useEffect(()=>{const e=a.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),o(!0)},n=()=>{t=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(u,{present:r||i,children:n.jsx(dx,{"data-state":i?"visible":"hidden",...s,ref:t})})}),cx=Ne.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=rx(ix,e.__scopeScrollArea),i="horizontal"===e.orientation,o=Mx(()=>c("SCROLL_END"),100),[l,c]=(d="hidden",m={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},Ne.useReducer((e,t)=>m[e][t]??e,d));var d,m;return Ne.useEffect(()=>{if("idle"===l){const e=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[l,a.scrollHideDelay,c]),Ne.useEffect(()=>{const e=a.viewport,t=i?"scrollLeft":"scrollTop";if(e){let r=e[t];const n=()=>{const n=e[t];r!==n&&(c("SCROLL"),o()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[a.viewport,i,c,o]),n.jsx(u,{present:r||"hidden"!==l,children:n.jsx(ux,{"data-state":"hidden"===l?"hidden":"visible",...s,ref:t,onPointerEnter:h(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:h(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),dx=Ne.forwardRef((e,t)=>{const r=rx(ix,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,o]=Ne.useState(!1),l="horizontal"===e.orientation,c=Mx(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?e:t)}},10);return Px(r.viewport,c),Px(r.content,c),n.jsx(u,{present:s||i,children:n.jsx(ux,{"data-state":i?"visible":"hidden",...a,ref:t})})}),ux=Ne.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=rx(ix,e.__scopeScrollArea),i=Ne.useRef(null),o=Ne.useRef(0),[l,c]=Ne.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=_x(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function m(e,t){return function(e,t,r,n="ltr"){const s=Sx(r),a=s/2,i=t||a,o=s-i,l=r.scrollbar.paddingStart+i,c=r.scrollbar.size-r.scrollbar.paddingEnd-o,d=r.content-r.viewport,u="ltr"===n?[0,d]:[-1*d,0];return Cx([l,c],u)(e)}(e,o.current,l,t)}return"horizontal"===r?n.jsx(mx,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=kx(a.viewport.scrollLeft,l,a.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=m(e,a.dir))}}):"vertical"===r?n.jsx(hx,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=kx(a.viewport.scrollTop,l);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=m(e))}}):null}),mx=Ne.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=rx(ix,e.__scopeScrollArea),[o,c]=Ne.useState(),d=Ne.useRef(null),u=l(t,d,i.onScrollbarXChange);return Ne.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(xx,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sx(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){const n=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),Ex(n,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Nx(o.paddingLeft),paddingEnd:Nx(o.paddingRight)}})}})}),hx=Ne.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=rx(ix,e.__scopeScrollArea),[o,c]=Ne.useState(),d=Ne.useRef(null),u=l(t,d,i.onScrollbarYChange);return Ne.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(xx,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sx(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){const n=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),Ex(n,r)&&t.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Nx(o.paddingTop),paddingEnd:Nx(o.paddingBottom)}})}})}),[px,fx]=Jf(ix),xx=Ne.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:i,onThumbChange:o,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:p,onWheelScroll:f,onResize:x,...g}=e,v=rx(ix,r),[y,j]=Ne.useState(null),b=l(t,e=>j(e)),w=Ne.useRef(null),N=Ne.useRef(""),_=v.viewport,S=s.content-s.viewport,k=m(f),C=m(u),E=Mx(x,10);function O(e){if(w.current){const t=e.clientX-w.current.left,r=e.clientY-w.current.top;p({x:t,y:r})}}return Ne.useEffect(()=>{const e=e=>{const t=e.target;(null==y?void 0:y.contains(t))&&k(e,S)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[_,y,S,k]),Ne.useEffect(C,[s,C]),Px(y,E),Px(v.content,E),n.jsx(px,{scope:r,scrollbar:y,hasThumb:i,onThumbChange:m(o),onThumbPointerUp:m(c),onThumbPositionChange:C,onThumbPointerDown:m(d),children:n.jsx(a.div,{...g,ref:b,style:{position:"absolute",...g.style},onPointerDown:h(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),w.current=y.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),O(e)}}),onPointerMove:h(e.onPointerMove,O),onPointerUp:h(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=N.current,v.viewport&&(v.viewport.style.scrollBehavior=""),w.current=null})})})}),gx="ScrollAreaThumb",vx=Ne.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=fx(gx,e.__scopeScrollArea);return n.jsx(u,{present:r||a.hasThumb,children:n.jsx(yx,{ref:t,...s})})}),yx=Ne.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...i}=e,o=rx(gx,r),c=fx(gx,r),{onThumbPositionChange:d}=c,u=l(t,e=>c.onThumbChange(e)),m=Ne.useRef(),p=Mx(()=>{m.current&&(m.current(),m.current=void 0)},100);return Ne.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(p(),!m.current){const t=Ox(e,d);m.current=t,d()}};return d(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,p,d]),n.jsx(a.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:h(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;c.onThumbPointerDown({x:r,y:n})}),onPointerUp:h(e.onPointerUp,c.onThumbPointerUp)})});vx.displayName=gx;var jx="ScrollAreaCorner",bx=Ne.forwardRef((e,t)=>{const r=rx(jx,e.__scopeScrollArea),s=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&s?n.jsx(wx,{...e,ref:t}):null});bx.displayName=jx;var wx=Ne.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,i=rx(jx,r),[o,l]=Ne.useState(0),[c,d]=Ne.useState(0),u=Boolean(o&&c);return Px(i.scrollbarX,()=>{var e;const t=(null==(e=i.scrollbarX)?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),d(t)}),Px(i.scrollbarY,()=>{var e;const t=(null==(e=i.scrollbarY)?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),l(t)}),u?n.jsx(a.div,{...s,ref:t,style:{width:o,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function Nx(e){return e?parseInt(e,10):0}function _x(e,t){const r=e/t;return isNaN(r)?0:r}function Sx(e){const t=_x(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function kx(e,t,r="ltr"){const n=Sx(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,o=a-n,l=Qf(e,"ltr"===r?[0,i]:[-1*i,0]);return Cx([0,i],[0,o])(l)}function Cx(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Ex(e,t){return e>0&&e<t}var Ox=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,o=r.top!==a.top;(i||o)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Mx(e,t){const r=m(e),n=Ne.useRef(0);return Ne.useEffect(()=>()=>window.clearTimeout(n.current),[]),Ne.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Px(e,t){const r=m(t);x(()=>{let t=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}function Ax(e,t){const{asChild:r,children:n}=e;if(!r)return"function"==typeof t?t(n):t;const s=Ne.Children.only(n);return Ne.cloneElement(s,{children:"function"==typeof t?t(s.props.children):t})}var Tx=nx,Dx=ax,Rx=bx;const Lx=Ne.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Tx,{ref:s,className:_u("relative overflow-hidden",e),...r,children:[n.jsx(Dx,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(qx,{}),n.jsx(Rx,{})]}));Lx.displayName=Tx.displayName;const qx=Ne.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(ox,{ref:s,orientation:t,className:_u("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(vx,{className:"relative flex-1 rounded-full bg-border"})}));qx.displayName=ox.displayName;var Ix="Avatar",[Fx,zx]=o(Ix),[Bx,$x]=Fx(Ix),Ux=Ne.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[i,o]=Ne.useState("idle");return n.jsx(Bx,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:n.jsx(a.span,{...s,ref:t})})});Ux.displayName=Ix;var Vx="AvatarImage",Wx=Ne.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:i=()=>{},...o}=e,l=$x(Vx,r),c=function(e,t){const[r,n]=Ne.useState("idle");return x(()=>{if(!e)return void n("error");let r=!0;const s=new window.Image,a=e=>()=>{r&&n(e)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(s,o.referrerPolicy),d=m(e=>{i(e),l.onImageLoadingStatusChange(e)});return x(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?n.jsx(a.img,{...o,ref:t,src:s}):null});Wx.displayName=Vx;var Hx="AvatarFallback",Yx=Ne.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...i}=e,o=$x(Hx,r),[l,c]=Ne.useState(void 0===s);return Ne.useEffect(()=>{if(void 0!==s){const e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),l&&"loaded"!==o.imageLoadingStatus?n.jsx(a.span,{...i,ref:t}):null});Yx.displayName=Hx;var Kx=Ux,Gx=Wx,Xx=Yx;const Qx=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Kx,{ref:r,className:_u("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Qx.displayName=Kx.displayName;const Zx=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Gx,{ref:r,className:_u("aspect-square h-full w-full",e),...t}));Zx.displayName=Gx.displayName;const Jx=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Xx,{ref:r,className:_u("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Jx.displayName=Xx.displayName;const eg=({variant:e="sidebar",collapsed:t=!1})=>{var r;const{user:s,userProfile:a}=br(),i=(null==a?void 0:a.company_name)||"Company",o=(null==a?void 0:a.full_name)||(null==(r=null==s?void 0:s.email)?void 0:r.split("@")[0])||"User",l=(null==a?void 0:a.id)||"",c=(null==a?void 0:a.role)||"user",d=i.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)||"C";return t&&"sidebar"===e?n.jsxs("div",{className:"flex flex-col items-center py-2",children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==a?void 0:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary text-xs font-semibold border border-primary/20",children:d})]}),n.jsx("div",{className:"mt-1 w-1 h-1 bg-success rounded-full",title:"Online"})]}):n.jsxs("div",{className:_u("flex items-center gap-3","mobile"===e?"px-4 py-3":"px-3 py-2"),children:[n.jsxs(Qx,{className:_u("mobile"===e?"h-10 w-10":"h-8 w-8"),children:[n.jsx(Zx,{src:null==a?void 0:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold border border-primary/20",children:d})]}),n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-1",children:n.jsx("span",{className:_u("font-semibold truncate text-foreground","mobile"===e?"text-base":"text-sm"),children:i})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:_u("font-medium truncate text-foreground","mobile"===e?"text-sm":"text-xs"),children:o}),n.jsx(Xf,{variant:"secondary",className:"text-xs px-1.5 py-0.5 bg-primary/10 text-primary border border-primary/20 capitalize",children:c})]}),!t&&l&&n.jsxs("span",{className:_u("text-muted-foreground truncate","text-xs"),children:["ID: ",l.slice(0,8),"..."]})]})]})},tg=({className:e,collapsed:t=!1,onToggle:r})=>{const s=Nt(),{userProfile:a}=br(),{t:i,isRTL:o}=cr(),[l,c]=Ne.useState(()=>{const e=localStorage.getItem("clientSidebarExpanded");if(e)try{return new Set(JSON.parse(e))}catch{return new Set(["overview","workspace"])}return new Set(["overview","workspace"])}),d=[{id:"overview",label:i("clientGroups.overview"),priority:"primary",items:[{name:i("nav.dashboard"),href:"/dashboard",icon:Ym},{name:i("nav.analytics"),href:"/analytics",icon:Ju}]},{id:"workspace",label:i("clientGroups.workspace"),priority:"primary",items:[{name:i("nav.requests"),href:"/requests",icon:Tm},..."supplier"===(null==a?void 0:a.role)?[{name:i("nav.browseRequests"),href:"/browse-requests",icon:Rm},{name:i("nav.myOffers"),href:"/my-offers",icon:dh}]:[],{name:i("nav.orders"),href:"/orders",icon:kh},{name:i("nav.messages"),href:"/messages",icon:nh}]},{id:"network",label:i("clientGroups.network"),priority:"secondary",items:[{name:i("nav.vendors"),href:"/vendors",icon:Zh}]},{id:"account",label:i("clientGroups.account"),priority:"utility",items:[{name:i("nav.profile"),href:"/profile",icon:Xh},{name:i("nav.manageSubscription"),href:"/manage-subscription",icon:bm},{name:i("nav.settings"),href:"/settings",icon:Nh},{name:i("nav.support"),href:"/support",icon:pm}]}],u=e=>s.pathname===e,m=e=>s.pathname.startsWith(e)&&"/dashboard"!==e,h=e=>{const t=o?"border-r-2":"border-l-2";switch(e){case"primary":return`${t} ${o?"border-r-primary/20":"border-l-primary/20"} bg-primary/5`;case"secondary":return`${t} ${o?"border-r-accent/20":"border-l-accent/20"} bg-accent/5`;case"utility":return`${t} ${o?"border-r-muted-foreground/20":"border-l-muted-foreground/20"} bg-muted/50`;default:return""}};return n.jsxs("div",{className:_u("flex flex-col h-screen bg-card transition-all duration-300 shadow-sm fixed top-0 z-40",o?"border-l border-border right-0":"border-r border-border left-0",t?"w-16":"w-64",e),dir:o?"rtl":"ltr",children:[n.jsx("div",{className:"border-b border-border bg-card min-h-16 flex items-center",children:n.jsx(eg,{variant:"sidebar",collapsed:t})}),n.jsx(Lx,{className:"flex-1",children:n.jsx("div",{className:"p-3 space-y-3",children:d.map(e=>{const r=!t&&l.has(e.id),s=e.items.some(e=>u(e.href)||m(e.href));return n.jsxs("div",{className:_u("rounded-lg transition-all duration-200",h(e.priority)),children:[!t&&n.jsxs(ku,{variant:"ghost",onClick:()=>(e=>{if(t)return;const r=new Set(l);r.has(e)?r.delete(e):r.add(e),c(r),localStorage.setItem("clientSidebarExpanded",JSON.stringify(Array.from(r)))})(e.id),className:_u("w-full justify-between px-3 py-2 h-auto font-medium","text-xs uppercase tracking-wider","text-muted-foreground hover:text-foreground hover:bg-accent/50",s&&"text-primary font-semibold",o&&"flex-row-reverse"),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{children:e.label}),s&&n.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-pulse"})]}),r?n.jsx(am,{className:_u("h-3 w-3 transition-transform duration-200",o&&"rotate-180")}):n.jsx(om,{className:_u("h-3 w-3 transition-transform duration-200",o&&"rotate-180")})]}),n.jsx("div",{className:_u("space-y-1 transition-all duration-300",t||r?"block":"hidden",!t&&"px-2 pb-2"),children:e.items.map(e=>{const r=u(e.href)||m(e.href);return n.jsxs(Zt,{to:e.href,className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium hover:bg-accent/50",t?"justify-center px-2":o?"justify-end":"justify-start",r?"bg-primary/10 text-primary border border-primary/20 shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent/30"),title:t?e.name:void 0,"aria-label":`${i("nav.navigateTo")} ${e.name}`,"aria-current":r?"page":void 0,children:[o&&!t?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"truncate flex-1 text-foreground",children:e.name}),n.jsx(e.icon,{className:_u("shrink-0 transition-all duration-200",t?"h-5 w-5":"h-4 w-4",r?"text-primary":"text-muted-foreground")})]}):n.jsxs(n.Fragment,{children:[n.jsx(e.icon,{className:_u("shrink-0 transition-all duration-200",t?"h-5 w-5":"h-4 w-4",r?"text-primary":"text-muted-foreground")}),!t&&n.jsx("span",{className:"truncate flex-1 text-foreground",children:e.name})]}),!t&&n.jsx(n.Fragment,{children:e.badge&&e.badge>0&&n.jsx(Xf,{variant:"success"===e.badgeVariant||"warning"===e.badgeVariant?"secondary":e.badgeVariant||"secondary",className:_u("h-5 min-w-5 px-1.5 text-xs flex items-center justify-center shrink-0","destructive"===e.badgeVariant&&"animate-pulse"),children:e.badge>99?"99+":e.badge})})]},e.href)})})]},e.id)})})})]})};function rg(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function ng(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function sg(...e){return t=>{let r=!1;const n=e.map(e=>{const n=ng(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():ng(e[t],null)}}}}function ag(...e){return Ne.useCallback(sg(...e),e)}function ig(e,t=[]){let r=[];const s=()=>{const t=r.map(e=>Ne.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return Ne.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return s.scopeName=e,[function(t,s){const a=Ne.createContext(s),i=r.length;r=[...r,s];const o=t=>{var r;const{scope:s,children:o,...l}=t,c=(null==(r=null==s?void 0:s[e])?void 0:r[i])||a,d=Ne.useMemo(()=>l,Object.values(l));return n.jsx(c.Provider,{value:d,children:o})};return o.displayName=t+"Provider",[o,function(r,n){var o;const l=(null==(o=null==n?void 0:n[e])?void 0:o[i])||a,c=Ne.useContext(l);if(c)return c;if(void 0!==s)return s;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},og(s,...t)]}function og(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return Ne.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}function lg(e){const t=cg(e),r=Ne.forwardRef((e,r)=>{const{children:s,...a}=e,i=Ne.Children.toArray(s),o=i.find(ug);if(o){const e=o.props.children,s=i.map(t=>t===o?Ne.Children.count(e)>1?Ne.Children.only(null):Ne.isValidElement(e)?e.props.children:null:t);return n.jsx(t,{...a,ref:r,children:Ne.isValidElement(e)?Ne.cloneElement(e,void 0,s):null})}return n.jsx(t,{...a,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}function cg(e){const t=Ne.forwardRef((e,t)=>{const{children:r,...n}=e;if(Ne.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;if(s)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{const t=a(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==Ne.Fragment&&(s.ref=t?sg(t,e):e),Ne.cloneElement(r,s)}return Ne.Children.count(r)>1?Ne.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dg=Symbol("radix.slottable");function ug(e){return Ne.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===dg}var mg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=lg(`Primitive.${t}`),s=Ne.forwardRef((e,s)=>{const{asChild:a,...i}=e,o=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),n.jsx(o,{...i,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function hg(e){const t=Ne.useRef(e);return Ne.useEffect(()=>{t.current=e}),Ne.useMemo(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}var pg,fg="dismissableLayer.update",xg="dismissableLayer.pointerDownOutside",gg="dismissableLayer.focusOutside",vg=Ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yg=Ne.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=Ne.useContext(vg),[u,m]=Ne.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=Ne.useState({}),f=ag(t,e=>m(e)),x=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(g),y=u?x.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,b=y>=v,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=hg(e),n=Ne.useRef(!1),s=Ne.useRef(()=>{});return Ne.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){bg(xg,r,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...d.branches].some(e=>e.contains(t));b&&!r&&(null==a||a(e),null==o||o(e),e.defaultPrevented||null==l||l())},h),N=function(e,t=(null==globalThis?void 0:globalThis.document)){const r=hg(e),n=Ne.useRef(!1);return Ne.useEffect(()=>{const e=e=>{if(e.target&&!n.current){bg(gg,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==i||i(e),null==o||o(e),e.defaultPrevented||null==l||l())},h);return function(e,t=(null==globalThis?void 0:globalThis.document)){const r=hg(e);Ne.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{y===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},h),Ne.useEffect(()=>{if(u)return r&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(pg=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),jg(),()=>{r&&1===d.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=pg)}},[u,h,r,d]),Ne.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),jg())},[u,d]),Ne.useEffect(()=>{const e=()=>p({});return document.addEventListener(fg,e),()=>document.removeEventListener(fg,e)},[]),n.jsx(mg.div,{...c,ref:f,style:{pointerEvents:j?b?"auto":"none":void 0,...e.style},onFocusCapture:rg(e.onFocusCapture,N.onFocusCapture),onBlurCapture:rg(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:rg(e.onPointerDownCapture,w.onPointerDownCapture)})});yg.displayName="DismissableLayer";function jg(){const e=new CustomEvent(fg);document.dispatchEvent(e)}function bg(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?function(e,t){e&&we.flushSync(()=>e.dispatchEvent(t))}(s,a):s.dispatchEvent(a)}Ne.forwardRef((e,t)=>{const r=Ne.useContext(vg),s=Ne.useRef(null),a=ag(t,s);return Ne.useEffect(()=>{const e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),n.jsx(mg.div,{...e,ref:a})}).displayName="DismissableLayerBranch";var wg=0;function Ng(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _g="focusScope.autoFocusOnMount",Sg="focusScope.autoFocusOnUnmount",kg={bubbles:!1,cancelable:!0},Cg=Ne.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=Ne.useState(null),d=hg(a),u=hg(i),m=Ne.useRef(null),h=ag(t,e=>c(e)),p=Ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Ne.useEffect(()=>{if(s){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:Pg(m.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Pg(m.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Pg(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[s,l,p.paused]),Ne.useEffect(()=>{if(l){Ag.add(p);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(_g,kg);l.addEventListener(_g,d),l.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Pg(n,{select:t}),document.activeElement!==r)return}((e=Eg(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Pg(l))}return()=>{l.removeEventListener(_g,d),setTimeout(()=>{const e=new CustomEvent(Sg,kg);l.addEventListener(Sg,u),l.dispatchEvent(e),e.defaultPrevented||Pg(t??document.body,{select:!0}),l.removeEventListener(Sg,u),Ag.remove(p)},0)}}var e},[l,d,u,p]);const f=Ne.useCallback(e=>{if(!r&&!s)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[s,a]=function(e){const t=Eg(e),r=Og(t,e),n=Og(t.reverse(),e);return[r,n]}(t);s&&a?e.shiftKey||n!==a?e.shiftKey&&n===s&&(e.preventDefault(),r&&Pg(a,{select:!0})):(e.preventDefault(),r&&Pg(s,{select:!0})):n===t&&e.preventDefault()}},[r,s,p.paused]);return n.jsx(mg.div,{tabIndex:-1,...o,ref:h,onKeyDown:f})});function Eg(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Og(e,t){for(const r of e)if(!Mg(r,{upTo:t}))return r}function Mg(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Pg(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Cg.displayName="FocusScope";var Ag=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=Tg(e,t),e.unshift(t)},remove(t){var r;e=Tg(e,t),null==(r=e[0])||r.resume()}}}();function Tg(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var Dg=(null==globalThis?void 0:globalThis.document)?Ne.useLayoutEffect:()=>{},Rg=_e[" useId ".trim().toString()]||(()=>{}),Lg=0;function qg(e){const[t,r]=Ne.useState(Rg());return Dg(()=>{e||r(e=>e??String(Lg++))},[e]),e||(t?`radix-${t}`:"")}var Ig=Ne.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(mg.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ig.displayName="Arrow";var Fg=Ig;var zg="Popper",[Bg,$g]=ig(zg),[Ug,Vg]=Bg(zg),Wg=e=>{const{__scopePopper:t,children:r}=e,[s,a]=Ne.useState(null);return n.jsx(Ug,{scope:t,anchor:s,onAnchorChange:a,children:r})};Wg.displayName=zg;var Hg="PopperAnchor",Yg=Ne.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=Vg(Hg,r),o=Ne.useRef(null),l=ag(t,o);return Ne.useEffect(()=>{i.onAnchorChange((null==s?void 0:s.current)||o.current)}),s?null:n.jsx(mg.div,{...a,ref:l})});Yg.displayName=Hg;var Kg="PopperContent",[Gg,Xg]=Bg(Kg),Qg=Ne.forwardRef((e,t)=>{var r,s,a,i,o,l;const{__scopePopper:c,side:d="bottom",sideOffset:u=0,align:m="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:f=!0,collisionBoundary:x=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:E=!1,updatePositionStrategy:O="optimized",onPlaced:M,...P}=e,A=Vg(Kg,c),[T,D]=Ne.useState(null),R=ag(t,e=>D(e)),[L,q]=Ne.useState(null),I=function(e){const[t,r]=Ne.useState(void 0);return Dg(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let s,a;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(L),F=(null==I?void 0:I.width)??0,z=(null==I?void 0:I.height)??0,B=d+("center"!==m?"-"+m:""),$="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},U=Array.isArray(x)?x:[x],V=U.length>0,W={padding:$,boundary:U.filter(tv),altBoundary:V},{refs:H,floatingStyles:Y,placement:K,isPositioned:G,middlewareData:X}=y({strategy:"fixed",placement:B,whileElementsMounted:(...e)=>j(...e,{animationFrame:"always"===O}),elements:{reference:A.anchor},middleware:[b({mainAxis:u+z,alignmentAxis:h}),f&&w({mainAxis:!0,crossAxis:!1,limiter:"partial"===v?C():void 0,...W}),f&&N({...W}),_({...W,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:s,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${s}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}}),L&&S({element:L,padding:p}),rv({arrowWidth:F,arrowHeight:z}),E&&k({strategy:"referenceHidden",...W})]}),[Q,Z]=nv(K),J=hg(M);Dg(()=>{G&&(null==J||J())},[G,J]);const ee=null==(r=X.arrow)?void 0:r.x,te=null==(s=X.arrow)?void 0:s.y,re=0!==(null==(a=X.arrow)?void 0:a.centerOffset),[ne,se]=Ne.useState();return Dg(()=>{T&&se(window.getComputedStyle(T).zIndex)},[T]),n.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:G?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[null==(i=X.transformOrigin)?void 0:i.x,null==(o=X.transformOrigin)?void 0:o.y].join(" "),...(null==(l=X.hide)?void 0:l.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(Gg,{scope:c,placedSide:Q,onArrowChange:q,arrowX:ee,arrowY:te,shouldHideArrow:re,children:n.jsx(mg.div,{"data-side":Q,"data-align":Z,...P,ref:R,style:{...P.style,animation:G?void 0:"none"}})})})});Qg.displayName=Kg;var Zg="PopperArrow",Jg={top:"bottom",right:"left",bottom:"top",left:"right"},ev=Ne.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=Xg(Zg,r),i=Jg[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(Fg,{...s,ref:t,style:{...s.style,display:"block"}})})});function tv(e){return null!==e}ev.displayName=Zg;var rv=e=>({name:"transformOrigin",options:e,fn(t){var r,n,s;const{placement:a,rects:i,middlewareData:o}=t,l=0!==(null==(r=o.arrow)?void 0:r.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,m]=nv(a),h={start:"0%",center:"50%",end:"100%"}[m],p=((null==(n=o.arrow)?void 0:n.x)??0)+c/2,f=((null==(s=o.arrow)?void 0:s.y)??0)+d/2;let x="",g="";return"bottom"===u?(x=l?h:`${p}px`,g=-d+"px"):"top"===u?(x=l?h:`${p}px`,g=`${i.floating.height+d}px`):"right"===u?(x=-d+"px",g=l?h:`${f}px`):"left"===u&&(x=`${i.floating.width+d}px`,g=l?h:`${f}px`),{data:{x:x,y:g}}}});function nv(e){const[t,r="center"]=e.split("-");return[t,r]}var sv=Wg,av=Yg,iv=Qg,ov=ev,lv=Ne.forwardRef((e,t)=>{var r;const{container:s,...a}=e,[i,o]=Ne.useState(!1);Dg(()=>o(!0),[]);const l=s||i&&(null==(r=null==globalThis?void 0:globalThis.document)?void 0:r.body);return l?Se.createPortal(n.jsx(mg.div,{...a,ref:t}),l):null});lv.displayName="Portal";var cv=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=Ne.useState(),n=Ne.useRef(null),s=Ne.useRef(e),a=Ne.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return Ne.useReducer((e,r)=>t[e][r]??e,e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ne.useEffect(()=>{const e=dv(n.current);a.current="mounted"===o?e:"none"},[o]),Dg(()=>{const t=n.current,r=s.current;if(r!==e){const n=a.current,i=dv(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),Dg(()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,i=a=>{const i=dv(n.current).includes(a.animationName);if(a.target===t&&i&&(l("ANIMATION_END"),!s.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)})}},o=e=>{e.target===t&&(a.current=dv(n.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Ne.useCallback(e=>{n.current=e?getComputedStyle(e):null,r(e)},[])}}(t),s="function"==typeof r?r({present:n.isPresent}):Ne.Children.only(r),a=ag(n.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;if(s)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof r||n.isPresent?Ne.cloneElement(s,{ref:a}):null};function dv(e){return(null==e?void 0:e.animationName)||"none"}cv.displayName="Presence";var uv=_e[" useInsertionEffect ".trim().toString()]||Dg;function mv({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,i]=function({defaultProp:e,onChange:t}){const[r,n]=Ne.useState(e),s=Ne.useRef(r),a=Ne.useRef(t);return uv(()=>{a.current=t},[t]),Ne.useEffect(()=>{var e;s.current!==r&&(null==(e=a.current)||e.call(a,r),s.current=r)},[r,s]),[r,n,a]}({defaultProp:t,onChange:r}),o=void 0!==e,l=o?e:s;{const t=Ne.useRef(void 0!==e);Ne.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,n])}const c=Ne.useCallback(t=>{var r;if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&(null==(r=i.current)||r.call(i,n))}else a(t)},[o,e,a,i]);return[l,c]}var hv=E(),pv=function(){},fv=Ne.forwardRef(function(e,t){var r=Ne.useRef(null),n=Ne.useState({onScrollCapture:pv,onWheelCapture:pv,onTouchMoveCapture:pv}),s=n[0],a=n[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,f=e.inert,x=e.allowPinchZoom,g=e.as,v=void 0===g?"div":g,y=e.gapMode,j=O(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=m,w=M([r,t]),N=P(P({},j),s);return Ne.createElement(Ne.Fragment,null,d&&Ne.createElement(b,{sideCar:hv,removeScrollBar:c,shards:u,noRelative:h,noIsolation:p,inert:f,setCallbacks:a,allowPinchZoom:!!x,lockRef:r,gapMode:y}),i?Ne.cloneElement(Ne.Children.only(o),P(P({},N),{ref:w})):Ne.createElement(v,P({},N,{className:l,ref:w}),o))});fv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},fv.classNames={fullWidth:A,zeroRight:T};var xv=!1;if("undefined"!=typeof window)try{var gv=Object.defineProperty({},"passive",{get:function(){return xv=!0,!0}});window.addEventListener("test",gv,gv),window.removeEventListener("test",gv,gv)}catch(hte){xv=!1}var vv=!!xv&&{passive:!1},yv=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},jv=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),bv(e,n)){var s=wv(e,n);if(s[1]>s[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},bv=function(e,t){return"v"===e?function(e){return yv(e,"overflowY")}(t):function(e){return yv(e,"overflowX")}(t)},wv=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},Nv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_v=function(e){return[e.deltaX,e.deltaY]},Sv=function(e){return e&&"current"in e?e.current:e},kv=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Cv=0,Ev=[];function Ov(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Mv=q(hv,function(e){var t=Ne.useRef([]),r=Ne.useRef([0,0]),n=Ne.useRef(),s=Ne.useState(Cv++)[0],a=Ne.useState(D)[0],i=Ne.useRef(e);Ne.useEffect(function(){i.current=e},[e]),Ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=R([e.lockRef.current],(e.shards||[]).map(Sv),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=Ne.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var s,a=Nv(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=jv(u,d);if(!m)return!0;if(m?s=u:(s="v"===u?"h":"v",m=jv(u,d)),!m)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var h=n.current||s;return function(e,t,r,n,s){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=a*n,o=r.target,l=t.contains(o),c=!1,d=i>0,u=0,m=0;do{if(!o)break;var h=wv(e,o),p=h[0],f=h[1]-h[2]-a*p;(p||f)&&bv(e,o)&&(u+=f,m+=p);var x=o.parentNode;o=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return d&&(Math.abs(u)<1||!s)?c=!0:d||!(Math.abs(m)<1)&&s||(c=!0),c}(h,t,e,"h"===h?l:c,!0)},[]),l=Ne.useCallback(function(e){var r=e;if(Ev.length&&Ev[Ev.length-1]===a){var n="deltaY"in r?_v(r):Nv(r),s=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&(t=e.delta,s=n,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)r.cancelable&&r.preventDefault();else if(!s){var l=(i.current.shards||[]).map(Sv).filter(Boolean).filter(function(e){return e.contains(r.target)});(l.length>0?o(r,l[0]):!i.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),c=Ne.useCallback(function(e,r,n,s){var a={name:e,delta:r,target:n,should:s,shadowParent:Ov(n)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=Ne.useCallback(function(e){r.current=Nv(e),n.current=void 0},[]),u=Ne.useCallback(function(t){c(t.type,_v(t),t.target,o(t,e.lockRef.current))},[]),m=Ne.useCallback(function(t){c(t.type,Nv(t),t.target,o(t,e.lockRef.current))},[]);Ne.useEffect(function(){return Ev.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,vv),document.addEventListener("touchmove",l,vv),document.addEventListener("touchstart",d,vv),function(){Ev=Ev.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,vv),document.removeEventListener("touchmove",l,vv),document.removeEventListener("touchstart",d,vv)}},[]);var h=e.removeScrollBar,p=e.inert;return Ne.createElement(Ne.Fragment,null,p?Ne.createElement(a,{styles:kv(s)}):null,h?Ne.createElement(L,{noRelative:e.noRelative,gapMode:e.gapMode}):null)});var Pv=Ne.forwardRef(function(e,t){return Ne.createElement(fv,P({},e,{ref:t,sideCar:Mv}))});Pv.classNames=fv.classNames;var Av="Popover",[Tv,Dv]=ig(Av,[$g]),Rv=$g(),[Lv,qv]=Tv(Av),Iv=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Rv(t),c=Ne.useRef(null),[d,u]=Ne.useState(!1),[m,h]=mv({prop:s,defaultProp:a??!1,onChange:i,caller:Av});return n.jsx(sv,{...l,children:n.jsx(Lv,{scope:t,contentId:qg(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:Ne.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:d,onCustomAnchorAdd:Ne.useCallback(()=>u(!0),[]),onCustomAnchorRemove:Ne.useCallback(()=>u(!1),[]),modal:o,children:r})})};Iv.displayName=Av;var Fv="PopoverAnchor";Ne.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=qv(Fv,r),i=Rv(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return Ne.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(av,{...i,...s,ref:t})}).displayName=Fv;var zv="PopoverTrigger",Bv=Ne.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=qv(zv,r),i=Rv(r),o=ag(t,a.triggerRef),l=n.jsx(mg.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Jv(a.open),...s,ref:o,onClick:rg(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(av,{asChild:!0,...i,children:l})});Bv.displayName=zv;var $v="PopoverPortal",[Uv,Vv]=Tv($v,{forceMount:void 0}),Wv=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,i=qv($v,t);return n.jsx(Uv,{scope:t,forceMount:r,children:n.jsx(cv,{present:r||i.open,children:n.jsx(lv,{asChild:!0,container:a,children:s})})})};Wv.displayName=$v;var Hv="PopoverContent",Yv=Ne.forwardRef((e,t)=>{const r=Vv(Hv,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,i=qv(Hv,e.__scopePopover);return n.jsx(cv,{present:s||i.open,children:i.modal?n.jsx(Gv,{...a,ref:t}):n.jsx(Xv,{...a,ref:t})})});Yv.displayName=Hv;var Kv=lg("PopoverContent.RemoveScroll"),Gv=Ne.forwardRef((e,t)=>{const r=qv(Hv,e.__scopePopover),s=Ne.useRef(null),a=ag(t,s),i=Ne.useRef(!1);return Ne.useEffect(()=>{const e=s.current;if(e)return I(e)},[]),n.jsx(Pv,{as:Kv,allowPinchZoom:!0,children:n.jsx(Qv,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rg(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),i.current||null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:rg(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;i.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:rg(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Xv=Ne.forwardRef((e,t)=>{const r=qv(Hv,e.__scopePopover),s=Ne.useRef(!1),a=Ne.useRef(!1);return n.jsx(Qv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,i;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(s.current||null==(i=r.triggerRef.current)||i.focus(),t.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:t=>{var n,i;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const o=t.target;(null==(i=r.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),Qv=Ne.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,h=qv(Hv,r),p=Rv(r);return Ne.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ng()),document.body.insertAdjacentElement("beforeend",e[1]??Ng()),wg++,()=>{1===wg&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),wg--}},[]),n.jsx(Cg,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(yg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:n.jsx(iv,{"data-state":Jv(h.open),role:"dialog",id:h.contentId,...p,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zv="PopoverClose";Ne.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=qv(Zv,r);return n.jsx(mg.button,{type:"button",...s,ref:t,onClick:rg(e.onClick,()=>a.onOpenChange(!1))})}).displayName=Zv;function Jv(e){return e?"open":"closed"}Ne.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Rv(r);return n.jsx(ov,{...a,...s,ref:t})}).displayName="PopoverArrow";var ey=Wv,ty=Yv;const ry=Iv,ny=Bv,sy=Ne.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(ey,{children:n.jsx(ty,{ref:a,align:t,sideOffset:r,className:_u("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));sy.displayName=ty.displayName;var ay="horizontal",iy=["horizontal","vertical"],oy=Ne.forwardRef((e,t)=>{const{decorative:r,orientation:s=ay,...i}=e,o=function(e){return iy.includes(e)}(s)?s:ay,l=r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return n.jsx(a.div,{"data-orientation":o,...l,...i,ref:t})});oy.displayName="Separator";var ly=oy;const cy=Ne.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(ly,{ref:a,decorative:r,orientation:t,className:_u("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...s}));cy.displayName=ly.displayName;const dy=()=>{const{toast:e}=fp();return{showSuccess:Ne.useCallback(t=>{e({title:"Success",description:t,variant:"default"})},[e]),showError:Ne.useCallback(t=>{e({title:"Error",description:t,variant:"destructive"})},[e]),showWarning:Ne.useCallback(t=>{e({title:"Warning",description:t})},[e]),showInfo:Ne.useCallback(t=>{e({title:"Info",description:t})},[e])}},uy=()=>{const{user:e}=br(),{toast:t}=fp(),{sendOfferNotification:r,sendRequestApprovalNotification:n,sendOfferStatusNotification:s}=(()=>{const[e,t]=Ne.useState(!1),{showError:r,showSuccess:n}=dy(),s=or("useEmailNotifications"),a=async e=>{t(!0);try{const{data:t,error:n}=await mr.functions.invoke("send-notification-email",{body:e});return n?(s.error("Email notification error:",{error:n,recipient:e.to,type:e.type}),r("Failed to send email notification"),!1):(null==t?void 0:t.success)?(s.info("Email notification sent successfully:",{emailId:t.emailId,recipient:e.to,type:e.type}),!0):(r("Email sending failed"),!1)}catch(n){return s.error("Error sending email notification:",{error:n,recipient:e.to,type:e.type}),r("Failed to send email notification"),!1}finally{t(!1)}};return{sending:e,sendNotificationEmail:a,sendOfferNotification:async(e,t)=>a({to:e,subject:`New Offer: ${t.request_title}`,message:`${t.vendor_name} has submitted an offer for your request "${t.request_title}".`,type:"offer",data:{price:t.price,currency:t.currency,delivery_time_days:t.delivery_time_days,platform_url:window.location.origin}}),sendRequestApprovalNotification:async(e,t)=>a({to:e,subject:`Request ${t.status}: ${t.title}`,message:`Your procurement request "${t.title}" has been ${t.status.toLowerCase()}.`,type:"request_approval",data:{request_title:t.title,status:t.status,platform_url:window.location.origin}}),sendOfferStatusNotification:async(e,t)=>a({to:e,subject:`Offer ${t.status}: ${t.title}`,message:`Your offer "${t.title}" has been ${t.status.toLowerCase()}.`,type:"offer_status",data:{offer_title:t.title,status:t.status,platform_url:window.location.origin}})}})(),[a,i]=Ne.useState([]),[o,l]=Ne.useState(0),[c,d]=Ne.useState(!0),u=async()=>{if(e)try{const{data:t,error:r}=await mr.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(r)throw r;i(t||[]),l((null==t?void 0:t.filter(e=>!e.read).length)||0)}catch(t){}finally{d(!1)}};return Ne.useEffect(()=>{if(!e)return;u();const a=mr.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},a=>{const o=a.new;if(i(e=>[o,...e]),l(e=>e+1),"high"===o.priority&&(t({title:o.title,description:o.message,variant:o.type.includes("error")?"destructive":"default",duration:6e3}),null==e?void 0:e.email)){const t=o.data;(async()=>{try{"offer_received"===o.type?await r(e.email,{request_title:(null==t?void 0:t.request_title)||"Your Request",vendor_name:(null==t?void 0:t.vendor_name)||"A Vendor",price:(null==t?void 0:t.price)||0,currency:null==t?void 0:t.currency,delivery_time_days:null==t?void 0:t.delivery_time_days}):"request_status_update"===o.type?await n(e.email,{title:(null==t?void 0:t.request_title)||o.title,status:(null==t?void 0:t.status)||"Updated"}):"offer_status_update"===o.type&&await s(e.email,{title:(null==t?void 0:t.offer_title)||o.title,status:(null==t?void 0:t.new_status)||"Updated"})}catch(a){}})()}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},e=>{const t=e.new;i(e=>e.map(e=>e.id===t.id?t:e))}).subscribe();return()=>{mr.removeChannel(a)}},[e,t]),{notifications:a,unreadCount:o,loading:c,markAsRead:async t=>{if(e)try{const{error:r}=await mr.from("notifications").update({read:!0}).eq("id",t).eq("user_id",e.id);if(r)throw r;i(e=>e.map(e=>e.id===t?{...e,read:!0}:e)),l(e=>Math.max(0,e-1))}catch(r){}},markAllAsRead:async()=>{if(e)try{const{error:t}=await mr.from("notifications").update({read:!0}).eq("user_id",e.id).eq("read",!1);if(t)throw t;i(e=>e.map(e=>({...e,read:!0}))),l(0)}catch(t){}},deleteNotification:async t=>{if(e)try{const{error:r}=await mr.from("notifications").delete().eq("id",t).eq("user_id",e.id);if(r)throw r;i(e=>e.filter(e=>e.id!==t)),l(e=>{const r=a.find(e=>e.id===t);return r&&!r.read?Math.max(0,e-1):e})}catch(r){}},requestNotificationPermission:async()=>{if("Notification"in window){return"granted"===await Notification.requestPermission()}return!1},refetch:u}};function my(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function hy(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function py(e,t){const r=my(e);return isNaN(t)?hy(e,NaN):t?(r.setDate(r.getDate()+t),r):r}function fy(e,t){const r=my(e);if(isNaN(t))return hy(e,NaN);if(!t)return r;const n=r.getDate(),s=hy(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);return n>=s.getDate()?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const xy=6048e5,gy=43200;let vy={};function yy(){return vy}function jy(e,t){var r,n,s,a;const i=yy(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(a=null==(s=i.locale)?void 0:s.options)?void 0:a.weekStartsOn)??0,l=my(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function by(e){return jy(e,{weekStartsOn:1})}function wy(e){const t=my(e),r=t.getFullYear(),n=hy(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=by(n),a=hy(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=by(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Ny(e){const t=my(e);return t.setHours(0,0,0,0),t}function _y(e){const t=my(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Sy(e,t){const r=Ny(e),n=Ny(t),s=+r-_y(r),a=+n-_y(n);return Math.round((s-a)/864e5)}function ky(e,t){return py(e,7*t)}function Cy(e,t){return fy(e,12*t)}function Ey(e,t){const r=my(e),n=my(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function Oy(e,t){return+Ny(e)===+Ny(t)}function My(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Py(e,t){const r=my(e),n=my(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function Ay(e){const t=my(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Ty(e){const t=my(e);return+function(e){const t=my(e);return t.setHours(23,59,59,999),t}(t)===+Ay(t)}function Dy(e,t,r){const n=function(e,t){return+my(e)-+my(t)}(e,t)/1e3;return(s=null==r?void 0:r.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(n);var s}function Ry(e){const t=my(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ly(e){const t=my(e),r=hy(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function qy(e,t){var r,n,s,a;const i=yy(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(a=null==(s=i.locale)?void 0:s.options)?void 0:a.weekStartsOn)??0,l=my(e),c=l.getDay(),d=6+(c<o?-7:0)-(c-o);return l.setDate(l.getDate()+d),l.setHours(23,59,59,999),l}function Iy(e){return qy(e,{weekStartsOn:1})}const Fy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function zy(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const By={date:zy({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:zy({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:zy({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$y={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Uy(e){return(t,r)=>{let n;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==r?void 0:r.width)?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const Vy={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Uy({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Uy({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Uy({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Uy({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Uy({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Wy(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const Hy={ordinalNumber:(Yy={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const r=e.match(Yy.matchPattern);if(!r)return null;const n=r[0],s=e.match(Yy.parsePattern);if(!s)return null;let a=Yy.valueCallback?Yy.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(n.length)}}),era:Wy({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Wy({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wy({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Wy({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Wy({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Yy;const Ky={code:"en-US",formatDistance:(e,t,r)=>{let n;const s=Fy[e];return n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:By,formatRelative:(e,t,r,n)=>$y[e],localize:Vy,match:Hy,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gy(e){const t=my(e),r=+by(t)-+function(e){const t=wy(e),r=hy(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),by(r)}(t);return Math.round(r/xy)+1}function Xy(e,t){var r,n,s,a;const i=my(e),o=i.getFullYear(),l=yy(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(a=null==(s=l.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??1,d=hy(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=jy(d,t),m=hy(e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const h=jy(m,t);return i.getTime()>=u.getTime()?o+1:i.getTime()>=h.getTime()?o:o-1}function Qy(e,t){const r=my(e),n=+jy(r,t)-+function(e,t){var r,n,s,a;const i=yy(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(a=null==(s=i.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??1,l=Xy(e,t),c=hy(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),jy(c,t)}(r,t);return Math.round(n/xy)+1}function Zy(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Jy={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Zy("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):Zy(r+1,2)},d:(e,t)=>Zy(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>Zy(e.getHours()%12||12,t.length),H:(e,t)=>Zy(e.getHours(),t.length),m:(e,t)=>Zy(e.getMinutes(),t.length),s:(e,t)=>Zy(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return Zy(Math.trunc(n*Math.pow(10,r-3)),t.length)}},ej="midnight",tj="noon",rj="morning",nj="afternoon",sj="evening",aj="night",ij={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return Jy.y(e,t)},Y:function(e,t,r,n){const s=Xy(e,n),a=s>0?s:1-s;if("YY"===t){return Zy(a%100,2)}return"Yo"===t?r.ordinalNumber(a,{unit:"year"}):Zy(a,t.length)},R:function(e,t){return Zy(wy(e),t.length)},u:function(e,t){return Zy(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Zy(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Zy(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Jy.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Zy(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=Qy(e,n);return"wo"===t?r.ordinalNumber(s,{unit:"week"}):Zy(s,t.length)},I:function(e,t,r){const n=Gy(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):Zy(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Jy.d(e,t)},D:function(e,t,r){const n=function(e){const t=my(e);return Sy(t,Ly(t))+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):Zy(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Zy(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Zy(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=0===n?7:n;switch(t){case"i":return String(s);case"ii":return Zy(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(s=12===n?tj:0===n?ej:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(s=n>=17?sj:n>=12?nj:n>=4?rj:aj,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Jy.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Jy.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):Zy(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):Zy(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Jy.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Jy.s(e,t)},S:function(e,t){return Jy.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return lj(n);case"XXXX":case"XX":return cj(n);default:return cj(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return lj(n);case"xxxx":case"xx":return cj(n);default:return cj(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oj(n,":");default:return"GMT"+cj(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oj(n,":");default:return"GMT"+cj(n,":")}},t:function(e,t,r){return Zy(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return Zy(e.getTime(),t.length)}};function oj(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return 0===a?r+String(s):r+String(s)+t+Zy(a,2)}function lj(e,t){if(e%60==0){return(e>0?"-":"+")+Zy(Math.abs(e)/60,2)}return cj(e,t)}function cj(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+Zy(Math.trunc(n/60),2)+t+Zy(n%60,2)}const dj=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},uj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},mj={p:uj,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return dj(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",dj(n,t)).replace("{{time}}",uj(s,t))}},hj=/^D+$/,pj=/^Y+$/,fj=["D","DD","YY","YYYY"];const xj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vj=/^'([^]*?)'?$/,yj=/''/g,jj=/[a-zA-Z]/;function bj(e,t,r){var n,s,a,i,o,l,c,d;const u=yy(),m=(null==r?void 0:r.locale)??u.locale??Ky,h=(null==r?void 0:r.firstWeekContainsDate)??(null==(s=null==(n=null==r?void 0:r.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(a=u.locale)?void 0:a.options)?void 0:i.firstWeekContainsDate)??1,p=(null==r?void 0:r.weekStartsOn)??(null==(l=null==(o=null==r?void 0:r.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,f=my(e);if(!function(e){if(!My(e)&&"number"!=typeof e)return!1;const t=my(e);return!isNaN(Number(t))}(f))throw new RangeError("Invalid time value");let x=t.match(gj).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,mj[t])(e,m.formatLong)}return e}).join("").match(xj).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:wj(e)};if(ij[t])return{isToken:!0,value:e};if(t.match(jj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(x=m.localize.preprocessor(f,x));const g={firstWeekContainsDate:h,weekStartsOn:p,locale:m};return x.map(n=>{if(!n.isToken)return n.value;const s=n.value;(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return pj.test(e)}(s)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return hj.test(e)}(s))&&function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(fj.includes(e))throw new RangeError(n)}(s,t,String(e));return(0,ij[s[0]])(f,s,m.localize,g)}).join("")}function wj(e){const t=e.match(vj);return t?t[1].replace(yj,"'"):e}function Nj(e,t,r){const n=yy(),s=(null==r?void 0:r.locale)??n.locale??Ky,a=Ey(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const i=Object.assign({},r,{addSuffix:null==r?void 0:r.addSuffix,comparison:a});let o,l;a>0?(o=my(t),l=my(e)):(o=my(e),l=my(t));const c=Dy(l,o),d=(_y(l)-_y(o))/1e3,u=Math.round((c-d)/60);let m;if(u<2)return(null==r?void 0:r.includeSeconds)?c<5?s.formatDistance("lessThanXSeconds",5,i):c<10?s.formatDistance("lessThanXSeconds",10,i):c<20?s.formatDistance("lessThanXSeconds",20,i):c<40?s.formatDistance("halfAMinute",0,i):c<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):0===u?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",u,i);if(u<45)return s.formatDistance("xMinutes",u,i);if(u<90)return s.formatDistance("aboutXHours",1,i);if(u<1440){const e=Math.round(u/60);return s.formatDistance("aboutXHours",e,i)}if(u<2520)return s.formatDistance("xDays",1,i);if(u<gy){const e=Math.round(u/1440);return s.formatDistance("xDays",e,i)}if(u<86400)return m=Math.round(u/gy),s.formatDistance("aboutXMonths",m,i);if(m=function(e,t){const r=my(e),n=my(t),s=Ey(r,n),a=Math.abs(Py(r,n));let i;if(a<1)i=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);let t=Ey(r,n)===-s;Ty(my(e))&&1===a&&1===Ey(e,n)&&(t=!1),i=s*(a-Number(t))}return 0===i?0:i}(l,o),m<12){const e=Math.round(u/gy);return s.formatDistance("xMonths",e,i)}{const e=m%12,t=Math.trunc(m/12);return e<3?s.formatDistance("aboutXYears",t,i):e<9?s.formatDistance("overXYears",t,i):s.formatDistance("almostXYears",t+1,i)}}function _j(e,t){return Nj(e,function(e){return hy(e,Date.now())}(e),t)}function Sj(e,t){return function(e,t,r){const n=jy(e,r),s=jy(t,r),a=+n-_y(n),i=+s-_y(s);return Math.round((a-i)/xy)}(function(e){const t=my(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}(e),Ry(e),t)+1}function kj(e,t){const r=my(e),n=my(t);return r.getTime()>n.getTime()}function Cj(e,t){return+my(e)<+my(t)}function Ej(e,t){const r=my(e),n=my(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Oj(e,t){return py(e,-t)}function Mj(e,t){const r=my(e),n=r.getFullYear(),s=r.getDate(),a=hy(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);const i=function(e){const t=my(e),r=t.getFullYear(),n=t.getMonth(),s=hy(e,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}(a);return r.setMonth(t,Math.min(s,i)),r}function Pj(e,t){const r=my(e);return isNaN(+r)?hy(e,NaN):(r.setFullYear(t),r)}const Aj=()=>{const{notifications:e,unreadCount:t,loading:r,markAsRead:s,markAllAsRead:a,deleteNotification:i,requestNotificationPermission:o}=uy(),[l,c]=Ne.useState(!1),d=e=>{switch(e){case"high":return"text-red-500";case"medium":return"text-yellow-500";case"low":return"text-blue-500";default:return"text-gray-500"}},u=e=>{switch(e){case"offers":return"💼";case"requests":return"📋";case"orders":return"📦";case"payments":return"💳";default:return"🔔"}};return n.jsxs(ry,{open:l,onOpenChange:c,children:[n.jsx(ny,{asChild:!0,children:n.jsxs(ku,{variant:"ghost",size:"sm",className:"relative",children:[n.jsx(Wu,{className:"h-5 w-5"}),t>0&&n.jsx(Xf,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs",children:t>99?"99+":t})]})}),n.jsx(sy,{className:"w-80 p-0",align:"end",children:n.jsxs(Eu,{className:"border-0 shadow-none",children:[n.jsxs(Ou,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Mu,{className:"text-lg",children:"Notifications"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ku,{variant:"ghost",size:"sm",onClick:o,className:"p-1 h-auto",title:"Enable browser notifications",children:n.jsx(Wu,{className:"h-4 w-4"})}),t>0&&n.jsx(ku,{variant:"ghost",size:"sm",onClick:a,className:"p-1 h-auto",title:"Mark all as read",children:n.jsx(nm,{className:"h-4 w-4"})})]})]}),t>0&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[t," unread notification",t>1?"s":""]})]}),n.jsx(cy,{}),n.jsx(Au,{className:"p-0",children:n.jsx(Lx,{className:"max-h-96",children:r?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading notifications..."}):0===e.length?n.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[n.jsx(Wu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No notifications yet"}),n.jsx("p",{className:"text-xs mt-1",children:"We'll notify you when something happens"})]}):n.jsx("div",{className:"divide-y",children:e.map(e=>n.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors cursor-pointer group "+(e.read?"":"bg-blue-50/50 dark:bg-blue-950/10"),onClick:()=>(async e=>{var t,r;e.read||await s(e.id),(null==(t=e.data)?void 0:t.request_id)||null==(r=e.data)||r.offer_id})(e),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:u(e.category)}),!e.read&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h4",{className:"text-sm font-medium truncate",children:e.title}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!e.read&&n.jsx(ku,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-1 h-auto",title:"Mark as read",children:n.jsx(sm,{className:"h-3 w-3"})}),n.jsx(ku,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),i(e.id)},className:"p-1 h-auto text-destructive hover:text-destructive",title:"Delete notification",children:n.jsx(sp,{className:"h-3 w-3"})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:_j(new Date(e.created_at),{addSuffix:!0})}),n.jsx("div",{className:`w-2 h-2 rounded-full ${d(e.priority)}`})]})]})]})},e.id))})})})]})})]})},Tj=G,Dj=X;Ne.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(F,{ref:a,className:_u("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(om,{className:"ml-auto h-4 w-4"})]})).displayName=F.displayName;Ne.forwardRef(({className:e,...t},r)=>n.jsx(z,{ref:r,className:_u("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=z.displayName;const Rj=Ne.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(B,{children:n.jsx($,{ref:s,sideOffset:t,className:_u("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Rj.displayName=$.displayName;const Lj=Ne.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(U,{ref:s,className:_u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Lj.displayName=U.displayName;Ne.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(V,{ref:a,className:_u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(W,{children:n.jsx(sm,{className:"h-4 w-4"})})}),t]})).displayName=V.displayName;Ne.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(H,{ref:s,className:_u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(W,{children:n.jsx(xm,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=H.displayName;const qj=Ne.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(Y,{ref:s,className:_u("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));qj.displayName=Y.displayName;const Ij=Ne.forwardRef(({className:e,...t},r)=>n.jsx(K,{ref:r,className:_u("-mx-1 my-1 h-px bg-muted",e),...t}));function Fj(){const{setTheme:e,theme:t,isDashboardRoute:r,forceLightMode:s}=(()=>{const e=Ne.useContext(wr);if(!e)throw new Error("useRouteAwareTheme must be used within a RouteAwareThemeProvider");return e})(),{t:a,language:i}=cr(),o="ar"===i;return!r||s?null:n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(ku,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(Dh,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),n.jsx(ch,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),n.jsx("span",{className:"hidden sm:inline-block",children:a("theme.selectTheme")}),n.jsx("span",{className:"sr-only",children:a("theme.selectTheme")})]})}),n.jsxs(Rj,{align:o?"start":"end",children:[n.jsxs(Lj,{onClick:()=>e("light"),className:o?"flex-row-reverse":"",children:[n.jsx(Dh,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),n.jsx("span",{children:a("theme.light")})]}),n.jsxs(Lj,{onClick:()=>e("dark"),className:o?"flex-row-reverse":"",children:[n.jsx(ch,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),n.jsx("span",{children:a("theme.dark")})]}),n.jsxs(Lj,{onClick:()=>e("system"),className:o?"flex-row-reverse":"",children:[n.jsx(lh,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),n.jsx("span",{children:a("theme.system")})]})]})]})}Ij.displayName=K.displayName;const zj=()=>{const e=Nt(),{t:t,isRTL:r}=cr(),s=e.pathname.split("/").filter(Boolean),a={dashboard:t("nav.dashboard"),requests:t("nav.requests"),offers:t("nav.offers"),orders:t("nav.orders"),vendors:t("nav.vendors"),messages:t("nav.messages"),analytics:t("nav.analytics"),settings:t("nav.settings"),profile:t("nav.profile"),support:t("nav.support"),projects:t("nav.projects"),documents:t("nav.documents"),notifications:t("nav.notifications"),subscription:t("nav.subscription"),"manage-subscription":t("nav.manageSubscription"),"browse-requests":t("nav.browseRequests"),"my-offers":t("nav.myOffers"),rfqs:t("nav.rfqs"),create:t("common.create")||"Create",edit:t("common.edit")||"Edit",view:t("common.view")||"View"},i=[{name:t("nav.dashboard"),href:"/dashboard",icon:Um}];let o="";return s.forEach((e,t)=>{o+=`/${e}`;const r=a[e],n=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),s=r||n;"dashboard"!==e&&i.push({name:s,href:o})}),n.jsx("nav",{className:_u("flex items-center text-sm text-muted-foreground",r?"space-x-reverse space-x-1":"space-x-1"),"aria-label":"Breadcrumb",dir:r?"rtl":"ltr",children:i.map((e,t)=>n.jsxs("div",{className:"flex items-center",children:[t>0&&n.jsx(om,{className:_u("h-3 w-3 text-muted-foreground/50",r?"ml-2 rotate-180":"mx-2")}),t===i.length-1?n.jsxs("span",{className:"flex items-center gap-1.5 text-foreground font-medium","aria-current":"page",children:[e.icon&&n.jsx(e.icon,{className:"h-3 w-3"}),e.name]}):n.jsxs(Zt,{to:e.href,className:_u("flex items-center gap-1.5 hover:text-foreground transition-colors","text-muted-foreground hover:underline underline-offset-4"),children:[e.icon&&n.jsx(e.icon,{className:"h-3 w-3"}),e.name]})]},e.href))})},Bj=Dr("flex w-full rounded-md border bg-input px-3 py-2 text-base text-foreground transition-all duration-200 ring-offset-ring-offset file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-input-placeholder placeholder:opacity-70 focus-visible:outline-2 focus-visible:outline-focus-outline focus-visible:outline-offset-2 focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:placeholder:text-button-disabled-foreground md:text-sm [&::-webkit-input-placeholder]:text-input-placeholder [&::-webkit-input-placeholder]:opacity-70 [&::-moz-placeholder]:text-input-placeholder [&::-moz-placeholder]:opacity-70 [&:-ms-input-placeholder]:text-input-placeholder [&:-ms-input-placeholder]:opacity-70 selection:bg-input-selection selection:text-input-selection-foreground caret-input-caret [&:-webkit-autofill]:bg-input [&:-webkit-autofill]:text-foreground [&:-webkit-autofill]:shadow-[inset_0_0_0px_1000px_hsl(var(--input))] [&:-webkit-autofill]:[-webkit-text-fill-color:hsl(var(--foreground))] [&:-webkit-autofill:hover]:shadow-[inset_0_0_0px_1000px_hsl(var(--input))] [&:-webkit-autofill:hover]:[-webkit-text-fill-color:hsl(var(--foreground))] [&:-webkit-autofill:focus]:shadow-[inset_0_0_0px_1000px_hsl(var(--input))] [&:-webkit-autofill:focus]:[-webkit-text-fill-color:hsl(var(--foreground))]",{variants:{variant:{default:"border-input-border hover:border-border-strong focus-visible:border-primary focus-visible:ring-focus-ring/30 focus-visible:outline-focus-outline",success:"border-success focus-visible:border-success focus-visible:ring-success/30 focus-visible:outline-success",warning:"border-warning focus-visible:border-warning focus-visible:ring-warning/30 focus-visible:outline-warning",destructive:"border-destructive focus-visible:border-destructive focus-visible:ring-error/30 focus-visible:outline-error",ghost:"border-transparent bg-secondary hover:bg-secondary/80 focus-visible:bg-background focus-visible:border-border focus-visible:ring-focus-ring/30 focus-visible:outline-focus-outline"},size:{sm:"h-8 px-2 text-sm",default:"h-10 px-3",lg:"h-12 px-4 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),$j=Ne.forwardRef(({className:e,variant:t,size:r,type:s,...a},i)=>n.jsx("input",{type:s,className:_u(Bj({variant:t,size:r}),e),ref:i,...a}));$j.displayName="Input";const Uj=()=>{const[e,t]=Ne.useState(!1),[r,s]=Ne.useState(""),a=Ne.useRef(null),i=St(),o=()=>{e?(t(!1),s("")):(t(!0),setTimeout(()=>{var e;return null==(e=a.current)?void 0:e.focus()},100))};return n.jsx("div",{className:"relative flex items-center",children:e?n.jsxs("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&(i(`/search?q=${encodeURIComponent(r.trim())}`),s(""),t(!1))},className:"flex items-center gap-1",children:[n.jsx($j,{ref:a,type:"text",placeholder:"Search projects, requests...",value:r,onChange:e=>s(e.target.value),className:"h-9 w-48 sm:w-64 transition-all duration-200",onBlur:()=>{setTimeout(()=>{r.trim()||t(!1)},100)}}),n.jsx(ku,{type:"button",variant:"ghost",size:"icon",onClick:o,className:"h-9 w-9 hover:bg-accent/50 shrink-0",children:n.jsx(sp,{className:"h-4 w-4"})})]}):n.jsx(ku,{variant:"ghost",size:"icon",onClick:o,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200","aria-label":"Search",children:n.jsx(jh,{className:"h-4 w-4"})})})},Vj=({userProfile:e})=>{var t;const r=St(),{signOut:s}=br(),[a,i]=Ne.useState(!1),o=(null==e?void 0:e.full_name)?e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase():(null==(t=null==e?void 0:e.email)?void 0:t.charAt(0).toUpperCase())||"U";return n.jsxs(Tj,{open:a,onOpenChange:i,children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(ku,{variant:"ghost",className:"h-9 px-2 hover:bg-accent/50 transition-all duration-200 gap-2","aria-label":"User menu",children:[n.jsxs(Qx,{className:"h-7 w-7",children:[n.jsx(Zx,{src:null==e?void 0:e.avatar_url,alt:null==e?void 0:e.full_name}),n.jsx(Jx,{className:"text-xs bg-primary/10 text-primary font-medium",children:o})]}),n.jsx(am,{className:_u("h-3 w-3 transition-transform duration-200 hidden sm:block",a&&"rotate-180")})]})}),n.jsxs(Rj,{align:"end",className:"w-64 p-2",sideOffset:8,children:[n.jsxs(qj,{className:"flex items-center gap-3 p-2",children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==e?void 0:e.avatar_url,alt:null==e?void 0:e.full_name}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-medium",children:o})]}),n.jsxs("div",{className:"flex flex-col min-w-0",children:[n.jsx("p",{className:"font-medium truncate",children:(null==e?void 0:e.full_name)||"User"}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:null==e?void 0:e.email}),n.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:(null==e?void 0:e.role)||"User"})]})]}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:()=>r("/profile"),className:"cursor-pointer gap-2 p-2",children:[n.jsx(Xh,{className:"h-4 w-4"}),"Profile"]}),n.jsxs(Lj,{onClick:()=>r("/settings"),className:"cursor-pointer gap-2 p-2",children:[n.jsx(Nh,{className:"h-4 w-4"}),"Settings"]}),n.jsxs(Lj,{onClick:()=>r("/manage-subscription"),className:"cursor-pointer gap-2 p-2",children:[n.jsx(bm,{className:"h-4 w-4"}),"Subscription"]}),n.jsxs(Lj,{onClick:()=>r("/support"),className:"cursor-pointer gap-2 p-2",children:[n.jsx(pm,{className:"h-4 w-4"}),"Support"]}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:async()=>{try{await s(),r("/login")}catch(e){}},className:"cursor-pointer gap-2 p-2 text-destructive focus:text-destructive",children:[n.jsx(Qm,{className:"h-4 w-4"}),"Sign Out"]})]})]})},Wj=()=>{const{language:e,setLanguage:t}=cr();return n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>{t("en"===e?"ar":"en")},className:"px-3 py-1 h-8 min-w-[50px] border-muted-foreground/20 text-muted-foreground hover:text-foreground hover:border-foreground/30 rtl-transition font-medium hover:bg-accent",children:e.toUpperCase()})};function Hj(){const[e,t]=Ne.useState(void 0);return Ne.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}const Yj=({onMobileMenuOpen:e,onSidebarToggle:t,sidebarOpen:r})=>{const s=St(),{userProfile:a}=br(),{t:i,isRTL:o}=cr(),l=Hj();return n.jsxs("header",{className:"border-b border-border bg-card sticky top-0 z-50 shadow-sm",children:[n.jsx("div",{className:"h-16 min-h-16",children:n.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-4 h-full flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1 mr-2 sm:mr-4",children:[l&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0","aria-label":i("clientHeader.openMobileMenu"),children:n.jsx(th,{className:"h-4 w-4"})}),!l&&t&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:t,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0","aria-label":i(r?"clientHeader.collapseSidebar":"clientHeader.expandSidebar"),children:n.jsx(th,{className:"h-4 w-4"})}),n.jsxs("button",{onClick:()=>s("/dashboard"),className:"flex items-center gap-3 hover:opacity-80 transition-all duration-200 min-w-0","aria-label":i("clientHeader.goToDashboard"),children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:"MWRD Logo",className:"h-8 w-auto shrink-0"}),n.jsxs("div",{className:"hidden sm:flex flex-col items-start min-w-0",children:[n.jsx("span",{className:"text-sm sm:text-base font-semibold leading-tight truncate text-foreground",children:i("clientHeader.dashboard")}),n.jsxs("span",{className:"text-xs leading-tight text-muted-foreground hidden md:block capitalize",children:[(null==a?void 0:a.role)||"User"," ",i("clientHeader.portal")]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[n.jsx(Uj,{}),n.jsx(Aj,{}),n.jsx(Wj,{}),n.jsx(Fj,{}),n.jsx(Vj,{userProfile:a})]})]})}),n.jsx("div",{className:"border-t border-border/50 bg-muted/30 px-4 py-2",children:n.jsx("div",{className:"max-w-full mx-auto",children:n.jsx(zj,{})})})]})},Kj=ne,Gj=se,Xj=re,Qj=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Q,{className:_u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Qj.displayName=Q.displayName;const Zj=Dr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Jj=Ne.forwardRef(({side:e="right",className:t,children:r,...s},a)=>{const{isRTL:i}=cr();return n.jsxs(Xj,{children:[n.jsx(Qj,{}),n.jsxs(Z,{ref:a,className:_u(Zj({side:e}),t),dir:i?"rtl":"ltr",...s,children:[r,n.jsxs(J,{className:_u("absolute top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary","left"===e?i?"left-4 top-4":"right-4 top-4":"right"===e?i?"right-4 top-4":"left-4 top-4":"right-4 top-4"),children:[n.jsx(sp,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Jj.displayName=Z.displayName;const eb=({className:e,...t})=>n.jsx("div",{className:_u("flex flex-col space-y-2 text-center sm:text-left",e),...t});eb.displayName="SheetHeader";const tb=Ne.forwardRef(({className:e,...t},r)=>n.jsx(ee,{ref:r,className:_u("text-lg font-semibold text-foreground",e),...t}));tb.displayName=ee.displayName;const rb=Ne.forwardRef(({className:e,...t},r)=>n.jsx(te,{ref:r,className:_u("text-sm text-muted-foreground",e),...t}));rb.displayName=te.displayName;const nb=({isOpen:e,onOpenChange:t})=>{const r=Nt(),{userProfile:s}=br(),{t:a,isRTL:i}=cr(),o=[{section:a("clientGroups.overview"),items:[{name:a("nav.dashboard"),href:"/dashboard",icon:Ym},{name:a("nav.analytics"),href:"/analytics",icon:Ju}]},{section:a("clientGroups.workspace"),items:[{name:a("nav.requests"),href:"/requests",icon:Tm},..."supplier"===(null==s?void 0:s.role)?[{name:a("nav.browseRequests"),href:"/browse-requests",icon:Rm},{name:a("nav.myOffers"),href:"/my-offers",icon:dh}]:[],{name:a("nav.orders"),href:"/orders",icon:kh},{name:a("nav.messages"),href:"/messages",icon:nh}]},{section:a("clientGroups.network"),items:[{name:a("nav.vendors"),href:"/vendors",icon:Zh}]},{section:a("clientGroups.account"),items:[{name:a("nav.profile"),href:"/profile",icon:Xh},{name:a("nav.subscription"),href:"/manage-subscription",icon:bm},{name:a("nav.settings"),href:"/settings",icon:Nh},{name:a("nav.support"),href:"/support",icon:pm}]}];return n.jsx(Kj,{open:e,onOpenChange:t,children:n.jsx(Jj,{side:i?"right":"left",className:_u("w-80 p-0 bg-background overflow-hidden","safe-area-inset-y",i?"border-l-2":"border-r-2","flex flex-col"),children:n.jsxs("div",{className:"flex flex-col h-full",dir:i?"rtl":"ltr",children:[n.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[n.jsxs(Zt,{to:"/dashboard",onClick:()=>t(!1),className:"flex items-center gap-3",children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:"MWRD Logo",className:"h-8 w-auto"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-foreground",children:"MWRD Dashboard"}),n.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:(null==s?void 0:s.role)||"User"})]})]}),n.jsx(ku,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"h-8 w-8",children:n.jsx(sp,{className:"h-4 w-4"})})]}),n.jsx(Lx,{className:"flex-1 p-4",children:n.jsx("div",{className:"space-y-6",children:o.map(e=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs uppercase tracking-wider font-semibold text-muted-foreground mb-3",children:e.section}),n.jsx("div",{className:"space-y-1",children:e.items.map(e=>{const s=(a=e.href,r.pathname===a);var a;return n.jsxs(Zt,{to:e.href,onClick:()=>t(!1),className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium",s?"bg-primary/10 text-primary border border-primary/20":"text-muted-foreground hover:text-foreground hover:bg-accent/50",i&&"flex-row-reverse text-right"),children:[n.jsx(e.icon,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:e.name})]},e.href)})})]},e.section))})})]})})})},sb=({children:e,className:t,withBottomPadding:r=!0,pageType:s="default",...a})=>n.jsx("div",{className:_u("min-h-screen w-full h-full",(()=>{switch(s){case"landing":return"bg-landing";case"dashboard":return"bg-dashboard";case"auth":return"bg-auth";default:return"bg-unified-page"}})(),r&&"pb-20 md:pb-0","safe-area-pt safe-area-pb",t),...a,children:e}),ab=()=>{const{isMobile:e,isTablet:t}=ff(),[r,n]=Ne.useState(0),[s,a]=Ne.useState("medium"),i=Ne.useMemo(()=>{if("undefined"==typeof navigator)return{isLowEnd:!1,cpuCores:4,memory:8};const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t=navigator.deviceMemory,r=navigator.hardwareConcurrency;return{isLowEnd:t&&t<2||r&&r<4||e&&["slow-2g","2g","3g"].includes(e.effectiveType),cpuCores:r||4,memory:t||4}},[]);Ne.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const t=()=>{const t=e.effectiveType;["slow-2g","2g"].includes(t)?a("slow"):["3g"].includes(t)?a("medium"):a("fast")};return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[]);const o=Ne.useMemo(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches||i.isLowEnd?{enableAnimations:!1,reducedMotion:!0,transitionDuration:"0ms",maxConcurrentAnimations:1,useGPU:!1,debounceMs:300}:e?{enableAnimations:!0,reducedMotion:!1,transitionDuration:"200ms",maxConcurrentAnimations:3,useGPU:!0,debounceMs:150}:{enableAnimations:!0,reducedMotion:!1,transitionDuration:"300ms",maxConcurrentAnimations:6,useGPU:!0,debounceMs:100},[e,i.isLowEnd]),l=Ne.useMemo(()=>i.isLowEnd||"slow"===s?{enablePageTransitions:!1,preloadPages:!1,cacheSize:2,loadingThreshold:1e3}:e||"medium"===s?{enablePageTransitions:!0,preloadPages:!0,cacheSize:5,loadingThreshold:500}:{enablePageTransitions:!0,preloadPages:!0,cacheSize:10,loadingThreshold:200},[e,i.isLowEnd,s]),c=Ne.useCallback(()=>r<o.maxConcurrentAnimations,[r,o.maxConcurrentAnimations]),d=Ne.useCallback(()=>c()?(n(e=>e+1),()=>n(e=>e-1)):()=>{},[c]),u=Ne.useCallback((e,t="throttle")=>{let r,n=0;return"throttle"===t?(...t)=>{const r=Date.now();r-n>=o.debounceMs&&(e(...t),n=r)}:(...t)=>{clearTimeout(r),r=setTimeout(()=>e(...t),o.debounceMs)}},[o.debounceMs]),m=Ne.useCallback((e,t)=>Ne.useMemo(()=>e,t),[]),h=Ne.useCallback((e,t)=>{if("undefined"==typeof window||!window.performance)return void t();performance.now();t();performance.now()},[]);return{performanceConfig:o,navigationConfig:l,deviceCapabilities:i,networkSpeed:s,shouldAllowAnimation:c,registerAnimation:d,activeAnimations:r,createOptimizedHandler:u,createMemoizedComponent:m,measurePerformance:h,isMobile:e,isTablet:t,isLowEndDevice:i.isLowEnd}},ib=()=>{const e=Nt(),{performanceConfig:t,createOptimizedHandler:r}=ab(),{language:s,isRTL:a,t:i}=cr(),o=(()=>{const t=e.pathname.split("/").filter(Boolean),r=[{label:i("nav.dashboard")||("ar"===s?"الرئيسية":"Home"),path:"/",icon:Um}],n={dashboard:i("nav.dashboard"),client:i("nav.client")||("ar"===s?"العميل":"Client"),projects:i("nav.projects"),requests:i("nav.requests"),vendors:i("nav.vendors"),messages:i("nav.messages"),orders:i("nav.orders"),settings:i("nav.settings"),profile:i("nav.profile"),analytics:i("nav.analytics"),support:i("nav.support"),admin:"Admin",users:"Users",offers:i("nav.offers"),notifications:i("nav.notifications"),documents:i("nav.documents"),subscription:i("nav.subscription"),"manage-subscription":i("nav.manageSubscription"),"browse-requests":i("nav.browseRequests"),"my-offers":i("nav.myOffers"),rfqs:i("nav.rfqs"),rfq:i("nav.rfq")||("ar"===s?"طلب تسعير":"RFQ"),create:i("common.create")||("ar"===s?"إنشاء":"Create"),edit:i("common.edit")||("ar"===s?"تعديل":"Edit"),view:i("common.view")||("ar"===s?"عرض":"View")};let a="";return t.forEach((e,t)=>{a+=`/${e}`;const s=n[e]||e.charAt(0).toUpperCase()+e.slice(1);r.push({label:s,path:a})}),r})();if("/"===e.pathname||"/landing"===e.pathname||o.length<=1)return null;const l=r(e=>{});return t.enableAnimations?n.jsx(Pd.nav,{className:_u("flex items-center text-sm text-muted-foreground mb-4",a?"space-x-reverse space-x-2":"space-x-2"),dir:a?"rtl":"ltr",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2},children:o.map((e,t)=>n.jsxs(Pd.div,{className:_u("flex items-center",a?"space-x-reverse space-x-2":"space-x-2"),initial:{opacity:0,x:a?10:-10},animate:{opacity:1,x:0},transition:{delay:.05*t,duration:.15},children:[t>0&&n.jsx(Pd.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.05*t+.1,duration:.1},children:n.jsx(om,{size:14,className:_u("text-muted-foreground/50",a&&"rotate-180")})}),t===o.length-1?n.jsxs(Pd.span,{className:"text-foreground font-medium flex items-center gap-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*t+.15,duration:.2},children:[e.icon&&n.jsx(e.icon,{size:14}),e.label]}):n.jsx(Pd.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsxs(Zt,{to:e.path,onClick:()=>l(e.path),className:"hover:text-foreground transition-colors flex items-center gap-1",children:[e.icon&&n.jsx(e.icon,{size:14}),e.label]})})]},e.path))}):n.jsx("nav",{className:_u("flex items-center text-sm text-muted-foreground mb-4",a?"space-x-reverse space-x-2":"space-x-2"),dir:a?"rtl":"ltr",children:o.map((e,t)=>n.jsxs(ke.Fragment,{children:[t>0&&n.jsx(om,{size:14,className:_u("text-muted-foreground/50",a&&"rotate-180")}),t===o.length-1?n.jsxs("span",{className:"text-foreground font-medium flex items-center gap-1",children:[e.icon&&n.jsx(e.icon,{size:14}),e.label]}):n.jsxs(Zt,{to:e.path,onClick:()=>l(e.path),className:"hover:text-foreground transition-colors flex items-center gap-1",children:[e.icon&&n.jsx(e.icon,{size:14}),e.label]})]},e.path))})},ob=Dr("animate-spin rounded-full border-2 border-current border-t-transparent",{variants:{size:{xs:"h-3 w-3",sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},variant:{default:"text-primary",secondary:"text-muted-foreground",destructive:"text-destructive",success:"text-success",warning:"text-warning",accent:"text-accent"}},defaultVariants:{size:"default",variant:"default"}}),lb=Ne.forwardRef(({className:e,size:t,variant:r,label:s,text:a,...i},o)=>{const l=s||a;return n.jsxs("div",{ref:o,className:_u("inline-flex items-center gap-2",e),...i,children:[n.jsx("div",{className:_u(ob({size:t,variant:r})),"aria-label":l||"Loading"}),l&&n.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:l})]})});lb.displayName="LoadingSpinner";const cb=Dr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),db=Ne.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:_u(cb({variant:t}),e),...r}));db.displayName="Alert";Ne.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:_u("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const ub=Ne.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:_u("text-sm [&_p]:leading-relaxed",e),...t}));ub.displayName="AlertDescription";const mb=or("ErrorBoundary");let hb=class extends Ne.Component{constructor(e){super(e),r(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorId:""})}),this.state={hasError:!1,error:null,errorId:""}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(e,t){var r,n;mb.error("Component error caught",{error:e.message,stack:e.stack,componentStack:t.componentStack,errorId:this.state.errorId}),null==(n=(r=this.props).onError)||n.call(r,e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-6",children:n.jsxs("div",{className:"max-w-md w-full text-center space-y-4",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center",children:n.jsx(Uh,{className:"w-8 h-8 text-destructive"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Something went wrong"}),n.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."})]}),!1,n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(ku,{onClick:this.handleReset,variant:"outline",children:[n.jsx(gh,{className:"w-4 h-4 mr-2"}),"Try Again"]}),n.jsx(ku,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}):this.props.children}};const pb=({children:e})=>{const{user:t,userProfile:r,loading:s}=br(),[a,i]=Ne.useState(()=>{const e=localStorage.getItem("clientSidebarOpen");return!e||JSON.parse(e)}),[o,l]=Ne.useState(!1),c=St(),{isRTL:d}=cr(),u=Hj();return Ne.useEffect(()=>{s||t||c("/login")},[s,t,c]),s?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(lb,{size:"lg"})}):r&&["client","vendor","admin"].includes(r.role)?n.jsx(hb,{children:n.jsx(sb,{pageType:"dashboard",className:"min-h-screen",children:u?n.jsxs("div",{className:"min-h-screen flex flex-col",children:[n.jsx(Yj,{onMobileMenuOpen:()=>l(!0)}),n.jsx(nb,{isOpen:o,onOpenChange:l}),n.jsxs("main",{className:"flex-1 overflow-auto bg-muted/20 p-4 sm:p-6 min-h-[calc(100vh-8rem)] pb-20 safe-area-inset-bottom",children:[n.jsx(ib,{}),n.jsx(hb,{children:e||n.jsx(qt,{})})]}),n.jsx(Uf,{}),n.jsx($f,{})]}):n.jsxs("div",{className:"min-h-screen flex w-full",dir:d?"rtl":"ltr",children:[n.jsx(tg,{collapsed:!a}),n.jsxs("div",{className:_u("flex-1 flex flex-col min-w-0 transition-all duration-300",d?a?"mr-64":"mr-16":a?"ml-64":"ml-16"),children:[n.jsx(Yj,{onSidebarToggle:()=>{const e=!a;i(e),localStorage.setItem("clientSidebarOpen",JSON.stringify(e))},sidebarOpen:a}),n.jsxs("main",{className:"flex-1 overflow-auto bg-muted/20 p-6 min-h-[calc(100vh-4rem)]",children:[n.jsx(ib,{}),n.jsx(hb,{children:e||n.jsx(qt,{})})]})]})]})})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Eu,{className:"p-8 max-w-md mx-auto",children:n.jsxs(Ou,{children:[n.jsx(Mu,{className:"text-2xl text-center text-destructive",children:"Access Denied"}),n.jsx(Pu,{className:"text-center",children:"Please log in to access your dashboard."})]})})})},fb=({variant:e="sidebar",collapsed:t=!1})=>{var r;const{user:s,userProfile:a}=br(),{t:i}=cr(),o=(null==a?void 0:a.full_name)||(null==(r=null==s?void 0:s.email)?void 0:r.split("@")[0])||i("admin.users.unknownAdmin"),l=(null==s?void 0:s.email)||"",c=o.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)||"A";return t&&"sidebar"===e?n.jsxs("div",{className:"flex flex-col items-center py-2",children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==a?void 0:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary text-xs font-semibold border border-primary/20",children:c})]}),n.jsx("div",{className:"mt-1 w-1 h-1 bg-success rounded-full",title:i("admin.users.adminOnline")})]}):n.jsxs("div",{className:_u("flex items-center gap-3","mobile"===e?"px-4 py-3":"px-3 py-2"),children:[n.jsxs(Qx,{className:_u("mobile"===e?"h-10 w-10":"h-8 w-8"),children:[n.jsx(Zx,{src:null==a?void 0:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold border border-primary/20",children:c})]}),n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:_u("font-medium truncate text-foreground","mobile"===e?"text-base":"text-sm"),children:o}),n.jsx(Xf,{variant:"secondary",className:"text-xs px-1.5 py-0.5 bg-primary/10 text-primary border border-primary/20",children:i("admin.users.admin")})]}),!t&&n.jsx("span",{className:_u("text-muted-foreground truncate","mobile"===e?"text-sm":"text-xs"),children:l})]})]})},xb=({className:e,collapsed:t=!1,onToggle:r,onItemClick:s})=>{const a=Nt(),{getPendingTicketsCount:i}=(()=>{const{user:e,userProfile:t}=br(),{showSuccess:r,showError:n}=dy(),[s,a]=Ne.useState([]),[i,o]=Ne.useState(!1),l=async()=>{if(e){o(!0);try{let r=mr.from("support_tickets").select("*");"admin"!==(null==t?void 0:t.role)&&(r=r.eq("user_id",e.id));const{data:n,error:s}=await r.order("created_at",{ascending:!1});if(s)throw s;const i=await Promise.all((n||[]).map(async e=>{let t,r;if(e.user_id){const{data:r}=await mr.from("user_profiles").select("full_name, email, company_name, avatar_url").eq("user_id",e.user_id).single();r&&(t=r)}if(e.assigned_admin_id){const{data:t}=await mr.from("user_profiles").select("full_name, email, avatar_url").eq("user_id",e.assigned_admin_id).single();t&&(r=t)}return{...e,user_profiles:t,assigned_admin:r}}));a(i)}catch(r){n("Failed to load support tickets")}finally{o(!1)}}};return Ne.useEffect(()=>{l()},[e,t]),Ne.useEffect(()=>{if(!e||"admin"!==(null==t?void 0:t.role))return;let r=null;return(async()=>{try{r=mr.channel("support_tickets").on("postgres_changes",{event:"*",schema:"public",table:"support_tickets"},()=>{l()}).subscribe(e=>{})}catch(e){}})(),()=>{if(r)try{r.unsubscribe()}catch(e){}}},[e,t]),{tickets:s,loading:i,createTicket:async t=>{if(!e)return null;try{const{data:n,error:s}=await mr.from("support_tickets").insert({user_id:e.id,subject:t.subject,category:t.category,priority:t.priority,status:"open"}).select().single();if(s)throw s;const{data:a,error:i}=await mr.from("conversations").insert({client_id:e.id,vendor_id:e.id,support_ticket_id:n.id,conversation_type:"support",status:"active"}).select().single();if(i)throw i;const{error:o}=await mr.from("messages").insert({conversation_id:a.id,sender_id:e.id,recipient_id:e.id,content:`Support Request: ${t.subject}\n\n${t.message}`,message_type:"support_request"});if(o)throw o;return r("Support ticket created successfully"),l(),n}catch(s){return n("Failed to create support ticket"),null}},updateTicketStatus:async(e,t)=>{try{const{error:n}=await mr.from("support_tickets").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e);if(n)throw n;r("Ticket status updated"),l()}catch(s){n("Failed to update ticket status")}},assignTicket:async(e,t)=>{try{const{error:n}=await mr.from("support_tickets").update({assigned_admin_id:t,updated_at:(new Date).toISOString()}).eq("id",e);if(n)throw n;r("Ticket assigned successfully"),l()}catch(s){n("Failed to assign ticket")}},getPendingTicketsCount:()=>s.filter(e=>"open"===e.status).length,fetchTickets:l}})(),{t:o,isRTL:l}=cr(),c=i(),[d,u]=Ne.useState(()=>{const e=localStorage.getItem("adminSidebarExpanded");if(e)try{return new Set(JSON.parse(e))}catch{return new Set(["overview","management"])}return new Set(["overview","management"])}),m=[{id:"overview",label:o("admin.groups.overview"),priority:"primary",items:[{name:o("admin.dashboard"),href:"/admin/dashboard",icon:Ym},{name:o("admin.sidebarAnalytics"),href:"/admin/analytics",icon:Ju},{name:o("admin.performanceMonitor"),href:"/admin/performance-monitor",icon:Fu}]},{id:"management",label:o("admin.groups.management"),priority:"primary",items:[{name:o("admin.sidebarUsers"),href:"/admin/users",icon:Zh},{name:o("admin.sidebarRequests"),href:"/admin/requests",icon:Tm},{name:o("admin.offers"),href:"/admin/offers",icon:dh},{name:o("admin.orders"),href:"/admin/orders",icon:kh},{name:o("admin.navigation.verificationQueue"),href:"/admin/verification",icon:Yh},{name:o("admin.navigation.automation"),href:"/admin/automation",icon:Yu}]},{id:"business",label:o("admin.groups.business"),priority:"secondary",items:[{name:o("admin.financialTransactions"),href:"/admin/financial-transactions",icon:bm},{name:o("admin.subscriptions"),href:"/admin/subscriptions",icon:wm},{name:o("admin.supportTickets"),href:"/admin/support",icon:Ih,badge:c>0?c:void 0,badgeVariant:"destructive"},{name:o("admin.communications"),href:"/admin/communications",icon:nh}]},{id:"system",label:o("admin.groups.system"),priority:"utility",items:[{name:o("admin.navigation.categoryManagement"),href:"/admin/category-management",icon:Rm},{name:o("admin.sidebarExpertConsultations"),href:"/admin/expert-consultations",icon:pm},{name:o("admin.settings"),href:"/admin/settings",icon:Nh},{name:o("admin.profile"),href:"/admin/profile",icon:Xh}]}],h=e=>a.pathname===e,p=e=>a.pathname.startsWith(e)&&"/admin/dashboard"!==e,f=e=>{switch(e){case"primary":return"border-l-2 border-l-primary/20 bg-primary/5";case"secondary":return"border-l-2 border-l-accent/20 bg-accent/5";case"utility":return"border-l-2 border-l-muted-foreground/20 bg-muted/50";default:return""}};return n.jsxs("div",{className:_u("flex flex-col h-screen bg-card border-border transition-all duration-300 shadow-sm fixed top-0 z-50",t?"w-16":"w-64",l?"right-0 border-l":"left-0 border-r",e),dir:l?"rtl":"ltr",children:[n.jsx("div",{className:"border-b border-border bg-card h-16 flex items-center px-4",children:n.jsx(fb,{variant:"sidebar",collapsed:t})}),n.jsx(Lx,{className:"flex-1",children:n.jsx("div",{className:"p-3 space-y-3",children:m.map(e=>{const r=!t&&d.has(e.id),a=e.items.some(e=>h(e.href)||p(e.href));return n.jsxs("div",{className:_u("rounded-lg transition-all duration-200",f(e.priority)),children:[!t&&n.jsxs(ku,{variant:"ghost",onClick:()=>(e=>{if(t)return;const r=new Set(d);r.has(e)?r.delete(e):r.add(e),u(r),localStorage.setItem("adminSidebarExpanded",JSON.stringify(Array.from(r)))})(e.id),className:_u("w-full justify-between px-3 py-2 h-auto font-medium","text-xs uppercase tracking-wider","text-muted-foreground hover:text-foreground hover:bg-accent/50",a&&"text-primary font-semibold",l&&"flex-row-reverse"),type:"button",children:[n.jsxs("span",{className:_u("flex items-center gap-2",l&&"flex-row-reverse"),children:[n.jsx("span",{children:e.label}),a&&n.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-pulse"})]}),r?n.jsx(am,{className:_u("h-3 w-3 transition-transform duration-200",l&&"rotate-180")}):n.jsx(om,{className:_u("h-3 w-3 transition-transform duration-200",l&&"rotate-180")})]}),n.jsx("div",{className:_u("space-y-1 transition-all duration-300",t||r?"block":"hidden",!t&&"px-2 pb-2"),children:e.items.map(e=>{const r=h(e.href)||p(e.href);return n.jsxs(Zt,{to:e.href,onClick:s,className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium hover:bg-accent/50",t?"justify-center px-2":"justify-start",r?"bg-primary/10 text-primary border border-primary/20 shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent/30",l&&"flex-row-reverse"),title:t?e.name:void 0,"aria-label":`${o("admin.navigateTo")} ${e.name}`,"aria-current":r?"page":void 0,children:[n.jsx(e.icon,{className:_u("shrink-0 transition-all duration-200",t?"h-5 w-5":"h-4 w-4",r?"text-primary":"text-muted-foreground")}),!t&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:_u("truncate flex-1 text-foreground",l&&"text-right"),children:e.name}),e.badge&&e.badge>0&&n.jsx(Xf,{variant:e.badgeVariant||"secondary",className:_u("h-5 min-w-5 px-1.5 text-xs flex items-center justify-center shrink-0","destructive"===e.badgeVariant&&"animate-pulse"),children:e.badge>99?o("admin.badgeMax"):e.badge})]})]},e.href)})})]},e.id)})})})]})},gb=Ne.forwardRef(({...e},t)=>n.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e}));gb.displayName="Breadcrumb";const vb=Ne.forwardRef(({className:e,...t},r)=>n.jsx("ol",{ref:r,className:_u("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));vb.displayName="BreadcrumbList";const yb=Ne.forwardRef(({className:e,...t},r)=>n.jsx("li",{ref:r,className:_u("inline-flex items-center gap-1.5",e),...t}));yb.displayName="BreadcrumbItem";const jb=Ne.forwardRef(({asChild:e,className:t,...r},a)=>{const i=e?s:"a";return n.jsx(i,{ref:a,className:_u("transition-colors hover:text-foreground",t),...r})});jb.displayName="BreadcrumbLink";const bb=Ne.forwardRef(({className:e,...t},r)=>n.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:_u("font-normal text-foreground",e),...t}));bb.displayName="BreadcrumbPage";const wb=({children:e,className:t,...r})=>n.jsx("li",{role:"presentation","aria-hidden":"true",className:_u("[&>svg]:size-3.5",t),...r,children:e??n.jsx(om,{})});wb.displayName="BreadcrumbSeparator";const Nb={"/admin":"admin.breadcrumbs.admin","/admin/dashboard":"admin.breadcrumbs.dashboardOverview","/admin/users":"admin.breadcrumbs.userManagement","/admin/requests":"admin.breadcrumbs.requestsManagement","/admin/offers":"admin.breadcrumbs.offersManagement","/admin/orders":"admin.breadcrumbs.ordersManagement","/admin/projects":"admin.breadcrumbs.projectsManagement","/admin/analytics":"admin.breadcrumbs.platformAnalytics","/admin/subscriptions":"admin.breadcrumbs.subscriptionManagement","/admin/support":"admin.breadcrumbs.supportCenter","/admin/verification-queue":"admin.breadcrumbs.verificationQueue","/admin/category-management":"admin.breadcrumbs.categoryManagement","/admin/expert-consultations":"admin.breadcrumbs.expertConsultations","/admin/financial-transactions":"admin.breadcrumbs.financialTransactions","/admin/security":"admin.breadcrumbs.securityMonitoring","/admin/communications":"admin.breadcrumbs.communicationCenter"},_b=()=>{const e=Nt(),{t:t,isRTL:r}=cr(),s=e.pathname.split("/").filter(Boolean),a=[];let i="";for(let n=0;n<s.length;n++){i+="/"+s[n];const e=n===s.length-1,r=Nb[i],o=t(r||"admin.breadcrumbs.unknown");a.push({path:i,title:o,isLast:e})}return n.jsx("div",{dir:r?"rtl":"ltr",children:n.jsx(gb,{children:n.jsxs(vb,{className:_u(r&&"flex-row-reverse"),children:[n.jsx(yb,{children:n.jsxs(jb,{href:"/admin",className:_u("flex items-center gap-1 text-foreground opacity-80 hover:text-foreground hover:opacity-100 transition-colors",r&&"flex-row-reverse"),children:[n.jsx(Um,{className:"h-3 w-3"}),n.jsx("span",{className:"admin-caption",children:t("admin.breadcrumbs.admin")})]})}),a.length>1&&n.jsxs(n.Fragment,{children:[n.jsx(wb,{children:n.jsx(om,{className:_u("h-3 w-3 text-foreground opacity-60",r&&"rotate-180")})}),a.slice(1).map((e,t)=>n.jsxs("div",{className:_u("flex items-center",r&&"flex-row-reverse"),children:[n.jsx(yb,{children:e.isLast?n.jsx(bb,{className:"font-medium text-foreground text-xs",children:e.title}):n.jsx(jb,{href:e.path,className:"text-foreground opacity-80 hover:text-foreground hover:opacity-100 text-xs transition-colors",children:e.title})}),!e.isLast&&n.jsx(wb,{children:n.jsx(om,{className:_u("h-3 w-3 text-foreground opacity-60",r&&"rotate-180")})})]},e.path))]})]})})})},Sb=ne,kb=se,Cb=re,Eb=Ne.forwardRef(({className:e,...t},r)=>n.jsx(Q,{ref:r,className:_u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Eb.displayName=Q.displayName;const Ob=Ne.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Cb,{children:[n.jsx(Eb,{}),n.jsxs(Z,{ref:s,className:_u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(J,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(sp,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ob.displayName=Z.displayName;const Mb=({className:e,...t})=>n.jsx("div",{className:_u("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Mb.displayName="DialogHeader";const Pb=({className:e,...t})=>n.jsx("div",{className:_u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Pb.displayName="DialogFooter";const Ab=Ne.forwardRef(({className:e,...t},r)=>n.jsx(ee,{ref:r,className:_u("text-lg font-semibold leading-none tracking-tight",e),...t}));Ab.displayName=ee.displayName;const Tb=Ne.forwardRef(({className:e,...t},r)=>n.jsx(te,{ref:r,className:_u("text-sm text-muted-foreground",e),...t}));Tb.displayName=te.displayName,Array(12).fill(0),ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ke.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}));var Db=1,Rb=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Db++,a=this.toasts.find(e=>e.id===s),i=void 0===e.dismissible||e.dismissible;return a?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:r}),{...t,...e,id:s,dismissible:i,title:r}):t):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let n=e instanceof Promise?e:e(),s=void 0!==r;return n.then(async e=>{if(Lb(e)&&!e.ok){s=!1;let n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:r,type:"error",message:n,description:a})}else if(void 0!==t.success){s=!1;let n="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"success",message:n,description:a})}}).catch(async e=>{if(void 0!==t.error){s=!1;let n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:r,type:"error",message:n,description:a})}}).finally(()=>{var e;s&&(this.dismiss(r),r=void 0),null==(e=t.finally)||e.call(t)}),r},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||Db++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Lb=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,qb=(e,t)=>{let r=(null==t?void 0:t.id)||Db++;return Rb.addToast({title:e,...t,id:r}),r},Ib=Object.assign(qb,{success:Rb.success,info:Rb.info,warning:Rb.warning,error:Rb.error,custom:Rb.custom,message:Rb.message,promise:Rb.promise,dismiss:Rb.dismiss,loading:Rb.loading},{getHistory:()=>Rb.toasts});!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');const Fb=()=>{const[e,t]=Ne.useState(""),[r,s]=Ne.useState([]),[a,i]=Ne.useState(!1),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(-1),[u,m]=Ne.useState([]),[h,p]=Ne.useState(null),f=Ne.useRef(null),x=Ne.useRef(null),g=Ne.useRef(new Map),v=St(),y=cr(),{t:j,isRTL:b}=y||{t:e=>e,isRTL:!1},w=Hj();Ne.useEffect(()=>{const e=localStorage.getItem("admin-recent-searches");e&&m(JSON.parse(e))},[]);const N=e=>{if(!e.trim())return;const t=[e,...u.filter(t=>t!==e)].slice(0,5);m(t),localStorage.setItem("admin-recent-searches",JSON.stringify(t))},_=async e=>{if(!e.trim())return s([]),void p(null);const t=e.toLowerCase().trim(),r=g.current.get(t);if(r)return s(r),void p(null);x.current&&x.current.abort();const n=new AbortController;x.current=n,i(!0),p(null);try{const r=[],a=[];a.push(mr.from("user_profiles").select("id, full_name, email, company_name, role").or(`full_name.ilike.%${e}%,email.ilike.%${e}%,company_name.ilike.%${e}%`).limit(3).abortSignal(n.signal)),a.push(Promise.resolve({data:[{id:"1",full_name:"John Doe",event_type:"Business Consultation",status:"pending"}]})),a.push(mr.from("user_profiles").select("id, full_name, company_name, role").or(`full_name.ilike.%${e}%,company_name.ilike.%${e}%`).limit(3).abortSignal(n.signal));const[i,o,l]=await Promise.allSettled(a);if("fulfilled"===i.status&&i.value.data&&i.value.data.forEach(e=>{r.push({id:e.id,type:"user",title:e.full_name||e.email,subtitle:e.company_name||e.role,url:`/admin/users?search=${e.id}`})}),"fulfilled"===o.status&&o.value.data&&o.value.data.forEach(e=>{var t;r.push({id:e.id,type:"request",title:e.title,subtitle:(null==(t=e.description)?void 0:t.slice(0,50))+"...",status:e.admin_approval_status,url:`/admin/requests?search=${e.id}`})}),"fulfilled"===l.status&&l.value.data&&l.value.data.forEach(e=>{var t;r.push({id:e.id,type:"offer",title:e.title||"Untitled Offer",subtitle:(null==(t=e.description)?void 0:t.slice(0,50))+"...",status:e.admin_approval_status,url:`/admin/offers?search=${e.id}`})}),g.current.size>10){const e=g.current.keys().next().value;g.current.delete(e)}g.current.set(t,r),s(r)}catch(a){"AbortError"!==a.name&&(p(j("admin.searchFailed")),s([]))}finally{i(!1),x.current=null}};Ne.useEffect(()=>{const t=setTimeout(()=>{_(e)},500);return()=>clearTimeout(t)},[e]),Ne.useEffect(()=>()=>{x.current&&x.current.abort()},[]);const S=t=>{var n;"ArrowDown"===t.key?(t.preventDefault(),d(e=>Math.min(e+1,r.length-1))):"ArrowUp"===t.key?(t.preventDefault(),d(e=>Math.max(e-1,-1))):"Enter"===t.key?(t.preventDefault(),c>=0&&r[c]?k(r[c]):e.trim()&&(N(e),Ib.info(`${j("admin.searchingFor")}: ${e}`))):"Escape"===t.key&&(l(!1),null==(n=f.current)||n.blur())},k=r=>{N(e),v(r.url),l(!1),t("")},C=e=>{switch(e){case"user":return Xh;case"request":return Tm;case"offer":return dh;case"order":return kh;default:return jh}},E=e=>{if(!e)return null;const t="approved"===e?"default":"rejected"===e?"destructive":"pending"===e?"secondary":"outline";return n.jsx(Xf,{variant:t,children:e})};return w?n.jsxs(Sb,{open:o,onOpenChange:l,children:[n.jsx(kb,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"icon",className:"h-10 w-10 hover:bg-accent/50 transition-all duration-200 hover:scale-105 active:scale-95",children:n.jsx(jh,{className:"h-4 w-4"})})}),n.jsxs(Ob,{className:"sm:max-w-md",children:[n.jsx(Mb,{children:n.jsx(Ab,{className:"text-lg font-semibold",children:j("admin.search")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx($j,{ref:f,value:e,onChange:e=>t(e.target.value),onKeyDown:S,placeholder:j("admin.searchPlaceholder"),className:"pl-10 text-sm",autoFocus:!0}),e&&n.jsx(ku,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>t(""),children:n.jsx(sp,{className:"h-3 w-3"})})]}),a&&n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}),h&&n.jsxs("div",{className:"text-center py-4",children:[n.jsxs("div",{className:"text-destructive text-sm mb-2",children:["⚠ ",h]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>_(e),className:"text-xs",children:j("admin.tryAgain")})]}),!h&&!a&&r.length>0&&n.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:r.map((e,t)=>{const r=C(e.type);return n.jsx("button",{className:_u("w-full text-left p-3 rounded-md hover:bg-accent/50 transition-colors",c===t&&"bg-accent/50"),onClick:()=>k(e),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(r,{className:"h-4 w-4 text-muted-foreground shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm truncate",children:e.title}),e.subtitle&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle})]}),E(e.status)]})},e.id)})}),!h&&!a&&e&&0===r.length&&n.jsxs("div",{className:"text-center py-4",children:[n.jsx(jh,{className:"h-6 w-6 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-sm",children:j("admin.noSearchResults")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j("admin.tryDifferentSearch")})]})]})]})]}):n.jsxs(ry,{open:o,onOpenChange:l,children:[n.jsx(ny,{asChild:!0,children:n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 z-10",b?"right-3":"left-3")}),n.jsx($j,{ref:f,value:e,onChange:e=>t(e.target.value),onKeyDown:S,onFocus:()=>l(!0),placeholder:j("admin.searchAdvancedPlaceholder")||"Search users, requests, offers...",className:_u("w-72 text-sm transition-all duration-200 hover:shadow-md focus:shadow-lg",b?"pr-10 pl-4 text-right":"pl-10 pr-4 text-left"),dir:b?"rtl":"ltr"}),e&&n.jsx(ku,{variant:"ghost",size:"icon",className:_u("absolute top-1/2 transform -translate-y-1/2 h-6 w-6 z-10",b?"left-2":"right-2"),onClick:()=>t(""),children:n.jsx(sp,{className:"h-3 w-3"})})]})}),n.jsx(sy,{className:"w-96 p-0 bg-popover border border-border shadow-xl z-[100] backdrop-blur-sm",align:b?"end":"start",children:n.jsxs("div",{className:"p-4",children:[a&&n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}),!a&&r.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:j("admin.searchResults")}),r.map((e,t)=>{const r=C(e.type);return n.jsx("button",{className:_u("w-full text-left p-3 rounded-md hover:bg-accent/50 transition-colors",c===t&&"bg-accent/50"),onClick:()=>k(e),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(r,{className:"h-4 w-4 text-muted-foreground shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm truncate",children:e.title}),e.subtitle&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle})]}),E(e.status)]})},e.id)})]}),h&&n.jsxs("div",{className:"text-center py-6",children:[n.jsxs("div",{className:"text-destructive text-sm mb-2",children:["⚠ ",h]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>_(e),className:"text-xs",children:j("admin.tryAgain")})]}),!a&&!h&&e&&0===r.length&&n.jsxs("div",{className:"text-center py-6",children:[n.jsx(jh,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-sm",children:j("admin.noSearchResults")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:j("admin.tryDifferentSearch")})]}),!e&&u.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[n.jsx(gm,{className:"h-3 w-3"}),j("admin.recentSearches")]}),u.map((e,r)=>n.jsx("button",{className:"w-full text-left p-2 rounded hover:bg-accent/50 transition-colors text-sm",onClick:()=>t(e),children:e},r))]}),n.jsx(cy,{className:"my-3"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n.jsx(vm,{className:"h-3 w-3"}),j("admin.searchTips")||"Use ↑↓ to navigate, Enter to select"]}),n.jsxs(ku,{variant:"ghost",size:"sm",className:"text-xs",children:[n.jsx(qm,{className:"h-3 w-3 mr-1"}),j("admin.advancedFilters")]})]})]})})]})},zb=({userProfile:e})=>{var t,r,s;const a=St(),{signOut:i}=br(),{t:o,isRTL:l,language:c,setLanguage:d}=cr(),u=Hj();return n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(ku,{variant:"ghost",className:"flex items-center gap-2 px-2 rounded-lg h-8",children:[n.jsx("div",{className:"h-6 w-6 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-medium",children:(null==(t=null==e?void 0:e.full_name)?void 0:t[0])||(null==(r=null==e?void 0:e.email)?void 0:r[0])||"A"}),n.jsxs("div",{className:"hidden lg:block text-left",children:[n.jsx("p",{className:"text-sm font-medium leading-none",children:(null==e?void 0:e.full_name)||(null==(s=null==e?void 0:e.email)?void 0:s.split("@")[0])||o("admin.adminUser")}),n.jsx("p",{className:"text-xs text-foreground opacity-75 capitalize",children:null==e?void 0:e.role})]})]})}),n.jsxs(Rj,{align:l?"start":"end",className:"w-56",children:[n.jsxs(Lj,{onClick:()=>a("/profile"),className:_u("flex items-center",l&&"flex-row-reverse"),children:[n.jsx(Xh,{className:_u("h-4 w-4",l?"ml-2":"mr-2")}),n.jsx("span",{children:o("common.profile")})]}),n.jsxs(Lj,{onClick:()=>a("/settings"),className:_u("flex items-center",l&&"flex-row-reverse"),children:[n.jsx(Nh,{className:_u("h-4 w-4",l?"ml-2":"mr-2")}),n.jsx("span",{children:o("common.settings")})]}),u&&n.jsxs(n.Fragment,{children:[n.jsx(Ij,{}),n.jsxs(Lj,{onClick:()=>d("en"===c?"ar":"en"),className:_u("flex items-center",l&&"flex-row-reverse"),children:[n.jsx(Im,{className:_u("h-4 w-4",l?"ml-2":"mr-2")}),n.jsx("span",{children:o("en"===c?"admin.languageArabic":"admin.languageEnglish")})]})]}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:async()=>{try{await i(),a("/login")}catch(e){}},className:_u("flex items-center text-destructive",l&&"flex-row-reverse"),children:[n.jsx(Qm,{className:_u("h-4 w-4",l?"ml-2":"mr-2")}),n.jsx("span",{children:o("common.signOut")})]})]})]})},Bb=()=>{const{language:e,setLanguage:t,isRTL:r,t:s}=cr();return Hj()?null:n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"icon",className:"h-8 w-8",children:n.jsx(Im,{className:"h-4 w-4"})})}),n.jsxs(Rj,{align:r?"start":"end",children:[n.jsx(Lj,{onClick:()=>t("en"),className:_u("flex items-center",r&&"flex-row-reverse","en"===e&&"bg-accent"),children:s("admin.languageEnglish")}),n.jsx(Lj,{onClick:()=>t("ar"),className:_u("flex items-center",r&&"flex-row-reverse","ar"===e&&"bg-accent"),children:s("admin.languageArabic")})]})]})},$b=or("useNotifications"),Ub=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),[s,a]=Ne.useState(0),{user:i}=br(),o=async()=>{if(i)try{n(!0);const{data:e,error:r}=await mr.from("notifications").select("*").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(50);if(r)throw r;const s=e||[];t(s),a(s.filter(e=>!e.read_at).length)}catch(e){$b.error("Error fetching notifications",{error:e})}finally{n(!1)}};return Ne.useEffect(()=>{i&&o()},[i]),Ne.useEffect(()=>{if(!i)return;let e=null;try{$b.debug("Setting up realtime subscription"),e=mr.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${i.id}`},e=>{$b.debug("New notification received",{payload:e});const r=e.new;t(e=>[r,...e]),a(e=>e+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${i.id}`},e=>{$b.debug("Notification updated",{payload:e});const r=e.new;t(e=>e.map(e=>e.id===r.id?r:e))}).subscribe((e,t)=>{var r,n;if($b.debug("Subscription status",{status:e,error:t}),t){if($b.error("Notifications realtime subscription error",{error:t}),$b.info("Notifications realtime disabled - app will work without live updates"),(null==(r=t.message)?void 0:r.includes("WebSocket"))||(null==(n=t.message)?void 0:n.includes("insecure")))return void $b.info("WebSocket connection unavailable for notifications - continuing without realtime")}else"SUBSCRIBED"===e?$b.info("Notifications realtime subscription active"):"CHANNEL_ERROR"===e?$b.warn("Notifications subscription error - continuing without realtime updates"):"TIMED_OUT"===e?$b.warn("Notifications subscription timed out - continuing without realtime updates"):"CLOSED"===e&&$b.info("Notifications subscription closed")})}catch(r){$b.warn("Failed to set up notifications realtime subscription",{error:r}),$b.info("Continuing without realtime notifications - app will work normally with polling")}return()=>{if(e)try{$b.debug("Cleaning up realtime subscription"),mr.removeChannel(e)}catch(t){$b.warn("Error during subscription cleanup",{cleanupError:t})}}},[i]),{notifications:e,loading:r,unreadCount:s,markAsRead:async e=>{try{const{error:r}=await mr.from("notifications").update({read:!0}).eq("id",e).eq("user_id",null==i?void 0:i.id);if(r)throw r;t(t=>t.map(t=>t.id===e?{...t,read_at:(new Date).toISOString()}:t)),a(e=>Math.max(0,e-1))}catch(r){$b.error("Error marking notification as read",{error:r,notificationId:e})}},markAllAsRead:async()=>{if(i)try{const r=e.filter(e=>!e.read_at).map(e=>e.id);if(0===r.length)return;const{error:n}=await mr.from("notifications").update({read:!0}).in("id",r).eq("user_id",i.id);if(n)throw n;t(e=>e.map(e=>({...e,read_at:e.read_at||(new Date).toISOString()}))),a(0)}catch(r){$b.error("Error marking all notifications as read",{error:r})}},refetch:o}},Vb=({children:e})=>{const[t,r]=Ne.useState(!1),{t:s,isRTL:a,language:i}=cr(),{toast:o}=fp(),{notifications:l,loading:c,unreadCount:d,markAsRead:u,markAllAsRead:m}=Ub(),h=e=>{const t=new Date(e),r=new Date,n=Math.floor((r.getTime()-t.getTime())/6e4);if(n<1)return a?"الآن":"Now";if(n<60)return a?`منذ ${n} دقيقة`:`${n} minutes ago`;if(n<1440){const e=Math.floor(n/60);return a?`منذ ${e} ساعة`:`${e} hours ago`}{const e=Math.floor(n/1440);return a?`منذ ${e} يوم`:`${e} days ago`}};return n.jsxs(Sb,{open:t,onOpenChange:r,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[500px]",children:[n.jsxs(Mb,{children:[n.jsxs(Ab,{className:"flex items-center gap-2 "+(a?"flex-row-reverse text-right":"text-left"),children:[n.jsx(Wu,{className:"h-5 w-5"}),a?"الإشعارات":"Notifications",d>0&&n.jsx(Xf,{variant:"destructive",className:"text-xs",children:d})]}),n.jsx(Tb,{className:a?"text-right":"text-left",children:a?"آخر الإشعارات والتحديثات":"Latest notifications and updates"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:async()=>{await m(),o({title:a?"تم تحديد الكل كمقروء":"All Notifications Marked as Read",description:a?"تم وضع علامة قراءة على جميع الإشعارات":"All notifications have been marked as read"})},children:a?"وضع علامة قراءة للكل":"Mark All Read"}),n.jsx(ku,{variant:"outline",size:"sm",children:a?"إعدادات الإشعارات":"Notification Settings"})]}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c?n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===l.length?n.jsxs("div",{className:"text-center p-8 text-muted-foreground "+(a?"text-right":"text-left"),children:[n.jsx(Wu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:a?"لا توجد إشعارات":"No notifications yet"})]}):l.map(e=>{const t=(e=>{switch(e){case"offer":case"offer_status":return dh;case"request":case"request_approval":return Tm;case"rating":return Th;case"user":return Zh;default:return Vm}})(e.type);return n.jsx("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors hover:bg-accent/50 "+(e.read_at?"":"bg-primary/5 border-primary/20"),onClick:()=>(async e=>{e.read_at||await u(e.id),o({title:a?"إشعار":"Notification",description:e.message})})(e),children:n.jsxs("div",{className:"flex items-start gap-3 "+(a?"flex-row-reverse":""),children:[n.jsx("div",{className:"p-2 rounded-full bg-primary/10 text-primary",children:n.jsx(t,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0 "+(a?"text-right":"text-left"),children:[n.jsxs("div",{className:"flex items-center justify-between mb-1 "+(a?"flex-row-reverse":""),children:[n.jsx("h4",{className:"font-semibold text-sm "+(e.read_at?"text-muted-foreground":"text-foreground"),children:e.title}),n.jsx("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:!e.read_at&&n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.message}),n.jsx("p",{className:"text-xs text-muted-foreground",children:h(e.created_at)})]})]})},e.id)})}),n.jsx("div",{className:"pt-4 border-t",children:n.jsx(ku,{variant:"outline",className:"w-full",children:a?"عرض جميع الإشعارات":"View All Notifications"})})]})]})]})},Wb=({onMobileMenuOpen:e,onSidebarToggle:t,sidebarOpen:r})=>{const s=St(),{userProfile:a}=br(),{t:i,isRTL:o}=cr(),l=Hj(),{unreadCount:c}=Ub();return n.jsxs("header",{className:"border-b border-border bg-card sticky top-0 z-50 shadow-sm",children:[n.jsx("div",{className:"h-16 min-h-16",children:n.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-4 h-full flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1 mr-2 sm:mr-4",children:[l&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0","aria-label":i("admin.openMobileMenu"),children:n.jsx(th,{className:"h-4 w-4"})}),!l&&t&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:t,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0","aria-label":i(r?"admin.collapseSidebar":"admin.expandSidebar"),children:n.jsx(th,{className:"h-4 w-4"})}),n.jsxs("button",{onClick:()=>s("/admin/dashboard"),className:"flex items-center gap-3 hover:opacity-80 transition-all duration-200 min-w-0","aria-label":i("admin.goToAdminDashboard"),children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:i("admin.logoAlt"),className:"h-8 w-auto shrink-0"}),n.jsxs("div",{className:"hidden sm:flex flex-col items-start min-w-0",children:[n.jsx("span",{className:"text-sm sm:text-base font-semibold leading-tight truncate text-foreground",children:i("admin.dashboard")}),n.jsx("span",{className:"text-xs leading-tight text-muted-foreground hidden md:block",children:i("admin.managementPortal")})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[n.jsx(Fb,{}),n.jsx(Vb,{children:n.jsxs(ku,{variant:"ghost",size:"icon",className:"relative h-9 w-9 hover:bg-accent/50 transition-all duration-200","aria-label":i("admin.viewNotifications"),children:[n.jsx(Wu,{className:"h-4 w-4"}),c>0&&n.jsx(Xf,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-xs animate-pulse",children:c>99?"99+":c})]})}),n.jsx(Fj,{}),!l&&n.jsx(Bb,{}),n.jsx(zb,{userProfile:a})]})]})}),n.jsx("div",{className:"border-t border-border/50 bg-muted/30 px-4 py-2",children:n.jsx("div",{className:"max-w-full mx-auto",children:n.jsx(_b,{})})})]})},Hb=({isOpen:e,onOpenChange:t})=>{const r=Nt(),{userProfile:s}=br(),{isRTL:a,t:i}=cr(),o=[{section:i("admin.groups.overview")||"Overview",items:[{name:i("admin.dashboard")||"Dashboard",href:"/admin/dashboard",icon:Ym},{name:i("admin.sidebarAnalytics")||"Analytics",href:"/admin/analytics",icon:Ju},{name:i("admin.performanceMonitor")||"Performance Monitor",href:"/admin/performance-monitor",icon:Fu}]},{section:i("admin.groups.management")||"Management",items:[{name:i("admin.sidebarUsers")||"Users",href:"/admin/users",icon:Zh},{name:i("admin.sidebarRequests")||"Requests",href:"/admin/requests",icon:Tm},{name:i("admin.offers")||"Offers",href:"/admin/offers",icon:dh},{name:i("admin.orders")||"Orders",href:"/admin/orders",icon:kh},{name:i("admin.messages")||"Messages",href:"/admin/messages",icon:nh}]},{section:i("admin.groups.communication")||"Communication",items:[{name:i("admin.notifications")||"Notifications",href:"/admin/notifications",icon:Wu},{name:i("admin.emailCampaigns")||"Email Campaigns",href:"/admin/email-campaigns",icon:Zm},{name:i("admin.expertConsultations")||"Expert Consultations",href:"/admin/expert-consultations",icon:Yh}]},{section:i("admin.groups.system")||"System",items:[{name:i("admin.security")||"Security",href:"/admin/security",icon:Sh},{name:i("admin.systemHealth")||"System Health",href:"/admin/system-health",icon:Nm},{name:i("admin.settings")||"Settings",href:"/admin/settings",icon:Nh},{name:i("admin.support")||"Support",href:"/admin/support",icon:pm}]}];return n.jsx(Kj,{open:e,onOpenChange:t,children:n.jsx(Jj,{side:a?"right":"left",className:_u("w-80 p-0 bg-background overflow-hidden","safe-area-inset-y",a?"border-l-2":"border-r-2","flex flex-col"),children:n.jsxs("div",{className:"flex flex-col h-full",dir:a?"rtl":"ltr",children:[n.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[n.jsxs(Zt,{to:"/admin/dashboard",onClick:()=>t(!1),className:"flex items-center gap-3",children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:"MWRD Logo",className:"h-8 w-auto"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-foreground",children:"MWRD Admin"}),n.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:(null==s?void 0:s.role)||"Admin"})]})]}),n.jsx(ku,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"h-8 w-8",children:n.jsx(sp,{className:"h-4 w-4"})})]}),n.jsx(Lx,{className:"flex-1 p-4",children:n.jsx("div",{className:"space-y-6",children:o.map(e=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs uppercase tracking-wider font-semibold text-muted-foreground mb-3",children:e.section}),n.jsx("div",{className:"space-y-1",children:e.items.map(e=>{const s=(i=e.href,r.pathname===i);var i;return n.jsxs(Zt,{to:e.href,onClick:()=>t(!1),className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium",s?"bg-primary/10 text-primary border border-primary/20":"text-muted-foreground hover:text-foreground hover:bg-accent/50",a&&"flex-row-reverse text-right"),children:[n.jsx(e.icon,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:e.name})]},e.href)})})]},e.section))})})]})})})};var Yb=.999,Kb=/[\\\/_+.#"@\[\(\{&]/,Gb=/[\\\/_+.#"@\[\(\{&]/g,Xb=/[\s-]/,Qb=/[\s-]/g;function Zb(e,t,r,n,s,a,i){if(a===t.length)return s===e.length?1:.99;var o=`${s},${a}`;if(void 0!==i[o])return i[o];for(var l,c,d,u,m=n.charAt(a),h=r.indexOf(m,s),p=0;h>=0;)(l=Zb(e,t,r,n,h+1,a+1,i))>p&&(h===s?l*=1:Kb.test(e.charAt(h-1))?(l*=.8,(d=e.slice(s,h-1).match(Gb))&&s>0&&(l*=Math.pow(Yb,d.length))):Xb.test(e.charAt(h-1))?(l*=.9,(u=e.slice(s,h-1).match(Qb))&&s>0&&(l*=Math.pow(Yb,u.length))):(l*=.17,s>0&&(l*=Math.pow(Yb,h-s))),e.charAt(h)!==t.charAt(a)&&(l*=.9999)),(l<.1&&r.charAt(h-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(h-1)!==n.charAt(a))&&(.1*(c=Zb(e,t,r,n,h+1,a+2,i))>l&&(l=.1*c)),l>p&&(p=l),h=r.indexOf(m,h+1);return i[o]=p,p}function Jb(e){return e.toLowerCase().replace(Qb," ")}function ew(e,t,r){return Zb(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,Jb(e),Jb(t),0,0,{})}function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tw.apply(null,arguments)}function rw(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function nw(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function sw(...e){return Ne.useCallback(nw(...e),e)}function aw(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return Ne.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}const iw=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?Ne.useLayoutEffect:()=>{},ow=_e["useId".toString()]||(()=>{});let lw=0;function cw(e){const[t,r]=Ne.useState(ow());return iw(()=>{e||r(e=>null!=e?e:String(lw++))},[e]),e||(t?`radix-${t}`:"")}function dw(e){const t=Ne.useRef(e);return Ne.useEffect(()=>{t.current=e}),Ne.useMemo(()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)},[])}function uw({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=function({defaultProp:e,onChange:t}){const r=Ne.useState(e),[n]=r,s=Ne.useRef(n),a=dw(t);return Ne.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}({defaultProp:t,onChange:r}),a=void 0!==e,i=a?e:n,o=dw(r);return[i,Ne.useCallback(t=>{if(a){const r="function"==typeof t?t(e):t;r!==e&&o(r)}else s(t)},[a,e,s,o])]}const mw=Ne.forwardRef((e,t)=>{const{children:r,...n}=e,s=Ne.Children.toArray(r),a=s.find(fw);if(a){const e=a.props.children,r=s.map(t=>t===a?Ne.Children.count(e)>1?Ne.Children.only(null):Ne.isValidElement(e)?e.props.children:null:t);return Ne.createElement(hw,tw({},n,{ref:t}),Ne.isValidElement(e)?Ne.cloneElement(e,void 0,r):null)}return Ne.createElement(hw,tw({},n,{ref:t}),r)});mw.displayName="Slot";const hw=Ne.forwardRef((e,t)=>{const{children:r,...n}=e;return Ne.isValidElement(r)?Ne.cloneElement(r,{...xw(n,r.props),ref:t?nw(t,r.ref):r.ref}):Ne.Children.count(r)>1?Ne.Children.only(null):null});hw.displayName="SlotClone";const pw=({children:e})=>Ne.createElement(Ne.Fragment,null,e);function fw(e){return Ne.isValidElement(e)&&e.type===pw}function xw(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{a(...e),s(...e)}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}const gw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const r=Ne.forwardRef((e,r)=>{const{asChild:n,...s}=e,a=n?mw:t;return Ne.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),Ne.createElement(a,tw({},s,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});const vw="dismissableLayer.update",yw="dismissableLayer.pointerDownOutside",jw="dismissableLayer.focusOutside";let bw;const ww=Ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nw=Ne.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=Ne.useContext(ww),[u,m]=Ne.useState(null),h=null!==(r=null==u?void 0:u.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,p]=Ne.useState({}),f=sw(t,e=>m(e)),x=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(g),y=u?x.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,b=y>=v,w=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=dw(e),n=Ne.useRef(!1),s=Ne.useRef(()=>{});return Ne.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){Sw(yw,r,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...d.branches].some(e=>e.contains(t));b&&!r&&(null==a||a(e),null==o||o(e),e.defaultPrevented||null==l||l())},h),N=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=dw(e),n=Ne.useRef(!1);return Ne.useEffect(()=>{const e=e=>{if(e.target&&!n.current){Sw(jw,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...d.branches].some(e=>e.contains(t))||(null==i||i(e),null==o||o(e),e.defaultPrevented||null==l||l())},h);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=dw(e);Ne.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[r,t])}(e=>{y===d.layers.size-1&&(null==s||s(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},h),Ne.useEffect(()=>{if(u)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(bw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),_w(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=bw)}},[u,h,n,d]),Ne.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),_w())},[u,d]),Ne.useEffect(()=>{const e=()=>p({});return document.addEventListener(vw,e),()=>document.removeEventListener(vw,e)},[]),Ne.createElement(gw.div,tw({},c,{ref:f,style:{pointerEvents:j?b?"auto":"none":void 0,...e.style},onFocusCapture:rw(e.onFocusCapture,N.onFocusCapture),onBlurCapture:rw(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:rw(e.onPointerDownCapture,w.onPointerDownCapture)}))});function _w(){const e=new CustomEvent(vw);document.dispatchEvent(e)}function Sw(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?function(e,t){e&&we.flushSync(()=>e.dispatchEvent(t))}(s,a):s.dispatchEvent(a)}const kw="focusScope.autoFocusOnMount",Cw="focusScope.autoFocusOnUnmount",Ew={bubbles:!1,cancelable:!0},Ow=Ne.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[o,l]=Ne.useState(null),c=dw(s),d=dw(a),u=Ne.useRef(null),m=sw(t,e=>l(e)),h=Ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Ne.useEffect(()=>{if(n){let e=function(e){if(h.paused||!o)return;const t=e.target;o.contains(t)?u.current=t:Tw(u.current,{select:!0})},t=function(e){if(h.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Tw(u.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Tw(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return o&&n.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,o,h.paused]),Ne.useEffect(()=>{if(o){Dw.add(h);const t=document.activeElement;if(!o.contains(t)){const r=new CustomEvent(kw,Ew);o.addEventListener(kw,c),o.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Tw(n,{select:t}),document.activeElement!==r)return}((e=Mw(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Tw(o))}return()=>{o.removeEventListener(kw,c),setTimeout(()=>{const e=new CustomEvent(Cw,Ew);o.addEventListener(Cw,d),o.dispatchEvent(e),e.defaultPrevented||Tw(null!=t?t:document.body,{select:!0}),o.removeEventListener(Cw,d),Dw.remove(h)},0)}}var e},[o,c,d,h]);const p=Ne.useCallback(e=>{if(!r&&!n)return;if(h.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,a]=function(e){const t=Mw(e),r=Pw(t,e),n=Pw(t.reverse(),e);return[r,n]}(t);n&&a?e.shiftKey||s!==a?e.shiftKey&&s===n&&(e.preventDefault(),r&&Tw(a,{select:!0})):(e.preventDefault(),r&&Tw(n,{select:!0})):s===t&&e.preventDefault()}},[r,n,h.paused]);return Ne.createElement(gw.div,tw({tabIndex:-1},i,{ref:m,onKeyDown:p}))});function Mw(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Pw(e,t){for(const r of e)if(!Aw(r,{upTo:t}))return r}function Aw(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Tw(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const Dw=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=Rw(e,t),e.unshift(t)},remove(t){var r;e=Rw(e,t),null===(r=e[0])||void 0===r||r.resume()}}}();function Rw(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}const Lw=Ne.forwardRef((e,t)=>{var r;const{container:n=(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body),...s}=e;return n?Se.createPortal(Ne.createElement(gw.div,tw({},s,{ref:t})),n):null});const qw=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=Ne.useState(),n=Ne.useRef({}),s=Ne.useRef(e),a=Ne.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return Ne.useReducer((e,r)=>{const n=t[e][r];return null!=n?n:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ne.useEffect(()=>{const e=Iw(n.current);a.current="mounted"===o?e:"none"},[o]),iw(()=>{const t=n.current,r=s.current;if(r!==e){const n=a.current,i=Iw(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==i?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,l]),iw(()=>{if(t){const e=e=>{const r=Iw(n.current).includes(e.animationName);e.target===t&&r&&we.flushSync(()=>l("ANIMATION_END"))},r=e=>{e.target===t&&(a.current=Iw(n.current))};return t.addEventListener("animationstart",r),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",r),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Ne.useCallback(e=>{e&&(n.current=getComputedStyle(e)),r(e)},[])}}(t),s="function"==typeof r?r({present:n.isPresent}):Ne.Children.only(r),a=sw(n.ref,s.ref);return"function"==typeof r||n.isPresent?Ne.cloneElement(s,{ref:a}):null};function Iw(e){return(null==e?void 0:e.animationName)||"none"}qw.displayName="Presence";let Fw=0;function zw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Bw=E(),$w=function(){},Uw=Ne.forwardRef(function(e,t){var r=Ne.useRef(null),n=Ne.useState({onScrollCapture:$w,onWheelCapture:$w,onTouchMoveCapture:$w}),s=n[0],a=n[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,h=e.noIsolation,p=e.inert,f=e.allowPinchZoom,x=e.as,g=void 0===x?"div":x,v=O(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=m,j=M([r,t]),b=P(P({},v),s);return Ne.createElement(Ne.Fragment,null,d&&Ne.createElement(y,{sideCar:Bw,removeScrollBar:c,shards:u,noIsolation:h,inert:p,setCallbacks:a,allowPinchZoom:!!f,lockRef:r}),i?Ne.cloneElement(Ne.Children.only(o),P(P({},b),{ref:j})):Ne.createElement(g,P({},b,{className:l,ref:j}),o))});Uw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Uw.classNames={fullWidth:A,zeroRight:T};var Vw=!1;if("undefined"!=typeof window)try{var Ww=Object.defineProperty({},"passive",{get:function(){return Vw=!0,!0}});window.addEventListener("test",Ww,Ww),window.removeEventListener("test",Ww,Ww)}catch(hte){Vw=!1}var Hw=!!Vw&&{passive:!1},Yw=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},Kw=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Gw(e,r)){var n=Xw(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},Gw=function(e,t){return"v"===e?function(e){return Yw(e,"overflowY")}(t):function(e){return Yw(e,"overflowX")}(t)},Xw=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},Qw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Zw=function(e){return[e.deltaX,e.deltaY]},Jw=function(e){return e&&"current"in e?e.current:e},eN=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},tN=0,rN=[];const nN=q(Bw,function(e){var t=Ne.useRef([]),r=Ne.useRef([0,0]),n=Ne.useRef(),s=Ne.useState(tN++)[0],a=Ne.useState(function(){return D()})[0],i=Ne.useRef(e);Ne.useEffect(function(){i.current=e},[e]),Ne.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=R([e.lockRef.current],(e.shards||[]).map(Jw),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=Ne.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!i.current.allowPinchZoom;var s,a=Qw(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=Kw(u,d);if(!m)return!0;if(m?s=u:(s="v"===u?"h":"v",m=Kw(u,d)),!m)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var h=n.current||s;return function(e,t,r,n,s){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=a*n,o=r.target,l=t.contains(o),c=!1,d=i>0,u=0,m=0;do{var h=Xw(e,o),p=h[0],f=h[1]-h[2]-a*p;(p||f)&&Gw(e,o)&&(u+=f,m+=p),o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(!d||0!==u&&s)&&(d||0!==m&&s)||(c=!0),c}(h,t,e,"h"===h?l:c,!0)},[]),l=Ne.useCallback(function(e){var r=e;if(rN.length&&rN[rN.length-1]===a){var n="deltaY"in r?Zw(r):Qw(r),s=t.current.filter(function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,s=n,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)r.cancelable&&r.preventDefault();else if(!s){var l=(i.current.shards||[]).map(Jw).filter(Boolean).filter(function(e){return e.contains(r.target)});(l.length>0?o(r,l[0]):!i.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),c=Ne.useCallback(function(e,r,n,s){var a={name:e,delta:r,target:n,should:s};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=Ne.useCallback(function(e){r.current=Qw(e),n.current=void 0},[]),u=Ne.useCallback(function(t){c(t.type,Zw(t),t.target,o(t,e.lockRef.current))},[]),m=Ne.useCallback(function(t){c(t.type,Qw(t),t.target,o(t,e.lockRef.current))},[]);Ne.useEffect(function(){return rN.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Hw),document.addEventListener("touchmove",l,Hw),document.addEventListener("touchstart",d,Hw),function(){rN=rN.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Hw),document.removeEventListener("touchmove",l,Hw),document.removeEventListener("touchstart",d,Hw)}},[]);var h=e.removeScrollBar,p=e.inert;return Ne.createElement(Ne.Fragment,null,p?Ne.createElement(a,{styles:eN(s)}):null,h?Ne.createElement(L,{gapMode:"margin"}):null)});var sN=Ne.forwardRef(function(e,t){return Ne.createElement(Uw,P({},e,{ref:t,sideCar:nN}))});sN.classNames=Uw.classNames;const aN="Dialog",[iN,oN]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>Ne.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return Ne.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const s=Ne.createContext(n),a=r.length;function i(t){const{scope:r,children:n,...i}=t,o=(null==r?void 0:r[e][a])||s,l=Ne.useMemo(()=>i,Object.values(i));return Ne.createElement(o.Provider,{value:l},n)}return r=[...r,n],i.displayName=t+"Provider",[i,function(r,i){const o=(null==i?void 0:i[e][a])||s,l=Ne.useContext(o);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},aw(n,...t)]}(aN),[lN,cN]=iN(aN),dN="DialogPortal",[uN,mN]=iN(dN,{forceMount:void 0}),hN="DialogOverlay",pN=Ne.forwardRef((e,t)=>{const r=mN(hN,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=cN(hN,e.__scopeDialog);return a.modal?Ne.createElement(qw,{present:n||a.open},Ne.createElement(fN,tw({},s,{ref:t}))):null}),fN=Ne.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cN(hN,r);return Ne.createElement(sN,{as:mw,allowPinchZoom:!0,shards:[s.contentRef]},Ne.createElement(gw.div,tw({"data-state":bN(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),xN="DialogContent",gN=Ne.forwardRef((e,t)=>{const r=mN(xN,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=cN(xN,e.__scopeDialog);return Ne.createElement(qw,{present:n||a.open},a.modal?Ne.createElement(vN,tw({},s,{ref:t})):Ne.createElement(yN,tw({},s,{ref:t})))}),vN=Ne.forwardRef((e,t)=>{const r=cN(xN,e.__scopeDialog),n=Ne.useRef(null),s=sw(t,r.contentRef,n);return Ne.useEffect(()=>{const e=n.current;if(e)return I(e)},[]),Ne.createElement(jN,tw({},e,{ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rw(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:rw(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:rw(e.onFocusOutside,e=>e.preventDefault())}))}),yN=Ne.forwardRef((e,t)=>{const r=cN(xN,e.__scopeDialog),n=Ne.useRef(!1),s=Ne.useRef(!1);return Ne.createElement(jN,tw({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;(null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented)||(n.current||null===(i=r.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());n.current=!1,s.current=!1},onInteractOutside:t=>{var a,i;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target;(null===(i=r.triggerRef.current)||void 0===i?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}}))}),jN=Ne.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,o=cN(xN,r),l=sw(t,Ne.useRef(null));return Ne.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:zw()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:zw()),Fw++,()=>{1===Fw&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Fw--}},[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(Ow,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a},Ne.createElement(Nw,tw({role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":bN(o.open)},i,{ref:l,onDismiss:()=>o.onOpenChange(!1)}))),!1)});function bN(e){return e?"open":"closed"}const wN=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,o=Ne.useRef(null),l=Ne.useRef(null),[c=!1,d]=uw({prop:n,defaultProp:s,onChange:a});return Ne.createElement(lN,{scope:t,triggerRef:o,contentRef:l,contentId:cw(),titleId:cw(),descriptionId:cw(),open:c,onOpenChange:d,onOpenToggle:Ne.useCallback(()=>d(e=>!e),[d]),modal:i},r)},NN=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=cN(dN,t);return Ne.createElement(uN,{scope:t,forceMount:r},Ne.Children.map(n,e=>Ne.createElement(qw,{present:r||a.open},Ne.createElement(Lw,{asChild:!0,container:s},e))))},_N=pN,SN=gN;var kN='[cmdk-group=""]',CN='[cmdk-group-items=""]',EN='[cmdk-item=""]',ON=`${EN}:not([aria-disabled="true"])`,MN="cmdk-item-select",PN="data-value",AN=(e,t,r)=>ew(e,t,r),TN=Ne.createContext(void 0),DN=()=>Ne.useContext(TN),RN=Ne.createContext(void 0),LN=()=>Ne.useContext(RN),qN=Ne.createContext(void 0),IN=Ne.forwardRef((e,t)=>{let r=ZN(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=ZN(()=>new Set),s=ZN(()=>new Map),a=ZN(()=>new Map),i=ZN(()=>new Set),o=XN(e),{label:l,children:c,value:d,onValueChange:u,filter:m,shouldFilter:h,loop:p,disablePointerSelection:f=!1,vimBindings:x=!0,...g}=e,v=Ne.useId(),y=Ne.useId(),j=Ne.useId(),b=Ne.useRef(null),w=r_();QN(()=>{if(void 0!==d){let e=d.trim();r.current.value=e,N.emit()}},[d]),QN(()=>{w(6,O)},[]);let N=Ne.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var s,a,i;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)E(),k(),w(1,C);else if("value"===e&&(n||w(5,O),void 0!==(null==(s=o.current)?void 0:s.value))){let e=null!=t?t:"";return void(null==(i=(a=o.current).onValueChange)||i.call(a,e))}N.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),_=Ne.useMemo(()=>({value:(e,t,n)=>{var s;t!==(null==(s=a.current.get(e))?void 0:s.value)&&(a.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,S(t,n)),w(2,()=>{k(),N.emit()}))},item:(e,t)=>(n.current.add(e),t&&(s.current.has(t)?s.current.get(t).add(e):s.current.set(t,new Set([e]))),w(3,()=>{E(),k(),r.current.value||C(),N.emit()}),()=>{a.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=M();w(4,()=>{E(),(null==t?void 0:t.getAttribute("id"))===e&&C(),N.emit()})}),group:e=>(s.current.has(e)||s.current.set(e,new Set),()=>{a.current.delete(e),s.current.delete(e)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],disablePointerSelection:f,listId:v,inputId:j,labelId:y,listInnerRef:b}),[]);function S(e,t){var n,s;let a=null!=(s=null==(n=o.current)?void 0:n.filter)?s:AN;return e?a(e,r.current.search,t):0}function k(){if(!r.current.search||!1===o.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=s.current.get(r),a=0;n.forEach(t=>{let r=e.get(t);a=Math.max(r,a)}),t.push([r,a])});let n=b.current;P().sort((t,r)=>{var n,s;let a=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(n=e.get(i))?n:0)-(null!=(s=e.get(a))?s:0)}).forEach(e=>{let t=e.closest(CN);t?t.appendChild(e.parentElement===t?e:e.closest(`${CN} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${CN} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=b.current.querySelector(`${kN}[${PN}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)})}function C(){let e=P().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(PN);N.setState("value",t||void 0)}function E(){var e,t,i,l;if(!r.current.search||!1===o.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let c=0;for(let s of n.current){let n=S(null!=(t=null==(e=a.current.get(s))?void 0:e.value)?t:"",null!=(l=null==(i=a.current.get(s))?void 0:i.keywords)?l:[]);r.current.filtered.items.set(s,n),n>0&&c++}for(let[n,a]of s.current)for(let e of a)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=c}function O(){var e,t,r;let n=M();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(kN))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function M(){var e;return null==(e=b.current)?void 0:e.querySelector(`${EN}[aria-selected="true"]`)}function P(){var e;return Array.from(null==(e=b.current)?void 0:e.querySelectorAll(ON))}function A(e){let t=P()[e];t&&N.setState("value",t.getAttribute(PN))}function T(e){var t;let r=M(),n=P(),s=n.findIndex(e=>e===r),a=n[s+e];null!=(t=o.current)&&t.loop&&(a=s+e<0?n[n.length-1]:s+e===n.length?n[0]:n[s+e]),a&&N.setState("value",a.getAttribute(PN))}function D(e){let t,r=M(),n=null==r?void 0:r.closest(kN);for(;n&&!t;)n=e>0?KN(n,kN):GN(n,kN),t=null==n?void 0:n.querySelector(ON);t?N.setState("value",t.getAttribute(PN)):T(e)}let R=()=>A(P().length-1),L=e=>{e.preventDefault(),e.metaKey?R():e.altKey?D(1):T(1)},q=e=>{e.preventDefault(),e.metaKey?A(0):e.altKey?D(-1):T(-1)};return Ne.createElement(gw.div,{ref:t,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=g.onKeyDown)||t.call(g,e),!e.defaultPrevented)switch(e.key){case"n":case"j":x&&e.ctrlKey&&L(e);break;case"ArrowDown":L(e);break;case"p":case"k":x&&e.ctrlKey&&q(e);break;case"ArrowUp":q(e);break;case"Home":e.preventDefault(),A(0);break;case"End":e.preventDefault(),R();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=M();if(t){let e=new Event(MN);t.dispatchEvent(e)}}}}},Ne.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:s_},l),n_(e,e=>Ne.createElement(RN.Provider,{value:N},Ne.createElement(TN.Provider,{value:_},e))))}),FN=Ne.forwardRef((e,t)=>{var r,n;let s=Ne.useId(),a=Ne.useRef(null),i=Ne.useContext(qN),o=DN(),l=XN(e),c=null!=(n=null==(r=l.current)?void 0:r.forceMount)?n:null==i?void 0:i.forceMount;QN(()=>{if(!c)return o.item(s,null==i?void 0:i.id)},[c]);let d=t_(s,a,[e.value,e.children,a],e.keywords),u=LN(),m=e_(e=>e.value&&e.value===d.current),h=e_(e=>!(!c&&!1!==o.filter())||(!e.search||e.filtered.items.get(s)>0));function p(){var e,t;f(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function f(){u.setState("value",d.current,!0)}if(Ne.useEffect(()=>{let t=a.current;if(t&&!e.disabled)return t.addEventListener(MN,p),()=>t.removeEventListener(MN,p)},[h,e.onSelect,e.disabled]),!h)return null;let{disabled:x,value:g,onSelect:v,forceMount:y,keywords:j,...b}=e;return Ne.createElement(gw.div,{ref:JN([a,t]),...b,id:s,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!m,"data-disabled":!!x,"data-selected":!!m,onPointerMove:x||o.disablePointerSelection?void 0:f,onClick:x?void 0:p},e.children)}),zN=Ne.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...a}=e,i=Ne.useId(),o=Ne.useRef(null),l=Ne.useRef(null),c=Ne.useId(),d=DN(),u=e_(e=>!(!s&&!1!==d.filter())||(!e.search||e.filtered.groups.has(i)));QN(()=>d.group(i),[]),t_(i,o,[e.value,e.heading,l]);let m=Ne.useMemo(()=>({id:i,forceMount:s}),[s]);return Ne.createElement(gw.div,{ref:JN([o,t]),...a,"cmdk-group":"",role:"presentation",hidden:!u||void 0},r&&Ne.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),n_(e,e=>Ne.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},Ne.createElement(qN.Provider,{value:m},e))))}),BN=Ne.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=Ne.useRef(null),a=e_(e=>!e.search);return r||a?Ne.createElement(gw.div,{ref:JN([s,t]),...n,"cmdk-separator":"",role:"separator"}):null}),$N=Ne.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=null!=e.value,a=LN(),i=e_(e=>e.search),o=e_(e=>e.value),l=DN(),c=Ne.useMemo(()=>{var e;let t=null==(e=l.listInnerRef.current)?void 0:e.querySelector(`${EN}[${PN}="${encodeURIComponent(o)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return Ne.useEffect(()=>{null!=e.value&&a.setState("search",e.value)},[e.value]),Ne.createElement(gw.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?e.value:i,onChange:e=>{s||a.setState("search",e.target.value),null==r||r(e.target.value)}})}),UN=Ne.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...s}=e,a=Ne.useRef(null),i=Ne.useRef(null),o=DN();return Ne.useEffect(()=>{if(i.current&&a.current){let e,t=i.current,r=a.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),Ne.createElement(gw.div,{ref:JN([a,t]),...s,"cmdk-list":"",role:"listbox","aria-label":n,id:o.listId},n_(e,e=>Ne.createElement("div",{ref:JN([i,o.listInnerRef]),"cmdk-list-sizer":""},e)))}),VN=Ne.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:a,container:i,...o}=e;return Ne.createElement(wN,{open:r,onOpenChange:n},Ne.createElement(NN,{container:i},Ne.createElement(_N,{"cmdk-overlay":"",className:s}),Ne.createElement(SN,{"aria-label":e.label,"cmdk-dialog":"",className:a},Ne.createElement(IN,{ref:t,...o}))))}),WN=Ne.forwardRef((e,t)=>e_(e=>0===e.filtered.count)?Ne.createElement(gw.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),HN=Ne.forwardRef((e,t)=>{let{progress:r,children:n,label:s="Loading...",...a}=e;return Ne.createElement(gw.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},n_(e,e=>Ne.createElement("div",{"aria-hidden":!0},e)))}),YN=Object.assign(IN,{List:UN,Item:FN,Input:$N,Group:zN,Separator:BN,Dialog:VN,Empty:WN,Loading:HN});function KN(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function GN(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function XN(e){let t=Ne.useRef(e);return QN(()=>{t.current=e}),t}var QN="undefined"==typeof window?Ne.useEffect:Ne.useLayoutEffect;function ZN(e){let t=Ne.useRef();return void 0===t.current&&(t.current=e()),t}function JN(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function e_(e){let t=LN(),r=()=>e(t.snapshot());return Ne.useSyncExternalStore(t.subscribe,r,r)}function t_(e,t,r,n=[]){let s=Ne.useRef(),a=DN();return QN(()=>{var i;let o=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():s.current}})(),l=n.map(e=>e.trim());a.value(e,o,l),null==(i=t.current)||i.setAttribute(PN,o),s.current=o}),s}var r_=()=>{let[e,t]=Ne.useState(),r=ZN(()=>new Map);return QN(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function n_({asChild:e,children:t},r){return e&&Ne.isValidElement(t)?Ne.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var s_={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const a_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(YN,{ref:r,className:_u("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));a_.displayName=YN.displayName;const i_=({children:e,...t})=>n.jsx(Sb,{...t,children:n.jsx(Ob,{className:"overflow-hidden p-0 shadow-lg",children:n.jsx(a_,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:e})})}),o_=Ne.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(jh,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(YN.Input,{ref:r,className:_u("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));o_.displayName=YN.Input.displayName;const l_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(YN.List,{ref:r,className:_u("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));l_.displayName=YN.List.displayName;const c_=Ne.forwardRef((e,t)=>n.jsx(YN.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));c_.displayName=YN.Empty.displayName;const d_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(YN.Group,{ref:r,className:_u("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));d_.displayName=YN.Group.displayName;const u_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(YN.Separator,{ref:r,className:_u("-mx-1 h-px bg-border",e),...t}));u_.displayName=YN.Separator.displayName;const m_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(YN.Item,{ref:r,className:_u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));m_.displayName=YN.Item.displayName;const h_=()=>{const[e,t]=Ne.useState(!1),[r,s]=Ne.useState(""),[a,i]=Ne.useState(!1),[o,l]=Ne.useState([]),[c,d]=Ne.useState([]),[u,m]=Ne.useState([]),h=St(),{t:p}=cr();Ne.useEffect(()=>{const e=e=>{"k"!==e.key&&"K"!==e.key||!e.metaKey&&!e.ctrlKey||(e.preventDefault(),t(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),Ne.useEffect(()=>{e||(s(""),l([]),d([]),m([]))},[e]),Ne.useEffect(()=>{const e=r.trim();if(e.length<2)return l([]),d([]),void m([]);i(!0);const t=setTimeout(async()=>{try{const[t,r,n]=await Promise.all([mr.from("user_profiles").select("id,email,full_name,company_name,role").or(`email.ilike.%${e}%,full_name.ilike.%${e}%,company_name.ilike.%${e}%`).limit(5),Promise.resolve({data:[{id:"1",full_name:"John Doe",email:"john@example.com",event_type:"consultation",status:"pending"}]}),mr.from("user_profiles").select("id,full_name,email,role").or(`full_name.ilike.%${e}%,email.ilike.%${e}%`).limit(5)]);l(t.data||[]),d(r.data||[]),m(n.data||[])}catch(mte){}finally{i(!1)}},250);return()=>clearTimeout(t)},[r]);const f=Ne.useMemo(()=>[{icon:n.jsx(Zh,{className:"h-4 w-4"}),label:p("admin.commandPalette.goToUsers"),action:()=>h("/admin/users")},{icon:n.jsx(Gh,{className:"h-4 w-4"}),label:p("admin.commandPalette.createNewUser"),action:()=>h("/admin/users?action=create")},{icon:n.jsx(Tm,{className:"h-4 w-4"}),label:p("admin.commandPalette.reviewRequests"),action:()=>h("/admin/requests")},{icon:n.jsx(Rh,{className:"h-4 w-4"}),label:p("admin.commandPalette.manageOffers"),action:()=>h("/admin/offers")},{icon:n.jsx(Ju,{className:"h-4 w-4"}),label:p("admin.commandPalette.viewAnalytics"),action:()=>h("/admin/analytics")},{icon:n.jsx(bm,{className:"h-4 w-4"}),label:p("admin.commandPalette.financialTransactions"),action:()=>h("/admin/financial-transactions")}],[h,p]);return n.jsxs(i_,{open:e,onOpenChange:t,children:[n.jsx(o_,{placeholder:p("admin.commandPalette.searchUsersRequestsOffers"),value:r,onValueChange:s}),n.jsxs(l_,{children:[n.jsx(c_,{children:p(a?"common.loading":"common.notFound")}),n.jsx(d_,{heading:p("admin.quickActions"),children:f.map(e=>n.jsxs(m_,{onSelect:()=>{e.action(),t(!1)},children:[e.icon,n.jsx("span",{className:"ml-2",children:e.label})]},e.label))}),n.jsx(u_,{}),o.length>0&&n.jsx(d_,{heading:p("admin.users"),children:o.map(e=>n.jsxs(m_,{onSelect:()=>{h("/admin/users"),t(!1)},children:[n.jsx(Zh,{className:"h-4 w-4"}),n.jsx("span",{className:"ml-2",children:e.full_name||e.email}),n.jsx("span",{className:"ml-auto text-xs text-foreground opacity-75",children:e.role})]},e.id))}),c.length>0&&n.jsx(d_,{heading:p("admin.requests"),children:c.map(e=>n.jsxs(m_,{onSelect:()=>{h("/admin/requests"),t(!1)},children:[n.jsx(Tm,{className:"h-4 w-4"}),n.jsx("span",{className:"ml-2 truncate",children:e.title}),n.jsx("span",{className:"ml-auto text-xs text-foreground opacity-75",children:e.admin_approval_status})]},e.id))}),u.length>0&&n.jsx(d_,{heading:p("admin.offers"),children:u.map(e=>n.jsxs(m_,{onSelect:()=>{h("/admin/offers"),t(!1)},children:[n.jsx(Rh,{className:"h-4 w-4"}),n.jsx("span",{className:"ml-2 truncate",children:e.title}),n.jsx("span",{className:"ml-auto text-xs text-foreground opacity-75",children:e.client_approval_status})]},e.id))})]})]})};class p_ extends Ne.Component{constructor(e){super(e),r(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx(f_,{error:this.state.error,errorInfo:this.state.errorInfo,onReset:this.handleReset}):this.props.children}}const f_=({error:e,errorInfo:t,onReset:r})=>{const{t:s}=cr();return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:n.jsxs(Eu,{className:"max-w-lg mx-auto",children:[n.jsxs(Ou,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uh,{className:"h-5 w-5 text-destructive"}),n.jsx(Mu,{className:"text-destructive",children:s("admin.errors.title")})]}),n.jsx(Pu,{children:s("admin.errors.description")})]}),n.jsxs(Au,{className:"space-y-4",children:[!1,n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{onClick:r,variant:"outline",className:"flex-1",children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),s("admin.errors.tryAgain")]}),n.jsx(ku,{onClick:()=>window.location.reload(),className:"flex-1",children:s("admin.errors.refreshPage")})]})]})]})})},x_=()=>{const{user:e,userProfile:t,loading:r}=br(),[s,a]=Ne.useState(()=>{const e=localStorage.getItem("adminSidebarOpen");return!e||JSON.parse(e)}),[i,o]=Ne.useState(!1),l=St(),{t:c,isRTL:d}=cr(),u=Hj();return Ne.useEffect(()=>{r||e||l("/auth")},[r,e,l]),r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(lb,{size:"lg"})}):"admin"!==(null==t?void 0:t.role)?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(Eu,{className:"p-8 max-w-md mx-auto",children:n.jsxs(Ou,{children:[n.jsx(Mu,{className:"text-2xl text-center text-destructive",children:c("admin.accessDenied")}),n.jsx(Pu,{className:"text-center",children:c("admin.accessDeniedDescription")})]})})}):n.jsx(p_,{children:n.jsx(sb,{pageType:"dashboard",className:"min-h-screen",children:u?n.jsxs("div",{className:"min-h-screen flex flex-col",children:[n.jsx(Wb,{onMobileMenuOpen:()=>o(!0)}),n.jsx(Hb,{isOpen:i,onOpenChange:o,collapsed:!s,onToggle:()=>{const e=!s;a(e),localStorage.setItem("adminSidebarOpen",JSON.stringify(e))}}),n.jsx("main",{className:"flex-1 overflow-auto bg-muted/20 p-4 sm:p-6 min-h-[calc(100vh-8rem)] pb-20 safe-area-inset-bottom",children:n.jsx(p_,{children:n.jsx(qt,{})})}),n.jsx(Uf,{}),n.jsx($f,{})]}):n.jsxs("div",{className:"min-h-screen flex w-full",dir:d?"rtl":"ltr",children:[n.jsx(xb,{collapsed:!s}),n.jsxs("div",{className:_u("flex-1 flex flex-col min-w-0 transition-all duration-300",s?"ml-64":"ml-16"),children:[n.jsx(Wb,{onSidebarToggle:()=>{const e=!s;a(e),localStorage.setItem("adminSidebarOpen",JSON.stringify(e))},sidebarOpen:s}),n.jsx("main",{className:"flex-1 overflow-auto bg-muted/20 p-6 min-h-[calc(100vh-4rem)]",children:n.jsx(p_,{children:n.jsx(qt,{})})})]}),n.jsx(h_,{})]})})})};var g_=Ne.forwardRef((e,t)=>n.jsx(a.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));g_.displayName="Label";var v_=g_;const y_=Dr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j_=Ne.forwardRef(({className:e,...t},r)=>n.jsx(v_,{ref:r,className:_u(y_(),e),...t}));j_.displayName=v_.displayName;const b_=({mode:e})=>{const[t,r]=Ne.useState(""),[s,a]=Ne.useState(""),[i,o]=Ne.useState(""),[l,c]=Ne.useState(""),[d,u]=Ne.useState("client"),[m,h]=Ne.useState(!1),{secureSignIn:p,securePasswordReset:f,secureSignUp:x,loading:g}=(()=>{const[e,t]=Ne.useState(!1),{showError:r,showSuccess:n}=dy();return{secureSignUp:async(e,n,s)=>{const a="user-signup";if(!vr.isAllowed(a,3,6e5))return r("Too many signup attempts. Please try again later."),await gr("signup_rate_limit_exceeded",{email:e,ip:a}),{error:{message:"Rate limit exceeded"}};if(!fr(e))return r("Please use a valid email address."),await gr("invalid_email_attempt",{email:e,ip:a}),{error:{message:"Invalid email"}};const i={full_name:xr(s.full_name||""),company_name:xr(s.company_name||""),role:s.role};t(!0);try{const{data:t,error:r}=await mr.auth.signUp({email:e.toLowerCase().trim(),password:n,options:{data:i,emailRedirectTo:`${window.location.origin}/auth`}});return r?(await gr("signup_failed",{email:e,error:r.message,ip:a}),{error:r}):(await gr("signup_success",{email:e,role:s.role,ip:a}),vr.reset(a),{data:t,error:null})}catch(o){return await gr("signup_error",{email:e,error:String(o),ip:a}),{error:{message:"An unexpected error occurred"}}}finally{t(!1)}},secureSignIn:async(e,n)=>{var s;const a="user-signin";if(!vr.isAllowed(a,5,9e5))return r("Too many login attempts. Please try again later."),await gr("signin_rate_limit_exceeded",{email:e,ip:a}),{error:{message:"Rate limit exceeded"}};t(!0);try{const{data:t,error:r}=await mr.auth.signInWithPassword({email:e.toLowerCase().trim(),password:n});return r?(await gr("signin_failed",{email:e,error:r.message,ip:a}),{error:r}):(await gr("signin_success",{email:e,userId:null==(s=t.user)?void 0:s.id,ip:a}),vr.reset(a),{data:t,error:null})}catch(i){return await gr("signin_error",{email:e,error:String(i),ip:a}),{error:{message:"An unexpected error occurred"}}}finally{t(!1)}},securePasswordReset:async e=>{if(!vr.isAllowed("password-reset",3,36e5))return r("Too many password reset attempts. Please try again later."),{error:{message:"Rate limit exceeded"}};if(!fr(e))return r("Please use a valid email address."),{error:{message:"Invalid email"}};t(!0);try{const{error:t}=await mr.auth.resetPasswordForEmail(e.toLowerCase().trim(),{redirectTo:`${window.location.origin}/reset-password`});return t?(await gr("password_reset_failed",{email:e,error:t.message}),{error:t}):(await gr("password_reset_requested",{email:e}),n("Password reset link sent to your email."),{error:null})}catch(s){return await gr("password_reset_error",{email:e,error:String(s)}),{error:{message:"An unexpected error occurred"}}}finally{t(!1)}},loading:e}})(),{showError:v,showSuccess:y}=dy();return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#004F54] via-[#102C33] to-[#66023C] p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsxs(Eu,{className:"bg-white/5 border border-white/20 backdrop-blur-20",children:[n.jsxs(Ou,{className:"space-y-6 text-center",children:[n.jsx(Zt,{to:"/landing",className:"inline-block",children:n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-16 w-auto mx-auto transition-transform duration-200 hover:scale-105 drop-shadow-lg cursor-pointer"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Welcome to MWRD"}),n.jsx("p",{className:"text-white/80",children:(()=>{switch(e){case"signin":default:return"Sign in to your account";case"signup":return"Create your account";case"reset":return"Reset your password"}})()})]})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),t){if("signin"===e){if(!s)return void v("Please enter your password.");const{error:e}=await p(t,s);e?v(e.message):y("Welcome back!")}else if("signup"===e){if(!s||!i)return void v("Please fill in all required fields.");const{error:e}=await x(t,s,{full_name:i,company_name:l,role:d});e?v(e.message):y("Account created successfully! Please check your email.")}else if("reset"===e){const{error:e}=await f(t);e&&v(e.message)}}else v("Please enter your email address.")},className:"space-y-4",children:["signup"===e&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(j_,{className:"text-white",children:"Account Type *"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{type:"button",className:"p-3 rounded-lg border text-center transition-all "+("client"===d?"bg-primary/20 border-primary text-white":"bg-white/5 border-white/20 text-white/80 hover:bg-white/10"),onClick:()=>u("client"),children:[n.jsx("div",{className:"font-semibold",children:"Client"}),n.jsx("div",{className:"text-xs opacity-70",children:"Request Services"})]}),n.jsxs("button",{type:"button",className:"p-3 rounded-lg border text-center transition-all "+("vendor"===d?"bg-primary/20 border-primary text-white":"bg-white/5 border-white/20 text-white/80 hover:bg-white/10"),onClick:()=>u("vendor"),children:[n.jsx("div",{className:"font-semibold",children:"Vendor"}),n.jsx("div",{className:"text-xs opacity-70",children:"Provide Services"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"fullName",className:"text-white",children:"Full Name *"}),n.jsx($j,{id:"fullName",type:"text",value:i,onChange:e=>o(xr(e.target.value)),required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-white/60"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"companyName",className:"text-white",children:"Company Name"}),n.jsx($j,{id:"companyName",type:"text",value:l,onChange:e=>c(xr(e.target.value)),className:"bg-white/10 border-white/20 text-white placeholder:text-white/60"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"email",className:"text-white",children:"Email *"}),n.jsx($j,{id:"email",type:"email",value:t,onChange:e=>r(xr(e.target.value)),required:!0,autoComplete:"email",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60"})]}),("signin"===e||"signup"===e)&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"password",className:"text-white",children:"Password *"}),n.jsxs("div",{className:"relative",children:[n.jsx($j,{id:"password",type:m?"text":"password",value:s,onChange:e=>a(e.target.value),required:!0,autoComplete:"signin"===e?"current-password":"new-password",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60 pr-10"}),n.jsx(ku,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!m),children:m?n.jsx(Om,{className:"h-4 w-4 text-white"}):n.jsx(Mm,{className:"h-4 w-4 text-white"})})]})]}),n.jsx(ku,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-white",disabled:g,children:g?"Processing...":"signin"===e?"Sign In":"signup"===e?"Create Account":"Send Reset Link"})]}),n.jsx("div",{className:"text-center space-y-2",children:"signin"===e?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-white/70",children:["Don't have an account?"," ",n.jsx(Zt,{to:"/register",className:"text-primary hover:underline",children:"Sign up"})]}),n.jsx(Zt,{to:"/forgot-password",className:"text-sm text-primary hover:underline block",children:"Forgot your password?"})]}):"signup"===e?n.jsxs("p",{className:"text-sm text-white/70",children:["Already have an account?"," ",n.jsx(Zt,{to:"/login",className:"text-primary hover:underline",children:"Sign in"})]}):n.jsxs("p",{className:"text-sm text-white/70",children:["Remember your password?"," ",n.jsx(Zt,{to:"/login",className:"text-primary hover:underline",children:"Sign in"})]})}),n.jsxs("div",{className:"text-xs text-white/60 text-center flex items-center justify-center gap-1",children:[n.jsx(Sh,{className:"h-3 w-3"}),"Your data is protected with enterprise-grade security"]})]})]})})})},w_=e=>({debug:(e,...t)=>{},warn:(e,...t)=>{},error:(e,...t)=>{}}),N_=()=>{const{user:e,userProfile:t,loading:r}=br(),n=St(),s=Nt();return Ne.useEffect(()=>{r||(e&&t?"admin"===t.role?n("/admin/dashboard",{replace:!0}):"vendor"===t.role?n("/vendor-dashboard",{replace:!0}):n("/dashboard",{replace:!0}):"/"!==s.pathname||e||n("/landing",{replace:!0}))},[e,t,r,n,s.pathname]),null},__=()=>n.jsxs(n.Fragment,{children:[n.jsx(N_,{}),n.jsx(b_,{mode:"signin"})]}),S_=()=>n.jsxs(n.Fragment,{children:[n.jsx(N_,{}),n.jsx(b_,{mode:"signup"})]}),k_=()=>n.jsxs(n.Fragment,{children:[n.jsx(N_,{}),n.jsx(b_,{mode:"reset"})]});function C_(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return Ne.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}function E_(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function O_(e){const t=M_(e),r=Ne.forwardRef((e,r)=>{const{children:s,...a}=e,i=Ne.Children.toArray(s),o=i.find(A_);if(o){const e=o.props.children,s=i.map(t=>t===o?Ne.Children.count(e)>1?Ne.Children.only(null):Ne.isValidElement(e)?e.props.children:null:t);return n.jsx(t,{...a,ref:r,children:Ne.isValidElement(e)?Ne.cloneElement(e,void 0,s):null})}return n.jsx(t,{...a,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}function M_(e){const t=Ne.forwardRef((e,t)=>{const{children:r,...n}=e;if(Ne.isValidElement(r)){const e=function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=n&&"isReactWarning"in n&&n.isReactWarning;if(s)return e.ref;if(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{const t=a(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==Ne.Fragment&&(s.ref=t?function(...e){return t=>{let r=!1;const n=e.map(e=>{const n=E_(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():E_(e[t],null)}}}}(t,e):e),Ne.cloneElement(r,s)}return Ne.Children.count(r)>1?Ne.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var P_=Symbol("radix.slottable");function A_(e){return Ne.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===P_}var T_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=O_(`Primitive.${t}`),s=Ne.forwardRef((e,s)=>{const{asChild:a,...i}=e,o=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),n.jsx(o,{...i,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),D_="Progress",[R_,L_]=function(e,t=[]){let r=[];const s=()=>{const t=r.map(e=>Ne.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return Ne.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return s.scopeName=e,[function(t,s){const a=Ne.createContext(s),i=r.length;r=[...r,s];const o=t=>{var r;const{scope:s,children:o,...l}=t,c=(null==(r=null==s?void 0:s[e])?void 0:r[i])||a,d=Ne.useMemo(()=>l,Object.values(l));return n.jsx(c.Provider,{value:d,children:o})};return o.displayName=t+"Provider",[o,function(r,n){var o;const l=(null==(o=null==n?void 0:n[e])?void 0:o[i])||a,c=Ne.useContext(l);if(c)return c;if(void 0!==s)return s;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},C_(s,...t)]}(D_),[q_,I_]=R_(D_),F_=Ne.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=$_,...o}=e;(a||0===a)&&W_(a);const l=W_(a)?a:100;null!==s&&H_(s,l);const c=H_(s,l)?s:null,d=V_(c)?i(c,l):void 0;return n.jsx(q_,{scope:r,value:c,max:l,children:n.jsx(T_.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":V_(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":U_(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});F_.displayName=D_;var z_="ProgressIndicator",B_=Ne.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=I_(z_,r);return n.jsx(T_.div,{"data-state":U_(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});function $_(e,t){return`${Math.round(e/t*100)}%`}function U_(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function V_(e){return"number"==typeof e}function W_(e){return V_(e)&&!isNaN(e)&&e>0}function H_(e,t){return V_(e)&&!isNaN(e)&&e<=t&&e>=0}B_.displayName=z_;var Y_=F_,K_=B_;const G_=Ne.forwardRef(({className:e,value:t,...r},s)=>n.jsx(Y_,{ref:s,className:_u("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(K_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));G_.displayName=Y_.displayName;const X_=Dr("animate-pulse rounded-md bg-muted",{variants:{variant:{default:"bg-muted",shimmer:"bg-gradient-to-r from-muted via-muted/50 to-muted bg-[length:200%_100%] animate-shimmer",pulse:"bg-muted animate-pulse"}},defaultVariants:{variant:"default"}});function Q_({className:e,variant:t,...r}){return n.jsx("div",{className:_u(X_({variant:t}),e),...r})}const Z_=Ne.forwardRef(({className:e,lines:t=1,...r},s)=>n.jsx("div",{ref:s,className:_u("space-y-2",e),...r,children:Array.from({length:t}).map((e,r)=>n.jsx(Q_,{className:_u("h-4",r===t-1&&t>1?"w-3/4":"w-full")},r))}));Z_.displayName="SkeletonText";const J_=Ne.forwardRef(({className:e,size:t="default",...r},s)=>n.jsx("div",{ref:s,className:_u("animate-pulse rounded-full bg-muted",{sm:"h-8 w-8",default:"h-10 w-10",lg:"h-12 w-12"}[t],e),...r}));J_.displayName="SkeletonAvatar";Ne.forwardRef(({className:e,...t},r)=>n.jsxs("div",{ref:r,className:_u("space-y-4 p-6 border border-border rounded-lg",e),...t,children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(J_,{}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsx(Q_,{className:"h-4 w-1/4"}),n.jsx(Q_,{className:"h-3 w-1/2"})]})]}),n.jsx(Z_,{lines:3}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Q_,{className:"h-8 w-20"}),n.jsx(Q_,{className:"h-8 w-20"})]})]})).displayName="SkeletonCard";const eS=({title:e,value:t,description:r,icon:s,trend:a,variant:i="default",className:o,loading:l=!1})=>l?n.jsxs(Eu,{className:_u("animate-pulse",o),children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Q_,{className:"h-4 w-24 animate-shimmer"}),s&&n.jsx(Q_,{className:"h-5 w-5 rounded animate-shimmer"})]})}),n.jsxs(Au,{children:[n.jsx(Q_,{className:"h-8 w-20 mb-2 animate-shimmer"}),n.jsx(Q_,{className:"h-3 w-32 animate-shimmer"}),a&&n.jsx(Q_,{className:"h-4 w-16 mt-2 animate-shimmer"})]})]}):n.jsxs(Eu,{className:_u("group",o),children:[n.jsx(Ou,{className:_u("pb-3",(null==o?void 0:o.includes("text-right"))&&"text-right"),children:n.jsxs("div",{className:_u("flex items-center justify-between",(null==o?void 0:o.includes("text-right"))&&"flex-row-reverse"),children:[n.jsx(Pu,{className:_u("text-xs font-medium uppercase tracking-wide",(null==o?void 0:o.includes("text-right"))&&"text-right"),children:e}),s&&n.jsx(s,{className:_u("h-5 w-5 transition-transform group-hover:scale-110",{default:"text-primary",success:"text-success",warning:"text-warning",destructive:"text-destructive"}[i])})]})}),n.jsx(Au,{className:_u((null==o?void 0:o.includes("text-right"))&&"text-right"),children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:_u("text-2xl font-bold tracking-tight",(null==o?void 0:o.includes("text-right"))&&"text-right"),children:t}),r&&n.jsx("p",{className:_u("text-foreground opacity-75",(null==o?void 0:o.includes("text-right"))&&"text-right"),children:r}),a&&n.jsxs("div",{className:_u("flex items-center space-x-1",(null==o?void 0:o.includes("text-right"))&&"flex-row-reverse space-x-reverse"),children:[a.isPositive?n.jsx($h,{className:"h-3 w-3 text-success"}):n.jsx(Bh,{className:"h-3 w-3 text-destructive"}),n.jsxs(Xf,{variant:a.isPositive?"secondary":"destructive",className:"text-xs",children:[a.value,"%"]}),a.label&&n.jsx("span",{className:_u("text-xs text-foreground opacity-75",(null==o?void 0:o.includes("text-right"))&&"text-right"),children:a.label})]})]})})]}),tS=()=>{const{t:e,isRTL:t,formatNumber:r,formatCurrency:s}=cr(),{userProfile:a}=br(),{toast:i}=fp(),o=St(),[l,c]=Ne.useState({totalRequests:0,activeRequests:0,completedRequests:0,totalOffers:0,pendingOffers:0,acceptedOffers:0,totalOrders:0,completedOrders:0,totalSpent:0,avgResponseTime:0}),[d,u]=Ne.useState(!0),[m,h]=Ne.useState([]);return Ne.useEffect(()=>{(async()=>{if(null==a?void 0:a.user_id)try{u(!0);const{data:e,error:t}=await mr.from("requests").select("id, status, created_at, updated_at").eq("client_id",a.user_id);if(t)throw t;const{data:r,error:n}=await mr.from("offers").select("id, client_approval_status, status, price, currency, created_at, request_id").in("request_id",(null==e?void 0:e.map(e=>e.id))||[]);if(n)throw n;const{data:s,error:i}=await mr.from("orders").select("id, status, amount, currency, created_at, completion_date").eq("client_id",a.user_id);if(i)throw i;const{data:o,error:l}=await mr.from("financial_transactions").select("amount, created_at, status").eq("user_id",a.user_id).eq("status","completed");if(l)throw l;const d=(null==e?void 0:e.length)||0,m=(null==e?void 0:e.filter(e=>["new","in_progress"].includes(e.status)).length)||0,p=(null==e?void 0:e.filter(e=>"completed"===e.status).length)||0,f=(null==r?void 0:r.length)||0,x=(null==r?void 0:r.filter(e=>"pending"===e.client_approval_status).length)||0,g=(null==r?void 0:r.filter(e=>"approved"===e.client_approval_status).length)||0,v=(null==s?void 0:s.length)||0,y=(null==s?void 0:s.filter(e=>"completed"===e.status).length)||0,j=(null==o?void 0:o.reduce((e,t)=>e+(t.amount||0),0))||0;let b=0;if(e&&r&&e.length>0){const t=e.map(e=>{const t=r.filter(t=>t.request_id===e.id);if(t.length>0){const r=t.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())[0],n=new Date(e.created_at).getTime();return(new Date(r.created_at).getTime()-n)/36e5}return null}).filter(e=>null!==e);t.length>0&&(b=Math.round(t.reduce((e,t)=>e+t,0)/t.length))}c({totalRequests:d,activeRequests:m,completedRequests:p,totalOffers:f,pendingOffers:x,acceptedOffers:g,totalOrders:v,completedOrders:y,totalSpent:j,avgResponseTime:b});const{data:w,error:N}=await mr.from("activity_feed").select("*").eq("user_id",a.user_id).order("created_at",{ascending:!1}).limit(10);N||h(w||[])}catch(t){i({title:e("common.error"),description:e("dashboard.errors.failedToLoadStats"),variant:"destructive"}),c({totalRequests:0,activeRequests:0,completedRequests:0,totalOffers:0,pendingOffers:0,acceptedOffers:0,totalOrders:0,completedOrders:0,totalSpent:0,avgResponseTime:0})}finally{u(!1)}})()},[a]),d?n.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):n.jsxs("div",{className:_u("p-3 sm:p-4 md:p-6 space-y-4 md:space-y-6",t?"rtl text-right":"ltr text-left"),dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:e("dashboard.title")}),n.jsx("p",{className:"text-muted-foreground mt-1",children:e("dashboard.welcomeMessage")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(eS,{title:e("dashboard.metrics.totalRequests"),value:r(l.totalRequests),description:e("dashboard.metrics.totalRequestsDesc"),icon:Tm,loading:d}),n.jsx(eS,{title:e("dashboard.metrics.activeRequests"),value:r(l.activeRequests),description:e("dashboard.metrics.activeRequestsDesc"),icon:gm,loading:d}),n.jsx(eS,{title:e("dashboard.metrics.pendingOffers"),value:r(l.pendingOffers),description:e("dashboard.metrics.pendingOffersDesc"),icon:dh,variant:"warning",loading:d}),n.jsx(eS,{title:e("dashboard.metrics.completedOrders"),value:r(l.completedOrders),description:e("dashboard.metrics.completedOrdersDesc"),icon:dm,variant:"success",loading:d})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(eS,{title:e("dashboard.metrics.totalSpent"),value:s(l.totalSpent),description:e("dashboard.metrics.totalSpentDesc"),icon:kh,loading:d}),n.jsx(eS,{title:e("dashboard.metrics.successRate"),value:`${l.totalRequests?Math.round(l.completedRequests/l.totalRequests*100):0}%`,description:e("dashboard.metrics.successRateDesc"),icon:$h,variant:"success",loading:d}),n.jsx(eS,{title:e("dashboard.metrics.avgResponse"),value:`${l.avgResponseTime}h`,description:e("dashboard.metrics.avgResponseDesc"),icon:gm,loading:d}),n.jsx(eS,{title:e("dashboard.metrics.offersReceived"),value:r(l.totalOffers),description:e("dashboard.metrics.offersReceivedDesc"),icon:dh,loading:d})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Uh,{className:"h-5 w-5 text-warning"}),e("dashboard.actions.actionRequired")]})}),n.jsxs(Au,{className:"space-y-4",children:[l.pendingOffers>0&&n.jsxs("div",{className:"flex items-center justify-between p-4 bg-warning/10 border border-warning/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e("dashboard.actions.pendingOfferReviews")}),n.jsxs("p",{className:"text-sm text-foreground opacity-75",children:[r(l.pendingOffers)," ",e("dashboard.actions.offersNeedDecision")]})]}),n.jsx(Zt,{to:"/offers",children:n.jsx(ku,{size:"sm",variant:"outline",children:e("dashboard.actions.review")})})]}),l.activeRequests>0&&n.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e("dashboard.actions.activeRequests")}),n.jsxs("p",{className:"text-sm text-foreground opacity-75",children:[r(l.activeRequests)," ",e("dashboard.actions.requestsInProgress")]})]}),n.jsx(Zt,{to:"/requests",children:n.jsx(ku,{size:"sm",variant:"outline",children:e("dashboard.actions.monitor")})})]}),0===l.pendingOffers&&0===l.activeRequests&&n.jsxs("div",{className:"text-center py-6 text-foreground opacity-75",children:[n.jsx(dm,{className:"h-8 w-8 mx-auto mb-2 text-success"}),n.jsx("p",{children:e("dashboard.actions.allCaughtUp")})]})]})]}),n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx($h,{className:"h-5 w-5 text-success"}),e("dashboard.actions.quickActions")]})}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs(ku,{onClick:()=>o("/requests/create"),className:"h-auto p-4 justify-start",children:[n.jsx(fh,{className:_u("h-5 w-5",t?"ml-3":"mr-3")}),n.jsxs("div",{className:t?"text-right":"text-left",children:[n.jsx("div",{className:"font-medium",children:e("dashboard.actions.createNewRequest")}),n.jsx("div",{className:"text-xs opacity-75",children:e("dashboard.actions.startNewProcurement")})]})]}),n.jsxs(ku,{variant:"outline",onClick:()=>o("/vendors"),className:"h-auto p-4 justify-start",children:[n.jsx(Mm,{className:_u("h-5 w-5",t?"ml-3":"mr-3")}),n.jsxs("div",{className:t?"text-right":"text-left",children:[n.jsx("div",{className:"font-medium",children:e("dashboard.actions.browseVendors")}),n.jsx("div",{className:"text-xs opacity-75",children:e("dashboard.actions.findQualifiedSuppliers")})]})]}),n.jsxs(ku,{variant:"outline",onClick:()=>o("/messages"),className:"h-auto p-4 justify-start",children:[n.jsx(nh,{className:_u("h-5 w-5",t?"ml-3":"mr-3")}),n.jsxs("div",{className:t?"text-right":"text-left",children:[n.jsx("div",{className:"font-medium",children:e("dashboard.actions.messages")}),n.jsx("div",{className:"text-xs opacity-75",children:e("dashboard.actions.communicateWithVendors")})]})]})]})})]})]}),n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:e("dashboard.performance.title")}),n.jsx(Pu,{children:e("dashboard.performance.description")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex items-center",t?"justify-start flex-row-reverse":"justify-between"),children:[n.jsx("span",{className:"text-sm font-medium",children:e("dashboard.performance.requestSuccessRate")}),n.jsxs("span",{className:"text-sm text-success",children:[l.totalRequests?Math.round(l.completedRequests/l.totalRequests*100):0,"%"]})]}),n.jsx(G_,{value:l.totalRequests?l.completedRequests/l.totalRequests*100:0,className:"w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex items-center",t?"justify-start flex-row-reverse":"justify-between"),children:[n.jsx("span",{className:"text-sm font-medium",children:e("dashboard.performance.offerAcceptanceRate")}),n.jsxs("span",{className:"text-sm text-primary",children:[l.totalOffers?Math.round(l.acceptedOffers/l.totalOffers*100):0,"%"]})]}),n.jsx(G_,{value:l.totalOffers?l.acceptedOffers/l.totalOffers*100:0,className:"w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex items-center",t?"justify-start flex-row-reverse":"justify-between"),children:[n.jsx("span",{className:"text-sm font-medium",children:e("dashboard.performance.orderCompletion")}),n.jsxs("span",{className:"text-sm text-success",children:[l.totalOrders?Math.round(l.completedOrders/l.totalOrders*100):0,"%"]})]}),n.jsx(G_,{value:l.totalOrders?l.completedOrders/l.totalOrders*100:0,className:"w-full"})]})]})})]})]})},rS=()=>{const{userProfile:e,loading:t}=br(),r=St(),{t:s,isRTL:a}=cr();if(Ne.useEffect(()=>{!t&&e&&("vendor"===e.role?r("/vendor-dashboard"):"admin"===e.role&&r("/admin/dashboard"))},[t,e,r]),t)return n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:n.jsx(lb,{size:"lg"})});if("client"!==(null==e?void 0:e.role))return n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:n.jsx(lb,{size:"lg"})});return n.jsx(pb,{children:n.jsxs("div",{className:"space-y-6",children:[(()=>{if(!e||"client"!==e.role)return null;const t="approved"===e.verification_status,i="rejected"===e.verification_status,o="pending"===e.verification_status||"under_review"===e.verification_status;if(t)return null;const l=i?{variant:"destructive",icon:n.jsx(Uh,{className:"h-4 w-4"}),title:s("dashboard.verification.rejected.title"),description:s("dashboard.verification.rejected.description"),action:s("dashboard.verification.rejected.action"),badge:n.jsx(Xf,{variant:"destructive",children:s("dashboard.verification.rejected.badge")})}:o?{variant:"default",icon:n.jsx(gm,{className:"h-4 w-4"}),title:s("dashboard.verification.pending.title"),description:s("dashboard.verification.pending.description"),action:s("dashboard.verification.pending.action"),badge:n.jsx(Xf,{variant:"outline",children:s("dashboard.verification.pending.badge")})}:{variant:"default",icon:n.jsx(Uh,{className:"h-4 w-4"}),title:s("dashboard.verification.required.title"),description:s("dashboard.verification.required.description"),action:s("dashboard.verification.required.action"),badge:n.jsx(Xf,{variant:"secondary",children:s("dashboard.verification.required.badge")})};return n.jsxs(db,{variant:l.variant,className:"mb-4 md:mb-6",dir:a?"rtl":"ltr",children:[l.icon,n.jsxs("div",{className:_u("flex flex-col space-y-3 lg:flex-row lg:items-center lg:justify-between lg:space-y-0 w-full",a&&"lg:flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex-1",a&&"text-right"),children:[n.jsxs("h4",{className:_u("font-medium mb-2 lg:mb-1 flex flex-col space-y-1 lg:flex-row lg:items-center lg:space-y-0 lg:gap-2",a&&"lg:flex-row-reverse text-right"),children:[n.jsx("span",{children:l.title}),l.badge]}),n.jsxs(ub,{className:_u("mb-3 lg:mb-0",a&&"text-right"),children:[l.description,e.verification_notes&&i&&n.jsxs("div",{className:_u("mt-2 p-3 bg-destructive/10 rounded border border-destructive/20",a&&"text-right"),children:[n.jsx("strong",{children:s("dashboard.verification.rejectionReason")}),n.jsx("br",{}),n.jsx("span",{className:"text-sm",children:e.verification_notes})]})]})]}),n.jsx(ku,{variant:"destructive"===l.variant?"destructive":"default",onClick:()=>r("/profile?tab=verification"),className:"w-full lg:w-auto",children:l.action})]})]})})(),n.jsx(tS,{})]})})},nS=({variant:e="sidebar",collapsed:t=!1})=>{var r;const{user:s,userProfile:a}=br(),{isRTL:i}=cr();if(!s||!a)return null;const o=a.full_name||(null==(r=s.email)?void 0:r.split("@")[0])||"Vendor",l=a.company_name||"Company",c=a.role||"vendor",d=o.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return"mobile"===e?n.jsxs("div",{className:_u("flex items-center gap-3 p-4 border-b border-border",i&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-12 w-12",children:[n.jsx(Zx,{src:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold",children:d})]}),n.jsxs("div",{className:_u("flex flex-col min-w-0 flex-1",i&&"text-right"),children:[n.jsx("span",{className:"font-semibold text-foreground truncate text-base",children:o}),n.jsx("span",{className:"text-sm text-muted-foreground truncate",children:l}),n.jsx(Xf,{variant:"secondary",className:"w-fit mt-1 text-xs capitalize",children:c})]})]}):t?n.jsx("div",{className:"flex items-center justify-center w-full",children:n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold text-xs",children:d})]})}):n.jsxs("div",{className:_u("flex items-center gap-3 w-full",i&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-10 w-10",children:[n.jsx(Zx,{src:a.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold",children:d})]}),n.jsxs("div",{className:_u("flex flex-col min-w-0 flex-1",i&&"text-right"),children:[n.jsx("span",{className:"font-semibold text-foreground truncate text-sm",children:o}),n.jsx("span",{className:"text-xs text-muted-foreground truncate",children:l}),n.jsx(Xf,{variant:"secondary",className:"w-fit mt-0.5 text-xs capitalize",children:c})]}),a.user_id&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",a.user_id.slice(-4)]})]})},sS=({className:e,collapsed:t=!1,onToggle:r,onItemClick:s})=>{const a=Nt(),{t:i,isRTL:o}=cr(),[l,c]=Ne.useState(()=>{const e=localStorage.getItem("vendorSidebarExpanded");if(e)try{return new Set(JSON.parse(e))}catch{return new Set(["core-business","project-management"])}return new Set(["core-business","project-management"])}),d=[{id:"core-business",label:i("vendorGroups.workspace")||"Core Business",priority:"primary",items:[{name:i("nav.dashboard")||"Dashboard",href:"/vendor/dashboard",icon:Ym},{name:i("nav.browseRequests")||"Browse Requests",href:"/vendor/browse-requests",icon:Rm},{name:i("nav.myOffers")||"My Offers",href:"/vendor/offers",icon:dh},{name:i("nav.orders")||"Orders",href:"/vendor/orders",icon:kh},{name:i("nav.messages")||"Messages",href:"/vendor/messages",icon:nh}]},{id:"financial",label:i("vendorGroups.financial")||"Financial",priority:"secondary",items:[{name:i("nav.subscription")||"Subscription",href:"/vendor/subscription",icon:bm}]},{id:"account",label:i("vendorGroups.account")||"Account",priority:"utility",items:[{name:i("nav.profile")||"Profile",href:"/vendor/profile",icon:Xh},{name:i("nav.settings")||"Settings",href:"/vendor/settings",icon:Nh},{name:i("nav.support")||"Support",href:"/vendor/support",icon:pm}]}],u=e=>a.pathname===e,m=e=>a.pathname.startsWith(e)&&"/vendor/dashboard"!==e,h=e=>{switch(e){case"primary":return"bg-primary/5";case"secondary":return"bg-accent/5";case"utility":return"bg-muted/50";default:return""}};return n.jsxs("div",{className:_u("flex flex-col bg-card transition-all duration-300 fixed top-0 h-full z-40",t?"w-16":"w-64",o?"right-0":"left-0",!s&&(o?"border-l":"border-r"),e),dir:o?"rtl":"ltr",children:[n.jsx("div",{className:"border-b border-border bg-card h-16 flex items-center px-4",children:n.jsx(nS,{variant:"sidebar",collapsed:t})}),n.jsx(Lx,{className:"flex-1",children:n.jsx("div",{className:"p-3 space-y-3",children:d.map(e=>{const r=!!t||l.has(e.id),a=e.items.some(e=>u(e.href)||m(e.href));return n.jsxs("div",{className:_u("rounded-lg transition-all duration-200",h(e.priority)),children:[!t&&n.jsxs(ku,{variant:"ghost",onClick:()=>(e=>{if(t)return;const r=new Set(l);r.has(e)?r.delete(e):r.add(e),c(r),localStorage.setItem("vendorSidebarExpanded",JSON.stringify(Array.from(r)))})(e.id),className:_u("w-full justify-between px-3 py-2 h-auto font-medium","text-xs uppercase tracking-wider","text-muted-foreground hover:text-foreground hover:bg-accent/50",a&&"text-primary font-semibold",o&&"flex-row-reverse"),type:"button",children:[n.jsxs("span",{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx("span",{children:e.label}),a&&n.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-pulse"})]}),r?n.jsx(am,{className:_u("h-3 w-3 transition-transform duration-200",o&&"rotate-180")}):n.jsx(om,{className:_u("h-3 w-3 transition-transform duration-200",o&&"rotate-180")})]}),n.jsx("div",{className:_u("space-y-1 transition-all duration-300",t||r?"block":"hidden",!t&&"px-2 pb-2"),children:e.items.map(e=>{const r=u(e.href)||m(e.href);return n.jsxs(Zt,{to:e.href,onClick:s,className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium hover:bg-accent/50",t?"justify-center px-2":"justify-start",r?"bg-primary/10 text-primary border border-primary/20 shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent/30",o&&"flex-row-reverse"),title:t?e.name:void 0,"aria-label":`Navigate to ${e.name}`,"aria-current":r?"page":void 0,children:[n.jsx(e.icon,{className:_u("shrink-0 transition-all duration-200",t?"h-5 w-5":"h-4 w-4",r?"text-primary":"text-muted-foreground")}),!t&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:_u("truncate flex-1 text-foreground",o&&"text-right"),children:e.name}),e.badge&&e.badge>0&&n.jsx(Xf,{variant:e.badgeVariant||"secondary",className:_u("h-5 min-w-5 px-1.5 text-xs flex items-center justify-center shrink-0","destructive"===e.badgeVariant&&"animate-pulse"),children:e.badge>99?"99+":e.badge})]})]},e.href)})})]},e.id)})})})]})},aS=()=>{const e=Nt(),t=cr(),{t:r,isRTL:s}=t||{t:e=>e.split(".").pop()||e,isRTL:!1},a=e.pathname.split("/").filter(Boolean),i="vendor"===a[0]?a.slice(1):a;return n.jsx(gb,{className:_u(s&&"rtl"),children:n.jsxs(vb,{className:_u("flex items-center gap-1.5 text-sm",s?"flex-row-reverse text-right":"text-left"),children:[n.jsx(yb,{children:n.jsx(jb,{asChild:!0,className:"flex items-center gap-1.5 text-muted-foreground hover:text-foreground transition-colors",children:n.jsxs(Zt,{to:"/vendor/dashboard",className:_u("flex items-center gap-1.5",s?"flex-row-reverse text-right":"text-left"),children:[n.jsx(Um,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium",children:r("nav.dashboard")})]})})}),i.length>0&&"dashboard"!==i[0]&&n.jsxs(n.Fragment,{children:[n.jsx(wb,{children:n.jsx(om,{className:_u("h-3.5 w-3.5 text-muted-foreground",s&&"rotate-180")})}),i.map((e,t)=>{const a=t===i.length-1,o=(e=>"/"+["vendor",...i.slice(0,e+1)].join("/"))(t),l=(e=>({dashboard:r("nav.dashboard"),"projects-management":r("vendor.navigation.projectsManagement"),"cr-management":r("vendor.navigation.crManagement"),"portfolio-management":r("vendor.navigation.portfolioManagement"),"browse-requests":r("nav.browseRequests"),"my-offers":r("nav.myOffers"),messages:r("nav.messages"),orders:r("nav.orders"),settings:r("nav.settings"),profile:r("nav.profile"),support:r("nav.support")}[e]||e.charAt(0).toUpperCase()+e.slice(1).replace("-"," ")))(e);return n.jsx(yb,{children:a?n.jsx(bb,{className:"font-medium text-foreground",children:l}):n.jsxs(n.Fragment,{children:[n.jsx(jb,{asChild:!0,className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:n.jsx(Zt,{to:o,children:l})}),n.jsx(wb,{children:n.jsx(om,{className:_u("h-3.5 w-3.5 text-muted-foreground",s&&"rotate-180")})})]})},e)})]})]})})},iS=()=>{const[e,t]=Ne.useState(!1),[r,s]=Ne.useState(""),a=cr(),{t:i,isRTL:o}=a||{t:e=>e,isRTL:!1};return n.jsxs(ry,{open:e,onOpenChange:t,children:[n.jsx(ny,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"icon",className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200","aria-label":"Search",children:n.jsx(jh,{className:"h-4 w-4"})})}),n.jsx(sy,{className:_u("w-80 p-3",o&&"text-right"),align:o?"end":"start",children:n.jsxs("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&t(!1)},className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx($j,{placeholder:i("common.searchPlaceholder"),value:r,onChange:e=>s(e.target.value),className:_u("pr-10",o&&"text-right"),autoFocus:!0}),r&&n.jsx(ku,{type:"button",variant:"ghost",size:"icon",className:_u("absolute top-1/2 -translate-y-1/2 h-6 w-6",o?"left-2":"right-2"),onClick:()=>{s("")},children:n.jsx(sp,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{type:"submit",size:"sm",className:"flex-1",disabled:!r.trim(),children:[n.jsx(jh,{className:"h-3 w-3 mr-1"}),i("common.search")]}),n.jsx(ku,{type:"button",variant:"outline",size:"sm",onClick:()=>t(!1),children:i("common.cancel")})]})]})})]})},oS=({userProfile:e})=>{var t;const[r,s]=Ne.useState(!1),a=St(),{user:i,signOut:o}=br(),{t:l,isRTL:c}=cr(),d=(null==e?void 0:e.full_name)||(null==(t=null==i?void 0:i.email)?void 0:t.split("@")[0])||"Vendor",u=(null==i?void 0:i.email)||"",m=(null==e?void 0:e.company_name)||"Company",h=(null==e?void 0:e.role)||"vendor",p=d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),f="verified"===(null==e?void 0:e.cr_verification_status);return n.jsxs(Tj,{open:r,onOpenChange:s,children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(ku,{variant:"ghost",className:_u("h-9 gap-2 px-2 hover:bg-accent/50 transition-all duration-200",c&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-7 w-7",children:[n.jsx(Zx,{src:null==e?void 0:e.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold text-xs",children:p})]}),n.jsx(am,{className:"h-3 w-3 text-muted-foreground"})]})}),n.jsxs(Rj,{className:_u("w-64 p-2",c&&"text-right"),align:c?"start":"end",children:[n.jsx(qj,{className:_u("p-3 border border-border rounded-lg bg-muted/30",c&&"text-right"),children:n.jsxs("div",{className:_u("flex items-center gap-3",c&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-10 w-10",children:[n.jsx(Zx,{src:null==e?void 0:e.avatar_url}),n.jsx(Jx,{className:"bg-primary/10 text-primary font-semibold",children:p})]}),n.jsxs("div",{className:_u("flex flex-col min-w-0 flex-1",c&&"text-right"),children:[n.jsx("p",{className:"font-semibold text-foreground truncate",children:d}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:u}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[n.jsx(Xf,{variant:"secondary",className:"text-xs capitalize",children:h}),f&&n.jsxs(Xf,{variant:"default",className:"text-xs",children:[n.jsx(Yh,{className:"h-3 w-3 mr-1"}),l("common.verified")]})]})]})]})}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:()=>{a("/profile"),s(!1)},className:_u("cursor-pointer gap-2 p-2",c&&"flex-row-reverse"),children:[n.jsx(Xh,{className:"h-4 w-4"}),l("nav.profile")]}),n.jsxs(Lj,{onClick:()=>{a("/vendor/cr-management"),s(!1)},className:_u("cursor-pointer gap-2 p-2",c&&"flex-row-reverse"),children:[n.jsx(Tm,{className:"h-4 w-4"}),l("vendor.navigation.crManagement")]}),n.jsxs(Lj,{onClick:()=>{a("/settings"),s(!1)},className:_u("cursor-pointer gap-2 p-2",c&&"flex-row-reverse"),children:[n.jsx(Nh,{className:"h-4 w-4"}),l("nav.settings")]}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:async()=>{try{await o(),a("/login")}catch(e){}},className:_u("cursor-pointer gap-2 p-2 text-destructive focus:text-destructive",c&&"flex-row-reverse"),children:[n.jsx(Qm,{className:"h-4 w-4"}),l("nav.logout")]})]})]})},lS=({onMobileMenuOpen:e,onSidebarToggle:t,sidebarOpen:r})=>{const s=St(),{userProfile:a}=br(),i=cr(),{t:o,isRTL:l}=i||{t:e=>e,isRTL:!1},c=Hj();return n.jsxs("header",{className:"border-b border-border bg-card sticky top-0 z-50 shadow-sm",children:[n.jsx("div",{className:"h-16 min-h-16",children:n.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-4 h-full flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1 mr-2 sm:mr-4",children:[c&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0","aria-label":o("vendorHeader.openMobileMenu"),children:n.jsx(th,{className:"h-4 w-4"})}),!c&&n.jsx(ku,{variant:"ghost",size:"icon",onClick:()=>{null==t||t()},className:_u("h-9 w-9 hover:bg-accent/50 transition-all duration-200 shrink-0",r?"bg-primary/10 text-primary":"text-muted-foreground"),"aria-label":o("vendorHeader.toggleSidebar"),children:n.jsx(th,{className:"h-4 w-4"})}),n.jsxs("button",{onClick:()=>s("/vendor/dashboard"),className:"flex items-center gap-3 hover:opacity-80 transition-all duration-200 min-w-0","aria-label":o("vendorHeader.goToDashboard"),children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:"MWRD Logo",className:"h-8 w-auto shrink-0"}),n.jsxs("div",{className:"hidden sm:flex flex-col items-start min-w-0",children:[n.jsx("span",{className:"text-sm sm:text-base font-semibold leading-tight truncate text-foreground",children:o("vendorHeader.dashboard")}),n.jsx("span",{className:"text-xs leading-tight text-muted-foreground hidden md:block capitalize",children:o("vendorHeader.portal")})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[n.jsx(iS,{}),n.jsx(Aj,{}),n.jsx(Wj,{}),n.jsx(Fj,{}),n.jsx(oS,{userProfile:a})]})]})}),n.jsx("div",{className:"border-t border-border/50 bg-muted/30 px-4 py-2",children:n.jsx("div",{className:"max-w-full mx-auto",children:n.jsx(aS,{})})})]})},cS=({isOpen:e,onOpenChange:t})=>{const r=Nt(),{userProfile:s}=br(),{isRTL:a,t:i}=cr(),o=[{section:i("vendorGroups.workspace")||"Core Business",items:[{name:i("nav.dashboard")||"Dashboard",href:"/vendor/dashboard",icon:Ym},{name:i("nav.browseRequests")||"Browse Requests",href:"/vendor/browse-requests",icon:Rm},{name:i("nav.myOffers")||"My Offers",href:"/vendor/offers",icon:dh},{name:i("nav.orders")||"Orders",href:"/vendor/orders",icon:kh},{name:i("nav.messages")||"Messages",href:"/vendor/messages",icon:nh}]},{section:i("vendorGroups.account")||"Account",items:[{name:i("nav.profile")||"Profile",href:"/vendor/profile",icon:Xh},{name:i("nav.settings")||"Settings",href:"/vendor/settings",icon:Nh},{name:i("nav.support")||"Support",href:"/vendor/support",icon:pm}]}];return n.jsx(Kj,{open:e,onOpenChange:t,children:n.jsx(Jj,{side:a?"right":"left",className:_u("w-80 p-0 bg-background overflow-hidden","safe-area-inset-y",a?"border-l-2":"border-r-2","flex flex-col"),children:n.jsxs("div",{className:"flex flex-col h-full",dir:a?"rtl":"ltr",children:[n.jsxs("div",{className:"border-b border-border p-4 flex items-center justify-between",children:[n.jsxs(Zt,{to:"/vendor/dashboard",onClick:()=>t(!1),className:"flex items-center gap-3",children:[n.jsx("img",{src:"/lovable-uploads/9a6215a4-31ff-4f7d-a55b-1cbecc47ec33.png",alt:"MWRD Logo",className:"h-8 w-auto"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-semibold text-foreground",children:"MWRD Vendor"}),n.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:(null==s?void 0:s.role)||"Vendor"})]})]}),n.jsx(ku,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"h-8 w-8",children:n.jsx(sp,{className:"h-4 w-4"})})]}),n.jsx(Lx,{className:"flex-1 p-4",children:n.jsx("div",{className:"space-y-6",children:o.map(e=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs uppercase tracking-wider font-semibold text-muted-foreground mb-3",children:e.section}),n.jsx("div",{className:"space-y-1",children:e.items.map(e=>{const s=(i=e.href,r.pathname===i);var i;return n.jsxs(Zt,{to:e.href,onClick:()=>t(!1),className:_u("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200","text-sm font-medium",s?"bg-primary/10 text-primary border border-primary/20":"text-muted-foreground hover:text-foreground hover:bg-accent/50",a&&"flex-row-reverse text-right"),children:[n.jsx(e.icon,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:e.name})]},e.href)})})]},e.section))})})]})})})},dS=({showActions:e=!0,className:t=""})=>{const{userProfile:r}=br(),s=St();if(!r)return null;const a=(()=>{const e=r.verification_status||"pending",t=r.status;return"approved"===e&&"approved"===t?null:"pending"===e||"under_review"===e?{variant:"default",icon:n.jsx(gm,{className:"h-4 w-4"}),title:"Verification Pending",message:"Your documents are being reviewed. This typically takes 24-48 hours.",badge:n.jsx(Xf,{variant:"outline",children:"Under Review"}),showAction:!1}:"rejected"===e?{variant:"destructive",icon:n.jsx(fm,{className:"h-4 w-4"}),title:"Verification Rejected",message:"Please review the feedback and resubmit your documents.",badge:n.jsx(Xf,{variant:"destructive",children:"Rejected"}),showAction:!0,actionText:"Resubmit Documents"}:{variant:"default",icon:n.jsx(Uh,{className:"h-4 w-4"}),title:"Verification Required",message:"Complete your account verification to access all platform features.",badge:n.jsx(Xf,{variant:"secondary",children:"Pending"}),showAction:!0,actionText:"Complete Verification"}})();return a?n.jsx(db,{variant:a.variant,className:t,children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[a.icon,n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold",children:a.title}),a.badge]}),n.jsxs(ub,{className:"text-sm",children:[a.message,r.verification_notes&&"destructive"===a.variant&&n.jsxs(n.Fragment,{children:[n.jsx("br",{}),n.jsx("strong",{children:"Reason:"})," ",r.verification_notes]})]})]})]}),e&&a.showAction&&n.jsxs(ku,{variant:"destructive"===a.variant?"destructive":"default",size:"sm",onClick:()=>s("/profile"),className:"ml-4 flex-shrink-0",children:[n.jsx(Tm,{className:"h-4 w-4 mr-2"}),a.actionText]})]})}):null},uS=({children:e})=>{const{userProfile:t,loading:r}=br(),[s,a]=Ne.useState(()=>{const e=localStorage.getItem("vendorSidebarOpen");return!e||JSON.parse(e)}),[i,o]=Ne.useState(!1),l=Hj(),{t:c,isRTL:d}=cr();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(lb,{size:"lg"})}):"vendor"!==(null==t?void 0:t.role)?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-destructive mb-2",children:c("common.accessDenied")||"Access Denied"}),n.jsx("p",{className:"text-muted-foreground",children:c("vendor.dashboard.accessRequired")||"You need vendor access to view this page."})]})}):n.jsx("div",{className:"min-h-screen",children:l?n.jsxs("div",{className:"min-h-screen flex flex-col",children:[n.jsx(lS,{onMobileMenuOpen:()=>o(!0)}),n.jsx(cS,{isOpen:i,onOpenChange:o,collapsed:!s,onToggle:()=>{const e=!s;a(e),localStorage.setItem("vendorSidebarOpen",JSON.stringify(e))}}),t.verification_status&&"approved"!==t.verification_status&&n.jsx(dS,{}),n.jsx("main",{className:"flex-1 overflow-auto bg-muted/20 p-4 sm:p-6 min-h-[calc(100vh-8rem)] pb-20 safe-area-inset-bottom",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]}):n.jsxs("div",{className:"min-h-screen w-full",dir:d?"rtl":"ltr",children:[n.jsx(sS,{collapsed:!s,onToggle:()=>{const e=!s;a(e),localStorage.setItem("vendorSidebarOpen",JSON.stringify(e))}}),n.jsxs("div",{className:_u("flex flex-col min-w-0 transition-all duration-300",d?s?"mr-64":"mr-16":s?"ml-64":"ml-16"),children:[n.jsx(lS,{onSidebarToggle:()=>{const e=!s;a(e),localStorage.setItem("vendorSidebarOpen",JSON.stringify(e))},sidebarOpen:s}),t.verification_status&&"approved"!==t.verification_status&&n.jsx(dS,{}),n.jsx("main",{className:"flex-1 overflow-auto bg-muted/20 p-6 min-h-[calc(100vh-4rem)]",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})]})})},mS={crStatus:"unverified",profileCompletion:0,activeOffers:0,successRate:0,totalEarnings:0,monthlyEarnings:0,completedProjects:0,clientRating:0},hS=()=>{const[e,t]=Ne.useState({renderTime:0,isOnline:navigator.onLine,connectionSpeed:"unknown",timestamp:Date.now()}),r=Ne.useCallback(()=>{const e=performance.now();return()=>{const r=performance.now()-e;return t(e=>({...e,renderTime:r,timestamp:Date.now()})),r}},[]),n=Ne.useCallback(async()=>{if("connection"in navigator){const e=navigator.connection,r=null==e?void 0:e.effectiveType;let n="unknown";"4g"===r||"5g"===r?n="fast":"3g"!==r&&"2g"!==r||(n="slow"),t(e=>({...e,connectionSpeed:n}))}},[]),s=Ne.useCallback(()=>{if("memory"in performance){const e=performance.memory;return{used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit}}return null},[]);return Ne.useEffect(()=>{const e=()=>t(e=>({...e,isOnline:!0})),r=()=>t(e=>({...e,isOnline:!1}));window.addEventListener("online",e),window.addEventListener("offline",r),n();const a=setInterval(()=>{const e=s();e&&t(t=>({...t,memoryUsage:Math.round(e.used/1024/1024)}))},1e4);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r),clearInterval(a)}},[n,s]),{metrics:e,measureRenderTime:r}},pS=({onMetricsUpdate:e,showInDevelopment:t=!0})=>{const{metrics:r,measureRenderTime:s}=hS();if(Ne.useEffect(()=>{const t=s();return()=>{const n=t(),s={...r,renderTime:n};null==e||e(s)}},[]),!t)return null;return n.jsxs("div",{className:"fixed bottom-4 right-4 bg-black/80 text-white text-xs p-2 rounded-lg font-mono z-50 min-w-[200px]",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(gm,{className:"h-3 w-3"}),n.jsx("span",{children:"Render: "}),n.jsxs("span",{className:(a=r.renderTime,a<16?"text-green-500":a<33?"text-yellow-500":"text-red-500"),children:[r.renderTime.toFixed(2),"ms"]})]}),n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Im,{className:r.isOnline?"h-3 w-3 text-green-500":"h-3 w-3 text-red-500"}),n.jsx("span",{children:"Status: "}),n.jsx("span",{className:r.isOnline?"text-green-500":"text-red-500",children:r.isOnline?"Online":"Offline"})]}),n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(ap,{className:"h-3 w-3"}),n.jsx("span",{children:"Speed: "}),n.jsx("span",{className:(e=>{switch(e){case"fast":return"text-green-500";case"slow":return"text-red-500";default:return"text-yellow-500"}})(r.connectionSpeed),children:r.connectionSpeed.charAt(0).toUpperCase()+r.connectionSpeed.slice(1)})]}),r.memoryUsage&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Fu,{className:"h-3 w-3"}),n.jsx("span",{children:"Memory: "}),n.jsxs("span",{className:r.memoryUsage>50?"text-red-500":"text-green-500",children:[r.memoryUsage,"MB"]})]})]});var a},fS=({title:e,value:t,description:r,icon:s,trend:a,variant:i="default",loading:o=!1})=>{const{isRTL:l}=cr(),c={default:"border-border",success:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",warning:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",destructive:"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/10"};return o?n.jsxs(Eu,{className:_u("relative overflow-hidden",c[i]),children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:_u("flex items-center justify-between",l&&"flex-row-reverse"),children:[n.jsx(Q_,{className:"h-4 w-24"}),n.jsx(Q_,{className:"h-5 w-5 rounded"})]})}),n.jsxs(Au,{children:[n.jsx(Q_,{className:"h-8 w-16 mb-2"}),n.jsx(Q_,{className:"h-3 w-32"})]})]}):n.jsxs(Eu,{className:_u("relative overflow-hidden transition-all hover:shadow-md",c[i]),children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:_u("flex items-center justify-between",l&&"flex-row-reverse"),children:[n.jsx(Mu,{className:_u("text-sm font-medium text-muted-foreground",l&&"text-right"),children:e}),n.jsx(s,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Au,{children:n.jsxs("div",{className:_u("space-y-1",l&&"text-right"),children:[n.jsx("div",{className:_u("text-2xl font-bold",l&&"text-right"),children:t}),r&&n.jsx("p",{className:_u("text-xs text-muted-foreground",l&&"text-right"),children:r}),a&&n.jsx("div",{className:_u("flex items-center text-xs",l?"flex-row-reverse justify-end":"",a.isPositive?"text-green-600":"text-red-600"),children:n.jsxs("span",{className:_u("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",a.isPositive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:[a.isPositive?"+":"",a.value,"% ",a.label]})})]})})]})},xS=()=>n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Q_,{className:"h-8 w-64"}),n.jsx(Q_,{className:"h-5 w-48"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Q_,{className:"h-4 w-24"}),n.jsx(Q_,{className:"h-5 w-5"})]})}),n.jsxs(Au,{children:[n.jsx(Q_,{className:"h-8 w-16 mb-2"}),n.jsx(Q_,{className:"h-3 w-32"})]})]},t))})]}),gS=()=>{const{language:e,isRTL:t,t:r,formatNumber:s,formatCurrency:a,formatDate:i}=cr(),{stats:o,loading:l,error:c,userProfile:d}=(()=>{const{user:e}=br(),{showError:t}=dy(),[r,n]=Ne.useState(mS),[s,a]=Ne.useState(null),[i,o]=Ne.useState(!0),[l,c]=Ne.useState(null),d=Ne.useCallback(e=>{var t;if(!e)return 0;const r=[e.full_name,e.company_name,e.bio,e.phone,e.address,e.portfolio_url,(null==(t=e.categories)?void 0:t.length)>0,e.avatar_url],n=r.filter(Boolean).length;return Math.round(n/r.length*100)},[]),u=Ne.useCallback(async(r=0)=>{if(null==e?void 0:e.id)try{c(null);const{data:t,error:r}=await mr.from("user_profiles").select("*").eq("user_id",e.id).maybeSingle();if(r)throw new Error(`Failed to load profile: ${r.message}`);if(!t)throw new Error("Profile not found");a(t);const[s,i]=await Promise.allSettled([mr.from("offers").select("id, price, client_approval_status, created_at").eq("vendor_id",e.id),mr.from("orders").select("id, amount, status, completion_date, created_at").eq("vendor_id",e.id)]);let o=0,l=0;if("fulfilled"===s.status&&s.value.data){const e=s.value.data;o=e.filter(e=>"pending"===e.client_approval_status).length;const t=e.filter(e=>"approved"===e.client_approval_status).length;l=e.length>0?Math.round(t/e.length*100):0}let u=0,m=0,h=0;if("fulfilled"===i.status&&i.value.data){const e=i.value.data;h=e.filter(e=>"completed"===e.status).length;const t=(new Date).getMonth(),r=(new Date).getFullYear();e.forEach(e=>{if("completed"===e.status){u+=e.amount||0;const n=new Date(e.created_at);n.getMonth()===t&&n.getFullYear()===r&&(m+=e.amount||0)}})}const p=d(t),f=Math.round(10*(3.5+1.5*Math.random()))/10;n({crStatus:t.verification_status||"unverified",profileCompletion:p,activeOffers:o,successRate:l,totalEarnings:u,monthlyEarnings:m,completedProjects:h,clientRating:f})}catch(hte){const n=hte instanceof Error?hte.message:"Failed to load vendor statistics";if(r<2&&(n.includes("network")||n.includes("timeout")))return void setTimeout(()=>u(r+1),1e3*(r+1));c(n),0===r&&t("Failed to load dashboard data. Please refresh the page.")}finally{o(!1)}else o(!1)},[null==e?void 0:e.id,d,t]),m=Ne.useCallback(async()=>{o(!0),await u()},[u]);return Ne.useEffect(()=>{(null==e?void 0:e.id)?u():o(!1)},[null==e?void 0:e.id,u]),Ne.useMemo(()=>({stats:r,loading:i,error:l,refreshStats:m,userProfile:s}),[r,i,l,m,s])})();hS();return Ne.useMemo(()=>({...o,formattedEarnings:a(o.totalEarnings),formattedMonthlyEarnings:a(o.monthlyEarnings)}),[o,a]),l&&!d?n.jsx(Ne.Suspense,{fallback:n.jsx(xS,{}),children:n.jsx(xS,{})}):c?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(Eu,{className:"w-full max-w-md",children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx(cm,{className:"h-12 w-12 text-destructive mx-auto"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:r("common.errorLoadingDashboard")}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c})]}),n.jsx(ku,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:r("common.tryAgain")})]})})})}):n.jsxs(ip,{showDetails:!0,showHomeButton:!0,children:[n.jsxs("div",{className:_u("space-y-8",t&&"rtl text-right"),children:[!1,n.jsxs("div",{className:_u("space-y-2",t&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r("vendor.dashboard.welcome")}),n.jsx("p",{className:"text-muted-foreground mt-2",children:(null==d?void 0:d.company_name)||(null==d?void 0:d.full_name)})]}),"approved"!==o.crStatus&&n.jsx(Eu,{className:"border-warning/50 bg-warning/5",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(cm,{className:"h-5 w-5 text-warning"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-warning",children:r("vendor.cr.verificationRequired")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("vendor.cr.completeVerification")})]}),n.jsx(ku,{variant:"outline",size:"sm",asChild:!0,className:_u(t?"mr-auto":"ml-auto"),children:n.jsx(Zt,{to:"/vendor/cr-management",children:r("vendor.cr.updateCR")})})]})})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[n.jsx(fS,{title:r("vendor.dashboard.crVerificationStatus"),value:r(`vendor.cr.${o.crStatus}`),description:r("vendor.dashboard.crVerificationDesc"),icon:(e=>{switch(e){case"approved":return dm;case"pending":return Fu;default:return cm}})(o.crStatus),variant:(e=>{switch(e){case"approved":return"success";case"pending":default:return"warning";case"rejected":return"destructive"}})(o.crStatus),loading:l}),n.jsx(fS,{title:r("vendor.dashboard.profileCompletionTitle"),value:`${o.profileCompletion}%`,description:r("vendor.dashboard.profileCompletionDesc"),icon:Xh,trend:{value:o.profileCompletion>80?5:-5,label:o.profileCompletion>80?r("common.good"):r("common.needsWork"),isPositive:o.profileCompletion>80},loading:l}),n.jsx(fS,{title:r("vendor.dashboard.activeOffersCount"),value:s(o.activeOffers),description:r("vendor.dashboard.activeOffersCountDesc"),icon:dh,variant:"warning",loading:l}),n.jsx(fS,{title:r("vendor.dashboard.successRateTitle"),value:`${o.successRate}%`,description:r("vendor.dashboard.successRateDesc"),icon:Vu,variant:"success",loading:l})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[n.jsx(fS,{title:r("vendor.dashboard.totalEarningsTitle"),value:a(o.totalEarnings),description:r("vendor.dashboard.totalEarningsDesc"),icon:_m,trend:{value:12,label:r("common.vsLastMonth"),isPositive:!0},loading:l}),n.jsx(fS,{title:r("vendor.dashboard.monthlyRevenueTitle"),value:a(o.monthlyEarnings),description:r("vendor.dashboard.monthlyRevenueDesc"),icon:$h,variant:"success",loading:l}),n.jsx(fS,{title:r("vendor.dashboard.completedProjectsTitle"),value:s(o.completedProjects),description:r("vendor.dashboard.completedProjectsDesc"),icon:dm,loading:l}),n.jsx(fS,{title:r("vendor.dashboard.clientRatingTitle"),value:`${o.clientRating}/5`,description:r("vendor.dashboard.clientRatingDesc"),icon:Th,variant:"success",loading:l})]}),n.jsxs(Eu,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-primary/10",children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Fu,{className:"h-5 w-5 text-primary"}),r("vendor.dashboard.quickActions")]}),n.jsx(Pu,{className:_u(t&&"text-right"),children:r("vendor.dashboard.quickActionsDesc")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(ku,{asChild:!0,className:"h-auto p-4 flex-col space-y-2 bg-primary/10 hover:bg-primary/20 text-primary border-primary/20",variant:"outline",children:n.jsxs(Zt,{to:"/vendor/rfqs",className:_u("text-center",t&&"text-right"),children:[n.jsx(dh,{className:"h-6 w-6"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("div",{className:"font-semibold",children:r("vendor.dashboard.browseRFQs")}),n.jsx("div",{className:"text-xs opacity-80",children:r("vendor.dashboard.newRequests")})]})]})}),n.jsx(ku,{asChild:!0,className:"h-auto p-4 flex-col space-y-2 bg-green-50 hover:bg-green-100 text-green-700 border-green-200",variant:"outline",children:n.jsxs(Zt,{to:"/vendor/offers/create",className:_u("text-center",t&&"text-right"),children:[n.jsx(fh,{className:"h-6 w-6"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("div",{className:"font-semibold",children:r("vendor.dashboard.submitOffer")}),n.jsx("div",{className:"text-xs opacity-80",children:r("vendor.dashboard.createNewOffer")})]})]})}),n.jsx(ku,{asChild:!0,className:"h-auto p-4 flex-col space-y-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",variant:"outline",children:n.jsxs(Zt,{to:"/vendor/messages",className:_u("text-center",t&&"text-right"),children:[n.jsx(nh,{className:"h-6 w-6"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("div",{className:"font-semibold",children:r("vendor.dashboard.messages")}),n.jsx("div",{className:"text-xs opacity-80",children:r("vendor.dashboard.unreadMessages")})]})]})}),n.jsx(ku,{asChild:!0,className:"h-auto p-4 flex-col space-y-2 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200",variant:"outline",children:n.jsxs(Zt,{to:"/vendor/profile",className:_u("text-center",t&&"text-right"),children:[n.jsx(Xh,{className:"h-6 w-6"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("div",{className:"font-semibold",children:r("vendor.dashboard.updateProfile")}),n.jsxs("div",{className:"text-xs opacity-80",children:[o.profileCompletion,"% ",r("common.completed")]})]})]})})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-5 w-5 text-primary"}),r("vendor.dashboard.recentActivity")]})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex items-center gap-3 p-3 rounded-lg bg-muted/30",t&&"flex-row-reverse"),children:[n.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:_u("text-sm font-medium",t&&"text-right"),children:r("vendor.dashboard.newRFQReceived")}),n.jsxs("p",{className:_u("text-xs text-muted-foreground",t&&"text-right"),children:[r("vendor.dashboard.constructionProject")," - ",r("vendor.dashboard.hoursAgo")]})]})]}),n.jsxs("div",{className:_u("flex items-center gap-3 p-3 rounded-lg bg-muted/30",t&&"flex-row-reverse"),children:[n.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:_u("text-sm font-medium",t&&"text-right"),children:r("vendor.dashboard.offerSubmitted")}),n.jsxs("p",{className:_u("text-xs text-muted-foreground",t&&"text-right"),children:[r("vendor.dashboard.officeRenovation")," - ",r("vendor.dashboard.hoursAgo")]})]})]}),n.jsxs("div",{className:_u("flex items-center gap-3 p-3 rounded-lg bg-muted/30",t&&"flex-row-reverse"),children:[n.jsx("div",{className:"h-2 w-2 bg-yellow-500 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:_u("text-sm font-medium",t&&"text-right"),children:r("vendor.dashboard.profileUpdateRequired")}),n.jsxs("p",{className:_u("text-xs text-muted-foreground",t&&"text-right"),children:[r("vendor.dashboard.completeVerification")," - ",r("vendor.dashboard.dayAgo")]})]})]})]})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Ju,{className:"h-5 w-5 text-primary"}),r("vendor.dashboard.performanceOverview")]})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between text-sm",t&&"flex-row-reverse"),children:[n.jsx("span",{className:_u(t&&"text-right"),children:r("vendor.dashboard.profileCompletion")}),n.jsxs("span",{className:_u("font-medium",t&&"text-right"),children:[o.profileCompletion,"%"]})]}),n.jsx(G_,{value:o.profileCompletion,className:"h-2"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between text-sm",t&&"flex-row-reverse"),children:[n.jsx("span",{className:_u(t&&"text-right"),children:r("vendor.dashboard.successRateTitle")}),n.jsxs("span",{className:_u("font-medium",t&&"text-right"),children:[o.successRate,"%"]})]}),n.jsx(G_,{value:o.successRate,className:"h-2"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between text-sm",t&&"flex-row-reverse"),children:[n.jsx("span",{className:_u(t&&"text-right"),children:r("vendor.dashboard.clientRatingTitle")}),n.jsxs("span",{className:_u("font-medium",t&&"text-right"),children:[o.clientRating,"/5"]})]}),n.jsx(G_,{value:o.clientRating/5*100,className:"h-2"})]})]})})]})]})]}),n.jsx(pS,{})]})},vS=()=>n.jsx(uS,{children:n.jsx(gS,{})});class yS extends Ne.Component{constructor(e){super(e),r(this,"handleRefresh",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),this.state.hasError&&window.location.reload()}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var r,n;gr("application_error",{error_message:e.message,error_stack:e.stack,component_stack:t.componentStack,error_boundary:"global"}),this.setState({error:e,errorInfo:t}),((null==(r=e.message)?void 0:r.includes("WebSocket"))||(null==(n=e.message)?void 0:n.includes("insecure")))&&this.setState({hasError:!1})}render(){var e,t,r,s;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;return(null==(t=null==(e=this.state.error)?void 0:e.message)?void 0:t.includes("WebSocket"))||(null==(s=null==(r=this.state.error)?void 0:r.message)?void 0:s.includes("insecure"))?this.props.children:n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:n.jsxs(Eu,{className:"max-w-md w-full",children:[n.jsxs(Ou,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(cm,{className:"h-12 w-12 text-destructive"})}),n.jsx(Mu,{children:"Something went wrong"}),n.jsx(Pu,{children:"An error occurred while rendering this component. Please refresh the page to try again."})]}),n.jsxs(Au,{className:"text-center",children:[n.jsxs("div",{className:"flex gap-2 justify-center mb-4",children:[n.jsxs(ku,{onClick:this.handleRefresh,className:"flex items-center gap-2",children:[n.jsx(gh,{className:"h-4 w-4"}),"Try Again"]}),n.jsx(ku,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]}),!1]})]})})}return this.props.children}}const jS=ke.memo(()=>{var e,t;const{userProfile:r}=br(),{crData:s,loading:a,updateCRData:i,uploadCRDocument:o}=(()=>{const{userProfile:e}=br(),[t,r]=Ne.useState(null),[n,s]=Ne.useState(!1),[a,i]=Ne.useState(null),o=async()=>{if(null==e?void 0:e.user_id){s(!0),i(null);try{const{data:t,error:n}=await mr.from("vendor_profiles_extended").select("*").eq("vendor_id",e.user_id).maybeSingle();if(n)throw n;if(t)r({business_size:t.business_size,established_year:t.established_year,employee_count:t.employee_count,team_size:t.team_size,experience_years:t.experience_years,coverage_locations:t.coverage_locations||[],equipment:t.equipment||[],certifications:t.certifications||[]});else{const{data:t,error:n}=await mr.from("vendor_profiles_extended").insert({vendor_id:e.user_id}).select().single();if(n)throw n;r({coverage_locations:[],equipment:[],certifications:[]})}}catch(hte){i(hte instanceof Error?hte.message:"Failed to fetch vendor data")}finally{s(!1)}}};return Ne.useEffect(()=>{(null==e?void 0:e.user_id)&&"vendor"===e.role&&o()},[null==e?void 0:e.user_id,null==e?void 0:e.role]),{crData:t,loading:n,error:a,fetchCRData:o,updateCRData:async t=>{if(!(null==e?void 0:e.user_id))throw new Error("User not authenticated");s(!0),i(null);try{const{data:n,error:s}=await mr.from("vendor_profiles_extended").update(t).eq("vendor_id",e.user_id).select().single();if(s)throw s;return r(e=>e?{...e,...t}:null),n}catch(hte){const t=hte instanceof Error?hte.message:"Failed to update vendor data";throw i(t),new Error(t)}finally{s(!1)}},uploadCRDocument:async t=>{if(!(null==e?void 0:e.user_id))throw new Error("User not authenticated");const r=t.name.split(".").pop(),n=`vendor-documents/cr-${e.user_id}-${Date.now()}.${r}`;try{const{error:e}=await mr.storage.from("rfq-attachments").upload(n,t);if(e)throw e;const{data:{publicUrl:r}}=mr.storage.from("rfq-attachments").getPublicUrl(n);return r}catch(hte){throw new Error(hte instanceof Error?hte.message:"Failed to upload document")}}}})(),l=cr(),{toast:c}=fp(),{isRTL:d,t:u}=l||{isRTL:!1,t:e=>e.split(".").pop()||e},[m,h]=Ne.useState({business_size:(null==s?void 0:s.business_size)||"",established_year:(null==(e=null==s?void 0:s.established_year)?void 0:e.toString())||"",employee_count:(null==s?void 0:s.employee_count)||"",team_size:(null==s?void 0:s.team_size)||"",experience_years:(null==(t=null==s?void 0:s.experience_years)?void 0:t.toString())||""});Ne.useState(!1);const p=(e,t)=>{h(r=>({...r,[e]:t}))};if(a)return n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:n.jsx(lb,{size:"lg"})});const f=(e=>{switch(e){case"approved":return{icon:n.jsx(dm,{className:"h-5 w-5"}),color:"text-success border-success/20 bg-success/5",label:u("vendor.cr.verified")};case"pending":return{icon:n.jsx(gm,{className:"h-5 w-5"}),color:"text-warning border-warning/20 bg-warning/5",label:u("vendor.cr.pending")};case"rejected":return{icon:n.jsx(fm,{className:"h-5 w-5"}),color:"text-destructive border-destructive/20 bg-destructive/5",label:u("vendor.cr.rejected")};default:return{icon:n.jsx(Uh,{className:"h-5 w-5"}),color:"text-muted-foreground border-muted/20 bg-muted/5",label:u("vendor.cr.unverified")}}})((null==r?void 0:r.verification_status)||"unverified");return n.jsxs("div",{className:_u("space-y-6",d&&"rtl"),dir:d?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:u("vendor.cr.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:u("vendor.cr.verificationRequired")})]}),n.jsx(Eu,{className:_u("border-l-4",f.color),children:n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center space-x-3",d&&"space-x-reverse"),children:[f.icon,n.jsx("span",{children:u("vendor.cr.status")}),n.jsx(Xf,{variant:"outline",className:f.color,children:f.label})]}),n.jsxs(Pu,{children:["approved"===(null==r?void 0:r.verification_status)&&u("vendor.cr.statusApproved"),"pending"===(null==r?void 0:r.verification_status)&&u("vendor.cr.statusPending"),"rejected"===(null==r?void 0:r.verification_status)&&u("vendor.cr.statusRejected"),(!(null==r?void 0:r.verification_status)||"under_review"===(null==r?void 0:r.verification_status))&&u("vendor.cr.statusDefault")]})]})}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center space-x-2",d&&"space-x-reverse"),children:[n.jsx(Xu,{className:"h-5 w-5"}),n.jsx("span",{children:u("vendor.profile.businessInfo")})]}),n.jsx(Pu,{children:u("vendor.profile.basicInfo")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"business_size",children:u("vendor.cr.businessSize")}),n.jsx($j,{id:"business_size",placeholder:u("vendor.cr.smallMediumLarge"),value:m.business_size,onChange:e=>p("business_size",e.target.value),className:d?"text-right":""})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"established_year",className:_u("flex items-center space-x-2",d&&"space-x-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsx("span",{children:u("vendor.cr.establishedYear")})]}),n.jsx($j,{id:"established_year",type:"number",placeholder:"2010",value:m.established_year,onChange:e=>p("established_year",e.target.value),className:d?"text-right":""})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"experience_years",children:u("vendor.cr.experienceYears")}),n.jsx($j,{id:"experience_years",type:"number",placeholder:"5",value:m.experience_years,onChange:e=>p("experience_years",e.target.value),className:d?"text-right":""})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"employee_count",children:u("vendor.cr.employeeCount")}),n.jsx($j,{id:"employee_count",placeholder:u("vendor.cr.oneToTenEmployees"),value:m.employee_count,onChange:e=>p("employee_count",e.target.value),className:d?"text-right":""})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"team_size",children:u("vendor.cr.teamSize")}),n.jsx($j,{id:"team_size",placeholder:u("vendor.cr.smallLargeTeam"),value:m.team_size,onChange:e=>p("team_size",e.target.value),className:d?"text-right":""})]}),n.jsxs(ku,{onClick:async()=>{try{await i({business_size:m.business_size,established_year:m.established_year?parseInt(m.established_year):void 0,employee_count:m.employee_count,team_size:m.team_size,experience_years:m.experience_years?parseInt(m.experience_years):void 0}),c({title:u("common.success"),description:u("vendor.cr.updateCR")})}catch(e){c({title:u("common.error"),description:e instanceof Error?e.message:u("common.failedToUpdate"),variant:"destructive"})}},disabled:a,className:_u("gap-2",d&&"flex-row-reverse"),children:[a?n.jsx(lb,{size:"sm"}):null,u("common.save")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center space-x-2",d&&"space-x-reverse"),children:[n.jsx(Tm,{className:"h-5 w-5"}),n.jsx("span",{children:u("vendor.cr.businessDocuments")})]}),n.jsx(Pu,{children:u("vendor.cr.upload")})]}),n.jsx(Au,{className:"space-y-4",children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(j_,{children:u("vendor.cr.businessDocuments")}),n.jsxs("div",{className:"mt-2 p-4 border-2 border-dashed border-muted-foreground/25 rounded-lg text-center",children:[n.jsx(Tm,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:u("vendor.cr.documentUpload")})]})]})})})]})]})});jS.displayName="CRManagementContent";const bS=ke.memo(()=>n.jsx(yS,{children:n.jsx(jS,{})}));bS.displayName="CRManagement";const wS=()=>n.jsx(uS,{children:n.jsx(bS,{})});var NS="Tabs",[_S,SS]=o(NS,[ae]),kS=ae(),[CS,ES]=_S(NS),OS=Ne.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:u="automatic",...m}=e,h=v(c),[p,f]=d({prop:s,onChange:i,defaultProp:o});return n.jsx(CS,{scope:r,baseId:ie(),value:p,onValueChange:f,orientation:l,dir:h,activationMode:u,children:n.jsx(a.div,{dir:h,"data-orientation":l,...m,ref:t})})});OS.displayName=NS;var MS="TabsList",PS=Ne.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...i}=e,o=ES(MS,r),l=kS(r);return n.jsx(oe,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx(a.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});PS.displayName=MS;var AS="TabsTrigger",TS=Ne.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:i=!1,...o}=e,l=ES(AS,r),c=kS(r),d=LS(l.baseId,s),u=qS(l.baseId,s),m=s===l.value;return n.jsx(le,{asChild:!0,...c,focusable:!i,active:m,children:n.jsx(a.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:t,onMouseDown:h(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(s)}),onKeyDown:h(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(s)}),onFocus:h(e.onFocus,()=>{const e="manual"!==l.activationMode;m||i||!e||l.onValueChange(s)})})})});TS.displayName=AS;var DS="TabsContent",RS=Ne.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:i,children:o,...l}=e,c=ES(DS,r),d=LS(c.baseId,s),m=qS(c.baseId,s),h=s===c.value,p=Ne.useRef(h);return Ne.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),n.jsx(u,{present:i||h,children:({present:r})=>n.jsx(a.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:m,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&o})})});function LS(e,t){return`${e}-trigger-${t}`}function qS(e,t){return`${e}-content-${t}`}RS.displayName=DS;var IS=PS,FS=TS,zS=RS;const BS=OS,$S=Ne.forwardRef(({className:e,...t},r)=>n.jsx(IS,{ref:r,className:_u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$S.displayName=IS.displayName;const US=Ne.forwardRef(({className:e,...t},r)=>n.jsx(FS,{ref:r,className:_u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));US.displayName=FS.displayName;const VS=Ne.forwardRef(({className:e,...t},r)=>n.jsx(zS,{ref:r,className:_u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));VS.displayName=zS.displayName;const WS=()=>{var e;const{userProfile:t}=br(),{toast:r}=fp(),{t:s,formatCurrency:a}=cr(),[i,o]=Ne.useState(!1),[l,c]=Ne.useState([]),[d,u]=Ne.useState(0),[m,h]=Ne.useState(0);Ne.useEffect(()=>{t&&p()},[t]);const p=async()=>{try{const{data:e}=await mr.from("financial_transactions").select("*").eq("user_id",null==t?void 0:t.user_id).eq("type","subscription").order("created_at",{ascending:!1}).limit(10);c(e||[]);const r=new Date,n=new Date(r.getFullYear(),r.getMonth(),1),s=new Date(r.getFullYear(),r.getMonth()-1,1),a=(new Date(r.getFullYear(),r.getMonth()-2,1),(e||[]).filter(e=>new Date(e.created_at)>=n).reduce((e,t)=>e+Number(t.amount),0)),i=(e||[]).filter(e=>new Date(e.created_at)>=s&&new Date(e.created_at)<n).reduce((e,t)=>e+Number(t.amount),0);if(u(a),i>0){h((a-i)/i*100)}}catch(e){}},f=(null==t?void 0:t.subscription_plan)||"basic",x=(null==t?void 0:t.subscription_status)||"inactive",g=null==t?void 0:t.subscription_expires_at,v={basic:[s("vendor.subscription.plans.basic.features.0"),s("vendor.subscription.plans.basic.features.1"),s("vendor.subscription.plans.basic.features.2")],premium:[s("vendor.subscription.plans.premium.features.0"),s("vendor.subscription.plans.premium.features.1"),s("vendor.subscription.plans.premium.features.2"),s("vendor.subscription.plans.premium.features.3")],enterprise:[s("vendor.subscription.plans.enterprise.features.0"),s("vendor.subscription.plans.enterprise.features.1"),s("vendor.subscription.plans.enterprise.features.2"),s("vendor.subscription.plans.enterprise.features.3")]},y=(()=>{if(!g)return 0;const e=new Date,t=new Date(g).getTime()-e.getTime();return Math.ceil(t/864e5)})();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:s("vendor.subscription.title")}),n.jsx("p",{className:"text-muted-foreground mt-1",children:s("vendor.subscription.description")})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:s("vendor.subscription.currentPlan")}),n.jsx(bm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold capitalize",children:f}),n.jsx(Xf,{variant:"active"===x?"default":"secondary",className:"mt-2",children:x})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:s("vendor.subscription.daysRemaining")}),n.jsx(Zu,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:y}),n.jsx(G_,{value:y/30*100,className:"mt-2"})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:s("vendor.subscription.monthlySpend")}),n.jsx(_m,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a?a(d,"USD"):`$${d.toFixed(2)}`}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[m>0?"+":"",m.toFixed(1),"% ",s("vendor.subscription.fromLastMonth")]})]})]})]}),n.jsxs(BS,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs($S,{children:[n.jsx(US,{value:"overview",children:s("vendor.subscription.overview")}),n.jsx(US,{value:"upgrade",children:s("vendor.subscription.upgrade")}),n.jsx(US,{value:"billing",children:s("vendor.subscription.billingHistory")})]}),n.jsx(VS,{value:"overview",className:"space-y-4",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:s("vendor.subscription.subscriptionDetails")}),n.jsx(Pu,{children:s("vendor.subscription.description")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:s("vendor.subscription.planFeatures")}),n.jsx("ul",{className:"space-y-2",children:null==(e=v[f])?void 0:e.map((e,t)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(dm,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm",children:e})]},t))})]}),y<7&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[n.jsx(cm,{className:"h-4 w-4 text-yellow-600"}),n.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:s("vendor.subscription.expiresIn").replace("{days}",y.toString())})]})]})]})}),n.jsx(VS,{value:"upgrade",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(v).map(([e,t])=>n.jsxs(Eu,{className:f===e?"border-primary":"",children:[n.jsxs(Ou,{children:[n.jsx(Mu,{className:"capitalize",children:s(`vendor.subscription.plans.${e}.name`)}),n.jsx(Pu,{children:s(`vendor.subscription.plans.${e}.price`)})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsx("ul",{className:"space-y-2",children:t.map((e,t)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(dm,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm",children:e})]},t))}),n.jsx(ku,{className:"w-full",variant:f===e?"secondary":"default",disabled:f===e||i,onClick:()=>(async e=>{try{o(!0),r({title:s("vendor.subscription.upgradeInitiated"),description:`${s("vendor.subscription.redirectingPayment").replace("{plan}",e)}`})}catch(t){r({title:s("vendor.subscription.error"),description:s("vendor.subscription.failedUpgrade"),variant:"destructive"})}finally{o(!1)}})(e),children:s(f===e?"vendor.subscription.currentPlanButton":"vendor.subscription.upgradeButton")})]})]},e))})}),n.jsx(VS,{value:"billing",className:"space-y-4",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:s("vendor.subscription.billingHistory")}),n.jsx(Pu,{children:s("vendor.subscription.description")})]}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:l.length>0?l.map(e=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e.description}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-medium",children:["$",e.amount]}),n.jsx(Xf,{variant:"completed"===e.status?"default":"secondary",children:e.status})]})]},e.id)):n.jsx("p",{className:"text-muted-foreground text-center py-4",children:s("vendor.subscription.noBillingHistory")})})})]})})]})]})},HS=()=>n.jsx(uS,{children:n.jsx(WS,{})});function YS(e){const t=Ne.useRef({value:e,previous:e});return Ne.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var KS=[" ","Enter","ArrowUp","ArrowDown"],GS=[" ","Enter"],XS="Select",[QS,ZS,JS]=i(XS),[ek,tk]=o(XS,[JS,ce]),rk=ce(),[nk,sk]=ek(XS),[ak,ik]=ek(XS),ok=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:m,autoComplete:h,disabled:p,required:f,form:x}=e,g=rk(t),[y,j]=Ne.useState(null),[b,w]=Ne.useState(null),[N,_]=Ne.useState(!1),S=v(u),[k=!1,C]=d({prop:s,defaultProp:a,onChange:i}),[E,O]=d({prop:o,defaultProp:l,onChange:c}),M=Ne.useRef(null),P=!y||(x||!!y.closest("form")),[A,T]=Ne.useState(new Set),D=Array.from(A).map(e=>e.props.value).join(";");return n.jsx(ge,{...g,children:n.jsxs(nk,{required:f,scope:t,trigger:y,onTriggerChange:j,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:_,contentId:ie(),value:E,onValueChange:O,open:k,onOpenChange:C,dir:S,triggerPointerDownPosRef:M,disabled:p,children:[n.jsx(QS.Provider,{scope:t,children:n.jsx(ak,{scope:e.__scopeSelect,onNativeOptionAdd:Ne.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Ne.useCallback(e=>{T(t=>{const r=new Set(t);return r.delete(e),r})},[]),children:r})}),P?n.jsxs(Yk,{"aria-hidden":!0,required:f,tabIndex:-1,name:m,autoComplete:h,value:E,onChange:e=>O(e.target.value),disabled:p,form:x,children:[void 0===E?n.jsx("option",{value:""}):null,Array.from(A)]},D):null]})})};ok.displayName=XS;var lk="SelectTrigger",ck=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...i}=e,o=rk(r),c=sk(lk,r),d=c.disabled||s,u=l(t,c.onTriggerChange),m=ZS(r),p=Ne.useRef("touch"),[f,x,g]=Kk(e=>{const t=m().filter(e=>!e.disabled),r=t.find(e=>e.value===c.value),n=Gk(t,e,r);void 0!==n&&c.onValueChange(n.value)}),v=e=>{d||(c.onOpenChange(!0),g()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return n.jsx(de,{asChild:!0,...o,children:n.jsx(a.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":Hk(c.value)?"":void 0,...i,ref:u,onClick:h(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==p.current&&v(e)}),onPointerDown:h(i.onPointerDown,e=>{p.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:h(i.onKeyDown,e=>{const t=""!==f.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),t&&" "===e.key||KS.includes(e.key)&&(v(),e.preventDefault())})})})});ck.displayName=lk;var dk="SelectValue",uk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:i,children:o,placeholder:c="",...d}=e,u=sk(dk,r),{onValueNodeHasChildrenChange:m}=u,h=void 0!==o,p=l(t,u.onValueNodeChange);return x(()=>{m(h)},[m,h]),n.jsx(a.span,{...d,ref:p,style:{pointerEvents:"none"},children:Hk(u.value)?n.jsx(n.Fragment,{children:c}):o})});uk.displayName=dk;var mk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...i}=e;return n.jsx(a.span,{"aria-hidden":!0,...i,ref:t,children:s||"▼"})});mk.displayName="SelectIcon";var hk=e=>n.jsx(f,{asChild:!0,...e});hk.displayName="SelectPortal";var pk="SelectContent",fk=Ne.forwardRef((e,t)=>{const r=sk(pk,e.__scopeSelect),[s,a]=Ne.useState();if(x(()=>{a(new DocumentFragment)},[]),!r.open){const t=s;return t?we.createPortal(n.jsx(gk,{scope:e.__scopeSelect,children:n.jsx(QS.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),t):null}return n.jsx(yk,{...e,ref:t})});fk.displayName=pk;var xk=10,[gk,vk]=ek(pk),yk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:j,...b}=e,w=sk(pk,r),[N,_]=Ne.useState(null),[S,k]=Ne.useState(null),C=l(t,e=>_(e)),[E,O]=Ne.useState(null),[M,P]=Ne.useState(null),A=ZS(r),[T,D]=Ne.useState(!1),R=Ne.useRef(!1);Ne.useEffect(()=>{if(N)return I(N)},[N]),ue();const L=Ne.useCallback(e=>{const[t,...r]=A().map(e=>e.ref.current),[n]=r.slice(-1),s=document.activeElement;for(const a of e){if(a===s)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&S&&(S.scrollTop=0),a===n&&S&&(S.scrollTop=S.scrollHeight),null==a||a.focus(),document.activeElement!==s)return}},[A,S]),q=Ne.useCallback(()=>L([E,N]),[L,E,N]);Ne.useEffect(()=>{T&&q()},[T,q]);const{onOpenChange:F,triggerPointerDownPosRef:z}=w;Ne.useEffect(()=>{if(N){let e={x:0,y:0};const t=t=>{var r,n;e={x:Math.abs(Math.round(t.pageX)-((null==(r=z.current)?void 0:r.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(n=z.current)?void 0:n.y)??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():N.contains(r.target)||F(!1),document.removeEventListener("pointermove",t),z.current=null};return null!==z.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[N,F,z]),Ne.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[B,$]=Kk(e=>{const t=A().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=Gk(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),U=Ne.useCallback((e,t,r)=>{const n=!R.current&&!r;(void 0!==w.value&&w.value===t||n)&&(O(e),n&&(R.current=!0))},[w.value]),V=Ne.useCallback(()=>null==N?void 0:N.focus(),[N]),W=Ne.useCallback((e,t,r)=>{const n=!R.current&&!r;(void 0!==w.value&&w.value===t||n)&&P(e)},[w.value]),H="popper"===a?bk:jk,Y=H===bk?{side:d,sideOffset:u,align:m,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:j}:{};return n.jsx(gk,{scope:r,content:N,viewport:S,onViewportChange:k,itemRefCallback:U,selectedItem:E,onItemLeave:V,itemTextRefCallback:W,focusSelectedItem:q,selectedItemText:M,position:a,isPositioned:T,searchRef:B,children:n.jsx(me,{as:s,allowPinchZoom:!0,children:n.jsx(he,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:h(i,e=>{var t;null==(t=w.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:n.jsx(pe,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:n.jsx(H,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...b,...Y,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:h(b.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||$(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=A().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>L(t)),e.preventDefault()}})})})})})})});yk.displayName="SelectContentImpl";var jk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...i}=e,o=sk(pk,r),c=vk(pk,r),[d,u]=Ne.useState(null),[m,h]=Ne.useState(null),p=l(t,e=>h(e)),f=ZS(r),g=Ne.useRef(!1),v=Ne.useRef(!0),{viewport:y,selectedItem:j,selectedItemText:b,focusSelectedItem:w}=c,N=Ne.useCallback(()=>{if(o.trigger&&o.valueNode&&d&&m&&y&&j&&b){const e=o.trigger.getBoundingClientRect(),t=m.getBoundingClientRect(),r=o.valueNode.getBoundingClientRect(),n=b.getBoundingClientRect();if("rtl"!==o.dir){const s=n.left-t.left,a=r.left-s,i=e.left-a,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-xk,u=Qf(a,[xk,Math.max(xk,c-l)]);d.style.minWidth=o+"px",d.style.left=u+"px"}else{const s=t.right-n.right,a=window.innerWidth-r.right-s,i=window.innerWidth-e.right-a,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-xk,u=Qf(a,[xk,Math.max(xk,c-l)]);d.style.minWidth=o+"px",d.style.right=u+"px"}const a=f(),i=window.innerHeight-2*xk,l=y.scrollHeight,c=window.getComputedStyle(m),u=parseInt(c.borderTopWidth,10),h=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),x=u+h+l+parseInt(c.paddingBottom,10)+p,v=Math.min(5*j.offsetHeight,x),w=window.getComputedStyle(y),N=parseInt(w.paddingTop,10),_=parseInt(w.paddingBottom,10),S=e.top+e.height/2-xk,k=i-S,C=j.offsetHeight/2,E=u+h+(j.offsetTop+C),O=x-E;if(E<=S){const e=a.length>0&&j===a[a.length-1].ref.current;d.style.bottom="0px";const t=m.clientHeight-y.offsetTop-y.offsetHeight,r=E+Math.max(k,C+(e?_:0)+t+p);d.style.height=r+"px"}else{const e=a.length>0&&j===a[0].ref.current;d.style.top="0px";const t=Math.max(S,u+y.offsetTop+(e?N:0)+C)+O;d.style.height=t+"px",y.scrollTop=E-S+y.offsetTop}d.style.margin=`${xk}px 0`,d.style.minHeight=v+"px",d.style.maxHeight=i+"px",null==s||s(),requestAnimationFrame(()=>g.current=!0)}},[f,o.trigger,o.valueNode,d,m,y,j,b,o.dir,s]);x(()=>N(),[N]);const[_,S]=Ne.useState();x(()=>{m&&S(window.getComputedStyle(m).zIndex)},[m]);const k=Ne.useCallback(e=>{e&&!0===v.current&&(N(),null==w||w(),v.current=!1)},[N,w]);return n.jsx(wk,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:g,onScrollButtonChange:k,children:n.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:n.jsx(a.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});jk.displayName="SelectItemAlignedPosition";var bk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=xk,...i}=e,o=rk(r);return n.jsx(fe,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bk.displayName="SelectPopperPosition";var[wk,Nk]=ek(pk,{}),_k="SelectViewport",Sk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...i}=e,o=vk(_k,r),c=Nk(_k,r),d=l(t,o.onViewportChange),u=Ne.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(QS.Slot,{scope:r,children:n.jsx(a.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:h(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=c;if((null==n?void 0:n.current)&&r){const e=Math.abs(u.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*xk,s=parseFloat(r.style.minHeight),a=parseFloat(r.style.height),i=Math.max(s,a);if(i<n){const s=i+e,a=Math.min(n,s),o=s-a;r.style.height=a+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}u.current=t.scrollTop})})})]})});Sk.displayName=_k;var kk="SelectGroup",[Ck,Ek]=ek(kk);Ne.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,i=ie();return n.jsx(Ck,{scope:r,id:i,children:n.jsx(a.div,{role:"group","aria-labelledby":i,...s,ref:t})})}).displayName=kk;var Ok="SelectLabel",Mk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,i=Ek(Ok,r);return n.jsx(a.div,{id:i.id,...s,ref:t})});Mk.displayName=Ok;var Pk="SelectItem",[Ak,Tk]=ek(Pk),Dk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:i=!1,textValue:o,...c}=e,d=sk(Pk,r),u=vk(Pk,r),m=d.value===s,[p,f]=Ne.useState(o??""),[x,g]=Ne.useState(!1),v=l(t,e=>{var t;return null==(t=u.itemRefCallback)?void 0:t.call(u,e,s,i)}),y=ie(),j=Ne.useRef("touch"),b=()=>{i||(d.onValueChange(s),d.onOpenChange(!1))};if(""===s)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(Ak,{scope:r,value:s,disabled:i,textId:y,isSelected:m,onItemTextChange:Ne.useCallback(e=>{f(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:n.jsx(QS.ItemSlot,{scope:r,value:s,disabled:i,textValue:p,children:n.jsx(a.div,{role:"option","aria-labelledby":y,"data-highlighted":x?"":void 0,"aria-selected":m&&x,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:v,onFocus:h(c.onFocus,()=>g(!0)),onBlur:h(c.onBlur,()=>g(!1)),onClick:h(c.onClick,()=>{"mouse"!==j.current&&b()}),onPointerUp:h(c.onPointerUp,()=>{"mouse"===j.current&&b()}),onPointerDown:h(c.onPointerDown,e=>{j.current=e.pointerType}),onPointerMove:h(c.onPointerMove,e=>{var t;j.current=e.pointerType,i?null==(t=u.onItemLeave)||t.call(u):"mouse"===j.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:h(c.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=u.onItemLeave)||t.call(u))}),onKeyDown:h(c.onKeyDown,e=>{var t;""!==(null==(t=u.searchRef)?void 0:t.current)&&" "===e.key||(GS.includes(e.key)&&b()," "===e.key&&e.preventDefault())})})})})});Dk.displayName=Pk;var Rk="SelectItemText",Lk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:i,...o}=e,c=sk(Rk,r),d=vk(Rk,r),u=Tk(Rk,r),m=ik(Rk,r),[h,p]=Ne.useState(null),f=l(t,e=>p(e),u.onItemTextChange,e=>{var t;return null==(t=d.itemTextRefCallback)?void 0:t.call(d,e,u.value,u.disabled)}),g=null==h?void 0:h.textContent,v=Ne.useMemo(()=>n.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:j}=m;return x(()=>(y(v),()=>j(v)),[y,j,v]),n.jsxs(n.Fragment,{children:[n.jsx(a.span,{id:u.textId,...o,ref:f}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?we.createPortal(o.children,c.valueNode):null]})});Lk.displayName=Rk;var qk="SelectItemIndicator",Ik=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return Tk(qk,r).isSelected?n.jsx(a.span,{"aria-hidden":!0,...s,ref:t}):null});Ik.displayName=qk;var Fk="SelectScrollUpButton",zk=Ne.forwardRef((e,t)=>{const r=vk(Fk,e.__scopeSelect),s=Nk(Fk,e.__scopeSelect),[a,i]=Ne.useState(!1),o=l(t,s.onScrollButtonChange);return x(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?n.jsx(Uk,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});zk.displayName=Fk;var Bk="SelectScrollDownButton",$k=Ne.forwardRef((e,t)=>{const r=vk(Bk,e.__scopeSelect),s=Nk(Bk,e.__scopeSelect),[a,i]=Ne.useState(!1),o=l(t,s.onScrollButtonChange);return x(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;i(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),a?n.jsx(Uk,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});$k.displayName=Bk;var Uk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...i}=e,o=vk("SelectScrollButton",r),l=Ne.useRef(null),c=ZS(r),d=Ne.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return Ne.useEffect(()=>()=>d(),[d]),x(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[c]),n.jsx(a.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:h(i.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(s,50))}),onPointerMove:h(i.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===l.current&&(l.current=window.setInterval(s,50))}),onPointerLeave:h(i.onPointerLeave,()=>{d()})})}),Vk=Ne.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(a.div,{"aria-hidden":!0,...s,ref:t})});Vk.displayName="SelectSeparator";var Wk="SelectArrow";function Hk(e){return""===e||void 0===e}Ne.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=rk(r),i=sk(Wk,r),o=vk(Wk,r);return i.open&&"popper"===o.position?n.jsx(xe,{...a,...s,ref:t}):null}).displayName=Wk;var Yk=Ne.forwardRef((e,t)=>{const{value:r,...s}=e,a=Ne.useRef(null),i=l(t,a),o=YS(r);return Ne.useEffect(()=>{const e=a.current,t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==r&&n){const t=new Event("change",{bubbles:!0});n.call(e,r),e.dispatchEvent(t)}},[o,r]),n.jsx(gp,{asChild:!0,children:n.jsx("select",{...s,ref:i,defaultValue:r})})});function Kk(e){const t=m(e),r=Ne.useRef(""),n=Ne.useRef(0),s=Ne.useCallback(e=>{const s=r.current+e;t(s),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(s)},[t]),a=Ne.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return Ne.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function Gk(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=r?e.indexOf(r):-1;let a=(i=e,o=Math.max(s,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===n.length&&(a=a.filter(e=>e!==r));const l=a.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}Yk.displayName="BubbleSelect";var Xk=ck,Qk=mk,Zk=hk,Jk=fk,eC=Sk,tC=Mk,rC=Dk,nC=Lk,sC=Ik,aC=zk,iC=$k,oC=Vk;const lC=ok,cC=uk,dC=Ne.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Xk,{ref:s,className:_u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(Qk,{asChild:!0,children:n.jsx(am,{className:"h-4 w-4 opacity-50"})})]}));dC.displayName=Xk.displayName;const uC=Ne.forwardRef(({className:e,...t},r)=>n.jsx(aC,{ref:r,className:_u("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(lm,{className:"h-4 w-4"})}));uC.displayName=aC.displayName;const mC=Ne.forwardRef(({className:e,...t},r)=>n.jsx(iC,{ref:r,className:_u("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(am,{className:"h-4 w-4"})}));mC.displayName=iC.displayName;const hC=Ne.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(Zk,{children:n.jsxs(Jk,{ref:a,className:_u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(uC,{}),n.jsx(eC,{className:_u("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(mC,{})]})}));hC.displayName=Jk.displayName;Ne.forwardRef(({className:e,...t},r)=>n.jsx(tC,{ref:r,className:_u("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=tC.displayName;const pC=Ne.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(rC,{ref:s,className:_u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(sC,{children:n.jsx(sm,{className:"h-4 w-4"})})}),n.jsx(nC,{children:t})]}));pC.displayName=rC.displayName;Ne.forwardRef(({className:e,...t},r)=>n.jsx(oC,{ref:r,className:_u("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=oC.displayName;const fC=or("useCategories"),xC=e=>{const t={...e};return""===t.parent_id&&(t.parent_id=null),t},gC=(e=!1)=>{const[t,r]=Ne.useState([]),[n,s]=Ne.useState(!1),{toast:a}=fp(),i=async()=>{try{s(!0);let t=mr.from("categories").select("*").order("sort_order",{ascending:!0});e||(t=t.eq("is_active",!0));const{data:n,error:a}=await t;if(a)throw a;const i=new Map,o=[];(n||[]).forEach(e=>{const t={...e,children:[]};i.set(e.id,t),e.parent_id||o.push(t)}),(n||[]).forEach(e=>{if(e.parent_id){const t=i.get(e.parent_id),r=i.get(e.id);t&&r&&t.children.push(r)}}),r(o)}catch(t){fC.error("Error fetching categories",{error:t}),a({title:"Error",description:"Failed to fetch categories",variant:"destructive"})}finally{s(!1)}},o=()=>{const e=[],r=t=>{t.forEach(t=>{e.push(t),t.children&&t.children.length>0&&r(t.children)})};return r(t),e};return Ne.useEffect(()=>{i()},[e]),{categories:t,loading:n,refetch:i,createCategory:async e=>{try{fC.debug("Creating category",{categoryData:e});const t=xC(e);fC.debug("Sanitized data",{sanitizedData:t});const{data:r,error:n}=await mr.from("categories").insert([t]).select().single();if(n)throw fC.error("Create category error",{error:n}),n;return fC.info("Category created successfully",{data:r}),await i(),a({title:"Success",description:"Category created successfully"}),r}catch(t){fC.error("Error creating category",{error:t});const e=(null==t?void 0:t.message)||"Failed to create category";throw e.includes("permission denied")||e.includes("policy")?a({title:"Permission Error",description:"You don't have permission to create categories. Please ensure you have admin privileges.",variant:"destructive"}):e.includes("violates row-level security")?a({title:"Access Denied",description:"Row-level security policy prevents this action. Please check your admin role assignment.",variant:"destructive"}):e.includes("invalid input syntax for type uuid")?a({title:"Data Error",description:"Invalid data format. Please check the category information and try again.",variant:"destructive"}):a({title:"Error",description:e,variant:"destructive"}),t}},updateCategory:async(e,t)=>{var r,n;try{fC.debug("Updating category",{id:e,updates:t});const{data:s}=await mr.auth.getUser();fC.debug("Current user",{userId:null==(r=null==s?void 0:s.user)?void 0:r.id});const{data:o,error:l}=await mr.from("user_profiles").select("role, id").eq("user_id",null==(n=null==s?void 0:s.user)?void 0:n.id).single();l?fC.error("Error fetching user profile",{profileError:l}):fC.debug("User profile",{profile:o});const c=xC(t);fC.debug("Sanitized updates",{sanitizedUpdates:c});const{error:d}=await mr.from("categories").update(c).eq("id",e);if(d)throw fC.error("Update category error",{error:d}),d;fC.info("Category updated successfully"),await i(),a({title:"Success",description:"Category updated successfully"})}catch(s){fC.error("Error updating category",{error:s});const e=(null==s?void 0:s.message)||"Failed to update category";throw e.includes("permission denied")||e.includes("policy")?a({title:"Permission Error",description:"You don't have permission to update categories. Please ensure you have admin privileges.",variant:"destructive"}):e.includes("violates row-level security")?a({title:"Access Denied",description:"Row-level security policy prevents this update. Please check your admin role assignment.",variant:"destructive"}):e.includes("invalid input syntax for type uuid")?a({title:"Data Error",description:"Invalid data format. Please check the category information and try again.",variant:"destructive"}):a({title:"Error",description:e,variant:"destructive"}),s}},deleteCategory:async e=>{try{fC.debug("Deleting category",{id:e});const{error:t}=await mr.from("categories").delete().eq("id",e);if(t)throw fC.error("Delete category error",{error:t}),t;fC.info("Category deleted successfully"),await i(),a({title:"Success",description:"Category deleted successfully"})}catch(t){fC.error("Error deleting category",{error:t});const e=(null==t?void 0:t.message)||"Failed to delete category";throw e.includes("permission denied")||e.includes("policy")?a({title:"Permission Error",description:"You don't have permission to delete categories. Please ensure you have admin privileges.",variant:"destructive"}):e.includes("violates row-level security")?a({title:"Access Denied",description:"Row-level security policy prevents this action. Please check your admin role assignment.",variant:"destructive"}):a({title:"Error",description:e,variant:"destructive"}),t}},getAllCategories:o,getCategoryBySlug:e=>o().find(t=>t.slug===e),getCategoryPath:e=>{const t=o(),r=[],n=e=>{const s=t.find(t=>t.id===e);return!!s&&(r.unshift(s),!s.parent_id||n(s.parent_id))};return n(e),r}}},vC=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s,userProfile:a}=br(),{categories:i,getAllCategories:o}=gC(),l=async()=>{if(s&&"vendor"===(null==a?void 0:a.role))try{n(!0);const{data:e,error:r}=await mr.from("requests").select("\n          *,\n          offers!left (\n            id,\n            vendor_id\n          )\n        ").eq("status","new").order("created_at",{ascending:!1});if(r)throw r;const i=(e||[]).filter(e=>{var t;return!(null==(t=e.offers)?void 0:t.some(e=>e.vendor_id===s.id))}).map(e=>{const{score:t,reasons:r}=((e,t)=>{var r,n;let s=0;const a=[];s+=5;const i=o(),l=i.find(t=>t.slug===e.category),c=(null==t?void 0:t.categories)||[];if(c.includes(e.category)){s+=30;const t=l?l.name_en:e.category;a.push(`Expertise in ${t}`)}else{let e=!1;if(l){if(l.parent_id){const t=i.find(e=>e.id===l.parent_id);t&&c.includes(t.slug)&&(s+=15,a.push(`Related experience: ${t.name_en}`),e=!0)}e||i.filter(e=>e.parent_id===l.id).some(e=>c.includes(e.slug))&&(s+=10,a.push("Related subcategory experience"))}}(null==t?void 0:t.rating)&&(s+=t.rating/5*20,t.rating>=4.5?a.push("Highly rated supplier (4.5+ stars)"):t.rating>=4&&a.push("Well-rated supplier (4.0+ stars)"));const d=(null==t?void 0:t.completedProjects)||0;d>=50?(s+=20,a.push("Highly experienced (50+ projects)")):d>=20?(s+=15,a.push("Experienced supplier (20+ projects)")):d>=10&&(s+=10,a.push("Established supplier (10+ projects)"));const u=(null==t?void 0:t.responseTime)||"24h",m=parseFloat(u.replace("h",""));m<=2?(s+=15,a.push("Very fast response time (≤2h)")):m<=6?(s+=10,a.push("Fast response time (≤6h)")):m<=12&&(s+=5,a.push("Good response time (≤12h)")),"urgent"===e.urgency?(s+=25,a.push("Urgent request - immediate attention needed"),m<=2&&(s+=10,a.push("Perfect for urgent requests"))):"high"===e.urgency?(s+=15,a.push("High priority request")):"medium"===e.urgency&&(s+=10,a.push("Medium priority - good timing"));const h=e.budget_min||0,p=(h+(e.budget_max||1.5*h))/2,f=(null==t?void 0:t.minBudget)||1e3,x=(null==t?void 0:t.maxBudget)||1e5;p>=f&&p<=x?(s+=20,a.push("Budget matches supplier range")):p>=2e4?(s+=15,a.push("High value project (20k+ SAR)")):p>=1e4?(s+=10,a.push("Medium value project (10k+ SAR)")):p>=5e3&&(s+=5,a.push("Standard project budget"));const g=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5);if(g<=.5?(s+=20,a.push("Just posted - be the first to respond!")):g<=1?(s+=15,a.push("Recently posted (today)")):g<=3?(s+=10,a.push("Fresh request (3 days old)")):g<=7&&(s+=5,a.push("Still relevant (1 week old)")),e.location&&(null==t?void 0:t.address)){const r=e.location.toLowerCase(),n=(t.address||"").toLowerCase(),i=["riyadh","jeddah","dammam","mecca","medina","khobar"],o=i.find(e=>r.includes(e)),l=i.find(e=>n.includes(e));o&&l&&o===l?(s+=20,a.push(`Local supplier in ${o}`)):o&&l&&(s+=5,a.push("Regional coverage available"))}(null==t?void 0:t.verified)&&(s+=10,a.push("Verified supplier")),(null==(r=null==t?void 0:t.certifications)?void 0:r.length)>0&&(s+=5,a.push("Certified professional"));const v=(null==(n=null==t?void 0:t.portfolioItems)?void 0:n.length)||0;v>=10?(s+=10,a.push("Extensive portfolio (10+ projects)")):v>=5&&(s+=5,a.push("Good portfolio showcase"));const y=(new Date).getMonth();return"construction-infrastructure"===(null==l?void 0:l.slug)&&[10,11,0,1,2].includes(y)&&(s+=5,a.push("Optimal construction season")),{score:Math.min(s,100),reasons:a}})(e,a);return{id:e.id,title:e.title,description:e.description,category:e.category,budget_min:e.budget_min,budget_max:e.budget_max,location:e.location,deadline:e.deadline,urgency:e.urgency,created_at:e.created_at,client:e.client_id,matchScore:t,matchReasons:r}});i.sort((e,t)=>t.matchScore-e.matchScore),t(i)}catch(e){}finally{n(!1)}else n(!1)};Ne.useEffect(()=>{l()},[s,a]);return{matchedRequests:e,loading:r,refetch:l,getMatchLevel:e=>e>=80?{level:"Excellent Match",color:"bg-green-100 text-green-800"}:e>=60?{level:"Good Match",color:"bg-blue-100 text-blue-800"}:e>=40?{level:"Fair Match",color:"bg-yellow-100 text-yellow-800"}:{level:"Basic Match",color:"bg-gray-100 text-gray-800"}}},yC=Dr("flex flex-col items-center justify-center text-center",{variants:{size:{sm:"py-8 px-4",default:"py-12 px-6",lg:"py-16 px-8"}},defaultVariants:{size:"default"}}),jC=Ne.forwardRef(({className:e,size:t,icon:r,title:s,description:a,action:i,...o},l)=>n.jsxs("div",{ref:l,className:_u(yC({size:t}),e),...o,children:[r&&n.jsx("div",{className:"mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:n.jsx(r,{className:"h-6 w-6 text-muted-foreground"})}),n.jsx("h3",{className:"mb-2 text-lg font-semibold text-foreground",children:s}),a&&n.jsx("p",{className:"mb-4 text-sm text-muted-foreground max-w-sm",children:a}),i&&n.jsx(ku,{onClick:i.onClick,variant:i.variant||"default",size:"sm",children:i.label})]}));jC.displayName="EmptyState";const bC=Ne.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:_u("flex min-h-[80px] w-full rounded-md border border-input-border bg-input px-3 py-2 text-sm text-foreground ring-offset-ring-offset placeholder:text-input-placeholder placeholder:opacity-60 focus-visible:outline-2 focus-visible:outline-focus-outline focus-visible:outline-offset-2 focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 hover:border-border-strong focus-visible:border-primary focus-visible:ring-focus-ring/30 disabled:cursor-not-allowed disabled:bg-button-disabled disabled:text-button-disabled-foreground disabled:border-button-disabled-border disabled:placeholder:text-button-disabled-foreground selection:bg-input-selection/40 selection:text-foreground caret-input-caret [&::-webkit-input-placeholder]:text-input-placeholder [&::-webkit-input-placeholder]:opacity-60 [&::-moz-placeholder]:text-input-placeholder [&::-moz-placeholder]:opacity-60 [&:-ms-input-placeholder]:text-input-placeholder [&:-ms-input-placeholder]:opacity-60",e),ref:r,...t}));bC.displayName="Textarea";const wC=({children:e,requestId:t})=>{const[r,s]=Ne.useState(!1),[a,i]=Ne.useState(!1),[o,l]=Ne.useState([]),{toast:c}=fp(),{t:d,language:u}=cr(),{user:m}=br(),h="ar"===u,[p,f]=Ne.useState({title:"",requestId:t||"",description:"",price:"",deliveryTime:""});Ne.useEffect(()=>{r&&!t&&x()},[r,t]);const x=async()=>{try{l([{id:"1",title:"Construction Project",description:"Building construction",category:"construction"},{id:"2",title:"IT Services",description:"Software development",category:"technology"},{id:"3",title:"Marketing Campaign",description:"Digital marketing",category:"marketing"}])}catch(e){}};return n.jsxs(Sb,{open:r,onOpenChange:s,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[425px]",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:h?"إنشاء عرض جديد":"Create New Offer"}),n.jsx(Tb,{children:h?"املأ تفاصيل عرضك للعميل":"Fill in your offer details for the client"})]}),n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m)if(p.requestId){i(!0);try{p.requestId,p.requestId,m.id,p.title,p.description,parseInt(p.price),parseInt(p.deliveryTime),(new Date).toISOString();c({title:h?"تم إنشاء العرض بنجاح":"Offer Created Successfully",description:h?"تم إرسال عرضك وسيتم إشعار العميل":"Your offer has been submitted and the client will be notified"}),s(!1),f({title:"",requestId:t||"",description:"",price:"",deliveryTime:""})}catch(r){c({title:h?"خطأ في إنشاء العرض":"Error Creating Offer",description:r.message,variant:"destructive"})}finally{i(!1)}}else c({title:h?"خطأ":"Error",description:h?"يرجى اختيار طلب العميل":"Please select a client request",variant:"destructive"});else c({title:h?"خطأ":"Error",description:h?"يجب تسجيل الدخول أولاً":"Please log in to create an offer",variant:"destructive"})},className:"space-y-4",children:[!t&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"requestId",children:h?"طلب العميل":"Client Request"}),n.jsxs(lC,{value:p.requestId,onValueChange:e=>f({...p,requestId:e}),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:h?"اختر طلب العميل":"Select Client Request"})}),n.jsx(hC,{children:o.map(e=>n.jsx(pC,{value:e.id,children:e.title},e.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"title",children:h?"عنوان العرض":"Offer Title"}),n.jsx($j,{id:"title",placeholder:h?"مثل: حلول صوتية شاملة للمؤتمر":"e.g., Complete Audio Solutions for Conference",value:p.title,onChange:e=>f({...p,title:e.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"description",children:h?"تفاصيل العرض":"Offer Details"}),n.jsx(bC,{id:"description",placeholder:h?"اوصف خدماتك ومنتجاتك بالتفصيل...":"Describe your services and products in detail...",value:p.description,onChange:e=>f({...p,description:e.target.value}),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"price",children:h?"السعر (ريال)":"Price (SAR)"}),n.jsx($j,{id:"price",type:"number",placeholder:h?"مثل: 8500":"e.g., 8500",value:p.price,onChange:e=>f({...p,price:e.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"deliveryTime",children:h?"مدة التسليم (أيام)":"Delivery Time (days)"}),n.jsx($j,{id:"deliveryTime",type:"number",placeholder:h?"مثل: 3":"e.g., 3",value:p.deliveryTime,onChange:e=>f({...p,deliveryTime:e.target.value}),required:!0})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{type:"button",variant:"outline",onClick:()=>s(!1),children:h?"إلغاء":"Cancel"}),n.jsx(ku,{type:"submit",disabled:a,children:a?h?"جارٍ الإرسال...":"Submitting...":h?"إرسال العرض":"Submit Offer"})]})]})]})]})},NC=({offer:e,onApprove:t,onReject:r,userRole:s})=>{const{t:a,isRTL:i,language:o}=cr(),[l,c]=Ne.useState(e.client_approval_notes||""),[d,u]=Ne.useState(!1),m="client"===s||"admin"===s;return n.jsxs(Eu,{className:"w-full",children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-start justify-between "+(i?"flex-row-reverse":""),children:[n.jsxs("div",{className:"flex-1 "+(i?"text-right":"text-left"),children:[n.jsx(Mu,{className:"text-lg mb-2",children:e.title}),n.jsx(Pu,{className:"text-sm",children:e.description}),e.request&&n.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[i?"للطلب:":"For request:"," ",e.request.title]})]}),n.jsx("div",{className:"flex items-center gap-2 "+(i?"flex-row-reverse":""),children:n.jsx(Xf,{variant:(e=>{switch(e){case"approved":return"default";case"rejected":return"destructive";case"pending":return"secondary";default:return"outline"}})(e.client_approval_status),children:(h=e.client_approval_status,(null==(p={en:{approved:"Approved",rejected:"Rejected",pending:"Pending"},ar:{approved:"موافق عليه",rejected:"مرفوض",pending:"قيد المراجعة"}}[o])?void 0:p[h])||h)})})]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 "+(i?"flex-row-reverse":""),children:[n.jsx(_m,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm font-medium",children:[e.price.toLocaleString()," ",e.currency]})]}),n.jsxs("div",{className:"flex items-center gap-2 "+(i?"flex-row-reverse":""),children:[n.jsx(Vh,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[e.delivery_time_days," ",i?"أيام":"days"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground "+(i?"flex-row-reverse":""),children:[n.jsx(gm,{className:"h-3 w-3"}),n.jsxs("span",{children:[i?"تم الإنشاء:":"Created:"," ",bj(new Date(e.created_at),"MMM dd, yyyy HH:mm")]})]}),m&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:`notes-${e.id}`,className:i?"text-right":"",children:a("admin.approvals.approvalNotes")||"Approval Notes"}),n.jsx(bC,{id:`notes-${e.id}`,value:l,onChange:e=>c(e.target.value),placeholder:i?"أضف ملاحظات حول قرار الموافقة...":"Add notes about the approval decision...",className:"min-h-20 "+(i?"text-right":""),disabled:"pending"!==e.client_approval_status})]}),m&&"pending"===e.client_approval_status&&n.jsxs("div",{className:"flex gap-2 "+(i?"flex-row-reverse":""),children:[n.jsxs(ku,{onClick:async()=>{u(!0),await t(e.id,l),u(!1)},disabled:d,className:"flex-1",variant:"default",children:[n.jsx(dm,{className:"h-4 w-4 "+(i?"ml-2":"mr-2")}),a("admin.approvals.acceptOffer")||"Accept Offer"]}),n.jsxs(ku,{onClick:async()=>{u(!0),await r(e.id,l),u(!1)},disabled:d,className:"flex-1",variant:"destructive",children:[n.jsx(fm,{className:"h-4 w-4 "+(i?"ml-2":"mr-2")}),a("admin.approvals.rejectOffer")||"Reject Offer"]})]}),"pending"!==e.client_approval_status&&e.client_approval_date&&n.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 "+(i?"text-right":""),children:[n.jsxs("div",{className:"text-sm font-medium mb-1",children:[i?"تمت المعالجة في:":"Processed on:"," ",bj(new Date(e.client_approval_date),"MMM dd, yyyy HH:mm")]}),e.client_approval_notes&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[i?"الملاحظات:":"Notes:"," ",e.client_approval_notes]})]})]})]});var h,p},_C=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState({}),[s,a]=Ne.useState(!1),[i,o]=Ne.useState(null),[l,c]=Ne.useState(null),{user:d}=br(),[u,m]=Ne.useState(null),h=or("useRealTimeChat");Ne.useEffect(()=>{if(!d)return;h.info("Setting up real-time subscriptions for user:",{userId:d.id});const e=(async()=>{try{const e=mr.channel("chat-updates");return e.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${d.id}`},e=>{var t,r;h.debug("New message received via realtime:",{conversationId:null==(t=e.new)?void 0:t.conversation_id,senderId:null==(r=e.new)?void 0:r.sender_id});const s=e.new;n(e=>({...e,[s.conversation_id]:[...e[s.conversation_id]||[],s]}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"conversations"},e=>{var t,r;h.debug("Conversation updated via realtime:",{conversationId:null==(t=e.new)?void 0:t.id,status:null==(r=e.new)?void 0:r.status}),j()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"conversations"},e=>{var t,r;h.debug("New conversation created via realtime:",{conversationId:null==(t=e.new)?void 0:t.id,clientId:null==(r=e.new)?void 0:r.client_id}),j()}).subscribe((e,t)=>{t?(h.error("Realtime subscription error:",{error:t}),h.info("Realtime disabled - app will work without live updates")):h.debug("Realtime subscription status:",{status:e})}),m(e),()=>{h.debug("Cleaning up real-time subscriptions");try{mr.removeChannel(e)}catch(t){h.warn("Error cleaning up realtime channel:",{cleanupError:t})}}}catch(e){return h.error("Failed to setup realtime subscriptions:",{error:e}),h.info("App will continue to work without realtime features"),()=>{}}})();return()=>{e&&"function"==typeof e.then&&e.then(e=>e&&e())}},[d]);const p=Ne.useCallback(async(e,t,r,n="business")=>{var s;if(!d)throw new Error("User not authenticated");h.info("Starting conversation with recipient:",{recipientId:e,requestId:t,offerId:r});try{const{data:a}=await mr.from("user_profiles").select("id").eq("user_id",d.id).single();if(!a)throw new Error("Current user profile not found");let i;h.debug("Current user profile found:",{profileId:a.id});let{data:o}=await mr.from("user_profiles").select("id, user_id").eq("user_id",e).maybeSingle();if(o)i=o.id,h.debug("Found recipient by user_id:",{recipientProfileId:i});else{const{data:t}=await mr.from("user_profiles").select("id, user_id").eq("id",e).maybeSingle();if(!t)throw new Error("Recipient profile not found");i=t.id,h.debug("Found recipient by profile_id:",{recipientProfileId:i})}h.debug("Recipient profile resolved:",{recipientProfileId:i});const l="client"===(null==(s=d.user_metadata)?void 0:s.role),c=l?a.id:i,u=l?i:a.id,{data:m}=await mr.from("conversations").select("*").or(`and(client_id.eq.${c},vendor_id.eq.${u}),and(client_id.eq.${u},vendor_id.eq.${c})`).eq("conversation_type",n).maybeSingle();if(m)return h.debug("Found existing conversation:",{conversationId:m.id}),m;h.debug("Creating new conversation between profiles:",{clientId:c,vendorId:u});const p={client_id:c,vendor_id:u,status:"active",conversation_type:n};t&&(p.request_id=t),r&&(p.offer_id=r);const{data:f,error:x}=await mr.from("conversations").insert(p).select().single();if(x)throw h.error("Error creating conversation:",{error:x,conversationData:p}),x;return h.info("Created new conversation:",{conversationId:f.id}),await j(),f}catch(a){throw h.error("Error starting conversation:",{error:a,recipientId:e}),a}},[d]),f=Ne.useCallback(async(e,t,r,s="text",a)=>{if(!d)throw new Error("User not authenticated");h.debug("Sending message:",{conversationId:e,messageType:s,contentLength:t.length});try{const{data:i,error:o}=await mr.from("messages").insert({conversation_id:e,sender_id:d.id,recipient_id:r,content:t,message_type:s,attachment_url:a}).select().single();if(o)throw o;const l="voice"===s?"🎵 Voice message":"text"===s?t:`Sent ${s}`;return await mr.from("conversations").update({last_message:l,last_message_at:(new Date).toISOString()}).eq("id",e),n(t=>({...t,[e]:[...t[e]||[],i]})),h.debug("Message sent successfully:",{messageId:i.id}),i}catch(i){throw h.error("Error sending message:",{error:i,conversationId:e}),i}},[d]),x=Ne.useCallback(async e=>{if(d&&0!==e.length)try{await mr.from("messages").update({read_at:(new Date).toISOString()}).in("id",e).eq("recipient_id",d.id)}catch(t){h.error("Error marking messages as read:",{error:t,messageCount:e.length})}},[d]),g=Ne.useCallback(async e=>{h.debug("Fetching messages for conversation:",{conversationId:e});try{const{data:t,error:r}=await mr.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(r)throw r;return n(r=>({...r,[e]:t||[]})),h.debug("Fetched messages:",{conversationId:e,messageCount:(null==t?void 0:t.length)||0}),t}catch(t){return h.error("Error fetching messages:",{error:t,conversationId:e}),[]}},[]),v=Ne.useCallback(e=>{if(!d)return 0;return(r[e]||[]).filter(e=>e.recipient_id===d.id&&!e.read_at).length},[r,d]),y=Ne.useCallback(async e=>{if(!d)return null;try{const{data:t}=await mr.from("user_profiles").select("id").eq("user_id",d.id).maybeSingle();if(!t)return h.error("Current user profile not found when fetching participant"),null;const r=e.client_id===t.id?e.vendor_id:e.client_id;h.debug("Looking for other participant:",{otherParticipantId:r});const{data:n,error:s}=await mr.from("user_profiles").select("*").eq("id",r).maybeSingle();return s?(h.error("Error fetching other participant:",{error:s,otherParticipantId:r}),null):n?(h.debug("Found other participant:",{participantId:r,name:n.full_name||n.company_name}),n):(h.error("Other participant profile not found:",{otherParticipantId:r}),null)}catch(t){return h.error("Error fetching participant:",{error:t}),null}},[d]),j=Ne.useCallback(async()=>{if(d){h.debug("Fetching conversations for user:",{userId:d.id}),a(!0),o(null);try{const{data:e}=await mr.from("user_profiles").select("id").eq("user_id",d.id).single();if(!e)throw new Error("Current user profile not found");const{data:r,error:n}=await mr.from("conversations").select("*").or(`client_id.eq.${e.id},vendor_id.eq.${e.id}`).order("last_message_at",{ascending:!1,nullsFirst:!1});if(n)throw n;h.debug("Fetched conversations:",{userId:d.id,conversationCount:(null==r?void 0:r.length)||0}),t(r||[])}catch(e){h.error("Error fetching conversations:",{error:e,userId:d.id}),o(e.message)}finally{a(!1)}}},[d]);return Ne.useEffect(()=>{j()},[j]),{conversations:e,messages:r,loading:s,error:i,activeConversation:l,setActiveConversation:c,startConversation:p,sendMessage:f,markAsRead:x,fetchMessages:g,getUnreadCount:v,getOtherParticipant:y,refetch:j}},SC=()=>n.jsxs("div",{className:"flex items-center gap-3 max-w-[80%] mr-auto",children:[n.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-xs text-primary font-medium",children:"•••"})}),n.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-md px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce [animation-delay:-0.3s]"}),n.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce [animation-delay:-0.15s]"}),n.jsx("div",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"})]}),n.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"typing"})]})})]}),kC=({children:e,recipientId:t,recipientName:r="Unknown User",requestId:s,offerId:a,open:i=!1,onOpenChange:o,conversationType:l="business"})=>{var c,d,u;const[m,h]=Ne.useState(i),[p,f]=Ne.useState(""),[x,g]=Ne.useState(null),[v,y]=Ne.useState(!1),[j,b]=Ne.useState(null),w=Ne.useRef(null),{toast:N}=fp(),{user:_}=br(),{conversations:S,messages:k,loading:C,error:E,activeConversation:O,setActiveConversation:M,startConversation:P,sendMessage:A,markAsRead:T,fetchMessages:D,getUnreadCount:R,getOtherParticipant:L}=_C(),[q,I]=Ne.useState(null),[F,z]=Ne.useState([]),[B,$]=Ne.useState(null);Ne.useEffect(()=>{h(i)},[i]);Ne.useEffect(()=>{m&&_&&U()},[m,_,t]),Ne.useEffect(()=>{q&&L(q).then($)},[q]),Ne.useEffect(()=>{if(O&&k[O]){const e=k[O].map(e=>({...e,status:e.sender_id===(null==_?void 0:_.id)?"sent":"delivered"}));z(e),W();const t=e.filter(e=>e.recipient_id===(null==_?void 0:_.id)&&!e.read_at).map(e=>e.id);t.length>0&&T(t)}},[k,O,_]);const U=async()=>{try{const e=await P(t,s,a,l);I(e),M(e.id),await D(e.id)}catch(e){N({title:"Error",description:"Failed to start conversation",variant:"destructive"})}},V=async()=>{if(p.trim()&&O)try{await A(O,p,t),f(""),g(null),W()}catch(e){N({title:"Error",description:"Failed to send message",variant:"destructive"})}},W=()=>{setTimeout(()=>{var e;null==(e=w.current)||e.scrollIntoView({behavior:"smooth"})},100)},H=e=>{switch(e){case"sending":return n.jsx(gm,{className:"h-3 w-3 text-muted-foreground"});case"sent":return n.jsx(sm,{className:"h-3 w-3 text-muted-foreground"});case"delivered":return n.jsx(nm,{className:"h-3 w-3 text-muted-foreground"});case"read":return n.jsx(nm,{className:"h-3 w-3 text-primary"});default:return null}},Y=({msg:e,isOwn:t})=>{var s,a,i,o;return n.jsxs("div",{className:_u("flex gap-2 mb-4",t?"flex-row-reverse":"flex-row"),children:[!t&&n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==B?void 0:B.avatar_url}),n.jsx(Jx,{children:(null==(s=null==B?void 0:B.full_name)?void 0:s[0])||(null==r?void 0:r[0])||"U"})]}),n.jsxs("div",{className:_u("max-w-[70%] group",t?"items-end":"items-start"),children:[e.replyTo&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-1 px-3 py-1 bg-muted rounded",children:["Replying to: ",null==(i=null==(a=F.find(t=>t.id===e.replyTo))?void 0:a.content)?void 0:i.substring(0,50),"..."]}),n.jsxs("div",{className:_u("px-3 py-2 rounded-lg relative",t?"bg-primary text-primary-foreground ml-auto":"bg-muted"),children:[n.jsx("p",{className:"text-sm",children:e.content}),n.jsxs("div",{className:_u("flex items-center gap-1 mt-1",t?"justify-end":"justify-start"),children:[n.jsx("span",{className:"text-xs opacity-70",children:(o=e.created_at,new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}),t&&H(e.status||"sent")]}),n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(km,{className:"h-3 w-3"})})}),n.jsx(Rj,{children:n.jsxs(Lj,{onClick:()=>g(e),children:[n.jsx(vh,{className:"h-4 w-4 mr-2"}),"Reply"]})})]})]})]})]})};return n.jsxs(Sb,{open:m,onOpenChange:e=>{h(e),null==o||o(e),e||(I(null),z([]),$(null),f(""),g(null))},children:[e&&n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[600px] h-[600px] flex flex-col p-0",children:[n.jsx(Mb,{className:"px-6 py-4 border-b",children:n.jsxs(Ab,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==B?void 0:B.avatar_url}),n.jsx(Jx,{children:(null==(c=null==B?void 0:B.full_name)?void 0:c[0])||(null==r?void 0:r[0])||"U"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:(null==B?void 0:B.full_name)||r}),n.jsx(Xf,{variant:"secondary",className:"text-xs",children:"support"===l?"Support Agent":(null==B?void 0:B.role)||"User"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ku,{variant:"outline",size:"sm",children:n.jsx(ph,{className:"h-4 w-4"})}),n.jsx(ku,{variant:"outline",size:"sm",children:n.jsx(ep,{className:"h-4 w-4"})})]})]})}),n.jsx(Lx,{className:"flex-1 px-6",children:C?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):0===F.length?n.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[n.jsx(rh,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start the conversation"}),n.jsxs("p",{className:"text-sm",children:["Send your first message to ",r]})]}):n.jsxs("div",{className:"py-4",children:[F.map(e=>n.jsx(Y,{msg:e,isOwn:e.sender_id===(null==_?void 0:_.id)},e.id)),v&&n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==B?void 0:B.avatar_url}),n.jsx(Jx,{children:(null==(d=null==B?void 0:B.full_name)?void 0:d[0])||(null==r?void 0:r[0])||"U"})]}),n.jsx(SC,{})]}),n.jsx("div",{ref:w})]})}),n.jsxs("div",{className:"px-6 py-4 border-t",children:[x&&n.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-muted rounded text-sm",children:[n.jsx(vh,{className:"h-4 w-4"}),n.jsxs("span",{children:["Replying to: ",null==(u=x.content)?void 0:u.substring(0,50),"..."]}),n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>g(null),className:"ml-auto h-6 w-6 p-0",children:"×"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx($j,{value:p,onChange:e=>{f(e.target.value),(()=>{v||y(!0),j&&clearTimeout(j);const e=setTimeout(()=>{y(!1)},1e3);b(e)})()},placeholder:"Type your message...",onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())},className:"flex-1"}),n.jsx(ku,{onClick:V,size:"icon",disabled:!p.trim()||C,children:n.jsx(bh,{className:"h-4 w-4"})})]})]})]})]})},CC=e=>n.jsx(kC,{...e});var EC="AlertDialog",[OC,MC]=o(EC,[ve]),PC=ve(),AC=e=>{const{__scopeAlertDialog:t,...r}=e,s=PC(t);return n.jsx(ne,{...s,...r,modal:!0})};AC.displayName=EC;var TC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=PC(r);return n.jsx(se,{...a,...s,ref:t})});TC.displayName="AlertDialogTrigger";var DC=e=>{const{__scopeAlertDialog:t,...r}=e,s=PC(t);return n.jsx(re,{...s,...r})};DC.displayName="AlertDialogPortal";var RC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=PC(r);return n.jsx(Q,{...a,...s,ref:t})});RC.displayName="AlertDialogOverlay";var LC="AlertDialogContent",[qC,IC]=OC(LC),FC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,i=PC(r),o=Ne.useRef(null),c=l(t,o),d=Ne.useRef(null);return n.jsx(ye,{contentName:LC,titleName:zC,docsSlug:"alert-dialog",children:n.jsx(qC,{scope:r,cancelRef:d,children:n.jsxs(Z,{role:"alertdialog",...i,...a,ref:c,onOpenAutoFocus:h(a.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=d.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[n.jsx(je,{children:s}),n.jsx(YC,{contentRef:o})]})})})});FC.displayName=LC;var zC="AlertDialogTitle",BC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=PC(r);return n.jsx(ee,{...a,...s,ref:t})});BC.displayName=zC;var $C="AlertDialogDescription",UC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=PC(r);return n.jsx(te,{...a,...s,ref:t})});UC.displayName=$C;var VC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=PC(r);return n.jsx(J,{...a,...s,ref:t})});VC.displayName="AlertDialogAction";var WC="AlertDialogCancel",HC=Ne.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=IC(WC,r),i=PC(r),o=l(t,a);return n.jsx(J,{...i,...s,ref:o})});HC.displayName=WC;var YC=({contentRef:e})=>{const t=`\`${LC}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${LC}\` by passing a \`${$C}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${LC}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return Ne.useEffect(()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))},[t,e]),null},KC=RC,GC=FC,XC=VC,QC=HC,ZC=BC,JC=UC;const eE=AC,tE=TC,rE=DC,nE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(KC,{className:_u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));nE.displayName=KC.displayName;const sE=Ne.forwardRef(({className:e,...t},r)=>n.jsxs(rE,{children:[n.jsx(nE,{}),n.jsx(GC,{ref:r,className:_u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));sE.displayName=GC.displayName;const aE=({className:e,...t})=>n.jsx("div",{className:_u("flex flex-col space-y-2 text-center sm:text-left",e),...t});aE.displayName="AlertDialogHeader";const iE=({className:e,...t})=>n.jsx("div",{className:_u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});iE.displayName="AlertDialogFooter";const oE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(ZC,{ref:r,className:_u("text-lg font-semibold",e),...t}));oE.displayName=ZC.displayName;const lE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(JC,{ref:r,className:_u("text-sm text-muted-foreground",e),...t}));lE.displayName=JC.displayName;const cE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(XC,{ref:r,className:_u(Su(),e),...t}));cE.displayName=XC.displayName;const dE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(QC,{ref:r,className:_u(Su({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));dE.displayName=QC.displayName;const uE=e=>{const[t,r]=Ne.useState([]),[n,s]=Ne.useState(!0),[a,i]=Ne.useState(null),{user:o}=br(),{toast:l}=fp(),c=or("useOffers"),d=async()=>{if(o)try{s(!0),i(null);let t=mr.from("offers").select("\n          *,\n          requests (\n            title,\n            description,\n            client_id,\n            category,\n            location\n          ),\n          user_profiles:vendor_id (\n            full_name,\n            company_name,\n            email\n          )\n        ").order("created_at",{ascending:!1});if(e)t=t.eq("request_id",e);else if("vendor"===(null==o?void 0:o.role))t=t.eq("vendor_id",o.id);else{const{data:e}=await mr.from("requests").select("id").eq("client_id",o.id);(null==e?void 0:e.length)&&(t=t.in("request_id",e.map(e=>e.id)))}const{data:n,error:a}=await t;if(a)return c.error("Error fetching offers:",{error:a,requestId:e,userRole:null==o?void 0:o.role}),void i("Failed to load offers");const l=(n||[]).map(e=>({...e,currency:e.currency||"SAR",delivery_time_days:e.delivery_time_days||e.delivery_time||0,vendor:e.user_profiles}));r(l)}catch(hte){c.error("Unexpected error in fetchOffers:",{error:hte,requestId:e,userRole:null==o?void 0:o.role}),i("An unexpected error occurred")}finally{s(!1)}else s(!1)};Ne.useEffect(()=>{d()},[o,e]),Ne.useEffect(()=>{if(!o)return;c.info("Setting up offers realtime subscription",{userId:o.id});const e=(async()=>{try{const e=mr.channel("offers_changes").on("postgres_changes",{event:"*",schema:"public",table:"offers"},e=>{c.debug("Offer updated via realtime:",{eventType:e.eventType,table:e.table,hasNew:!!e.new,hasOld:!!e.old}),d()}).subscribe((e,t)=>{t?(c.error("Offers realtime subscription error:",{error:t}),c.info("Offers realtime disabled - app will work without live updates")):c.debug("Offers realtime subscription status:",{status:e})});return()=>{try{mr.removeChannel(e)}catch(t){c.warn("Error cleaning up offers realtime channel:",{cleanupError:t})}}}catch(e){return c.error("Failed to setup offers realtime subscription:",{error:e}),()=>{}}})();return()=>{e&&"function"==typeof e.then&&e.then(e=>e&&e())}},[o]);return{offers:t,loading:n,error:a,refetch:d,updateOfferStatus:async(e,t,r)=>{try{const{error:n}=await mr.from("offers").update({client_approval_status:t,client_approval_notes:r,client_approval_date:(new Date).toISOString()}).eq("id",e);return n?(c.error("Error updating offer status:",{error:n,offerId:e,status:t}),!1):(l({title:"Success",description:`Offer ${t} successfully`}),await d(),!0)}catch(n){return c.error("Unexpected error updating offer status:",{error:n,offerId:e,status:t}),!1}},createOffer:async e=>{if(!o)throw new Error("User not authenticated");try{const{data:t,error:r}=await mr.from("offers").insert([{vendor_id:o.id,title:e.title,description:e.description,price:e.price,delivery_time_days:e.delivery_time_days,delivery_time:e.delivery_time_days,request_id:e.request_id,currency:"SAR"}]).select().single();if(r)throw r;return l({title:"Success",description:"Offer created successfully"}),await d(),t}catch(t){throw c.error("Error creating offer:",{error:t,offerData:e}),t}},compareOffers:e=>t.filter(t=>e.includes(t.id)),formatPrice:e=>`${e.price.toLocaleString()} ${e.currency}`,getStatusColor:e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}}},mE=({children:e,offerId:t,userRole:r="client",onUpdated:s})=>{const{language:a}=cr(),i="ar"===a,{toast:o}=fp(),{updateOfferStatus:l}=uE(),{user:c}=br(),[d,u]=Ne.useState(!1),[m,h]=Ne.useState(!1),[p,f]=Ne.useState(!1),[x,g]=Ne.useState(null),[v,y]=Ne.useState(""),[j,b]=Ne.useState(null),w=Ne.useRef(null);Ne.useEffect(()=>{d&&(async()=>{var e;h(!0),b(null);try{const n={id:t,title:"Sample Offer",description:"This is a sample offer",price:5e3,vendor_id:"sample-vendor",status:"pending",created_at:(new Date).toISOString(),request:{client_id:"sample-client"}};g(n);(null==c?void 0:c.id)===(null==(e=n.request)?void 0:e.client_id)||"admin"===r||b(i?"ليس لديك صلاحية لإدارة هذا العرض":"You do not have permission to manage this offer"),requestAnimationFrame(()=>{var e;null==(e=w.current)||e.scrollTo({top:0,behavior:"auto"})})}catch(hte){o({title:i?"خطأ":"Error",description:i?"خطأ في جلب تفاصيل العرض":"Failed to fetch offer details",variant:"destructive"})}finally{h(!1)}})()},[d,t]);const N=!j&&"pending"===(null==x?void 0:x.client_approval_status)&&!p,_=async(e,t)=>{if(x){f(!0);try{if(!(await l(x.id,e,t)))throw new Error("Failed to update offer status");o({title:i?"نجح":"Success",description:"approved"===e?i?"تم قبول العرض بنجاح":"Offer approved successfully":i?"تم رفض العرض بنجاح":"Offer rejected successfully",variant:"default"}),await(null==s?void 0:s()),u(!1),y("")}catch(r){o({title:i?"خطأ":"Error",description:i?"فشل في تحديث حالة العرض":"Failed to update offer status",variant:"destructive"})}finally{f(!1)}}};return n.jsxs(Sb,{open:d,onOpenChange:u,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[700px] max-h-[90vh] flex flex-col",children:[n.jsx(Mb,{className:"pb-4",children:n.jsx(Ab,{className:"text-xl font-semibold "+(i?"text-right":""),children:(null==x?void 0:x.title)||(i?"تفاصيل العرض":"Offer Details")})}),m?n.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:n.jsx(lb,{text:i?"جارٍ التحميل...":"Loading..."})}):x?n.jsxs("div",{ref:w,className:"flex-1 overflow-y-auto space-y-6 pr-2",children:[n.jsxs("div",{className:"flex items-center justify-between "+(i?"flex-row-reverse":""),children:[n.jsxs(Xf,{variant:(e=>{switch(e){case"approved":return"default";case"rejected":return"destructive";default:return"secondary"}})(x.client_approval_status),className:"flex items-center gap-2",children:[(e=>{switch(e){case"approved":return n.jsx(dm,{className:"h-4 w-4"});case"rejected":return n.jsx(fm,{className:"h-4 w-4"});default:return n.jsx(gm,{className:"h-4 w-4"})}})(x.client_approval_status),"approved"===x.client_approval_status?i?"مقبول":"Approved":"rejected"===x.client_approval_status?i?"مرفوض":"Rejected":i?"قيد الانتظار":"Pending"]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsx("span",{children:new Date(x.created_at).toLocaleDateString()})]})]}),j&&n.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:n.jsx("p",{className:"text-destructive text-sm "+(i?"text-right":""),children:j})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{className:"text-sm font-medium "+(i?"text-right":""),children:i?"الوصف":"Description"}),n.jsx("div",{className:"bg-muted/50 rounded-lg p-4 "+(i?"text-right":""),children:n.jsx("p",{className:"text-sm leading-relaxed",children:x.description})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-background border rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium "+(i?"flex-row-reverse":""),children:[n.jsx(_m,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:i?"السعر":"Price"})]}),n.jsxs("p",{className:"text-2xl font-bold text-primary "+(i?"text-right":""),children:[x.price.toLocaleString()," SAR"]})]}),n.jsxs("div",{className:"bg-background border rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium "+(i?"flex-row-reverse":""),children:[n.jsx(Vh,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:i?"وقت التسليم":"Delivery Time"})]}),n.jsxs("p",{className:"text-2xl font-bold text-primary "+(i?"text-right":""),children:[x.delivery_time||"Not specified"," ",i?"أيام":"days"]})]})]}),x.client_approval_notes&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{className:"text-sm font-medium "+(i?"text-right":""),children:i?"ملاحظات العميل":"Client Notes"}),n.jsx("div",{className:"bg-muted/50 rounded-lg p-4 "+(i?"text-right":""),children:n.jsx("p",{className:"text-sm",children:x.client_approval_notes})})]}),x.client_approval_date&&n.jsxs("div",{className:"text-sm text-muted-foreground "+(i?"text-right":""),children:[n.jsx("span",{className:"font-medium",children:"approved"===x.client_approval_status?i?"تم القبول في:":"Approved on:":i?"تم الرفض في:":"Rejected on:"}),n.jsx("span",{className:"ml-2",children:new Date(x.client_approval_date).toLocaleString()})]})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(fm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:i?"العرض غير موجود":"Offer not found"})]})}),x&&n.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4 "+(i?"text-right":""),children:[N&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(j_,{className:"text-sm font-medium "+(i?"text-right":""),children:i?"ملاحظات الرفض (اختيارية)":"Rejection Notes (Optional)"}),n.jsx(bC,{placeholder:i?"أدخل سبب الرفض أو ملاحظات أخرى...":"Enter reason for rejection or other notes...",value:v,onChange:e=>y(e.target.value),className:"min-h-[80px] "+(i?"text-right":""),disabled:p})]}),n.jsxs("div",{className:"flex gap-3 "+(i?"flex-row-reverse":""),children:[n.jsx(ku,{variant:"outline",className:"flex-1",onClick:()=>u(!1),disabled:p,children:i?"إغلاق":"Close"}),N&&n.jsxs(n.Fragment,{children:[n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{variant:"destructive",className:"flex-1",disabled:p,children:p?n.jsx(lb,{}):i?"رفض العرض":"Reject Offer"})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:i?"رفض العرض":"Reject Offer"}),n.jsx(lE,{children:i?"هل أنت متأكد من رفض هذا العرض؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to reject this offer? This action cannot be undone."})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:i?"إلغاء":"Cancel"}),n.jsx(cE,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>_("rejected",v||void 0),children:i?"رفض":"Reject"})]})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{className:"flex-1",disabled:p,children:p?n.jsx(lb,{}):i?"قبول العرض":"Accept Offer"})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:i?"قبول العرض":"Accept Offer"}),n.jsx(lE,{children:i?"هل أنت متأكد من قبول هذا العرض؟ سيتم إعلام المورد بقبول العرض.":"Are you sure you want to accept this offer? The supplier will be notified of the acceptance."})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:i?"إلغاء":"Cancel"}),n.jsx(cE,{onClick:()=>_("approved"),children:i?"قبول":"Accept"})]})]})]})]})]})]})]})]})},hE=({children:e,offers:t,onOfferAction:r})=>{const[s,a]=Ne.useState(!1),[i,o]=Ne.useState(null),[l,c]=Ne.useState(""),[d,u]=Ne.useState("approve"),{language:m}=cr(),{updateOfferStatus:h}=uE(),p="ar"===m,f=t.reduce((e,t)=>e+t.price,0)/t.length,x=Math.min(...t.map(e=>e.price)),g=Math.max(...t.map(e=>e.price)),v=t.reduce((e,t)=>e+t.delivery_time_days,0)/t.length,y=(e,t)=>{o(e),u(t),c("")};return n.jsxs(n.Fragment,{children:[n.jsxs(Sb,{open:s,onOpenChange:a,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsxs(Ab,{className:p?"text-right":"",children:[p?"مقارنة العروض":"Compare Offers"," (",t.length,")"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx(Eu,{children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:p?"متوسط السعر":"Average Price"}),n.jsxs("p",{className:"text-2xl font-bold",children:[f.toLocaleString()," SAR"]})]}),n.jsx(_m,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:p?"نطاق السعر":"Price Range"}),n.jsxs("p",{className:"text-lg font-semibold",children:[x.toLocaleString()," - ",g.toLocaleString()," SAR"]})]}),n.jsx($h,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:p?"متوسط التسليم":"Avg. Delivery"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(v)," ",p?"أيام":"days"]})]}),n.jsx(gm,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{var r,s;const a=(i=e.price)===x?{icon:Bh,color:"text-green-600",label:"Best Price"}:i===g?{icon:$h,color:"text-red-600",label:"Highest Price"}:{icon:_m,color:"text-yellow-600",label:"Average Price"};var i;const o=(l=e.delivery_time_days)===Math.min(...t.map(e=>e.delivery_time_days))?{color:"text-green-600",label:"Fastest"}:l>v?{color:"text-red-600",label:"Slower"}:{color:"text-yellow-600",label:"Average"};var l;return n.jsxs(Eu,{className:"relative",children:[n.jsxs(Ou,{children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(Mu,{className:"text-lg",children:e.title}),n.jsx(Xf,{variant:"approved"===e.client_approval_status?"default":"rejected"===e.client_approval_status?"destructive":"secondary",children:e.client_approval_status})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(r=e.vendor)?void 0:r.company_name)||(null==(s=e.vendor)?void 0:s.full_name)})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(a.icon,{className:`h-5 w-5 ${a.color}`}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-bold text-lg",children:[e.price.toLocaleString()," ",e.currency]}),n.jsx("p",{className:`text-xs ${a.color}`,children:a.label})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gm,{className:`h-5 w-5 ${o.color}`}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:[e.delivery_time_days," ",p?"أيام":"days"]}),n.jsx("p",{className:`text-xs ${o.color}`,children:o.label})]})]}),n.jsx("div",{children:n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:e.description})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Th,{className:"h-4 w-4 text-yellow-500"}),n.jsxs("span",{className:"text-sm font-medium",children:["Value Score: ",Math.round((g-e.price)/(g-x)*50+(v-e.delivery_time_days)/v*50),"%"]})]}),"pending"===e.client_approval_status&&n.jsxs("div",{className:"flex gap-2 "+(p?"flex-row-reverse":""),children:[n.jsxs(ku,{onClick:()=>y(e.id,"approve"),className:"flex-1",size:"sm",children:[n.jsx(dm,{className:"h-4 w-4 mr-2"}),p?"قبول":"Accept"]}),n.jsxs(ku,{onClick:()=>y(e.id,"reject"),variant:"destructive",className:"flex-1",size:"sm",children:[n.jsx(fm,{className:"h-4 w-4 mr-2"}),p?"رفض":"Reject"]})]})]})]},e.id)})})]})]}),n.jsx(eE,{open:!!i,onOpenChange:()=>o(null),children:n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:"approve"===d?p?"تأكيد قبول العرض":"Confirm Offer Acceptance":p?"تأكيد رفض العرض":"Confirm Offer Rejection"}),n.jsx(lE,{children:"approve"===d?p?"سيتم إنشاء طلب جديد عند قبول هذا العرض.":"A new order will be created when you accept this offer.":p?"هل أنت متأكد من رفض هذا العرض؟":"Are you sure you want to reject this offer?"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"notes",children:p?"ملاحظات (اختيارية)":"Notes (Optional)"}),n.jsx(bC,{id:"notes",value:l,onChange:e=>c(e.target.value),placeholder:p?"أضف ملاحظات حول قرارك...":"Add notes about your decision...",className:"min-h-20"})]})}),n.jsxs(iE,{children:[n.jsx(dE,{children:p?"إلغاء":"Cancel"}),n.jsx(cE,{onClick:()=>i&&(async(e,t)=>{try{r?await r(e,t,l):await h(e,"approve"===t?"approved":"rejected",l),a(!1),c(""),o(null)}catch(n){}})(i,d),className:"reject"===d?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:"approve"===d?p?"قبول العرض":"Accept Offer":p?"رفض العرض":"Reject Offer"})]})]})})]})};var pE="Checkbox",[fE,xE]=o(pE),[gE,vE]=fE(pE),yE=Ne.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:i,defaultChecked:o,required:c,disabled:u,value:m="on",onCheckedChange:p,form:f,...x}=e,[g,v]=Ne.useState(null),y=l(t,e=>v(e)),j=Ne.useRef(!1),b=!g||(f||!!g.closest("form")),[w=!1,N]=d({prop:i,defaultProp:o,onChange:p}),_=Ne.useRef(w);return Ne.useEffect(()=>{const e=null==g?void 0:g.form;if(e){const t=()=>N(_.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,N]),n.jsxs(gE,{scope:r,state:w,disabled:u,children:[n.jsx(a.button,{type:"button",role:"checkbox","aria-checked":NE(w)?"mixed":w,"aria-required":c,"data-state":_E(w),"data-disabled":u?"":void 0,disabled:u,value:m,...x,ref:y,onKeyDown:h(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:h(e.onClick,e=>{N(e=>!!NE(e)||!e),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),b&&n.jsx(wE,{control:g,bubbles:!j.current,name:s,value:m,checked:w,required:c,disabled:u,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!NE(o)&&o})]})});yE.displayName=pE;var jE="CheckboxIndicator",bE=Ne.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...i}=e,o=vE(jE,r);return n.jsx(u,{present:s||NE(o.state)||!0===o.state,children:n.jsx(a.span,{"data-state":_E(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});bE.displayName=jE;var wE=e=>{const{control:t,checked:r,bubbles:s=!0,defaultChecked:a,...i}=e,o=Ne.useRef(null),l=YS(r),c=be(t);Ne.useEffect(()=>{const e=o.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&n){const t=new Event("click",{bubbles:s});e.indeterminate=NE(r),n.call(e,!NE(r)&&r),e.dispatchEvent(t)}},[l,r,s]);const d=Ne.useRef(!NE(r)&&r);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function NE(e){return"indeterminate"===e}function _E(e){return NE(e)?"indeterminate":e?"checked":"unchecked"}var SE=yE,kE=bE;const CE=Ne.forwardRef(({className:e,...t},r)=>n.jsx(SE,{ref:r,className:_u("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(kE,{className:_u("flex items-center justify-center text-current"),children:n.jsx(sm,{className:"h-4 w-4"})})}));CE.displayName=SE.displayName;const EE=({children:e,requestId:t,requestTitle:r})=>{const[s,a]=Ne.useState(!1),[i,o]=Ne.useState(!1),[l,c]=Ne.useState([]),[d,u]=Ne.useState(null),[m,h]=Ne.useState([]),{userProfile:p}=br(),{language:f}=cr(),{toast:x}=fp(),{fetchMultipleProfiles:g,getProfile:v}=(()=>{const[e,t]=Ne.useState({}),[r,n]=Ne.useState(!1);return{profiles:e,loading:r,fetchUserProfile:async r=>{if(e[r])return e[r];try{n(!0);const{data:e,error:s}=await mr.from("user_profiles").select("*").eq("id",r).single();if(s)return null;if(e){const n={id:e.id,user_id:e.user_id,email:e.email,role:e.role,full_name:e.full_name||void 0,company_name:e.company_name||void 0,avatar_url:e.avatar_url||void 0,status:e.status,phone:e.phone||void 0,address:e.address||void 0,bio:e.bio||void 0,portfolio_url:e.portfolio_url||void 0,verification_documents:e.verification_documents,categories:e.categories,subscription_plan:e.subscription_plan,subscription_status:e.subscription_status,subscription_expires_at:e.subscription_expires_at||void 0,created_at:e.created_at,updated_at:e.updated_at};return t(e=>({...e,[r]:n})),n}}catch(s){}finally{n(!1)}return null},fetchMultipleProfiles:async r=>{const s=r.filter(t=>!e[t]);if(0!==s.length)try{n(!0);const{data:e,error:r}=await mr.from("user_profiles").select("*").in("id",s);if(r)return;if(e){const r={};e.forEach(e=>{r[e.id]={id:e.id,user_id:e.user_id,email:e.email,role:e.role,full_name:e.full_name||void 0,company_name:e.company_name||void 0,avatar_url:e.avatar_url||void 0,status:e.status,phone:e.phone||void 0,address:e.address||void 0,bio:e.bio||void 0,portfolio_url:e.portfolio_url||void 0,verification_documents:e.verification_documents,categories:e.categories,subscription_plan:e.subscription_plan,subscription_status:e.subscription_status,subscription_expires_at:e.subscription_expires_at||void 0,created_at:e.created_at,updated_at:e.updated_at}}),t(e=>({...e,...r}))}}catch(a){}finally{n(!1)}},getProfile:t=>e[t]||null,clearProfiles:()=>{t({})}}})(),y="ar"===f,{updateOfferStatus:j}=uE(t),b=async()=>{o(!0);const e={client_id:"sample-client",title:"Sample Request",description:"This is a sample request",category:"construction"},r=[{id:"1",request_id:t,vendor_id:"vendor1",title:"Sample Offer 1",description:"First offer",price:5e3,currency:"SAR",delivery_time_days:30,status:"pending",admin_approval_status:"approved",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),client_approval_status:"pending",user_profiles:{full_name:"John Vendor",company_name:"Vendor Co",email:"vendor@example.com"},request:e},{id:"2",request_id:t,vendor_id:"vendor2",title:"Sample Offer 2",description:"Second offer",price:4500,currency:"SAR",delivery_time_days:25,status:"pending",admin_approval_status:"approved",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),client_approval_status:"pending",user_profiles:{full_name:"Jane Vendor",company_name:"Vendor LLC",email:"jane@example.com"},request:e}];u(e.client_id),c(r),o(!1)};Ne.useEffect(()=>{s&&b()},[s,t]),Ne.useEffect(()=>{if(!s)return;const e=mr.channel("request_offers_changes").on("postgres_changes",{event:"*",schema:"public",table:"offers",filter:`request_id=eq.${t}`},e=>{b()}).subscribe();return()=>{mr.removeChannel(e)}},[s,t]);const w=async(e,t)=>{await j(e,"approved",t)?(x({title:y?"تم القبول":"Approved",description:y?"تم قبول العرض وإنشاء طلب جديد.":"Offer approved and new order created."}),h(t=>t.filter(t=>t!==e)),await b()):x({title:y?"خطأ":"Error",description:y?"تعذر قبول العرض. تحقق من الصلاحيات.":"Failed to approve offer. Check permissions.",variant:"destructive"})},N=async(e,t)=>{await j(e,"rejected",t)?(x({title:y?"تم الرفض":"Rejected",description:y?"تم رفض العرض.":"Offer rejected."}),h(t=>t.filter(t=>t!==e)),await b()):x({title:y?"خطأ":"Error",description:y?"تعذر رفض العرض. تحقق من الصلاحيات.":"Failed to reject offer. Check permissions.",variant:"destructive"})},_="admin"===(null==p?void 0:p.role),S=!!(null==p?void 0:p.id)&&!!d&&p.id===d,k=_||S,C=k?_?"admin":"client":"vendor",E=()=>{const e=l.filter(e=>"pending"===e.client_approval_status);m.length===e.length?h([]):h(e.map(e=>e.id))},O=l.filter(e=>"pending"===e.client_approval_status),M=l.filter(e=>m.includes(e.id)).map(e=>({id:e.id,title:e.title,description:e.description,price:e.price,currency:e.currency,delivery_time:e.delivery_time||e.delivery_time_days,delivery_time_days:e.delivery_time_days,status:e.status,client_approval_status:e.client_approval_status,admin_approval_status:e.admin_approval_status,client_approval_notes:e.client_approval_notes,client_approval_date:e.client_approval_date,created_at:e.created_at,updated_at:e.updated_at,request_id:e.request_id,vendor_id:e.vendor_id,requests:e.request?{title:e.request.title,description:e.request.description||"",client_id:e.request.client_id,category:e.request.category||"",location:void 0}:void 0,user_profiles:e.vendor}));return n.jsxs(Sb,{open:s,onOpenChange:a,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[n.jsx(Mb,{className:"pb-4",children:n.jsxs("div",{className:"flex justify-between items-center "+(y?"flex-row-reverse":""),children:[n.jsxs(Ab,{className:y?"text-right":"",children:[y?"العروض للطلب":"Offers for Request",r?`: ${r}`:""]}),n.jsxs("div",{className:"flex gap-2 "+(y?"flex-row-reverse":""),children:[k&&O.length>1&&n.jsxs(ku,{variant:"outline",size:"sm",onClick:E,className:(y?"flex-row-reverse":"")+" gap-2",children:[n.jsx(CE,{checked:m.length===O.length,onCheckedChange:E}),m.length===O.length?y?"إلغاء الكل":"Deselect All":y?"تحديد الكل":"Select All"]}),m.length>1&&k&&n.jsx(hE,{offers:M,onOfferAction:async(e,t,r)=>{"approve"===t?await w(e,r||""):await N(e,r||"")},children:n.jsxs(ku,{className:(y?"flex-row-reverse":"")+" gap-2",children:[n.jsx(Ju,{className:"h-4 w-4"}),y?`مقارنة (${m.length})`:`Compare (${m.length})`]})})]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:i?n.jsx("div",{className:"py-10 flex items-center justify-center",children:n.jsx(lb,{text:y?"جارٍ التحميل...":"Loading..."})}):n.jsx("div",{className:"space-y-4",children:0===l.length?n.jsx(Eu,{children:n.jsx(Au,{className:"py-10 text-center text-muted-foreground",children:y?"لا توجد عروض بعد.":"No offers yet."})}):l.map(e=>{const t=v(e.vendor_id)||e.vendor,r=(null==t?void 0:t.company_name)||(null==t?void 0:t.full_name)||(null==t?void 0:t.email)||"Supplier";return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-3 "+(y?"flex-row-reverse":""),children:[k&&"pending"===e.client_approval_status&&n.jsx(CE,{checked:m.includes(e.id),onCheckedChange:t=>{return r=e.id,void h(t?e=>[...e,r]:e=>e.filter(e=>e!==r));var r},className:"mt-4"}),n.jsx("div",{className:"flex-1",children:n.jsx(NC,{offer:e,onApprove:w,onReject:N,userRole:C})})]}),n.jsxs("div",{className:`flex gap-2 ${y?"flex-row-reverse":""} ml-8`,children:[n.jsx(CC,{recipientId:e.vendor_id,recipientName:r,children:n.jsx(ku,{variant:"outline",size:"sm",children:y?"مراسلة المورّد":"Message Supplier"})}),n.jsx(mE,{offerId:e.id,userRole:C,onUpdated:b,children:n.jsx(ku,{variant:"outline",size:"sm",children:y?"عرض التفاصيل":"View Details"})}),k&&"pending"===e.client_approval_status&&n.jsxs(n.Fragment,{children:[n.jsxs(ku,{size:"sm",onClick:()=>w(e.id,""),className:(y?"flex-row-reverse":"")+" gap-2",children:[n.jsx(dm,{className:"h-4 w-4"}),y?"قبول سريع":"Quick Accept"]}),n.jsxs(ku,{variant:"destructive",size:"sm",onClick:()=>N(e.id,""),className:(y?"flex-row-reverse":"")+" gap-2",children:[n.jsx(fm,{className:"h-4 w-4"}),y?"رفض سريع":"Quick Reject"]})]})]})]},e.id)})})})]})]})},OE=({children:e,request:t,userRole:r="client"})=>{const{language:s}=cr(),a="ar"===s,[i,o]=Ne.useState(!1),l=(e=>{const t={open:{label:a?"مفتوح":"Open",variant:"default"},pending:{label:a?"في الانتظار":"Pending",variant:"secondary"},in_progress:{label:a?"قيد التنفيذ":"In Progress",variant:"secondary"},completed:{label:a?"مكتمل":"Completed",variant:"outline"},cancelled:{label:a?"ملغي":"Cancelled",variant:"destructive"}};return t[e]||t.open})(t.status);return n.jsxs(Sb,{open:i,onOpenChange:o,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[700px]",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{className:a?"text-right":"text-left",children:t.title}),n.jsx(Tb,{className:a?"text-right":"text-left",children:"vendor"===r?a?"تفاصيل طلب العميل":"Client Request Details":"admin"===r?a?"عرض إداري للطلب":"Administrative Request View":a?"تفاصيل الطلب":"Request Details"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx("span",{className:"font-medium",children:a?"الحالة:":"Status:"}),n.jsx(Xf,{variant:l.variant,children:l.label})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 "+(a?"text-right":"text-left"),children:a?"الوصف":"Description"}),n.jsx("p",{className:"text-muted-foreground "+(a?"text-right":"text-left"),children:t.description})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx(Zu,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("strong",{children:a?"الموعد النهائي:":"Deadline:"})," ",t.deadline?new Date(t.deadline).toLocaleDateString():"Not specified"]})]}),n.jsxs("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx(Jm,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("strong",{children:a?"الموقع:":"Location:"})," ",t.location||"Not specified"]})]}),n.jsxs("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx(_m,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("strong",{children:a?"الميزانية:":"Budget:"})," ",(()=>{if(!t.budget_min&&!t.budget_max)return"Budget not specified";const e=t.currency||"USD";return t.budget_min&&t.budget_max?`${t.budget_min.toLocaleString()} - ${t.budget_max.toLocaleString()} ${e}`:t.budget_min?`From ${t.budget_min.toLocaleString()} ${e}`:t.budget_max?`Up to ${t.budget_max.toLocaleString()} ${e}`:"Budget not specified"})()]})]}),n.jsxs("div",{className:"flex items-center gap-2 "+(a?"flex-row-reverse":""),children:[n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("strong",{children:a?"الأولوية:":"Urgency:"})," ",t.urgency]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 "+(a?"text-right":"text-left"),children:a?"الفئة":"Category"}),n.jsx("p",{className:"text-muted-foreground "+(a?"text-right":"text-left"),children:t.category})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 "+(a?"text-right":"text-left"),children:a?"تاريخ الإنشاء":"Created On"}),n.jsx("p",{className:"text-muted-foreground "+(a?"text-right":"text-left"),children:new Date(t.created_at).toLocaleDateString()})]})]}),n.jsx("div",{className:`flex ${a?"flex-row-reverse":""} gap-2 pt-4`,children:"vendor"===r?n.jsx(wC,{requestId:t.id,children:n.jsx(ku,{className:"flex-1 bg-gradient-to-r from-primary to-accent",children:a?"إرسال عرض":"Submit Offer"})}):"client"===r?n.jsx(EE,{requestId:t.id,children:n.jsxs(ku,{className:"flex-1 bg-gradient-to-r from-primary to-accent",children:[n.jsx(Mm,{className:"h-4 w-4 mr-2"}),a?"عرض العروض":"View Offers"]})}):n.jsx(ku,{variant:"outline",className:"flex-1",children:a?"إجراءات إدارية":"Admin Actions"})})]})]})},ME=({title:e,value:t,icon:r,trend:s,variant:a="default"})=>{const{isRTL:i}=cr();return n.jsxs(Eu,{className:_u("relative overflow-hidden transition-all hover:shadow-md",{default:"border-border",success:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",warning:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",destructive:"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/10"}[a]),children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium text-muted-foreground",children:e}),n.jsx(r,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Au,{children:n.jsxs("div",{className:_u("space-y-1",i&&"text-right"),children:[n.jsx("div",{className:"text-2xl font-bold",children:t}),s&&n.jsx("div",{className:_u("flex items-center text-xs",i?"flex-row-reverse":"",s.isPositive?"text-green-600":"text-red-600"),children:n.jsxs("span",{className:_u("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",s.isPositive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:[s.isPositive?"+":"",s.value,"% ",s.label]})})]})})]})},PE=()=>{const{t:e,isRTL:t}=cr(),{matchedRequests:r,loading:s}=vC(),{categories:a,loading:i}=gC(),[o,l]=Ne.useState(""),[c,d]=Ne.useState("all"),u=Ne.useMemo(()=>{if(!r||0===r.length)return{total:0,urgent:0,highBudget:0,thisWeek:0};const e=new Date((new Date).getTime()-6048e5);return{total:r.length,urgent:r.filter(e=>"urgent"===e.urgency||"high"===e.urgency).length,highBudget:r.filter(e=>e.budget_max&&e.budget_max>5e4).length,thisWeek:r.filter(t=>new Date(t.created_at)>e).length}},[r]);if(s||i)return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"})]})}),n.jsxs(Au,{children:[n.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})]})]},t))})]});const m=r.filter(e=>{const t=o.toLowerCase(),r=""===o||e.title.toLowerCase().includes(t)||e.category.toLowerCase().includes(t),n="all"===c||e.category===c;return r&&n}),h=t=>t.budget_min||t.budget_max?t.budget_min&&t.budget_max?`${t.budget_min.toLocaleString()} - ${t.budget_max.toLocaleString()}`:e("vendor.browseRequests.budgetNegotiable"):e("vendor.browseRequests.budgetNotSpecified"),p=e=>{switch(e.toLowerCase()){case"urgent":case"high":return"destructive";case"medium":default:return"default";case"low":return"secondary"}};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:_u("space-y-2",t&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:e("vendor.browseRequests.title")}),n.jsx("p",{className:"text-muted-foreground",children:e("vendor.browseRequests.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(ME,{title:e("vendor.browseRequests.totalRequests"),value:u.total,icon:Tm,trend:{value:15,label:e("common.vsLastMonth"),isPositive:!0}}),n.jsx(ME,{title:e("vendor.browseRequests.urgentHighPriority"),value:u.urgent,icon:cm,variant:"warning"}),n.jsx(ME,{title:e("vendor.browseRequests.highBudget"),value:u.highBudget,icon:_m,variant:"success"}),n.jsx(ME,{title:e("vendor.browseRequests.newThisWeek"),value:u.thisWeek,icon:$h,trend:{value:8,label:e("common.thisWeek"),isPositive:!0}})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("vendor.browseRequests.searchAndFilter")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("vendor.browseRequests.searchPlaceholder"),className:_u(t?"pr-10 text-right":"pl-10"),value:o,onChange:e=>l(e.target.value),dir:t?"rtl":"ltr"})]}),n.jsxs(lC,{value:c,onValueChange:d,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("vendor.browseRequests.filterByCategory")})}),n.jsxs(hC,{align:t?"end":"start",children:[n.jsx(pC,{value:"all",children:e("vendor.browseRequests.allCategories")}),(()=>{const e=[];return a.forEach(t=>{e.push(t),t.children&&t.children.length>0&&e.push(...t.children)}),e})().map(e=>n.jsx(pC,{value:e.slug,children:t?e.name_ar:e.name_en},e.id))]})]})]})]}),0===m.length?n.jsx(jC,{icon:jh,title:e("vendor.browseRequests.noResults"),description:e("vendor.browseRequests.noResultsDesc")}):n.jsx("div",{className:"space-y-4",children:m.map(r=>n.jsx(Eu,{className:"hover:shadow-lg transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",t&&"flex-row-reverse"),children:[n.jsx("h3",{className:_u("text-lg font-semibold",t&&"text-right"),children:r.title}),n.jsx(Xf,{variant:p(r.urgency),children:r.urgency})]}),n.jsx("p",{className:_u("text-muted-foreground mb-2",t&&"text-right"),children:r.description}),n.jsxs("div",{className:_u("flex items-center gap-4 mb-2",t&&"flex-row-reverse"),children:[n.jsx("span",{className:"text-sm text-primary font-medium",children:r.category}),r.location&&n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Jm,{className:"h-3 w-3"}),n.jsx("span",{children:r.location})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.browseRequests.budget")}),n.jsxs("p",{className:"font-semibold text-sm",children:[h(r)," ",r.currency||"USD"]})]})]}),r.deadline&&n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4 text-blue-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.browseRequests.deadline")}),n.jsx("p",{className:"font-semibold text-sm",children:new Date(r.deadline).toLocaleDateString()})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4 text-orange-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.browseRequests.posted")}),n.jsx("p",{className:"font-semibold text-sm",children:new Date(r.created_at).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsx(wC,{requestId:r.id,children:n.jsxs(ku,{className:"flex-1",children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.browseRequests.submitOffer")]})}),n.jsx(OE,{request:{...r,status:"new",user_id:r.client},userRole:"vendor",children:n.jsxs(ku,{variant:"outline",children:[n.jsx(Mm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.browseRequests.viewDetails")]})})]})]})})},r.id))})]})},AE=()=>n.jsx(uS,{children:n.jsx(PE,{})}),TE=({title:e,value:t,icon:r,trend:s,variant:a="default"})=>{const{isRTL:i}=cr();return n.jsxs(Eu,{className:_u("relative overflow-hidden transition-all hover:shadow-md",{default:"border-border",success:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",warning:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",destructive:"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/10"}[a]),children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium text-muted-foreground",children:e}),n.jsx(r,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Au,{children:n.jsxs("div",{className:_u("space-y-1",i&&"text-right"),children:[n.jsx("div",{className:"text-2xl font-bold",children:t}),s&&n.jsx("div",{className:_u("flex items-center text-xs",i?"flex-row-reverse":"",s.isPositive?"text-green-600":"text-red-600"),children:n.jsxs("span",{className:_u("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",s.isPositive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:[s.isPositive?"+":"",s.value,"% ",s.label]})})]})})]})},DE=()=>{const{t:e,isRTL:t}=cr(),{toast:r}=fp(),[s,a]=Ne.useState(""),[i,o]=Ne.useState("all"),[l,c]=Ne.useState([]),{offers:d,loading:u,error:m,updateOfferStatus:h,refetch:p}=uE(),f=Ne.useMemo(()=>d&&0!==d.length?{total:d.length,pending:d.filter(e=>"pending"===e.client_approval_status).length,approved:d.filter(e=>"approved"===e.client_approval_status).length,rejected:d.filter(e=>"rejected"===e.client_approval_status).length}:{total:0,pending:0,approved:0,rejected:0},[d]),x=e=>{switch(e){case"approved":return"default";case"rejected":return"destructive";case"pending":return"warning";default:return"secondary"}},g=Ne.useMemo(()=>d?d.filter(e=>{var t,r;const n=s.toLowerCase(),a=""===s||(null==(t=e.title)?void 0:t.toLowerCase().includes(n))||(null==(r=e.description)?void 0:r.toLowerCase().includes(n)),o="all"===i||e.client_approval_status===i;return a&&o}):[],[d,s,i]),v=async t=>{if(0!==l.length)try{r({title:e("vendor.offers.bulkActionSuccess"),description:e("vendor.offers.bulkActionDesc",{count:l.length})}),c([]),p()}catch(n){r({title:e("vendor.offers.bulkActionError"),description:e("vendor.offers.bulkActionErrorDesc"),variant:"destructive"})}else r({title:e("vendor.offers.noOffersSelected"),description:e("vendor.offers.selectOffersFirst"),variant:"destructive"})};return u?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"})]})}),n.jsxs(Au,{children:[n.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})]})]},t))})]}):m?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(Eu,{className:"w-full max-w-md",children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx(cm,{className:"h-12 w-12 text-destructive mx-auto"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:e("vendor.offers.errorLoading")}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m})]}),n.jsx(ku,{onClick:()=>p(),variant:"outline",size:"sm",children:e("common.tryAgain")})]})})})}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:_u("space-y-2",t&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:e("vendor.offers.title")}),n.jsx("p",{className:"text-muted-foreground",children:e("vendor.offers.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(TE,{title:e("vendor.offers.totalOffers"),value:f.total,icon:dh,trend:{value:15,label:e("common.vsLastMonth"),isPositive:!0}}),n.jsx(TE,{title:e("vendor.offers.pendingOffers"),value:f.pending,icon:gm,variant:"warning"}),n.jsx(TE,{title:e("vendor.offers.approvedOffers"),value:f.approved,icon:dm,variant:"success"}),n.jsx(TE,{title:e("vendor.offers.rejectedOffers"),value:f.rejected,icon:fm,variant:"destructive"})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("vendor.offers.searchAndFilter")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("vendor.offers.searchPlaceholder"),className:_u(t?"pr-10 text-right":"pl-10"),value:s,onChange:e=>a(e.target.value),dir:t?"rtl":"ltr"})]}),n.jsxs("div",{className:_u("flex gap-4",t&&"flex-row-reverse"),children:[n.jsxs(lC,{value:i,onValueChange:o,children:[n.jsx(dC,{className:"w-48",children:n.jsx(cC,{placeholder:e("vendor.offers.filterByStatus")})}),n.jsxs(hC,{align:t?"end":"start",children:[n.jsx(pC,{value:"all",children:e("vendor.offers.allStatuses")}),n.jsx(pC,{value:"pending",children:e("vendor.offers.status.pending")}),n.jsx(pC,{value:"approved",children:e("vendor.offers.status.approved")}),n.jsx(pC,{value:"rejected",children:e("vendor.offers.status.rejected")})]})]}),n.jsxs(ku,{onClick:()=>v(),variant:"outline",disabled:0===l.length,children:[n.jsx(fm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.offers.bulkDelete")]})]})]})]}),0===g.length?n.jsx(jC,{icon:dh,title:e("vendor.offers.noOffers"),description:e("vendor.offers.noOffersDesc")}):n.jsxs("div",{className:"space-y-4",children:[l.length>0&&n.jsx(Eu,{className:"border-primary/20 bg-primary/5",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:_u("flex items-center justify-between",t&&"flex-row-reverse"),children:[n.jsx("span",{className:"text-sm font-medium",children:e("vendor.offers.selectedOffers",{count:l.length})}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>v(),children:[n.jsx(dm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.offers.bulkApprove")]}),n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>c([]),children:e("vendor.offers.clearSelection")})]})]})})}),g.map(r=>{return n.jsx(Eu,{className:"hover:shadow-lg transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",t&&"flex-row-reverse"),children:[n.jsx(CE,{checked:l.includes(r.id),onCheckedChange:()=>{return e=r.id,void c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e}}),n.jsx("h3",{className:_u("text-lg font-semibold",t&&"text-right"),children:r.title})]}),n.jsx(Xf,{variant:x(r.client_approval_status),children:(s=r.client_approval_status,e(`vendor.offers.status.${s}`)||s)})]}),n.jsx("p",{className:_u("text-muted-foreground mb-2",t&&"text-right"),children:r.description}),n.jsxs("div",{className:_u("flex items-center gap-4 mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-3 w-3"}),n.jsx("span",{children:r.price?`$${r.price.toLocaleString()}`:e("vendor.offers.priceNegotiable")})]}),n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-3 w-3"}),n.jsx("span",{children:bj(new Date(r.created_at),"MMM dd, yyyy")})]}),n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Xh,{className:"h-3 w-3"}),n.jsx("span",{children:r.client_name||e("vendor.offers.unknownClient")})]})]})]})}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsx(mE,{offer:r,children:n.jsxs(ku,{variant:"outline",className:"flex-1",children:[n.jsx(Mm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.offers.viewDetails")]})}),n.jsxs(ku,{variant:"outline",children:[n.jsx(nh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.offers.contactClient")]})]})]})})},r.id);var s})]})]})},RE=()=>n.jsx(uS,{children:n.jsx(DE,{})}),LE=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!1),[s,a]=Ne.useState(null),{user:i,userProfile:o}=br(),l=async()=>{if(i){n(!0),a(null);try{let e=mr.from("orders").select("\n          *,\n          client:user_profiles!orders_client_id_fkey(full_name, company_name),\n          vendor:user_profiles!orders_vendor_id_fkey(full_name, company_name),\n          request:requests(title, category)\n        ").order("created_at",{ascending:!1});"client"===(null==o?void 0:o.role)?e=e.eq("client_id",i.id):"vendor"===(null==o?void 0:o.role)&&(e=e.eq("vendor_id",i.id));const{data:r,error:n}=await e;if(n)throw n;const s=(r||[]).map(e=>{var t,r,n,s;return{id:e.id,title:e.title||(null==(t=e.request)?void 0:t.title)||"Order",client:(null==(r=e.client)?void 0:r.company_name)||(null==(n=e.client)?void 0:n.full_name)||"Unknown Client",amount:Number(e.amount)||0,currency:"SAR",status:["pending","confirmed","in_progress","completed","cancelled"].includes(e.status)?e.status:"pending",date:new Date(e.created_at).toISOString().split("T")[0],description:e.description||e.notes||"",category:(null==(s=e.request)?void 0:s.category)||"General",client_id:e.client_id,vendor_id:e.vendor_id,request_id:e.request_id,delivery_date:e.delivery_date,completion_date:e.completion_date,notes:e.notes}});t(s)}catch(e){a(e.message)}finally{n(!1)}}};return Ne.useEffect(()=>{l()},[i,o]),{orders:e,loading:r,error:s,fetchOrders:l,updateOrderStatus:async(e,t)=>{try{const{error:r}=await mr.from("orders").update({status:t,updated_at:(new Date).toISOString(),..."completed"===t&&{completion_date:(new Date).toISOString()}}).eq("id",e);if(r)throw r;return await l(),{success:!0}}catch(r){return{success:!1,error:r.message}}},generateInvoice:async e=>{try{const{error:t}=await mr.from("financial_transactions").insert({user_id:null==i?void 0:i.id,order_id:e,amount:0,type:"invoice_generated",status:"pending",description:"Invoice generated for order"});if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:t.message}}}}},qE=({title:e,value:t,icon:r,trend:s,variant:a="default"})=>{const{isRTL:i}=cr();return n.jsxs(Eu,{className:_u("relative overflow-hidden transition-all hover:shadow-md",{default:"border-border",success:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",warning:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",destructive:"border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/10"}[a]),children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium text-muted-foreground",children:e}),n.jsx(r,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Au,{children:n.jsxs("div",{className:_u("space-y-1",i&&"text-right"),children:[n.jsx("div",{className:"text-2xl font-bold",children:t}),s&&n.jsx("div",{className:_u("flex items-center text-xs",i?"flex-row-reverse":"",s.isPositive?"text-green-600":"text-red-600"),children:n.jsxs("span",{className:_u("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",s.isPositive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:[s.isPositive?"+":"",s.value,"% ",s.label]})})]})})]})},IE=()=>{const{t:e,isRTL:t}=cr(),{orders:r,loading:s}=LE(),a=Ne.useMemo(()=>r&&0!==r.length?{total:r.length,pending:r.filter(e=>"pending"===e.status).length,confirmed:r.filter(e=>"confirmed"===e.status).length,completed:r.filter(e=>"completed"===e.status).length}:{total:0,pending:0,confirmed:0,completed:0},[r]),i=e=>{switch(e){case"pending":case"in_progress":default:return"warning";case"confirmed":case"completed":return"default";case"cancelled":return"destructive"}};return s?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"})]})}),n.jsxs(Au,{children:[n.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})]})]},t))})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:_u("space-y-2",t&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:e("vendor.orders.title")}),n.jsx("p",{className:"text-muted-foreground",children:e("vendor.orders.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(qE,{title:e("vendor.orders.totalOrders"),value:a.total,icon:kh,trend:{value:12,label:e("common.vsLastMonth"),isPositive:!0}}),n.jsx(qE,{title:e("vendor.orders.pendingOrders"),value:a.pending,icon:gm,variant:"warning"}),n.jsx(qE,{title:e("vendor.orders.confirmedOrders"),value:a.confirmed,icon:dm,variant:"success"}),n.jsx(qE,{title:e("vendor.orders.completedOrders"),value:a.completed,icon:dh,variant:"success"})]}),0===r.length?n.jsx(jC,{icon:kh,title:e("vendor.orders.noOrders"),description:e("vendor.orders.noOrdersDesc")}):n.jsx("div",{className:"space-y-4",children:r.map(r=>{const s=(e=>{switch(e){case"pending":default:return gm;case"confirmed":case"completed":return dm;case"cancelled":return cm;case"in_progress":return dh}})(r.status);return n.jsx(Eu,{className:"hover:shadow-lg transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",t&&"flex-row-reverse"),children:[n.jsx(s,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("h3",{className:_u("text-lg font-semibold",t&&"text-right"),children:r.title||e("vendor.orders.orderTitle",{id:r.id})})]}),n.jsx(Xf,{variant:i(r.status),children:(a=r.status,e(`vendor.orders.status.${a}`)||a)})]}),n.jsx("p",{className:_u("text-muted-foreground mb-2",t&&"text-right"),children:r.description||e("vendor.orders.orderDescription")}),n.jsxs("div",{className:_u("flex items-center gap-4 mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-3 w-3"}),n.jsx("span",{children:r.total_amount?`$${r.total_amount.toLocaleString()}`:e("vendor.orders.amountTBD")})]}),n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-3 w-3"}),n.jsx("span",{children:bj(new Date(r.created_at),"MMM dd, yyyy")})]}),n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Xh,{className:"h-3 w-3"}),n.jsx("span",{children:r.client_name||e("vendor.orders.unknownClient")})]}),r.delivery_address&&n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Jm,{className:"h-3 w-3"}),n.jsx("span",{children:r.delivery_address})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.orders.totalAmount")}),n.jsx("p",{className:"font-semibold text-sm",children:r.total_amount?`$${r.total_amount.toLocaleString()}`:e("vendor.orders.amountTBD")})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4 text-blue-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.orders.orderDate")}),n.jsx("p",{className:"font-semibold text-sm",children:bj(new Date(r.created_at),"MMM dd, yyyy")})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4 text-orange-500"}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.orders.deliveryDate")}),n.jsx("p",{className:"font-semibold text-sm",children:r.delivery_date?bj(new Date(r.delivery_date),"MMM dd, yyyy"):e("vendor.orders.dateTBD")})]})]})]}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",className:"flex-1",children:[n.jsx(Mm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.orders.viewDetails")]}),n.jsxs(ku,{variant:"outline",children:[n.jsx(Tm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("vendor.orders.viewInvoice")]})]})]})})},r.id);var a})})]})},FE=()=>n.jsx(uS,{children:n.jsx(IE,{})}),zE=async e=>{try{const t=e.split("/"),r=t.pop(),n=t.join("/"),{data:s,error:a}=await mr.storage.from("chat-files").list(n,{search:r});if(a)return{success:!1,error:`Storage error: ${a.message}`};const i=s&&s.length>0;return{success:i,error:i?void 0:`File not found in storage at path: ${n}/${r}`}}catch(t){return{success:!1,error:`Verification failed: ${t.message}`}}},BE=async(e,t=3600)=>{try{let r=e;if(e.startsWith("http")){const t=e.split("/storage/v1/object/public/chat-files/");if(2!==t.length)return await $E(e,!1,"Invalid document URL format"),{success:!1,error:"Invalid document URL format"};r=t[1]}const{data:{user:n}}=await mr.auth.getUser();let s="unknown";if(n){const{data:e}=await mr.from("user_profiles").select("role").eq("user_id",n.id).single();s=(null==e?void 0:e.role)||"unknown"}if(!(await zE(r)).success){const e="admin"===s?`Admin access: Document not found in storage at path: ${r}. File may have been deleted or path is incorrect.`:"Document not found in storage. The file may have been deleted or corrupted.";return await $E(r,!1,e),{success:!1,error:e}}const a="admin"===s?Math.max(t,7200):t,{data:i,error:o}=await mr.storage.from("chat-files").createSignedUrl(r,a);if(o){const e="admin"===s?`Admin access failed: ${o.message}. Check storage policies and file permissions.`:`Failed to generate document access URL: ${o.message}`;return await $E(r,!1,e),{success:!1,error:e}}return await $E(r,!0),{success:!0,signedUrl:i.signedUrl}}catch(r){return await $E(e,!1,r.message),{success:!1,error:r.message}}},$E=async(e,t,r)=>{try{const{data:{user:n}}=await mr.auth.getUser();if(!n)return;const{data:s}=await mr.from("user_profiles").select("role").eq("user_id",n.id).single();await mr.rpc("log_document_access_attempt",{file_path:e,user_role:(null==s?void 0:s.role)||"unknown",success:t,error_message:r||null})}catch(n){}},UE=e=>{if(!e.startsWith("http"))return e;const t=e.split("/storage/v1/object/public/chat-files/");if(2===t.length)return t[1];try{const t=new URL(e).pathname.split("/object/");if(2===t.length)return t[1].replace("chat-files/","")}catch(r){}return e},VE=or("CRDocumentUpload"),WE=({onUploadSuccess:e,isRequired:t=!0,existingDocument:r,disabled:s=!1})=>{const[a,i]=Ne.useState(null),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(!1),{showSuccess:u,showError:m}=dy(),{t:h,isRTL:p}=cr();return n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",p&&"flex-row-reverse"),children:[n.jsx(Tm,{className:"h-5 w-5"}),h("verification.crDocumentTitle"),t&&n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Pu,{className:_u(p&&"text-right"),children:h("verification.crDocumentDescription")})]}),n.jsxs(Au,{className:"space-y-4",children:[r&&n.jsxs(db,{children:[n.jsx(dm,{className:"h-4 w-4"}),n.jsxs(ub,{className:_u("flex items-center justify-between",p&&"flex-row-reverse text-right"),children:[n.jsx("span",{children:h("verification.documentUploaded")}),n.jsxs(ku,{variant:"ghost",size:"sm",onClick:async()=>{if(r){d(!0);try{const e=document.createElement("input");e.type="file",e.accept=".pdf,.jpg,.jpeg,.png",e.onchange=e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&i(r)},e.click()}finally{d(!1)}}},disabled:c,className:_u(p?"mr-2 ml-0":"ml-2 mr-0"),children:[n.jsx(gh,{className:_u("h-4 w-4",p?"ml-1 mr-0":"mr-1 ml-0")}),h("verification.reupload")]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx($j,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(r.type))return void m(h("verification.invalidFileTypePDFJPGPNG"));if(r.size>10485760)return void m(h("verification.maxSize10MB"));i(r)}},disabled:s||o,className:"cursor-pointer",dir:p?"rtl":"ltr"}),a&&n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted rounded-md",p&&"flex-row-reverse"),children:[n.jsx(Tm,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:a.name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(a.size/1024/1024).toFixed(2)," MB)"]})]}),n.jsxs(ku,{onClick:async()=>{if(a){l(!0);try{const{data:{user:t}}=await mr.auth.getUser();if(!t)return void m(h("verification.loginRequired"));VE.debug("Starting document upload process",{userId:t.id});const r=await(async(e,t,r="commercial_registration")=>{try{const n=e.name.split(".").pop(),s=`${t}/${r}/${Date.now()}.${n}`,{data:a,error:i}=await mr.storage.from("chat-files").upload(s,e,{cacheControl:"3600",upsert:!1});return i?{success:!1,error:`Upload failed: ${i.message}`}:(await zE(a.path)).success?{success:!0,filePath:a.path}:(await mr.storage.from("chat-files").remove([a.path]),{success:!1,error:"File upload verification failed"})}catch(n){return{success:!1,error:n.message||"Unknown upload error"}}})(a,t.id,"cr-documents");if(!r.success)throw new Error(r.error||"Upload failed");VE.info("Document upload successful",{filePath:r.filePath});const{error:n}=await mr.from("verification_requests").insert({user_id:t.id,document_type:"commercial_registration",document_url:r.filePath,status:"pending"});if(n)throw await mr.storage.from("chat-files").remove([r.filePath]),new Error(`Failed to save verification request: ${n.message}`);u(h("verification.uploadSuccess")),null==e||e(r.filePath),i(null);const s=document.querySelector('input[type="file"]');s&&(s.value="")}catch(t){m(t.message||h("verification.uploadFailed"))}finally{l(!1)}}},disabled:!a||o||s,className:"w-full",children:[n.jsx(Hh,{className:_u("h-4 w-4",p?"ml-2 mr-0":"mr-2 ml-0")}),h(o?"verification.uploading":"verification.uploadCRButton")]})]}),t&&n.jsxs(db,{children:[n.jsx(cm,{className:"h-4 w-4"}),n.jsx(ub,{className:_u(p&&"text-right"),children:h("verification.crVerificationRequired")})]})]})]})},HE=({showActions:e=!0,compact:t=!1,showAccessLevels:r=!0})=>{const{userProfile:s}=br(),[a,i]=Ne.useState([]),[o,l]=Ne.useState(!0),{showError:c}=dy(),d=async()=>{try{const{data:e,error:t}=await mr.from("verification_requests").select("*").order("submitted_at",{ascending:!1});if(t)throw t;i(e||[])}catch(e){c("Failed to load verification status")}finally{l(!1)}};if(Ne.useEffect(()=>{d()},[]),!s)return null;const u=e=>{switch(e){case"approved":return n.jsx(dm,{className:"h-5 w-5 text-success"});case"rejected":return n.jsx(fm,{className:"h-5 w-5 text-destructive"});case"under_review":return n.jsx(gm,{className:"h-5 w-5 text-warning"});default:return n.jsx(Uh,{className:"h-5 w-5 text-muted-foreground"})}},m=e=>{switch(e){case"approved":return n.jsx(Xf,{variant:"default",className:"bg-success",children:"Approved"});case"rejected":return n.jsx(Xf,{variant:"destructive",children:"Rejected"});case"under_review":return n.jsx(Xf,{variant:"outline",children:"Under Review"});default:return n.jsx(Xf,{variant:"secondary",children:"Pending"})}},h=(()=>{const e=s.verification_status||"pending",t=s.status;return"approved"===e&&"approved"===t?{level:"verified",icon:n.jsx(dm,{className:"h-5 w-5 text-green-500"}),title:"Verified Account",description:"Your account is fully verified and active",color:"bg-green-500/10 text-green-700 border-green-200",badgeVariant:"default"}:"pending"===e||"under_review"===e?{level:"pending",icon:n.jsx(gm,{className:"h-5 w-5 text-yellow-500"}),title:"Verification Pending",description:"Your documents are being reviewed (24-48 hours)",color:"bg-yellow-500/10 text-yellow-700 border-yellow-200",badgeVariant:"outline"}:"rejected"===e?{level:"rejected",icon:n.jsx(fm,{className:"h-5 w-5 text-red-500"}),title:"Verification Rejected",description:"Please review feedback and resubmit documents",color:"bg-red-500/10 text-red-700 border-red-200",badgeVariant:"destructive"}:{level:"unverified",icon:n.jsx(Uh,{className:"h-5 w-5 text-gray-500"}),title:"Verification Required",description:"Complete verification to access all features",color:"bg-gray-500/10 text-gray-700 border-gray-200",badgeVariant:"secondary"}})(),p=(()=>{const e="approved"===s.verification_status&&"approved"===s.status,t="pending"===s.verification_status||"under_review"===s.verification_status;return"vendor"===s.role?{canBid:e,canMessage:e||t,canReceiveOrders:e,features:e?["Submit offers on requests","Direct messaging with clients","Receive and manage orders","Priority support"]:t?["Browse opportunities","View client profiles","Limited messaging"]:["View public content only"]}:{canCreateRequests:e,canMessage:e||t,canManageOrders:e,features:e?["Create procurement requests","Message with vendors","Manage orders and projects","Full platform access"]:t?["Browse vendor profiles","View platform content","Limited messaging"]:["View public content only"]}})();return"approved"===s.verification_status&&"approved"===s.status&&!t?null:t?n.jsxs("div",{className:"flex items-center gap-2",children:[h.icon,n.jsx(Xf,{variant:h.badgeVariant,children:h.title})]}):n.jsxs(Eu,{className:`border-2 ${h.color}`,children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Mu,{className:"flex items-center gap-3",children:[h.icon,n.jsx("div",{children:n.jsxs("div",{className:"flex items-center gap-2",children:[h.title,n.jsx(Xf,{variant:h.badgeVariant,children:h.level.toUpperCase()})]})})]}),n.jsx(Pu,{children:h.description})]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:d,disabled:o,children:n.jsx(gh,{className:"h-4 w-4 "+(o?"animate-spin":"")})})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u(s.verification_status||"pending"),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Account Status"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"approved"===s.verification_status?"Fully verified and active":"rejected"===s.verification_status?"Verification rejected":"under_review"===s.verification_status?"Documents under review":"Verification pending"})]})]}),m(s.verification_status||"pending")]}),s.verification_notes&&n.jsx(db,{variant:"rejected"===s.verification_status?"destructive":"default",children:n.jsxs(ub,{children:[n.jsx("strong",{children:"Admin Notes:"}),n.jsx("br",{}),s.verification_notes]})}),r&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"Current Access Level:"}),n.jsx("div",{className:"space-y-2 mb-4",children:p.features.map((e,t)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(dm,{className:"h-3 w-3 text-green-500"}),e]},t))}),"vendor"===s.role&&n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{className:"p-3 rounded-lg "+(p.canBid?"bg-green-500/10":"bg-gray-100"),children:[n.jsx(Th,{className:"h-4 w-4 mx-auto mb-1 "+(p.canBid?"text-green-500":"text-gray-400")}),n.jsx("div",{className:"text-xs font-medium",children:"Bidding"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:p.canBid?"Enabled":"Locked"})]}),n.jsxs("div",{className:"p-3 rounded-lg "+(p.canMessage?"bg-green-500/10":"bg-gray-100"),children:[n.jsx(Tm,{className:"h-4 w-4 mx-auto mb-1 "+(p.canMessage?"text-green-500":"text-gray-400")}),n.jsx("div",{className:"text-xs font-medium",children:"Messaging"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:p.canMessage?"Enabled":"Locked"})]}),n.jsxs("div",{className:"p-3 rounded-lg "+(p.canReceiveOrders?"bg-green-500/10":"bg-gray-100"),children:[n.jsx(dm,{className:"h-4 w-4 mx-auto mb-1 "+(p.canReceiveOrders?"text-green-500":"text-gray-400")}),n.jsx("div",{className:"text-xs font-medium",children:"Orders"}),n.jsx("div",{className:"text-xs text-muted-foreground",children:p.canReceiveOrders?"Enabled":"Locked"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Document Submissions"}),0===a.length?n.jsxs(db,{children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsx(ub,{children:"No documents have been submitted yet. Please upload your Commercial Registration to begin verification."})]}):a.map(e=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[u(e.status),n.jsx("span",{className:"font-medium",children:"Commercial Registration"})]}),m(e.status)]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("p",{children:["Submitted: ",new Date(e.submitted_at).toLocaleDateString()]}),e.reviewed_at&&n.jsxs("p",{children:["Reviewed: ",new Date(e.reviewed_at).toLocaleDateString()]})]}),e.reviewer_notes&&n.jsx(db,{variant:"rejected"===e.status?"destructive":"default",children:n.jsxs(ub,{className:"text-sm",children:[n.jsx("strong",{children:"Review Notes:"}),n.jsx("br",{}),e.reviewer_notes]})}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>window.open(e.document_url,"_blank"),children:[n.jsx(Sm,{className:"h-4 w-4 mr-1"}),"View Document"]})})]},e.id))]}),"verified"!==h.level&&n.jsxs(db,{children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsx("strong",{children:"Next Steps:"}),n.jsx("br",{}),"rejected"===s.verification_status?"Please review the feedback above and upload a new Commercial Registration document.":"under_review"===s.verification_status?"Your documents are being reviewed. You will be notified once the review is complete.":"Upload your Commercial Registration document to begin the verification process."]})]}),e&&"verified"!==h.level&&n.jsx("div",{className:"flex gap-2",children:n.jsxs(ku,{onClick:()=>window.location.href="/profile",className:"flex-1",children:[n.jsx(Tm,{className:"h-4 w-4 mr-2"}),"rejected"===h.level?"Resubmit Documents":"Complete Verification"]})})]})]})},YE=({currentAvatarUrl:e,userInitials:t,onAvatarUpdate:r,className:s})=>{const[a,i]=Ne.useState(!1),[o,l]=Ne.useState(null),c=Ne.useRef(null),{toast:d}=fp(),{user:u}=br(),{t:m,isRTL:h}=cr(),p=async e=>{if(u){i(!0);try{const t=e.name.split(".").pop(),n=`${u.id}/avatar.${t}`,{data:s,error:a}=await mr.storage.from("avatars").upload(n,e,{cacheControl:"3600",upsert:!0});if(a)throw a;const{data:i}=mr.storage.from("avatars").getPublicUrl(s.path),o=i.publicUrl,{error:c}=await mr.from("user_profiles").update({avatar_url:o}).eq("user_id",u.id);if(c)throw c;r(o),l(null),d({title:m("common.success"),description:m("profile.uploadSuccess")})}catch(t){d({title:m("profile.uploadError"),description:m("profile.uploadErrorDesc"),variant:"destructive"}),l(null)}finally{i(!1)}}},f=()=>{var e;null==(e=c.current)||e.click()};return n.jsx(Eu,{className:s,children:n.jsx(Au,{className:"pt-6",children:n.jsxs("div",{className:_u("flex flex-col items-center space-y-4",h&&"text-right"),children:[n.jsxs("div",{className:"relative",children:[n.jsxs(Qx,{className:"h-32 w-32 border-4 border-background shadow-lg",children:[n.jsx(Zx,{src:o||e,alt:"Profile picture",className:"object-cover"}),n.jsx(Jx,{className:"text-2xl font-bold bg-primary/10 text-primary",children:t})]}),a&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:n.jsx(lb,{size:"lg",className:"text-white"})}),n.jsx(ku,{size:"sm",variant:"secondary",className:_u("absolute h-8 w-8 rounded-full p-0",h?"-bottom-2 -left-2":"-bottom-2 -right-2"),onClick:f,disabled:a,children:n.jsx(Qu,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:_u("text-center space-y-2",h&&"text-right"),children:[n.jsx("h3",{className:"font-medium",style:h?{textAlign:"right !important"}:{},children:m("profile.profilePicture")}),n.jsx("p",{className:"text-sm text-muted-foreground",style:h?{textAlign:"right !important"}:{},children:m("profile.profilePictureDescription")})]}),n.jsxs("div",{className:_u("flex gap-2",h&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:f,disabled:a,style:h?{textAlign:"right !important"}:{},children:[n.jsx(Hh,{className:_u("h-4 w-4",h?"ml-2":"mr-2")}),m("profile.uploadImage")]}),e&&n.jsxs(ku,{variant:"outline",size:"sm",onClick:async()=>{if(u){i(!0);try{const{error:e}=await mr.from("user_profiles").update({avatar_url:null}).eq("user_id",u.id);if(e)throw e;r(""),l(null),d({title:"Avatar removed",description:"Your profile picture has been removed"})}catch(e){d({title:"Remove failed",description:"Failed to remove avatar. Please try again.",variant:"destructive"})}finally{i(!1)}}},disabled:a,style:h?{textAlign:"right !important"}:{},children:[n.jsx(sp,{className:_u("h-4 w-4",h?"ml-2":"mr-2")}),m("profile.remove")]})]}),n.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r||!u)return;if(!r.type.startsWith("image/"))return void d({title:m("profile.invalidFileType"),description:m("profile.invalidFileTypeDesc"),variant:"destructive"});if(r.size>5242880)return void d({title:m("profile.fileTooLarge"),description:m("profile.fileTooLargeDesc"),variant:"destructive"});const n=URL.createObjectURL(r);l(n),p(r)},className:"hidden"})]})})})},KE=Ne.memo(()=>{var e;const{userProfile:t,updateProfile:r,loading:s}=br(),{t:a,isRTL:i}=cr(),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(!1),{showSuccess:u}=dy(),[m,h]=Ne.useState({full_name:(null==t?void 0:t.full_name)||"",company_name:(null==t?void 0:t.company_name)||"",phone:(null==t?void 0:t.phone)||"",address:(null==t?void 0:t.address)||"",bio:(null==t?void 0:t.bio)||"",portfolio_url:(null==t?void 0:t.portfolio_url)||"",categories:(null==t?void 0:t.categories)||[],email:(null==t?void 0:t.email)||"",avatar_url:(null==t?void 0:t.avatar_url)||""}),p=()=>{if(!t)return null;switch(t.verification_status){case"approved":return n.jsx(Xf,{variant:"default",className:"bg-green-100 text-green-800",children:a("profile.verified")});case"rejected":return n.jsx(Xf,{variant:"destructive",children:a("profile.rejected")});case"under_review":return n.jsx(Xf,{variant:"outline",children:a("profile.underReview")});default:return n.jsx(Xf,{variant:"secondary",children:a("profile.notVerified")})}};if(s)return n.jsx(yS,{children:n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",dir:i?"rtl":"ltr",children:n.jsx(lb,{size:"lg"})})});if(!t)return n.jsx(yS,{children:n.jsx("div",{dir:i?"rtl":"ltr",children:n.jsx(Eu,{children:n.jsx(Au,{className:"pt-6",children:n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-muted-foreground",children:a("profile.profileNotFound")})})})})})});const f=t.full_name?t.full_name.split(" ").map(e=>e[0]).join("").toUpperCase():(null==(e=t.email)?void 0:e.charAt(0).toUpperCase())||"U";return n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{},children:[n.jsx("div",{className:_u("flex flex-col gap-4 md:flex-row md:items-start mb-8",i?"md:flex-row-reverse md:justify-between":"md:justify-between"),children:i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[!c&&n.jsxs(ku,{onClick:()=>d(!0),variant:"outline",className:"w-full md:w-auto",style:{textAlign:"right !important"},children:[n.jsx(Ph,{className:"h-4 w-4 ml-2"}),a("profile.editProfile")]}),p()]}),n.jsxs("div",{className:"flex-1 text-right",style:{textAlign:"right !important"},children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",style:{textAlign:"right !important"},children:a("profile.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",style:{textAlign:"right !important"},children:a("profile.subtitle")})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:a("profile.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:a("profile.subtitle")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!c&&n.jsxs(ku,{onClick:()=>d(!0),variant:"outline",className:"w-full md:w-auto",children:[n.jsx(Ph,{className:"h-4 w-4 mr-2"}),a("profile.editProfile")]}),p()]})]})}),n.jsxs(BS,{defaultValue:i?"verification":"profile",className:"space-y-6",children:[n.jsx("div",{className:_u("flex w-full",i?"justify-end":"justify-start"),children:n.jsx($S,{className:_u("grid w-full grid-cols-2 lg:w-[400px]",i&&"flex-row-reverse"),children:i?n.jsxs(n.Fragment,{children:[n.jsxs(US,{value:"verification",className:_u("flex items-center gap-2",i&&"flex-row-reverse text-right"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Sh,{className:"h-4 w-4"}),a("profile.verification")]}),n.jsxs(US,{value:"profile",className:_u("flex items-center gap-2",i&&"flex-row-reverse text-right"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Xh,{className:"h-4 w-4"}),a("profile.title")]})]}):n.jsxs(n.Fragment,{children:[n.jsxs(US,{value:"profile",className:_u("flex items-center gap-2",i&&"flex-row-reverse text-right"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Xh,{className:"h-4 w-4"}),a("profile.title")]}),n.jsxs(US,{value:"verification",className:_u("flex items-center gap-2",i&&"flex-row-reverse text-right"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Sh,{className:"h-4 w-4"}),a("profile.verification")]})]})})}),n.jsxs(VS,{value:"verification",className:_u("space-y-6",i&&"text-right"),children:[n.jsx(HE,{showActions:!0,compact:!1}),("pending"===t.verification_status||"rejected"===t.verification_status||!t.verification_status)&&n.jsx("div",{className:"mt-6",children:n.jsx(WE,{onUploadSuccess:()=>window.location.reload(),isRequired:!0})})]}),n.jsxs(VS,{value:"profile",className:_u("space-y-6",i&&"text-right"),children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx(Eu,{className:"md:col-span-2",children:n.jsx(Ou,{className:_u(i&&"text-right"),children:n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsxs("div",{className:_u("flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-3",i&&"sm:flex-row-reverse sm:space-x-reverse"),children:[n.jsx(Mu,{className:"text-xl",style:i?{textAlign:"right !important"}:{},children:t.full_name}),p()]}),n.jsx(Pu,{className:"text-base",style:i?{textAlign:"right !important"}:{},children:t.company_name||t.email}),n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",i&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsxs("span",{style:i?{textAlign:"right !important"}:{},children:[a("profile.memberSince")," ",new Date(t.created_at||"").toLocaleDateString()]})]})]})})}),n.jsx(YE,{currentAvatarUrl:t.avatar_url,userInitials:f,onAvatarUpdate:e=>{h(t=>({...t,avatar_url:e})),window.location.reload()}})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{className:_u(i&&"text-right"),children:n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{style:i?{textAlign:"right !important"}:{},children:[n.jsx(Mu,{style:i?{textAlign:"right !important"}:{},children:a("profile.personalInformation")}),n.jsx(Pu,{style:i?{textAlign:"right !important"}:{},children:a("profile.personalInfoDescription")})]}),c&&n.jsxs("div",{className:_u("flex gap-2",i&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{h({full_name:(null==t?void 0:t.full_name)||"",company_name:(null==t?void 0:t.company_name)||"",phone:(null==t?void 0:t.phone)||"",address:(null==t?void 0:t.address)||"",bio:(null==t?void 0:t.bio)||"",portfolio_url:(null==t?void 0:t.portfolio_url)||"",categories:(null==t?void 0:t.categories)||[],email:(null==t?void 0:t.email)||"",avatar_url:(null==t?void 0:t.avatar_url)||""}),d(!1)},style:i?{textAlign:"right !important"}:{},children:[n.jsx(sp,{className:_u("h-4 w-4",i?"ml-2":"mr-2")}),a("common.cancel")]}),n.jsxs(ku,{size:"sm",onClick:async()=>{l(!0);try{await r(m)&&(u(a("profile.saveChanges")),d(!1))}finally{l(!1)}},disabled:o,style:i?{textAlign:"right !important"}:{},children:[o?n.jsx(lb,{size:"sm",className:_u(i?"ml-2":"mr-2")}):n.jsx(yh,{className:_u("h-4 w-4",i?"ml-2":"mr-2")}),a("profile.saveChanges")]})]})]})}),n.jsxs(Au,{className:_u("space-y-6",i&&"text-right"),children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"full_name",className:_u("flex items-center gap-2",i&&"flex-row-reverse"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Xh,{className:"h-4 w-4"}),a("profile.fullName")]}),c?n.jsx($j,{id:"full_name",value:m.full_name,onChange:e=>h({...m,full_name:e.target.value}),className:_u(i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{}}):n.jsx("p",{className:_u("text-sm py-2",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.full_name||a("profile.notProvided")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"email",className:_u("flex items-center gap-2",i&&"flex-row-reverse"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Zm,{className:"h-4 w-4"}),a("profile.email")]}),n.jsx("p",{className:_u("text-sm py-2",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.email})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"phone",className:_u("flex items-center gap-2",i&&"flex-row-reverse"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(ph,{className:"h-4 w-4"}),a("profile.phone")]}),c?n.jsx($j,{id:"phone",value:m.phone,onChange:e=>h({...m,phone:e.target.value}),className:_u(i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{}}):n.jsx("p",{className:_u("text-sm py-2",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.phone||a("profile.notProvided")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"company_name",className:_u("flex items-center gap-2",i&&"flex-row-reverse"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Xu,{className:"h-4 w-4"}),a("profile.companyName")]}),c?n.jsx($j,{id:"company_name",value:m.company_name,onChange:e=>h({...m,company_name:e.target.value}),className:_u(i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{}}):n.jsx("p",{className:_u("text-sm py-2",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.company_name||a("profile.notProvided")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"address",className:_u("flex items-center gap-2",i&&"flex-row-reverse"),style:i?{textAlign:"right !important"}:{},children:[n.jsx(Jm,{className:"h-4 w-4"}),a("profile.address")]}),c?n.jsx($j,{id:"address",value:m.address,onChange:e=>h({...m,address:e.target.value}),className:_u(i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{}}):n.jsx("p",{className:_u("text-sm py-2",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.address||a("profile.notProvided")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"bio",style:i?{textAlign:"right !important"}:{},children:a("profile.bio")}),c?n.jsx(bC,{id:"bio",value:m.bio,onChange:e=>h({...m,bio:e.target.value}),placeholder:a("profile.bioPlaceholder"),rows:4,className:_u(i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{}}):n.jsx("p",{className:_u("text-sm py-2 min-h-[80px] bg-muted/50 rounded-md p-3",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:t.bio||a("profile.noBioProvided")})]})]})]})]})]})]})})});KE.displayName="ProfilePage";const GE=()=>n.jsx(uS,{children:n.jsx(KE,{})}),XE=({children:e,className:t,hoverEffect:r="lift",clickable:s=!1,onClick:a,...i})=>n.jsx(Pd.div,{className:_u("rounded-lg border bg-card text-card-foreground shadow-sm",s&&"cursor-pointer",t),...{lift:{whileHover:{y:-8,transition:{type:"tween",duration:.2}}},tilt:{whileHover:{rotateY:5,rotateX:5,scale:1.02,transition:{type:"spring",stiffness:300}}},glow:{whileHover:{scale:1.02,transition:{type:"tween",duration:.2}}},scale:{whileHover:{scale:1.05,transition:{type:"spring",stiffness:300}}}}[r],whileTap:s?{scale:.98}:void 0,onClick:a,...i,children:e}),QE=({children:e,className:t,staggerDelay:r=.1})=>n.jsx(Pd.div,{className:t,initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:r}}},children:e.map((e,t)=>n.jsx(Pd.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},transition:{type:"tween",duration:.4},children:e},t))}),ZE=()=>{const[e,t]=Ne.useState(!1),{t:r,language:s,isRTL:a}=cr(),i=[{href:"/landing#platform",icon:ap,label:"ar"===s?"المنصة":"Platform"},{href:"/why-start-with-mwrd",icon:$h,label:"ar"===s?"لماذا تبدأ معنا":"Why Start With Us"},{href:"/what-makes-us-unique",icon:Th,label:"ar"===s?"ما يميزنا":"What Makes Us Unique"},{href:"/why-move-to-mwrd",icon:Gu,label:"ar"===s?"لماذا تنتقل إلينا":"Why Move To Us"},{href:"/landing#services",icon:Oh,label:"ar"===s?"الخدمات":"Services"},{href:"/pricing",icon:Th,label:"ar"===s?"الأسعار":"Pricing"}],o=()=>{t(!1)};return n.jsx("div",{className:"md:hidden "+(a?"order-first":"order-last"),children:n.jsxs(Kj,{open:e,onOpenChange:t,children:[n.jsx(Gj,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",className:"p-2 touch-manipulation",children:n.jsx(th,{className:"h-6 w-6"})})}),n.jsxs(Jj,{side:a?"right":"left",className:"w-[90vw] max-w-sm p-0 safe-area-pt safe-area-pb animate-slide-in-right bg-background/95 backdrop-blur-md flex flex-col",children:[n.jsxs(eb,{className:`flex-shrink-0 p-6 border-b ${a?"text-right":"text-left"} bg-gradient-to-br from-primary/5 to-accent/5`,children:[n.jsx(tb,{className:"flex items-center gap-3 "+(a?"justify-end":"justify-start"),children:n.jsx(Zt,{to:"/landing",onClick:o,children:n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-14 w-auto"})})}),n.jsx(rb,{className:"sr-only",children:"Navigation menu"}),n.jsx("div",{className:"flex pt-4 "+(a?"justify-end":"justify-center"),children:n.jsx("div",{className:"bg-white/10 border border-white/30 backdrop-blur-20 rounded-lg p-1 hover:shadow-2xl transition-all duration-500 hover:scale-105",children:n.jsx(Wj,{})})}),n.jsxs("div",{className:"flex gap-3 pt-6 "+(a?"flex-row-reverse":""),children:[n.jsx(Zt,{to:"/login",onClick:o,className:"flex-1",children:n.jsx(ku,{variant:"ghost",size:"default",className:"w-full h-10 bg-white/10 border border-white/30 backdrop-blur-20 hover:shadow-2xl transition-all duration-500 hover:scale-105 active:scale-95 touch-manipulation font-semibold text-sm",children:"ar"===s?"تسجيل الدخول":"Login"})}),n.jsx(Zt,{to:"/register",onClick:o,className:"flex-1",children:n.jsx(ku,{size:"default",className:"w-full h-10 bg-gradient-to-r from-primary to-accent hover:shadow-lg transition-all duration-300 hover:scale-[1.02] active:scale-95 touch-manipulation font-semibold text-sm",children:"ar"===s?"إنشاء حساب":"Register"})})]})]}),n.jsx("div",{className:"flex-1 min-h-0 bg-gradient-to-b from-background to-primary/5",children:n.jsx("nav",{className:"h-full px-6 py-6 overflow-y-auto scrollbar-thin scrollbar-thumb-primary/20 [&::-webkit-scrollbar]:w-1 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar-thumb]:bg-primary/20 [&::-webkit-scrollbar-thumb]:rounded-full",style:{WebkitOverflowScrolling:"touch"},children:n.jsx("ul",{className:"space-y-3",children:i.map((e,t)=>n.jsx("li",{className:"animate-fade-in",style:{animationDelay:.1*t+"s"},children:n.jsxs(Zt,{to:e.href,onClick:o,className:`flex items-center gap-4 p-4 rounded-xl bg-white/10 border border-white/30 backdrop-blur-20 hover:shadow-2xl transition-all duration-500 hover:scale-105 active:scale-95 touch-manipulation ${a?"flex-row-reverse text-right":""} group`,children:[n.jsx("div",{className:"w-10 h-10 bg-primary/20 backdrop-blur-sm rounded-lg flex items-center justify-center group-hover:bg-primary/30 transition-colors",children:n.jsx(e.icon,{className:"h-5 w-5 text-primary group-hover:scale-110 transition-transform"})}),n.jsx("span",{className:"font-semibold text-base group-hover:text-primary transition-colors",children:e.label})]})},t))})})})]})]})})},JE=()=>{const[e,t]=Ne.useState(!1);Ne.useEffect(()=>{const e=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);return n.jsx("div",{className:_u("fixed bottom-8 right-8 z-50 transition-all duration-300",e?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"),children:n.jsx(ku,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},size:"icon",className:"h-12 w-12 rounded-full shadow-lg hover:shadow-xl bg-gradient-to-r from-primary to-accent hover-scale","aria-label":"Back to top",children:n.jsx(Uu,{className:"h-5 w-5"})})})},eO=()=>(Ne.useEffect(()=>{const e=e=>{var t;const r=e.target;if("A"===r.tagName&&(null==(t=r.getAttribute("href"))?void 0:t.startsWith("#"))){e.preventDefault();const t=r.getAttribute("href");if(t){const e=document.querySelector(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}}};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),null),tO=()=>{const{language:e,t:t,isRTL:r}=cr();return n.jsx("footer",{className:"bg-gradient-to-r from-[#004F54] via-[#102C33] to-[#66023C] backdrop-blur-xl border-t border-white/10",children:n.jsxs("div",{className:"container mx-auto px-6 py-16",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 "+(r?"rtl-grid":""),children:[n.jsx(XE,{hoverEffect:"lift",className:"col-span-1 lg:col-span-1 bg-transparent border-0 p-0",children:n.jsxs("div",{className:""+(r?"text-right":"text-left"),children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-12 w-auto"}),n.jsx("span",{className:"text-2xl font-bold text-white",children:"MWRD"})]}),n.jsx("p",{className:"text-white/80 text-sm leading-relaxed max-w-xs",children:t("landing.footer.taglineText")}),n.jsxs("div",{className:"mt-6 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[n.jsx(Zm,{size:16}),n.jsx("span",{children:"info@mwrd.com"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[n.jsx(ph,{size:16}),n.jsx("span",{children:"+966 11 123 4567"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[n.jsx(Jm,{size:16}),n.jsx("span",{children:"ar"===e?"الرياض، المملكة العربية السعودية":"Riyadh, Saudi Arabia"})]})]})]})}),n.jsx(XE,{hoverEffect:"glow",className:"bg-transparent border-0 p-0",children:n.jsxs("div",{className:""+(r?"text-right":"text-left"),children:[n.jsx("h3",{className:"text-white font-semibold mb-6 text-lg",children:t("nav.navigation")}),n.jsxs("ul",{className:"space-y-3",children:[n.jsx("li",{children:n.jsx(Zt,{to:"/why-start-with-mwrd",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.whyStart")})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/what-makes-us-unique",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:"ar"===e?"ما يميزنا":"What Makes Us Unique"})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/why-move-to-mwrd",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.whyMove")})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/pricing",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.pricingSection")})})})]})]})}),n.jsx(XE,{hoverEffect:"glow",className:"bg-transparent border-0 p-0",children:n.jsxs("div",{className:""+(r?"text-right":"text-left"),children:[n.jsx("h3",{className:"text-white font-semibold mb-6 text-lg",children:"ar"===e?"المنصة":"Platform"}),n.jsxs("ul",{className:"space-y-3",children:[n.jsx("li",{children:n.jsx(Zt,{to:"/register",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:"ar"===e?"إنشاء حساب":"Sign Up"})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/login",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:"ar"===e?"تسجيل الدخول":"Login"})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/vendors",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:"ar"===e?"دليل الموردين":"Vendor Directory"})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/support",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.supportSection")})})})]})]})}),n.jsx(XE,{hoverEffect:"glow",className:"bg-transparent border-0 p-0",children:n.jsxs("div",{className:""+(r?"text-right":"text-left"),children:[n.jsx("h3",{className:"text-white font-semibold mb-6 text-lg",children:t("landing.footer.support")}),n.jsxs("ul",{className:"space-y-3",children:[n.jsx("li",{children:n.jsx(Zt,{to:"/support",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.helpCenterLink")})})}),n.jsx("li",{children:n.jsx("span",{className:"text-white/70 text-sm",children:t("landing.footer.documentation")})}),n.jsx("li",{children:n.jsx("span",{className:"text-white/70 text-sm",children:t("landing.footer.systemStatus")})}),n.jsx("li",{children:n.jsx(Zt,{to:"/privacy-policy",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.privacyPolicy")})})}),n.jsx("li",{children:n.jsx(Zt,{to:"/terms-and-conditions",className:"text-white/70 hover:text-white transition-all duration-300 text-sm hover:translate-x-1 inline-block group",children:n.jsx("span",{className:"group-hover:underline",children:t("landing.footer.termsOfService")})})})]})]})})]}),n.jsx("div",{className:"border-t border-white/20 mt-12 pt-8",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 "+(r?"md:flex-row-reverse":""),children:[n.jsxs("div",{className:"text-white/60 text-sm",children:["© 2025 MWRD. ",t("landing.footer.rights")]}),n.jsxs("div",{className:"flex items-center gap-4 "+(r?"flex-row-reverse":""),children:[n.jsx("span",{className:"text-white/60 text-sm",children:t("landing.footer.followUs")}),n.jsxs("div",{className:"flex items-center gap-3 "+(r?"flex-row-reverse":""),children:[n.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-white transition-all duration-300 hover:scale-110 transform","aria-label":"Twitter",children:n.jsx(Wh,{size:20})}),n.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-white transition-all duration-300 hover:scale-110 transform","aria-label":"LinkedIn",children:n.jsx(Km,{size:20})}),n.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-white transition-all duration-300 hover:scale-110 transform","aria-label":"Facebook",children:n.jsx(Pm,{size:20})}),n.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-white transition-all duration-300 hover:scale-110 transform","aria-label":"Instagram",children:n.jsx(Wm,{size:20})})]})]})]})})]})})},rO=()=>{const{language:e,setLanguage:t,t:r,isRTL:s}=cr(),a=(()=>{try{return Ne.useContext(yr)}catch{return}})(),i=null==a?void 0:a.user,o=null==a?void 0:a.userProfile;return(null==a?void 0:a.loading)?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:n.jsx(lb,{size:"lg",text:"ar"===e?"جاري التحميل...":"Loading...",className:"animate-fade-in"})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#004F54] via-[#102C33] to-[#66023C] overflow-hidden",children:[n.jsx(eO,{}),n.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 backdrop-filter backdrop-blur-xl border-b border-white/10 bg-white/10",children:n.jsxs("div",{className:"container mx-auto px-6 h-20 flex items-center justify-between",children:[n.jsx("div",{className:""+("ar"===e?"order-3":"order-1"),children:n.jsx(Zt,{to:i&&o?"/dashboard":"/",className:"flex items-center gap-3 group",children:n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-14 w-auto transition-all duration-500 group-hover:scale-110 drop-shadow-2xl"})})}),n.jsxs("nav",{className:"hidden lg:flex items-center gap-6 "+("ar"===e?"order-1":"order-2"),children:[n.jsx(Zt,{to:"/why-start-with-mwrd",className:"text-white/90 hover:text-white transition-colors text-sm font-medium",children:"ar"===e?"لماذا نبدأ معنا":"Why Start with Us"}),n.jsx(Zt,{to:"/what-makes-us-unique",className:"text-white/90 hover:text-white transition-colors text-sm font-medium",children:"ar"===e?"ما يميزنا":"What Makes Us Unique"}),n.jsx(Zt,{to:"/why-move-to-mwrd",className:"text-white/90 hover:text-white transition-colors text-sm font-medium",children:"ar"===e?"لماذا الانتقال إلينا":"Why Move to Us"}),n.jsx(Zt,{to:"/pricing",className:"text-white/90 hover:text-white transition-colors text-sm font-medium",children:"ar"===e?"الأسعار":"Pricing"})]}),n.jsxs("div",{className:"flex items-center gap-4 "+("ar"===e?"flex-row-reverse order-2":"order-3"),children:[n.jsx("div",{className:"hidden md:block",children:n.jsx(Wj,{})}),i&&o?n.jsx(Zt,{to:"/dashboard",className:"hidden md:block",children:n.jsx(ku,{size:"lg",animation:"lift",className:"px-8 hover:shadow-2xl transition-all duration-500 bg-white/10 border border-white/30 text-white backdrop-blur-20",children:"ar"===e?"لوحة التحكم":"Dashboard"})}):n.jsxs(n.Fragment,{children:[n.jsx(Zt,{to:"/login",className:"hidden md:block",children:n.jsx(ku,{variant:"ghost",size:"lg",animation:"scale",className:"px-6 bg-white/5 border border-white/20 text-white transition-all duration-300 backdrop-blur-15",children:"ar"===e?"تسجيل الدخول":"Login"})}),n.jsx(Zt,{to:"/register",className:"hidden md:block",children:n.jsx(ku,{size:"lg",animation:"lift",className:"px-8 hover:shadow-2xl transition-all duration-500 bg-white/10 border border-white/30 text-white backdrop-blur-20",children:"ar"===e?"ابدأ الآن":"Get Started"})})]}),n.jsx(ZE,{})]})]})}),n.jsx("section",{className:"relative min-h-screen flex items-center overflow-hidden",children:n.jsx("div",{className:"container mx-auto px-6 pt-20 pb-16 relative z-10",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center max-w-7xl mx-auto",children:[n.jsxs("div",{className:("ar"===e?"lg:order-2 text-right":"lg:order-1")+" space-y-8",children:[n.jsx("div",{className:"inline-block",children:n.jsx("div",{className:"px-4 py-2 text-sm text-white rounded-full bg-white/10 border border-white/30 backdrop-blur-20",children:"ar"===e?"🚀 منصة المشتريات الذكية":"🚀 Smart Procurement Platform"})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black",children:[n.jsx("span",{className:"text-white",children:"MWRD"}),n.jsxs("span",{className:"text-white",children:[" | ","مورد"]})]}),n.jsx("p",{className:"text-base text-white font-medium",children:"ar"===e?"منصة ذكية تربط الشركات بأفضل الموردين في المملكة العربية السعودية":"Smart platform connecting businesses with top suppliers in Saudi Arabia"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-white leading-tight",children:"ar"===e?"تواصل. مصدر. وريد.":"Connect. Source. Supply."}),n.jsx("p",{className:"text-base text-white leading-relaxed max-w-2xl",children:"ar"===e?"منصة B2B مهنية تربط العملاء بالموردين المؤهلين من خلال نظام طلب عروض الأسعار الذكي. احصل على عروض أسعار تنافسية، وقارن المقترحات، وأدر سلسلة التوريد الخاصة بك بكفاءة.":"A professional B2B marketplace connecting clients with qualified vendors through our smart RFQ system. Get competitive quotes, compare proposals, and manage your supply chain efficiently."})]}),n.jsx("div",{className:"flex justify-center sm:justify-start",children:n.jsx(Zt,{to:"/register",className:"group",children:n.jsx(ku,{size:"lg",animation:"spring",className:"px-8 py-3 text-base font-semibold transition-all duration-300 bg-white/10 border border-white/30 text-white backdrop-blur-20",children:"ar"===e?"ابدأ الآن":"Get Started"})})}),n.jsx("div",{className:"space-y-4",children:[{text:"ar"===e?"أرسل طلبات عروض الأسعار واحصل على عروض تنافسية":"Submit RFQs and receive competitive bids"},{text:"ar"===e?"تواصل مع موردين معتمدين في قطاعك":"Connect with verified vendors in your sector"},{text:"ar"===e?"معاملات آمنة وتتبع الطلبات":"Secure transactions and order tracking"}].map((e,t)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(dm,{className:"h-5 w-5 text-green-400 flex-shrink-0"}),n.jsx("span",{className:"text-white",children:e.text})]},t))}),n.jsxs("div",{className:"pt-8",children:[n.jsx("p",{className:"text-white text-sm mb-2",children:"ar"===e?"موثوق من قبل أكثر من 500+ شركة":"Trusted by 500+ businesses"}),n.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,t)=>n.jsx(Th,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},t))})]})]}),n.jsx("div",{className:("ar"===e?"lg:order-1":"lg:order-2")+" space-y-6",children:n.jsx(QE,{staggerDelay:.15,children:[{icon:Tm,title:"ar"===e?"نظام طلب التسعير":"RFQ System",subtitle:"ar"===e?"عروض ذكية":"Smart bidding",count:"24",label:"ar"===e?"طلبات نشطة":"Active RFQs",color:"#8B5CF6",progress:60},{icon:Zh,title:"ar"===e?"الموردون":"Vendors",subtitle:"ar"===e?"موردون موثقون":"Verified vendors",count:"1,247",label:"ar"===e?"موردون نشطون":"Active vendors",color:"#3B82F6",progress:85},{icon:Sh,title:"ar"===e?"آمان":"Secure",subtitle:"ar"===e?"معاملات موثقة":"Verified transactions",count:"99.9%",label:"ar"===e?"معدل النجاح":"Success rate",color:"#10B981",progress:99},{icon:gm,title:"ar"===e?"سريع":"Fast",subtitle:"ar"===e?"متوسط الاستجابة":"Average response",count:"4.2h",label:"ar"===e?"وقت استجابة العرض":"Bid response time",color:"#F59E0B",progress:70}].map((e,t)=>n.jsx(Eu,{hoverEffect:"lift",className:"p-3 transition-all duration-300 animate-fade-in bg-white/5 border border-white/20 backdrop-blur-20",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 border border-white/20 backdrop-blur-15",style:{backgroundColor:`${e.color}20`,border:`1px solid ${e.color}40`},children:n.jsx(e.icon,{className:"h-4 w-4",style:{color:e.color}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"flex items-center justify-between mb-1",children:n.jsx("h3",{className:"font-semibold text-white text-sm",children:e.title})}),n.jsx("p",{className:"text-xs text-white mb-1",children:e.subtitle}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-lg font-black text-white mb-1",children:e.count}),n.jsx("div",{className:"text-xs text-white",children:e.label})]})}),n.jsx("div",{className:"w-full bg-white/10 rounded-full h-1 mt-2",children:n.jsx("div",{className:"h-1 rounded-full transition-all duration-1000",style:{backgroundColor:e.color,width:`${e.progress}%`}})})]})]})},t))})})]})})}),n.jsxs("section",{className:"py-32 px-6 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 opacity-5",children:n.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:"radial-gradient(circle at 25% 25%, #004F54 2px, transparent 2px)",backgroundSize:"50px 50px"}})}),n.jsxs("div",{className:"container mx-auto relative z-10",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-black mb-6 text-white",children:"ar"===e?"كيف نعيد تشكيل المشتريات التجارية؟":"How We're Reshaping B2B Procurement"}),n.jsx("p",{className:"text-lg max-w-3xl mx-auto font-light text-white",children:"ar"===e?"نظام ثوري يدمج الذكاء الاصطناعي مع سوق المشتريات التجارية لتقديم تجربة لا مثيل لها":"A revolutionary system that merges AI with B2B procurement marketplace to deliver an unmatched experience"})]}),n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-2 bg-gradient-to-b from-[#102C33] via-[#004F54] to-[#765A3F] transform -translate-x-1/2 hidden lg:block rounded-full shadow-2xl"}),n.jsx("div",{className:"relative mb-32 group",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-16",children:[n.jsx("div",{className:"lg:w-1/2 lg:pr-16",children:n.jsxs(Eu,{className:"p-4 hover:shadow-2xl transition-all duration-700 rounded-2xl bg-white/5 border border-white/20 backdrop-blur-20",hoverEffect:"tilt",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#102C33] to-[#004F54] rounded-2xl flex items-center justify-center shadow-xl border border-white/20 backdrop-blur-20",children:n.jsx(jh,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-2xl font-black text-white",children:"01"}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"ar"===e?"اكتشاف ذكي":"AI-Powered Discovery"})]})]}),n.jsx("p",{className:"text-base leading-relaxed font-medium text-white",children:"ar"===e?"تقنية الذكاء الاصطناعي تحلل احتياجاتك وتوصلك بأفضل الموردين في ثوانٍ. اكتشف فرصاً لم تتخيلها من قبل":"AI technology analyzes your needs and connects you with the best vendors in seconds. Discover opportunities you never imagined"})]})}),n.jsx("div",{className:"lg:w-1/2 lg:pl-16",children:n.jsx("div",{className:"grid grid-cols-2 gap-6",children:[{icon:Lh,label:"ar"===e?"دقة 99%":"99% Accuracy",color:"#102C33"},{icon:ap,label:"ar"===e?"استجابة فورية":"Instant Response",color:"#004F54"},{icon:Mm,label:"ar"===e?"رؤى متقدمة":"Advanced Insights",color:"#765A3F"},{icon:$h,label:"ar"===e?"نمو مضمون":"Guaranteed Growth",color:"#102C33"}].map((e,t)=>n.jsxs(Eu,{hoverEffect:"glow",className:"p-3 hover:shadow-2xl transition-all duration-500 rounded-xl bg-white/5 border border-white/20 backdrop-blur-15",children:[n.jsx(e.icon,{className:"h-5 w-5 mb-2",style:{color:e.color}}),n.jsx("div",{className:"text-sm font-bold text-white",children:e.label})]},t))})})]})}),n.jsx("div",{className:"relative mb-32 group",children:n.jsxs("div",{className:"flex flex-col lg:flex-row-reverse items-center gap-16",children:[n.jsx("div",{className:"lg:w-1/2 lg:pl-16",children:n.jsxs(Eu,{className:"p-4 hover:shadow-2xl transition-all duration-700 rounded-2xl bg-white/5 border border-white/20 backdrop-blur-20",hoverEffect:"tilt",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#102C33] to-[#004F54] rounded-2xl flex items-center justify-center shadow-xl border border-white/20 backdrop-blur-20",children:n.jsx(nh,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-2xl font-black text-white",children:"02"}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"ar"===e?"تفاوض سلس":"Seamless Negotiation"})]})]}),n.jsx("p",{className:"text-base leading-relaxed font-medium text-white",children:"ar"===e?"أدوات تفاوض متطورة تسهل التواصل المباشر مع الموردين وتضمن أفضل الصفقات":"Advanced negotiation tools facilitate direct communication with vendors and ensure the best deals"})]})}),n.jsx("div",{className:"lg:w-1/2 lg:pr-16",children:n.jsx("div",{className:"grid grid-cols-2 gap-6",children:[{icon:nh,label:"ar"===e?"دردشة مباشرة":"Real-time Chat",color:"#102C33"},{icon:Tm,label:"ar"===e?"مشاركة المستندات":"Document Sharing",color:"#004F54"},{icon:Ju,label:"ar"===e?"مقارنة الأسعار":"Price Comparison",color:"#765A3F"},{icon:zm,label:"ar"===e?"اتفاقيات آمنة":"Secure Agreements",color:"#102C33"}].map((e,t)=>n.jsxs(Eu,{hoverEffect:"glow",className:"p-3 hover:shadow-2xl transition-all duration-500 rounded-xl bg-white/5 border border-white/20 backdrop-blur-15",children:[n.jsx(e.icon,{className:"h-5 w-5 mb-2",style:{color:e.color}}),n.jsx("div",{className:"text-sm font-bold text-white",children:e.label})]},t))})})]})}),n.jsx("div",{className:"relative mb-16 group",children:n.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-16",children:[n.jsx("div",{className:"lg:w-1/2 lg:pr-16",children:n.jsxs(Eu,{className:"p-4 hover:shadow-2xl transition-all duration-700 rounded-2xl bg-white/5 border border-white/20 backdrop-blur-20",hoverEffect:"tilt",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#102C33] to-[#004F54] rounded-2xl flex items-center justify-center shadow-xl border border-white/20 backdrop-blur-20",children:n.jsx(Sh,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-2xl font-black text-white",children:"03"}),n.jsx("h3",{className:"text-xl font-bold text-white",children:"ar"===e?"إنجاز آمن":"Secure Completion"})]})]}),n.jsx("p",{className:"text-base leading-relaxed font-medium text-white",children:"ar"===e?"نظام دفع آمن وتتبع الطلبات يضمن وصول منتجاتك في الوقت المحدد بأعلى جودة":"Secure payment system and order tracking ensures your products arrive on time with the highest quality"})]})}),n.jsx("div",{className:"lg:w-1/2 lg:pl-16",children:n.jsx("div",{className:"grid grid-cols-2 gap-6",children:[{icon:bm,label:"ar"===e?"حماية الدفع":"Payment Protection",color:"#102C33"},{icon:Vu,label:"ar"===e?"ضمان الجودة":"Quality Assurance",color:"#004F54"},{icon:dh,label:"ar"===e?"تتبع التسليم":"Delivery Tracking",color:"#765A3F"},{icon:qh,label:"ar"===e?"رضا مضمون":"Guaranteed Satisfaction",color:"#102C33"}].map((e,t)=>n.jsxs(Eu,{hoverEffect:"glow",className:"p-3 hover:shadow-2xl transition-all duration-500 rounded-xl bg-white/5 border border-white/20 backdrop-blur-15",children:[n.jsx(e.icon,{className:"h-5 w-5 mb-2",style:{color:e.color}}),n.jsx("div",{className:"text-sm font-bold text-white",children:e.label})]},t))})})]})})]})})]})]}),n.jsx("section",{className:"py-32 px-6 relative overflow-hidden",children:n.jsxs("div",{className:"container mx-auto relative z-10",children:[n.jsxs("div",{className:"text-center mb-20",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-black mb-6 text-white",children:"ar"===e?"منصتنا الذكية":"Our Smart Platform"}),n.jsx("p",{className:"text-lg max-w-3xl mx-auto font-light text-white",children:"ar"===e?"كل ما تحتاجه لإدارة المشتريات بكفاءة":"Everything you need to manage procurement efficiently."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto",children:[{icon:Nm,title:"ar"===e?"منصة شاملة":"All-in-One Platform",desc:"ar"===e?"إدارة الموردين والطلبات والمشاريع والمدفوعات في مكان واحد":"Manage suppliers, requests, projects, and payments in one place.",color:"#102C33"},{icon:rp,title:"ar"===e?"سير عمل آلي":"Automated Workflows",desc:"ar"===e?"تبسيط العمليات وتقليل الجهد اليدوي":"Streamline processes and reduce manual effort.",color:"#004F54"},{icon:rm,title:"ar"===e?"تحليلات متقدمة":"Advanced Analytics",desc:"ar"===e?"احصل على رؤى قيمة لتحسين الأداء واتخاذ قرارات مدروسة":"Gain valuable insights to improve performance and make informed decisions.",color:"#765A3F"},{icon:Qh,title:"ar"===e?"تعاون سلس":"Seamless Collaboration",desc:"ar"===e?"تواصل وتعاون مع الموردين والعملاء بكفاءة":"Communicate and collaborate with suppliers and clients efficiently.",color:"#102C33"}].map((e,t)=>n.jsx(Eu,{hoverEffect:"scale",className:"p-6 hover:shadow-2xl transition-all duration-500 bg-white/5 border border-white/20 backdrop-blur-20",children:n.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center border border-white/20 backdrop-blur-15",style:{backgroundColor:`${e.color}30`},children:n.jsx(e.icon,{className:"h-8 w-8",style:{color:e.color}})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:e.title}),n.jsx("p",{className:"text-white font-light leading-relaxed",children:e.desc})]})]})},t))})]})}),n.jsx("section",{className:"py-32 px-6 relative overflow-hidden",children:n.jsxs("div",{className:"container mx-auto relative z-10",children:[n.jsxs("div",{className:"text-center mb-20",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-black mb-6 text-white",children:"ar"===e?"خدماتنا ومزايانا":"Our Services & Benefits"}),n.jsx("p",{className:"text-lg max-w-3xl mx-auto font-light text-white",children:"ar"===e?"نقدم مجموعة واسعة من الخدمات لتلبية احتياجات أعمالك":"We offer a wide range of services to meet your business needs"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-20 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center lg:text-left",children:[n.jsx("h3",{className:"text-2xl font-black mb-4 text-white",children:"ar"===e?"خدماتنا":"Our Services"}),n.jsx("p",{className:"text-white font-light",children:"ar"===e?"نقدم مجموعة واسعة من الخدمات لتلبية احتياجات أعمالك":"We offer a wide range of services to meet your business needs."})]}),n.jsx("div",{className:"space-y-6",children:[{icon:Zh,title:"ar"===e?"إدارة الموردين":"Supplier Management",desc:"ar"===e?"ابحث وأدر أفضل الموردين بكفاءة":"Find and manage top suppliers efficiently.",color:"#102C33"},{icon:Tm,title:"ar"===e?"إدارة الطلبات":"Request Management",desc:"ar"===e?"أنشئ وأدر الطلبات بسهولة":"Create and manage requests with ease.",color:"#004F54"},{icon:Ku,title:"ar"===e?"إدارة المشاريع":"Project Management",desc:"ar"===e?"تتبع المشاريع واضمن التسليم في الوقت المحدد":"Track projects and ensure on-time delivery.",color:"#765A3F"},{icon:bm,title:"ar"===e?"إدارة المدفوعات":"Payment Management",desc:"ar"===e?"أدر المدفوعات بأمان وكفاءة":"Manage payments securely and efficiently.",color:"#102C33"}].map((e,t)=>n.jsx(Eu,{hoverEffect:"lift",className:"p-6 hover:shadow-2xl transition-all duration-500 bg-white/5 border border-white/20 backdrop-blur-20",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 border border-white/20 backdrop-blur-15",style:{backgroundColor:`${e.color}30`},children:n.jsx(e.icon,{className:"h-6 w-6",style:{color:e.color}})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-lg font-bold mb-2 text-white",children:e.title}),n.jsx("p",{className:"text-white font-light",children:e.desc})]})]})},t))})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center lg:text-left",children:[n.jsx("h3",{className:"text-2xl font-black mb-4 text-white",children:"ar"===e?"مزايا استخدام منصتنا":"Benefits of Using Our Platform"}),n.jsx("p",{className:"text-white font-light",children:"ar"===e?"اكتشف كيف يمكن لمنصتنا مساعدتك في تحقيق أهداف عملك":"Discover how our platform can help you achieve your business goals."})]}),n.jsx("div",{className:"space-y-6",children:[{icon:_m,title:"ar"===e?"توفير التكاليف":"Cost Savings",desc:"ar"===e?"قلل من التكاليف التشغيلية وزد من الكفاءة":"Reduce operational costs and increase efficiency.",color:"#102C33"},{icon:gm,title:"ar"===e?"توفير الوقت":"Time Savings",desc:"ar"===e?"بسّط العمليات واحفظ وقتاً ثميناً":"Streamline processes and save valuable time.",color:"#004F54"},{icon:$h,title:"ar"===e?"زيادة الإنتاجية":"Increased Productivity",desc:"ar"===e?"زد من إنتاجية فريقك وحسّن الأداء":"Increase your team's productivity and improve performance.",color:"#765A3F"},{icon:$m,title:"ar"===e?"تحسين العلاقات":"Improved Relationships",desc:"ar"===e?"عزز العلاقات مع الموردين والعملاء":"Enhance relationships with suppliers and clients.",color:"#102C33"}].map((e,t)=>n.jsx(Eu,{hoverEffect:"lift",className:"p-6 hover:shadow-2xl transition-all duration-500 bg-white/5 border border-white/20 backdrop-blur-20",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 border border-white/20 backdrop-blur-15",style:{backgroundColor:`${e.color}30`},children:n.jsx(e.icon,{className:"h-6 w-6",style:{color:e.color}})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-lg font-bold mb-2 text-white",children:e.title}),n.jsx("p",{className:"text-white font-light",children:e.desc})]})]})},t))})]})]})]})}),n.jsx("section",{className:"py-20 px-6 relative overflow-hidden",children:n.jsx("div",{className:"container mx-auto text-center relative z-10",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white",children:"ar"===e?"انضم إلى الثورة":"Join the Revolution"}),n.jsx("p",{className:"text-lg text-white font-light max-w-2xl mx-auto",children:"ar"===e?"كن جزءاً من مستقبل التجارة الإلكترونية B2B وابدأ رحلتك معنا اليوم":"Be part of the future of B2B e-commerce and start your journey with us today"}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:n.jsx(Zt,{to:"/register",children:n.jsx(ku,{size:"lg",animation:"spring",className:"px-8 py-3 bg-gradient-to-r from-primary to-accent transition-transform text-lg text-white",children:"ar"===e?"ابدأ رحلتك":"Start Your Journey"})})})]})})}),n.jsx(tO,{}),n.jsx(JE,{})]})},nO=()=>{const e=Nt();return Ne.useEffect(()=>{},[e.pathname]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),n.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),n.jsx(Zt,{to:"/landing",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Landing"})]})})};var sO=Array.isArray,aO="object"==typeof Ce&&Ce&&Ce.Object===Object&&Ce,iO=aO,oO="object"==typeof self&&self&&self.Object===Object&&self,lO=iO||oO||Function("return this")(),cO=lO.Symbol,dO=cO,uO=Object.prototype,mO=uO.hasOwnProperty,hO=uO.toString,pO=dO?dO.toStringTag:void 0;var fO=function(e){var t=mO.call(e,pO),r=e[pO];try{e[pO]=void 0;var n=!0}catch(mte){}var s=hO.call(e);return n&&(t?e[pO]=r:delete e[pO]),s},xO=Object.prototype.toString;var gO=fO,vO=function(e){return xO.call(e)},yO=cO?cO.toStringTag:void 0;var jO=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yO&&yO in Object(e)?gO(e):vO(e)};var bO=function(e){return null!=e&&"object"==typeof e},wO=jO,NO=bO;var _O=function(e){return"symbol"==typeof e||NO(e)&&"[object Symbol]"==wO(e)},SO=sO,kO=_O,CO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EO=/^\w*$/;var OO=function(e,t){if(SO(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!kO(e))||(EO.test(e)||!CO.test(e)||null!=t&&e in Object(t))};var MO=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const PO=Ee(MO);var AO=jO,TO=MO;var DO=function(e){if(!TO(e))return!1;var t=AO(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const RO=Ee(DO);var LO,qO=lO["__core-js_shared__"],IO=(LO=/[^.]+$/.exec(qO&&qO.keys&&qO.keys.IE_PROTO||""))?"Symbol(src)_1."+LO:"";var FO=function(e){return!!IO&&IO in e},zO=Function.prototype.toString;var BO=function(e){if(null!=e){try{return zO.call(e)}catch(mte){}try{return e+""}catch(mte){}}return""},$O=DO,UO=FO,VO=MO,WO=BO,HO=/^\[object .+?Constructor\]$/,YO=Function.prototype,KO=Object.prototype,GO=YO.toString,XO=KO.hasOwnProperty,QO=RegExp("^"+GO.call(XO).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ZO=function(e){return!(!VO(e)||UO(e))&&($O(e)?QO:HO).test(WO(e))},JO=function(e,t){return null==e?void 0:e[t]};var eM=function(e,t){var r=JO(e,t);return ZO(r)?r:void 0},tM=eM(Object,"create"),rM=tM;var nM=function(){this.__data__=rM?rM(null):{},this.size=0};var sM=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},aM=tM,iM=Object.prototype.hasOwnProperty;var oM=function(e){var t=this.__data__;if(aM){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return iM.call(t,e)?t[e]:void 0},lM=tM,cM=Object.prototype.hasOwnProperty;var dM=tM;var uM=nM,mM=sM,hM=oM,pM=function(e){var t=this.__data__;return lM?void 0!==t[e]:cM.call(t,e)},fM=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dM&&void 0===t?"__lodash_hash_undefined__":t,this};function xM(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xM.prototype.clear=uM,xM.prototype.delete=mM,xM.prototype.get=hM,xM.prototype.has=pM,xM.prototype.set=fM;var gM=xM;var vM=function(){this.__data__=[],this.size=0};var yM=function(e,t){return e===t||e!=e&&t!=t},jM=yM;var bM=function(e,t){for(var r=e.length;r--;)if(jM(e[r][0],t))return r;return-1},wM=bM,NM=Array.prototype.splice;var _M=bM;var SM=bM;var kM=bM;var CM=vM,EM=function(e){var t=this.__data__,r=wM(t,e);return!(r<0)&&(r==t.length-1?t.pop():NM.call(t,r,1),--this.size,!0)},OM=function(e){var t=this.__data__,r=_M(t,e);return r<0?void 0:t[r][1]},MM=function(e){return SM(this.__data__,e)>-1},PM=function(e,t){var r=this.__data__,n=kM(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function AM(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}AM.prototype.clear=CM,AM.prototype.delete=EM,AM.prototype.get=OM,AM.prototype.has=MM,AM.prototype.set=PM;var TM=AM,DM=eM(lO,"Map"),RM=gM,LM=TM,qM=DM;var IM=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var FM=function(e,t){var r=e.__data__;return IM(t)?r["string"==typeof t?"string":"hash"]:r.map},zM=FM;var BM=FM;var $M=FM;var UM=FM;var VM=function(){this.size=0,this.__data__={hash:new RM,map:new(qM||LM),string:new RM}},WM=function(e){var t=zM(this,e).delete(e);return this.size-=t?1:0,t},HM=function(e){return BM(this,e).get(e)},YM=function(e){return $M(this,e).has(e)},KM=function(e,t){var r=UM(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function GM(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}GM.prototype.clear=VM,GM.prototype.delete=WM,GM.prototype.get=HM,GM.prototype.has=YM,GM.prototype.set=KM;var XM=GM,QM=XM;function ZM(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],a=r.cache;if(a.has(s))return a.get(s);var i=e.apply(this,n);return r.cache=a.set(s,i)||a,i};return r.cache=new(ZM.Cache||QM),r}ZM.Cache=QM;var JM=ZM;const eP=Ee(JM);var tP=JM;var rP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nP=/\\(\\)?/g,sP=function(e){var t=tP(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rP,function(e,r,n,s){t.push(n?s.replace(nP,"$1"):r||e)}),t});var aP=function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s},iP=aP,oP=sO,lP=_O,cP=cO?cO.prototype:void 0,dP=cP?cP.toString:void 0;var uP=function e(t){if("string"==typeof t)return t;if(oP(t))return iP(t,e)+"";if(lP(t))return dP?dP.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},mP=uP;var hP=function(e){return null==e?"":mP(e)},pP=sO,fP=OO,xP=sP,gP=hP;var vP=function(e,t){return pP(e)?e:fP(e,t)?[e]:xP(gP(e))},yP=_O;var jP=function(e){if("string"==typeof e||yP(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},bP=vP,wP=jP;var NP=function(e,t){for(var r=0,n=(t=bP(t,e)).length;null!=e&&r<n;)e=e[wP(t[r++])];return r&&r==n?e:void 0},_P=NP;var SP=function(e,t,r){var n=null==e?void 0:_P(e,t);return void 0===n?r:n};const kP=Ee(SP);const CP=Ee(function(e){return null==e});var EP=jO,OP=sO,MP=bO;const PP=Ee(function(e){return"string"==typeof e||!OP(e)&&MP(e)&&"[object String]"==EP(e)});var AP,TP={exports:{}},DP={},RP=Symbol.for("react.element"),LP=Symbol.for("react.portal"),qP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),FP=Symbol.for("react.profiler"),zP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),$P=Symbol.for("react.server_context"),UP=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),WP=Symbol.for("react.suspense_list"),HP=Symbol.for("react.memo"),YP=Symbol.for("react.lazy"),KP=Symbol.for("react.offscreen");function GP(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case RP:switch(e=e.type){case qP:case FP:case IP:case VP:case WP:return e;default:switch(e=e&&e.$$typeof){case $P:case BP:case UP:case YP:case HP:case zP:return e;default:return t}}case LP:return t}}}AP=Symbol.for("react.module.reference"),DP.ContextConsumer=BP,DP.ContextProvider=zP,DP.Element=RP,DP.ForwardRef=UP,DP.Fragment=qP,DP.Lazy=YP,DP.Memo=HP,DP.Portal=LP,DP.Profiler=FP,DP.StrictMode=IP,DP.Suspense=VP,DP.SuspenseList=WP,DP.isAsyncMode=function(){return!1},DP.isConcurrentMode=function(){return!1},DP.isContextConsumer=function(e){return GP(e)===BP},DP.isContextProvider=function(e){return GP(e)===zP},DP.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===RP},DP.isForwardRef=function(e){return GP(e)===UP},DP.isFragment=function(e){return GP(e)===qP},DP.isLazy=function(e){return GP(e)===YP},DP.isMemo=function(e){return GP(e)===HP},DP.isPortal=function(e){return GP(e)===LP},DP.isProfiler=function(e){return GP(e)===FP},DP.isStrictMode=function(e){return GP(e)===IP},DP.isSuspense=function(e){return GP(e)===VP},DP.isSuspenseList=function(e){return GP(e)===WP},DP.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===qP||e===FP||e===IP||e===VP||e===WP||e===KP||"object"==typeof e&&null!==e&&(e.$$typeof===YP||e.$$typeof===HP||e.$$typeof===zP||e.$$typeof===BP||e.$$typeof===UP||e.$$typeof===AP||void 0!==e.getModuleId)},DP.typeOf=GP,TP.exports=DP;var XP=TP.exports,QP=jO,ZP=bO;var JP=function(e){return"number"==typeof e||ZP(e)&&"[object Number]"==QP(e)};const eA=Ee(JP);var tA=JP;const rA=Ee(function(e){return tA(e)&&e!=+e});var nA=function(e){return 0===e?0:e>0?1:-1},sA=function(e){return PP(e)&&e.indexOf("%")===e.length-1},aA=function(e){return eA(e)&&!rA(e)},iA=function(e){return aA(e)||PP(e)},oA=0,lA=function(e){var t=++oA;return"".concat(e||"").concat(t)},cA=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!aA(e)&&!PP(e))return n;if(sA(e)){var a=e.indexOf("%");r=t*parseFloat(e.slice(0,a))/100}else r=+e;return rA(r)&&(r=n),s&&r>t&&(r=t),r},dA=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},uA=function(e,t){return aA(e)&&aA(t)?function(r){return e+r*(t-e)}:function(){return t}};function mA(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):kP(e,t))===r}):null}function hA(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function pA(e){return(pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fA=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xA=["points","pathLength"],gA={svg:["viewBox","children"],polygon:xA,polyline:xA},vA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],yA=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(Ne.isValidElement(e)&&(r=e.props),!PO(r))return null;var n={};return Object.keys(r).forEach(function(e){vA.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},jA=function(e,t,r){if(!PO(e)||"object"!==pA(e))return null;var n=null;return Object.keys(e).forEach(function(s){var a=e[s];vA.includes(s)&&"function"==typeof a&&(n||(n={}),n[s]=function(e,t,r){return function(n){return e(t,r,n),null}}(a,t,r))}),n},bA=["children"],wA=["children"];function NA(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _A(e){return(_A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var SA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},kA=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},CA=null,EA=null,OA=function e(t){if(t===CA&&Array.isArray(EA))return EA;var r=[];return Ne.Children.forEach(t,function(t){CP(t)||(XP.isFragment(t)?r=r.concat(e(t.props.children)):r.push(t))}),EA=r,CA=t,r};function MA(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return kA(e)}):[kA(t)],OA(e).forEach(function(e){var t=kP(e,"type.displayName")||kP(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function PA(e,t){var r=MA(e,t);return r&&r[0]}var AA=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!aA(r)||r<=0||!aA(n)||n<=0)},TA=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],DA=function(e){return e&&"object"===_A(e)&&"clipDot"in e},RA=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(Ne.isValidElement(e)&&(n=e.props),!PO(n))return null;var s={};return Object.keys(n).forEach(function(e){var a;(function(e,t,r,n){var s,a=null!==(s=null==gA?void 0:gA[n])&&void 0!==s?s:[];return!RO(e)&&(n&&a.includes(t)||fA.includes(t))||r&&vA.includes(t)})(null===(a=n)||void 0===a?void 0:a[e],e,t,r)&&(s[e]=n[e])}),s},LA=function e(t,r){if(t===r)return!0;var n=Ne.Children.count(t);if(n!==Ne.Children.count(r))return!1;if(0===n)return!0;if(1===n)return qA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var a=t[s],i=r[s];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!qA(a,i))return!1}return!0},qA=function(e,t){if(CP(e)&&CP(t))return!0;if(!CP(e)&&!CP(t)){var r=e.props||{},n=r.children,s=NA(r,bA),a=t.props||{},i=a.children,o=NA(a,wA);return n&&i?hA(s,o)&&LA(n,i):!n&&!i&&hA(s,o)}return!1},IA=function(e,t){var r=[],n={};return OA(e).forEach(function(e,s){if(function(e){return e&&e.type&&PP(e.type)&&TA.indexOf(e.type)>=0}(e))r.push(e);else if(e){var a=kA(e.type),i=t[a]||{},o=i.handler,l=i.once;if(o&&(!l||!n[a])){var c=o(e,a,s);r.push(c),n[a]=!0}}}),r},FA=["children","width","height","viewBox","className","style","title","desc"];function zA(){return zA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zA.apply(this,arguments)}function BA(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $A(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,a=e.className,i=e.style,o=e.title,l=e.desc,c=BA(e,FA),d=s||{width:r,height:n,x:0,y:0},u=Pr("recharts-surface",a);return ke.createElement("svg",zA({},RA(c,!0,"svg"),{className:u,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ke.createElement("title",null,o),ke.createElement("desc",null,l),t)}var UA=["children","className"];function VA(){return VA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VA.apply(this,arguments)}function WA(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var HA=ke.forwardRef(function(e,t){var r=e.children,n=e.className,s=WA(e,UA),a=Pr("recharts-layer",n);return ke.createElement("g",VA({className:a},RA(s,!0),{ref:t}),r)}),YA=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]};var KA=function(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(s);++n<s;)a[n]=e[n+t];return a};var GA=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:KA(e,t,r)},XA=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var QA=function(e){return XA.test(e)};var ZA=function(e){return e.split("")},JA="\\ud800-\\udfff",eT="["+JA+"]",tT="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rT="\\ud83c[\\udffb-\\udfff]",nT="[^"+JA+"]",sT="(?:\\ud83c[\\udde6-\\uddff]){2}",aT="[\\ud800-\\udbff][\\udc00-\\udfff]",iT="(?:"+tT+"|"+rT+")"+"?",oT="[\\ufe0e\\ufe0f]?",lT=oT+iT+("(?:\\u200d(?:"+[nT,sT,aT].join("|")+")"+oT+iT+")*"),cT="(?:"+[nT+tT+"?",tT,sT,aT,eT].join("|")+")",dT=RegExp(rT+"(?="+rT+")|"+cT+lT,"g");var uT=ZA,mT=QA,hT=function(e){return e.match(dT)||[]};var pT=GA,fT=QA,xT=function(e){return mT(e)?hT(e):uT(e)},gT=hP;const vT=Ee(function(e){return function(t){t=gT(t);var r=fT(t)?xT(t):void 0,n=r?r[0]:t.charAt(0),s=r?pT(r,1).join(""):t.slice(1);return n[e]()+s}}("toUpperCase"));function yT(e){return function(){return e}}const jT=Math.cos,bT=Math.sin,wT=Math.sqrt,NT=Math.PI,_T=2*NT,ST=Math.PI,kT=2*ST,CT=1e-6,ET=kT-CT;function OT(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class MT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?OT:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OT;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,s,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,r,n,s){if(e=+e,t=+t,r=+r,n=+n,(s=+s)<0)throw new Error(`negative radius: ${s}`);let a=this._x1,i=this._y1,o=r-e,l=n-t,c=a-e,d=i-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>CT)if(Math.abs(d*o-l*c)>CT&&s){let m=r-a,h=n-i,p=o*o+l*l,f=m*m+h*h,x=Math.sqrt(p),g=Math.sqrt(u),v=s*Math.tan((ST-Math.acos((p+u-f)/(2*x*g)))/2),y=v/g,j=v/x;Math.abs(y-1)>CT&&this._append`L${e+y*c},${t+y*d}`,this._append`A${s},${s},0,0,${+(d*m>c*h)},${this._x1=e+j*o},${this._y1=t+j*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,s,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=r*Math.cos(n),o=r*Math.sin(n),l=e+i,c=t+o,d=1^a,u=a?n-s:s-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>CT||Math.abs(this._y1-c)>CT)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%kT+kT),u>ET?this._append`A${r},${r},0,1,${d},${e-i},${t-o}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>CT&&this._append`A${r},${r},0,${+(u>=ST)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function PT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new MT(t)}function AT(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function TT(e){this._context=e}function DT(e){return new TT(e)}function RT(e){return e[0]}function LT(e){return e[1]}function qT(e,t){var r=yT(!0),n=null,s=DT,a=null,i=PT(o);function o(o){var l,c,d,u=(o=AT(o)).length,m=!1;for(null==n&&(a=s(d=i())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(c,l,o),+t(c,l,o));if(d)return a=null,d+""||null}return e="function"==typeof e?e:void 0===e?RT:yT(e),t="function"==typeof t?t:void 0===t?LT:yT(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:yT(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:yT(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:yT(!!e),o):r},o.curve=function(e){return arguments.length?(s=e,null!=n&&(a=s(n)),o):s},o.context=function(e){return arguments.length?(null==e?n=a=null:a=s(n=e),o):n},o}function IT(e,t,r){var n=null,s=yT(!0),a=null,i=DT,o=null,l=PT(c);function c(c){var d,u,m,h,p,f=(c=AT(c)).length,x=!1,g=new Array(f),v=new Array(f);for(null==a&&(o=i(p=l())),d=0;d<=f;++d){if(!(d<f&&s(h=c[d],d,c))===x)if(x=!x)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=d-1;m>=u;--m)o.point(g[m],v[m]);o.lineEnd(),o.areaEnd()}x&&(g[d]=+e(h,d,c),v[d]=+t(h,d,c),o.point(n?+n(h,d,c):g[d],r?+r(h,d,c):v[d]))}if(p)return o=null,p+""||null}function d(){return qT().defined(s).curve(i).context(a)}return e="function"==typeof e?e:void 0===e?RT:yT(+e),t="function"==typeof t?t:yT(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?LT:yT(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:yT(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:yT(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:yT(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:yT(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:yT(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:yT(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:yT(!!e),c):s},c.curve=function(e){return arguments.length?(i=e,null!=a&&(o=i(a)),c):i},c.context=function(e){return arguments.length?(null==e?a=o=null:o=i(a=e),c):a},c}TT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class FT{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const zT={draw(e,t){const r=wT(t/NT);e.moveTo(r,0),e.arc(0,0,r,0,_T)}},BT={draw(e,t){const r=wT(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},$T=wT(1/3),UT=2*$T,VT={draw(e,t){const r=wT(t/UT),n=r*$T;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},WT={draw(e,t){const r=wT(t),n=-r/2;e.rect(n,n,r,r)}},HT=bT(NT/10)/bT(7*NT/10),YT=bT(_T/10)*HT,KT=-jT(_T/10)*HT,GT={draw(e,t){const r=wT(.8908130915292852*t),n=YT*r,s=KT*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const t=_T*a/5,i=jT(t),o=bT(t);e.lineTo(o*r,-i*r),e.lineTo(i*n-o*s,o*n+i*s)}e.closePath()}},XT=wT(3),QT={draw(e,t){const r=-wT(t/(3*XT));e.moveTo(0,2*r),e.lineTo(-XT*r,-r),e.lineTo(XT*r,-r),e.closePath()}},ZT=-.5,JT=wT(3)/2,eD=1/wT(12),tD=3*(eD/2+1),rD={draw(e,t){const r=wT(t/tD),n=r/2,s=r*eD,a=n,i=r*eD+r,o=-a,l=i;e.moveTo(n,s),e.lineTo(a,i),e.lineTo(o,l),e.lineTo(ZT*n-JT*s,JT*n+ZT*s),e.lineTo(ZT*a-JT*i,JT*a+ZT*i),e.lineTo(ZT*o-JT*l,JT*o+ZT*l),e.lineTo(ZT*n+JT*s,ZT*s-JT*n),e.lineTo(ZT*a+JT*i,ZT*i-JT*a),e.lineTo(ZT*o+JT*l,ZT*l-JT*o),e.closePath()}};function nD(){}function sD(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function aD(e){this._context=e}function iD(e){this._context=e}function oD(e){this._context=e}function lD(e){this._context=e}function cD(e){return e<0?-1:1}function dD(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(cD(a)+cD(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function uD(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function mD(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function hD(e){this._context=e}function pD(e){this._context=new fD(e)}function fD(e){this._context=e}function xD(e){this._context=e}function gD(e){var t,r,n=e.length-1,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(s[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function vD(e,t){this._context=e,this._t=t}function yD(e,t){if((s=e.length)>1)for(var r,n,s,a=1,i=e[t[0]],o=i.length;a<s;++a)for(n=i,i=e[t[a]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function jD(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function bD(e,t){return e[t]}function wD(e){const t=[];return t.key=e,t}function ND(e){return(ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}aD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sD(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},iD.prototype={areaStart:nD,areaEnd:nD,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:sD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},oD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:sD(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},lD.prototype={areaStart:nD,areaEnd:nD,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},hD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mD(this,this._t0,uD(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mD(this,uD(this,r=dD(this,e,t)),r);break;default:mD(this,this._t0,r=dD(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(pD.prototype=Object.create(hD.prototype)).point=function(e,t){hD.prototype.point.call(this,t,e)},fD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}},xD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=gD(e),s=gD(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},vD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var _D=["type","size","sizeType"];function SD(){return SD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SD.apply(this,arguments)}function kD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kD(Object(r),!0).forEach(function(t){ED(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ED(e,t,r){var n;return n=function(e,t){if("object"!=ND(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ND(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ND(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OD(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var MD={symbolCircle:zT,symbolCross:BT,symbolDiamond:VT,symbolSquare:WT,symbolStar:GT,symbolTriangle:QT,symbolWye:rD},PD=Math.PI/180,AD=function(e){var t,r,n=e.type,s=void 0===n?"circle":n,a=e.size,i=void 0===a?64:a,o=e.sizeType,l=void 0===o?"area":o,c=CD(CD({},OD(e,_D)),{},{type:s,size:i,sizeType:l}),d=c.className,u=c.cx,m=c.cy,h=RA(c,!0);return u===+u&&m===+m&&i===+i?ke.createElement("path",SD({},h,{className:Pr("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(m,")"),d:(t=function(e){var t="symbol".concat(vT(e));return MD[t]||zT}(s),r=function(e,t){let r=null,n=PT(s);function s(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return e="function"==typeof e?e:yT(e||zT),t="function"==typeof t?t:yT(void 0===t?64:+t),s.type=function(t){return arguments.length?(e="function"==typeof t?t:yT(t),s):e},s.size=function(e){return arguments.length?(t="function"==typeof e?e:yT(+e),s):t},s.context=function(e){return arguments.length?(r=null==e?null:e,s):r},s}().type(t).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*PD;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,l,s)),r())})):null};function TD(e){return(TD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DD(){return DD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DD.apply(this,arguments)}function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LD(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$D(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qD(e,t,r){return t=FD(t),function(e,t){if(t&&("object"===TD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ID()?Reflect.construct(t,r||[],FD(e).constructor):t.apply(e,r))}function ID(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ID=function(){return!!e})()}function FD(e){return(FD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zD(e,t){return(zD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BD(e,t,r){return(t=$D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $D(e){var t=function(e,t){if("object"!=TD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TD(t)?t:t+""}AD.registerSymbol=function(e,t){MD["symbol".concat(vT(e))]=t};var UD=32,VD=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qD(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zD(e,t)}(e,Ne.PureComponent),LD(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=16,n=UD/6,s=UD/3,a=e.inactive?t:e.color;if("plainline"===e.type)return ke.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:UD,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return ke.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(r,"h").concat(s,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*s,",").concat(r,"\n            H").concat(UD,"M").concat(2*s,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(s,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return ke.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(UD,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(ke.isValidElement(e.legendIcon)){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(t){BD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete i.legendIcon,ke.cloneElement(e.legendIcon,i)}return ke.createElement(AD,{fill:a,cx:r,cy:r,size:UD,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,s=t.layout,a=t.formatter,i=t.inactiveColor,o={x:0,y:0,width:UD,height:UD},l={display:"horizontal"===s?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var s=t.formatter||a,d=Pr(BD(BD({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=RO(t.value)?null:t.value;YA(!RO(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var m=t.inactive?i:t.color;return ke.createElement("li",DD({className:d,style:l,key:"legend-item-".concat(r)},jA(e.props,t,r)),ke.createElement($A,{width:n,height:n,viewBox:o,style:c},e.renderIcon(t)),ke.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},s?s(u,t,r):u))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return ke.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}();BD(VD,"displayName","Legend"),BD(VD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var WD=TM;var HD=TM,YD=DM,KD=XM;var GD=TM,XD=function(){this.__data__=new WD,this.size=0},QD=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ZD=function(e){return this.__data__.get(e)},JD=function(e){return this.__data__.has(e)},eR=function(e,t){var r=this.__data__;if(r instanceof HD){var n=r.__data__;if(!YD||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new KD(n)}return r.set(e,t),this.size=r.size,this};function tR(e){var t=this.__data__=new GD(e);this.size=t.size}tR.prototype.clear=XD,tR.prototype.delete=QD,tR.prototype.get=ZD,tR.prototype.has=JD,tR.prototype.set=eR;var rR=tR;var nR=XM,sR=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},aR=function(e){return this.__data__.has(e)};function iR(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new nR;++t<r;)this.add(e[t])}iR.prototype.add=iR.prototype.push=sR,iR.prototype.has=aR;var oR=iR;var lR=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var cR=function(e,t){return e.has(t)},dR=oR,uR=lR,mR=cR;var hR=function(e,t,r,n,s,a){var i=1&r,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var u=-1,m=!0,h=2&r?new dR:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var p=e[u],f=t[u];if(n)var x=i?n(f,p,u,t,e,a):n(p,f,u,e,t,a);if(void 0!==x){if(x)continue;m=!1;break}if(h){if(!uR(t,function(e,t){if(!mR(h,t)&&(p===e||s(p,e,r,n,a)))return h.push(t)})){m=!1;break}}else if(p!==f&&!s(p,f,r,n,a)){m=!1;break}}return a.delete(e),a.delete(t),m};var pR=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},fR=lO.Uint8Array,xR=yM,gR=hR,vR=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},yR=pR,jR=cO?cO.prototype:void 0,bR=jR?jR.valueOf:void 0;var wR=function(e,t,r,n,s,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new fR(e),new fR(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xR(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=vR;case"[object Set]":var l=1&n;if(o||(o=yR),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var d=gR(o(e),o(t),n,s,a,i);return i.delete(e),d;case"[object Symbol]":if(bR)return bR.call(e)==bR.call(t)}return!1};var NR=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e},_R=NR,SR=sO;var kR=function(e,t,r){var n=t(e);return SR(e)?n:_R(n,r(e))};var CR=function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[s++]=i)}return a},ER=function(){return[]},OR=Object.prototype.propertyIsEnumerable,MR=Object.getOwnPropertySymbols,PR=MR?function(e){return null==e?[]:(e=Object(e),CR(MR(e),function(t){return OR.call(e,t)}))}:ER;var AR=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},TR=jO,DR=bO;var RR,LR,qR,IR,FR,zR,BR,$R,UR=function(e){return DR(e)&&"[object Arguments]"==TR(e)},VR=bO,WR=Object.prototype,HR=WR.hasOwnProperty,YR=WR.propertyIsEnumerable,KR=UR(function(){return arguments}())?UR:function(e){return VR(e)&&HR.call(e,"callee")&&!YR.call(e,"callee")},GR={exports:{}};RR=GR,qR=lO,IR=function(){return!1},FR=(LR=GR.exports)&&!LR.nodeType&&LR,zR=FR&&RR&&!RR.nodeType&&RR,BR=zR&&zR.exports===FR?qR.Buffer:void 0,$R=(BR?BR.isBuffer:void 0)||IR,RR.exports=$R;var XR=GR.exports,QR=/^(?:0|[1-9]\d*)$/;var ZR=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&QR.test(e))&&e>-1&&e%1==0&&e<t};var JR=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},eL=jO,tL=JR,rL=bO,nL={};nL["[object Float32Array]"]=nL["[object Float64Array]"]=nL["[object Int8Array]"]=nL["[object Int16Array]"]=nL["[object Int32Array]"]=nL["[object Uint8Array]"]=nL["[object Uint8ClampedArray]"]=nL["[object Uint16Array]"]=nL["[object Uint32Array]"]=!0,nL["[object Arguments]"]=nL["[object Array]"]=nL["[object ArrayBuffer]"]=nL["[object Boolean]"]=nL["[object DataView]"]=nL["[object Date]"]=nL["[object Error]"]=nL["[object Function]"]=nL["[object Map]"]=nL["[object Number]"]=nL["[object Object]"]=nL["[object RegExp]"]=nL["[object Set]"]=nL["[object String]"]=nL["[object WeakMap]"]=!1;var sL=function(e){return rL(e)&&tL(e.length)&&!!nL[eL(e)]};var aL=function(e){return function(t){return e(t)}},iL={exports:{}};!function(e,t){var r=aO,n=t&&!t.nodeType&&t,s=n&&e&&!e.nodeType&&e,a=s&&s.exports===n&&r.process,i=function(){try{var e=s&&s.require&&s.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(mte){}}();e.exports=i}(iL,iL.exports);var oL=iL.exports,lL=sL,cL=aL,dL=oL&&oL.isTypedArray,uL=dL?cL(dL):lL,mL=AR,hL=KR,pL=sO,fL=XR,xL=ZR,gL=uL,vL=Object.prototype.hasOwnProperty;var yL=function(e,t){var r=pL(e),n=!r&&hL(e),s=!r&&!n&&fL(e),a=!r&&!n&&!s&&gL(e),i=r||n||s||a,o=i?mL(e.length,String):[],l=o.length;for(var c in e)!t&&!vL.call(e,c)||i&&("length"==c||s&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xL(c,l))||o.push(c);return o},jL=Object.prototype;var bL=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jL)};var wL=function(e,t){return function(r){return e(t(r))}},NL=wL(Object.keys,Object),_L=bL,SL=NL,kL=Object.prototype.hasOwnProperty;var CL=DO,EL=JR;var OL=function(e){return null!=e&&EL(e.length)&&!CL(e)},ML=yL,PL=function(e){if(!_L(e))return SL(e);var t=[];for(var r in Object(e))kL.call(e,r)&&"constructor"!=r&&t.push(r);return t},AL=OL;var TL=function(e){return AL(e)?ML(e):PL(e)},DL=kR,RL=PR,LL=TL;var qL=function(e){return DL(e,LL,RL)},IL=Object.prototype.hasOwnProperty;var FL=function(e,t,r,n,s,a){var i=1&r,o=qL(e),l=o.length;if(l!=qL(t).length&&!i)return!1;for(var c=l;c--;){var d=o[c];if(!(i?d in t:IL.call(t,d)))return!1}var u=a.get(e),m=a.get(t);if(u&&m)return u==t&&m==e;var h=!0;a.set(e,t),a.set(t,e);for(var p=i;++c<l;){var f=e[d=o[c]],x=t[d];if(n)var g=i?n(x,f,d,t,e,a):n(f,x,d,e,t,a);if(!(void 0===g?f===x||s(f,x,r,n,a):g)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(h=!1)}return a.delete(e),a.delete(t),h},zL=eM(lO,"DataView"),BL=eM(lO,"Promise"),$L=eM(lO,"Set"),UL=zL,VL=DM,WL=BL,HL=$L,YL=eM(lO,"WeakMap"),KL=jO,GL=BO,XL="[object Map]",QL="[object Promise]",ZL="[object Set]",JL="[object WeakMap]",eq="[object DataView]",tq=GL(UL),rq=GL(VL),nq=GL(WL),sq=GL(HL),aq=GL(YL),iq=KL;(UL&&iq(new UL(new ArrayBuffer(1)))!=eq||VL&&iq(new VL)!=XL||WL&&iq(WL.resolve())!=QL||HL&&iq(new HL)!=ZL||YL&&iq(new YL)!=JL)&&(iq=function(e){var t=KL(e),r="[object Object]"==t?e.constructor:void 0,n=r?GL(r):"";if(n)switch(n){case tq:return eq;case rq:return XL;case nq:return QL;case sq:return ZL;case aq:return JL}return t});var oq=rR,lq=hR,cq=wR,dq=FL,uq=iq,mq=sO,hq=XR,pq=uL,fq="[object Arguments]",xq="[object Array]",gq="[object Object]",vq=Object.prototype.hasOwnProperty;var yq=function(e,t,r,n,s,a){var i=mq(e),o=mq(t),l=i?xq:uq(e),c=o?xq:uq(t),d=(l=l==fq?gq:l)==gq,u=(c=c==fq?gq:c)==gq,m=l==c;if(m&&hq(e)){if(!hq(t))return!1;i=!0,d=!1}if(m&&!d)return a||(a=new oq),i||pq(e)?lq(e,t,r,n,s,a):cq(e,t,l,r,n,s,a);if(!(1&r)){var h=d&&vq.call(e,"__wrapped__"),p=u&&vq.call(t,"__wrapped__");if(h||p){var f=h?e.value():e,x=p?t.value():t;return a||(a=new oq),s(f,x,r,n,a)}}return!!m&&(a||(a=new oq),dq(e,t,r,n,s,a))},jq=bO;var bq=function e(t,r,n,s,a){return t===r||(null==t||null==r||!jq(t)&&!jq(r)?t!=t&&r!=r:yq(t,r,n,s,e,a))},wq=rR,Nq=bq;var _q=MO;var Sq=function(e){return e==e&&!_q(e)},kq=Sq,Cq=TL;var Eq=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},Oq=function(e,t,r,n){var s=r.length,a=s,i=!n;if(null==e)return!a;for(e=Object(e);s--;){var o=r[s];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<a;){var l=(o=r[s])[0],c=e[l],d=o[1];if(i&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new wq;if(n)var m=n(c,d,l,e,t,u);if(!(void 0===m?Nq(d,c,3,n,u):m))return!1}}return!0},Mq=function(e){for(var t=Cq(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,kq(s)]}return t},Pq=Eq;var Aq=vP,Tq=KR,Dq=sO,Rq=ZR,Lq=JR,qq=jP;var Iq=function(e,t){return null!=e&&t in Object(e)},Fq=function(e,t,r){for(var n=-1,s=(t=Aq(t,e)).length,a=!1;++n<s;){var i=qq(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=s?a:!!(s=null==e?0:e.length)&&Lq(s)&&Rq(i,s)&&(Dq(e)||Tq(e))};var zq=bq,Bq=SP,$q=function(e,t){return null!=e&&Fq(e,t,Iq)},Uq=OO,Vq=Sq,Wq=Eq,Hq=jP;var Yq=function(e){return e};var Kq=NP;var Gq=function(e){return function(t){return null==t?void 0:t[e]}},Xq=function(e){return function(t){return Kq(t,e)}},Qq=OO,Zq=jP;var Jq=function(e){var t=Mq(e);return 1==t.length&&t[0][2]?Pq(t[0][0],t[0][1]):function(r){return r===e||Oq(r,e,t)}},eI=function(e,t){return Uq(e)&&Vq(t)?Wq(Hq(e),t):function(r){var n=Bq(r,e);return void 0===n&&n===t?$q(r,e):zq(t,n,3)}},tI=Yq,rI=sO,nI=function(e){return Qq(e)?Gq(Zq(e)):Xq(e)};var sI=function(e){return"function"==typeof e?e:null==e?tI:"object"==typeof e?rI(e)?eI(e[0],e[1]):Jq(e):nI(e)};var aI=function(e,t,r,n){for(var s=e.length,a=r+(n?1:-1);n?a--:++a<s;)if(t(e[a],a,e))return a;return-1};var iI=aI,oI=function(e){return e!=e},lI=function(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1};var cI=function(e,t,r){return t==t?lI(e,t,r):iI(e,oI,r)};var dI=function(e,t){return!!(null==e?0:e.length)&&cI(e,t,0)>-1};var uI=function(e,t,r){for(var n=-1,s=null==e?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1};var mI=$L,hI=function(){},pI=mI&&1/pR(new mI([,-0]))[1]==1/0?function(e){return new mI(e)}:hI,fI=oR,xI=dI,gI=uI,vI=cR,yI=pI,jI=pR;var bI=sI,wI=function(e,t,r){var n=-1,s=xI,a=e.length,i=!0,o=[],l=o;if(r)i=!1,s=gI;else if(a>=200){var c=t?null:yI(e);if(c)return jI(c);i=!1,s=vI,l=new fI}else l=t?[]:o;e:for(;++n<a;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u==u){for(var m=l.length;m--;)if(l[m]===u)continue e;t&&l.push(u),o.push(d)}else s(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o};const NI=Ee(function(e,t){return e&&e.length?wI(e,bI(t)):[]});function _I(e,t,r){return!0===t?NI(e,r):RO(t)?NI(e,t):e}function SI(e){return(SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kI=["ref"];function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(t){DI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function OI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RI(n.key),n)}}function MI(e,t,r){return t=AI(t),function(e,t){if(t&&("object"===SI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,PI()?Reflect.construct(t,r||[],AI(e).constructor):t.apply(e,r))}function PI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(PI=function(){return!!e})()}function AI(e){return(AI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TI(e,t){return(TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DI(e,t,r){return(t=RI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RI(e){var t=function(e,t){if("object"!=SI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SI(t)?t:t+""}function LI(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qI(e){return e.value}var II=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return DI(t=MI(this,e,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TI(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"getWithHeight",value:function(e,t){var r=EI(EI({},this.defaultProps),e.props).layout;return"vertical"===r&&aA(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?EI({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,s=n.layout,a=n.align,i=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===a&&"vertical"===s?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===a?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),EI(EI({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,s=t.height,a=t.wrapperStyle,i=t.payloadUniqBy,o=t.payload,l=EI(EI({position:"absolute",width:n||"auto",height:s||"auto"},this.getDefaultPosition(a)),a);return ke.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(ke.isValidElement(e))return ke.cloneElement(e,t);if("function"==typeof e)return ke.createElement(e,t);t.ref;var r=LI(t,kI);return ke.createElement(VD,r)}(r,EI(EI({},this.props),{},{payload:_I(o,i,qI)})))}}])&&OI(t.prototype,r),n&&OI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();DI(II,"displayName","Legend"),DI(II,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var FI=KR,zI=sO,BI=cO?cO.isConcatSpreadable:void 0;var $I=NR,UI=function(e){return zI(e)||FI(e)||!!(BI&&e&&e[BI])};var VI=function e(t,r,n,s,a){var i=-1,o=t.length;for(n||(n=UI),a||(a=[]);++i<o;){var l=t[i];r>0&&n(l)?r>1?e(l,r-1,n,s,a):$I(a,l):s||(a[a.length]=l)}return a};var WI=function(e){return function(t,r,n){for(var s=-1,a=Object(t),i=n(t),o=i.length;o--;){var l=i[e?o:++s];if(!1===r(a[l],l,a))break}return t}}(),HI=TL;var YI=function(e,t){return e&&WI(e,t,HI)},KI=OL;var GI=function(e,t){return function(r,n){if(null==r)return r;if(!KI(r))return e(r,n);for(var s=r.length,a=t?s:-1,i=Object(r);(t?a--:++a<s)&&!1!==n(i[a],a,i););return r}}(YI),XI=GI,QI=OL;var ZI=function(e,t){var r=-1,n=QI(e)?Array(e.length):[];return XI(e,function(e,s,a){n[++r]=t(e,s,a)}),n};var JI=_O;var eF=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,s=e==e,a=JI(e),i=void 0!==t,o=null===t,l=t==t,c=JI(t);if(!o&&!c&&!a&&e>t||a&&i&&l&&!o&&!c||n&&i&&l||!r&&l||!s)return 1;if(!n&&!a&&!c&&e<t||c&&r&&s&&!n&&!a||o&&r&&s||!i&&s||!l)return-1}return 0};var tF=aP,rF=NP,nF=sI,sF=ZI,aF=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},iF=aL,oF=function(e,t,r){for(var n=-1,s=e.criteria,a=t.criteria,i=s.length,o=r.length;++n<i;){var l=eF(s[n],a[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index},lF=Yq,cF=sO;var dF=function(e,t,r){t=t.length?tF(t,function(e){return cF(e)?function(t){return rF(t,1===e.length?e[0]:e)}:e}):[lF];var n=-1;t=tF(t,iF(nF));var s=sF(e,function(e,r,s){return{criteria:tF(t,function(t){return t(e)}),index:++n,value:e}});return aF(s,function(e,t){return oF(e,t,r)})};var uF=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},mF=uF,hF=Math.max;var pF=function(e,t,r){return t=hF(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,a=hF(n.length-t,0),i=Array(a);++s<a;)i[s]=n[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=n[s];return o[t]=r(i),mF(e,this,o)}};var fF=function(e){return function(){return e}},xF=eM,gF=function(){try{var e=xF(Object,"defineProperty");return e({},"",{}),e}catch(mte){}}(),vF=fF,yF=gF,jF=yF?function(e,t){return yF(e,"toString",{configurable:!0,enumerable:!1,value:vF(t),writable:!0})}:Yq,bF=Date.now;var wF=function(e){var t=0,r=0;return function(){var n=bF(),s=16-(n-r);if(r=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(jF),NF=Yq,_F=pF,SF=wF;var kF=yM,CF=OL,EF=ZR,OF=MO;var MF=function(e,t,r){if(!OF(r))return!1;var n=typeof t;return!!("number"==n?CF(r)&&EF(t,r.length):"string"==n&&t in r)&&kF(r[t],e)},PF=VI,AF=dF,TF=MF;const DF=Ee(function(e,t){return SF(_F(e,t,NF),e+"")}(function(e,t){if(null==e)return[];var r=t.length;return r>1&&TF(e,t[0],t[1])?t=[]:r>2&&TF(t[0],t[1],t[2])&&(t=[t[0]]),AF(e,PF(t,1),[])}));function RF(e){return(RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LF(){return LF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LF.apply(this,arguments)}function qF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FF(Object(r),!0).forEach(function(t){BF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BF(e,t,r){var n;return n=function(e,t){if("object"!=RF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==RF(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $F(e){return Array.isArray(e)&&iA(e[0])&&iA(e[1])?e.join(" ~ "):e}var UF=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,s=void 0===n?{}:n,a=e.itemStyle,i=void 0===a?{}:a,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,m=e.wrapperClassName,h=e.labelClassName,p=e.label,f=e.labelFormatter,x=e.accessibilityLayer,g=void 0!==x&&x,v=zF({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),y=zF({margin:0},l),j=!CP(p),b=j?p:"",w=Pr("recharts-default-tooltip",m),N=Pr("recharts-tooltip-label",h);j&&f&&null!=c&&(b=f(p,c));var _=g?{role:"status","aria-live":"assertive"}:{};return ke.createElement("div",LF({className:w,style:v},_),ke.createElement("p",{className:N,style:y},ke.isValidElement(b)?b:"".concat(b)),function(){if(c&&c.length){var e=(u?DF(c,u):c).map(function(e,t){if("none"===e.type)return null;var n=zF({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),s=e.formatter||d||$F,a=e.value,o=e.name,l=a,u=o;if(s&&null!=l&&null!=u){var m=s(a,o,e,t,c);if(Array.isArray(m)){var h=qF(m,2);l=h[0],u=h[1]}else l=m}return ke.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},iA(u)?ke.createElement("span",{className:"recharts-tooltip-item-name"},u):null,iA(u)?ke.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ke.createElement("span",{className:"recharts-tooltip-item-value"},l),ke.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return ke.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function VF(e){return(VF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WF(e,t,r){var n;return n=function(e,t){if("object"!=VF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==VF(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var HF="recharts-tooltip-wrapper",YF={visibility:"hidden"};function KF(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Pr(HF,WF(WF(WF(WF({},"".concat(HF,"-right"),aA(r)&&t&&aA(t.x)&&r>=t.x),"".concat(HF,"-left"),aA(r)&&t&&aA(t.x)&&r<t.x),"".concat(HF,"-bottom"),aA(n)&&t&&aA(t.y)&&n>=t.y),"".concat(HF,"-top"),aA(n)&&t&&aA(t.y)&&n<t.y))}function GF(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&aA(a[n]))return a[n];var d=r[n]-o-s,u=r[n]+s;return t[n]?i[n]?d:u:i[n]?d<l[n]?Math.max(u,l[n]):Math.max(d,l[n]):u+o>l[n]+c?Math.max(d,l[n]):Math.max(u,l[n])}function XF(e){return(XF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QF(Object(r),!0).forEach(function(t){sz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JF(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,az(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ez(e,t,r){return t=rz(t),function(e,t){if(t&&("object"===XF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tz()?Reflect.construct(t,r||[],rz(e).constructor):t.apply(e,r))}function tz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(tz=function(){return!!e})()}function rz(e){return(rz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nz(e,t){return(nz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sz(e,t,r){return(t=az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=function(e,t){if("object"!=XF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XF(t)?t:t+""}var iz=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return sz(t=ez(this,e,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),sz(t,"handleKeyDown",function(e){var r,n,s,a;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=t.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(s=null===(a=t.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==s?s:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nz(e,t)}(e,Ne.PureComponent),JF(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,s=t.animationDuration,a=t.animationEasing,i=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,m=t.reverseDirection,h=t.useTranslate3d,p=t.viewBox,f=t.wrapperStyle,x=function(e){var t,r,n=e.allowEscapeViewBox,s=e.coordinate,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&s?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=GF({allowEscapeViewBox:n,coordinate:s,key:"x",offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:r=GF({allowEscapeViewBox:n,coordinate:s,key:"y",offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):YF,cssClasses:KF({translateX:t,translateY:r,coordinate:s})}}({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:h,viewBox:p}),g=x.cssClasses,v=x.cssProperties,y=ZF(ZF({transition:c&&r?"transform ".concat(s,"ms ").concat(a):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return ke.createElement("div",{tabIndex:-1,className:g,style:y,ref:function(t){e.wrapperNode=t}},i)}}])}(),oz={isSsr:!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return oz[e]},set:function(e,t){if("string"==typeof e)oz[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){oz[t]=e[t]})}}};function lz(e){return(lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cz(Object(r),!0).forEach(function(t){xz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uz(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gz(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mz(e,t,r){return t=pz(t),function(e,t){if(t&&("object"===lz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hz()?Reflect.construct(t,r||[],pz(e).constructor):t.apply(e,r))}function hz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hz=function(){return!!e})()}function pz(e){return(pz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fz(e,t){return(fz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xz(e,t,r){return(t=gz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gz(e){var t=function(e,t){if("object"!=lz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lz(t)?t:t+""}function vz(e){return e.dataKey}var yz=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mz(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fz(e,t)}(e,Ne.PureComponent),uz(e,[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,s=t.animationDuration,a=t.animationEasing,i=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,m=t.payloadUniqBy,h=t.position,p=t.reverseDirection,f=t.useTranslate3d,x=t.viewBox,g=t.wrapperStyle,v=null!=u?u:[];l&&v.length&&(v=_I(u.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),m,vz));var y=v.length>0;return ke.createElement(iz,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:r,coordinate:o,hasPayload:y,offset:d,position:h,reverseDirection:p,useTranslate3d:f,viewBox:x,wrapperStyle:g},function(e,t){return ke.isValidElement(e)?ke.cloneElement(e,t):"function"==typeof e?ke.createElement(e,t):ke.createElement(UF,t)}(i,dz(dz({},this.props),{},{payload:v})))}}])}();xz(yz,"displayName","Tooltip"),xz(yz,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!oz.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var jz=lO,bz=/\s/;var wz=function(e){for(var t=e.length;t--&&bz.test(e.charAt(t)););return t},Nz=/^\s+/;var _z=function(e){return e?e.slice(0,wz(e)+1).replace(Nz,""):e},Sz=MO,kz=_O,Cz=/^[-+]0x[0-9a-f]+$/i,Ez=/^0b[01]+$/i,Oz=/^0o[0-7]+$/i,Mz=parseInt;var Pz=function(e){if("number"==typeof e)return e;if(kz(e))return NaN;if(Sz(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Sz(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=_z(e);var r=Ez.test(e);return r||Oz.test(e)?Mz(e.slice(2),r?2:8):Cz.test(e)?NaN:+e},Az=MO,Tz=function(){return jz.Date.now()},Dz=Pz,Rz=Math.max,Lz=Math.min;var qz=function(e,t,r){var n,s,a,i,o,l,c=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var r=n,a=s;return n=s=void 0,c=t,i=e.apply(a,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||u&&e-c>=a}function f(){var e=Tz();if(p(e))return x(e);o=setTimeout(f,function(e){var r=t-(e-l);return u?Lz(r,a-(e-c)):r}(e))}function x(e){return o=void 0,m&&n?h(e):(n=s=void 0,i)}function g(){var e=Tz(),r=p(e);if(n=arguments,s=this,l=e,r){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),d?h(e):i}(l);if(u)return clearTimeout(o),o=setTimeout(f,t),h(l)}return void 0===o&&(o=setTimeout(f,t)),i}return t=Dz(t)||0,Az(r)&&(d=!!r.leading,a=(u="maxWait"in r)?Rz(Dz(r.maxWait)||0,t):a,m="trailing"in r?!!r.trailing:m),g.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=s=o=void 0},g.flush=function(){return void 0===o?i:x(Tz())},g},Iz=qz,Fz=MO;var zz=function(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Fz(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),Iz(e,t,{leading:n,maxWait:t,trailing:s})};const Bz=Ee(zz);function $z(e){return($z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uz(Object(r),!0).forEach(function(t){Wz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wz(e,t,r){var n;return n=function(e,t){if("object"!=$z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==$z(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yz(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kz=Ne.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=void 0===n?{width:-1,height:-1}:n,a=e.width,i=void 0===a?"100%":a,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,m=e.maxHeight,h=e.children,p=e.debounce,f=void 0===p?0:p,x=e.id,g=e.className,v=e.onResize,y=e.style,j=void 0===y?{}:y,b=Ne.useRef(null),w=Ne.useRef();w.current=v,Ne.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return b.current},configurable:!0})});var N=Hz(Ne.useState({containerWidth:s.width,containerHeight:s.height}),2),_=N[0],S=N[1],k=Ne.useCallback(function(e,t){S(function(r){var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]);Ne.useEffect(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,s=r.height;k(n,s),null===(t=w.current)||void 0===t||t.call(w,n,s)};f>0&&(e=Bz(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=b.current.getBoundingClientRect(),n=r.width,s=r.height;return k(n,s),t.observe(b.current),function(){t.disconnect()}},[k,f]);var C=Ne.useMemo(function(){var e=_.containerWidth,t=_.containerHeight;if(e<0||t<0)return null;YA(sA(i)||sA(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",i,l),YA(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=sA(i)?e:i,s=sA(l)?t:l;r&&r>0&&(n?s=n/r:s&&(n=s*r),m&&s>m&&(s=m)),YA(n>0||s>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,s,i,l,d,u,r);var a=!Array.isArray(h)&&kA(h.type).endsWith("Chart");return ke.Children.map(h,function(e){return XP.isElement(e)?Ne.cloneElement(e,Vz({width:n,height:s},a?{style:Vz({height:"100%",width:"100%",maxHeight:s,maxWidth:n},e.props.style)}:{})):e})},[r,h,l,m,u,d,_,i]);return ke.createElement("div",{id:x?"".concat(x):void 0,className:Pr("recharts-responsive-container",g),style:Vz(Vz({},j),{},{width:i,height:l,minWidth:d,minHeight:u,maxHeight:m}),ref:b},C)}),Gz=function(e){return null};function Xz(e){return(Xz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qz(Object(r),!0).forEach(function(t){Jz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jz(e,t,r){var n;return n=function(e,t){if("object"!=Xz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Xz(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Gz.displayName="Cell";var eB={widthCache:{},cacheCount:0},tB={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rB="recharts_measurement_span";var nB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||oz.isSsr)return{width:0,height:0};var r,n=(r=Zz({},t),Object.keys(r).forEach(function(e){r[e]||delete r[e]}),r),s=JSON.stringify({text:e,copyStyle:n});if(eB.widthCache[s])return eB.widthCache[s];try{var a=document.getElementById(rB);a||((a=document.createElement("span")).setAttribute("id",rB),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var i=Zz(Zz({},tB),n);Object.assign(a.style,i),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return eB.widthCache[s]=l,++eB.cacheCount>2e3&&(eB.cacheCount=0,eB.widthCache={}),l}catch(mte){return{width:0,height:0}}};function sB(e){return(sB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lB(n.key),n)}}function lB(e){var t=function(e,t){if("object"!=sB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=sB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==sB(t)?t:t+""}var cB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uB=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mB=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},pB=Object.keys(hB),fB="NaN";var xB=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||uB.test(r)||(this.num=NaN,this.unit=""),pB.includes(r)&&(this.num=function(e,t){return e*hB[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=aB(null!==(r=mB.exec(t))&&void 0!==r?r:[],3),s=n[1],a=n[2];return new e(parseFloat(s),null!=a?a:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&oB(t.prototype,r),n&&oB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function gB(e){if(e.includes(fB))return fB;for(var t=e;t.includes("*")||t.includes("/");){var r,n=aB(null!==(r=cB.exec(t))&&void 0!==r?r:[],4),s=n[1],a=n[2],i=n[3],o=xB.parse(null!=s?s:""),l=xB.parse(null!=i?i:""),c="*"===a?o.multiply(l):o.divide(l);if(c.isNaN())return fB;t=t.replace(cB,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=aB(null!==(d=dB.exec(t))&&void 0!==d?d:[],4),m=u[1],h=u[2],p=u[3],f=xB.parse(null!=m?m:""),x=xB.parse(null!=p?p:""),g="+"===h?f.add(x):f.subtract(x);if(g.isNaN())return fB;t=t.replace(dB,g.toString())}return t}var vB=/\(([^()]*)\)/;function yB(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=aB(vB.exec(t),2)[1];t=t.replace(vB,gB(r))}return t}(t),t=gB(t)}function jB(e){var t=function(e){try{return yB(e)}catch(mte){return fB}}(e.slice(5,-1));return t===fB?"":t}var bB=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wB=["dx","dy","angle","className","breakAll"];function NB(){return NB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NB.apply(this,arguments)}function _B(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function SB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CB=/[ \f\n\r\t\v\u2028\u2029]+/,EB=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var s=[];return CP(t)||(s=r?t.toString().split(""):t.toString().split(CB)),{wordsWithComputedWidth:s.map(function(e){return{word:e,width:nB(e,n).width}}),spaceWidth:r?0:nB(" ",n).width}}catch(mte){return null}},OB=function(e){return[{words:CP(e)?[]:e.toString().split(CB)}]},MB=function(e){var t=e.width,r=e.scaleToFit,n=e.children,s=e.style,a=e.breakAll,i=e.maxLines;if((t||r)&&!oz.isSsr){var o=EB({breakAll:a,children:n,style:s});return o?function(e,t,r,n,s){var a=e.maxLines,i=e.children,o=e.style,l=e.breakAll,c=aA(a),d=i,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var a=t.word,i=t.width,o=e[e.length-1];if(o&&(null==n||s||o.width+i+r<Number(n)))o.words.push(a),o.width+=i+r;else{var l={words:[a],width:i};e.push(l)}return e},[])},m=u(t);if(!c)return m;for(var h,p=function(e){var t=d.slice(0,e),r=EB({breakAll:l,style:o,children:t+"…"}).wordsWithComputedWidth,s=u(r),i=s.length>a||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(s).width>Number(n);return[i,s]},f=0,x=d.length-1,g=0;f<=x&&g<=d.length-1;){var v=Math.floor((f+x)/2),y=SB(p(v-1),2),j=y[0],b=y[1],w=SB(p(v),1)[0];if(j||w||(f=v+1),j&&w&&(x=v-1),!j&&w){h=b;break}g++}return h||m}({breakAll:a,children:n,maxLines:i,style:s},o.wordsWithComputedWidth,o.spaceWidth,t,r):OB(n)}return OB(n)},PB="#808080",AB=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,s=void 0===n?0:n,a=e.lineHeight,i=void 0===a?"1em":a,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,m=void 0===u?"start":u,h=e.verticalAnchor,p=void 0===h?"end":h,f=e.fill,x=void 0===f?PB:f,g=_B(e,bB),v=Ne.useMemo(function(){return MB({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),y=g.dx,j=g.dy,b=g.angle,w=g.className,N=g.breakAll,_=_B(g,wB);if(!iA(r)||!iA(s))return null;var S,k=r+(aA(y)?y:0),C=s+(aA(j)?j:0);switch(p){case"start":S=jB("calc(".concat(l,")"));break;case"middle":S=jB("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:S=jB("calc(".concat(v.length-1," * -").concat(i,")"))}var E=[];if(d){var O=v[0].width,M=g.width;E.push("scale(".concat((aA(M)?M/O:1)/O,")"))}return b&&E.push("rotate(".concat(b,", ").concat(k,", ").concat(C,")")),E.length&&(_.transform=E.join(" ")),ke.createElement("text",NB({},RA(_,!0),{x:k,y:C,className:Pr("recharts-text",w),textAnchor:m,fill:x.includes("url")?PB:x}),v.map(function(e,t){var r=e.words.join(N?"":" ");return ke.createElement("tspan",{x:k,dy:0===t?S:i,key:"".concat(r,"-").concat(t)},r)}))};function TB(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function DB(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function RB(e){let t,r,n;function s(e,n,s=0,a=e.length){if(s<a){if(0!==t(n,n))return a;do{const t=s+a>>>1;r(e[t],n)<0?s=t+1:a=t}while(s<a)}return s}return 2!==e.length?(t=TB,r=(t,r)=>TB(e(t),r),n=(t,r)=>e(t)-r):(t=e===TB||e===DB?e:LB,r=e,n=e),{left:s,center:function(e,t,r=0,a=e.length){const i=s(e,t,r,a-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n,s=0,a=e.length){if(s<a){if(0!==t(n,n))return a;do{const t=s+a>>>1;r(e[t],n)<=0?s=t+1:a=t}while(s<a)}return s}}}function LB(){return 0}function qB(e){return null===e?NaN:+e}const IB=RB(TB).right;RB(qB).center;class FB extends Map{constructor(e,t=BB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(zB(this,e))}has(e){return super.has(zB(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);e.has(n)&&(r=e.get(n),e.delete(n));return r}(this,e))}}function zB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function BB(e){return null!==e&&"object"==typeof e?e.valueOf():e}function $B(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const UB=Math.sqrt(50),VB=Math.sqrt(10),WB=Math.sqrt(2);function HB(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=UB?10:a>=VB?5:a>=WB?2:1;let o,l,c;return s<0?(c=Math.pow(10,-s)/i,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*i,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?HB(e,t,2*r):[o,l,c]}function YB(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[s,a,i]=n?HB(t,e,r):HB(e,t,r);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(n)if(i<0)for(let c=0;c<o;++c)l[c]=(a-c)/-i;else for(let c=0;c<o;++c)l[c]=(a-c)*i;else if(i<0)for(let c=0;c<o;++c)l[c]=(s+c)/-i;else for(let c=0;c<o;++c)l[c]=(s+c)*i;return l}function KB(e,t,r){return HB(e=+e,t=+t,r=+r)[2]}function GB(e,t,r){r=+r;const n=(t=+t)<(e=+e),s=n?KB(t,e,r):KB(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function XB(e,t){let r;for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);return r}function QB(e,t){let r;for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);return r}function ZB(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=void 0===s?$B:function(e=TB){if(e===TB)return $B;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(s);n>r;){if(n-r>600){const a=n-r+1,i=t-r+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(i-a/2<0?-1:1);ZB(e,t,Math.max(r,Math.floor(t-i*l/a+c)),Math.min(n,Math.floor(t+(a-i)*l/a+c)),s)}const a=e[t];let i=r,o=n;for(JB(e,r,t),s(e[n],a)>0&&JB(e,r,n);i<o;){for(JB(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}0===s(e[r],a)?JB(e,r,o):(++o,JB(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function JB(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function e$(e,t,r=qB){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e);return i+(+r(e[a+1],a+1,e)-i)*(s-a)}}function t$(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function r$(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const n$=Symbol("implicit");function s$(){var e=new FB,t=[],r=[],n=n$;function s(s){let a=e.get(s);if(void 0===a){if(n!==n$)return n;e.set(s,a=t.push(s)-1)}return r[a%r.length]}return s.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new FB;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return s},s.range=function(e){return arguments.length?(r=Array.from(e),s):r.slice()},s.unknown=function(e){return arguments.length?(n=e,s):n},s.copy=function(){return s$(t,r).unknown(n)},t$.apply(s,arguments),s}function a$(){var e,t,r=s$().unknown(void 0),n=r.domain,s=r.range,a=0,i=1,o=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=i<a,m=u?i:a,h=u?a:i;e=(h-m)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),m+=(h-m-e*(r-l))*d,t=e*(1-l),o&&(m=Math.round(m),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(s);++n<s;)a[n]=e+n*r;return a}(r).map(function(t){return m+e*t});return s(u?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([a,i]=e,a=+a,i=+i,u()):[a,i]},r.rangeRound=function(e){return[a,i]=e,a=+a,i=+i,o=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,u()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return a$(n(),[a,i]).round(o).paddingInner(l).paddingOuter(c).align(d)},t$.apply(u(),arguments)}function i$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return i$(t())},e}function o$(){return i$(a$.apply(null,arguments).paddingInner(1))}function l$(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function c$(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function d$(){}var u$=.7,m$=1/u$,h$="\\s*([+-]?\\d+)\\s*",p$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",f$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x$=/^#([0-9a-f]{3,8})$/,g$=new RegExp(`^rgb\\(${h$},${h$},${h$}\\)$`),v$=new RegExp(`^rgb\\(${f$},${f$},${f$}\\)$`),y$=new RegExp(`^rgba\\(${h$},${h$},${h$},${p$}\\)$`),j$=new RegExp(`^rgba\\(${f$},${f$},${f$},${p$}\\)$`),b$=new RegExp(`^hsl\\(${p$},${f$},${f$}\\)$`),w$=new RegExp(`^hsla\\(${p$},${f$},${f$},${p$}\\)$`),N$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _$(){return this.rgb().formatHex()}function S$(){return this.rgb().formatRgb()}function k$(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=x$.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?C$(t):3===r?new M$(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?E$(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?E$(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=g$.exec(e))?new M$(t[1],t[2],t[3],1):(t=v$.exec(e))?new M$(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=y$.exec(e))?E$(t[1],t[2],t[3],t[4]):(t=j$.exec(e))?E$(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=b$.exec(e))?L$(t[1],t[2]/100,t[3]/100,1):(t=w$.exec(e))?L$(t[1],t[2]/100,t[3]/100,t[4]):N$.hasOwnProperty(e)?C$(N$[e]):"transparent"===e?new M$(NaN,NaN,NaN,0):null}function C$(e){return new M$(e>>16&255,e>>8&255,255&e,1)}function E$(e,t,r,n){return n<=0&&(e=t=r=NaN),new M$(e,t,r,n)}function O$(e,t,r,n){return 1===arguments.length?((s=e)instanceof d$||(s=k$(s)),s?new M$((s=s.rgb()).r,s.g,s.b,s.opacity):new M$):new M$(e,t,r,null==n?1:n);var s}function M$(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function P$(){return`#${R$(this.r)}${R$(this.g)}${R$(this.b)}`}function A$(){const e=T$(this.opacity);return`${1===e?"rgb(":"rgba("}${D$(this.r)}, ${D$(this.g)}, ${D$(this.b)}${1===e?")":`, ${e})`}`}function T$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function D$(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R$(e){return((e=D$(e))<16?"0":"")+e.toString(16)}function L$(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new I$(e,t,r,n)}function q$(e){if(e instanceof I$)return new I$(e.h,e.s,e.l,e.opacity);if(e instanceof d$||(e=k$(e)),!e)return new I$;if(e instanceof I$)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(i=t===a?(r-n)/o+6*(r<n):r===a?(n-t)/o+2:(t-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new I$(i,o,l,e.opacity)}function I$(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function F$(e){return(e=(e||0)%360)<0?e+360:e}function z$(e){return Math.max(0,Math.min(1,e||0))}function B$(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}l$(d$,k$,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_$,formatHex:_$,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return q$(this).formatHsl()},formatRgb:S$,toString:S$}),l$(M$,O$,c$(d$,{brighter(e){return e=null==e?m$:Math.pow(m$,e),new M$(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?u$:Math.pow(u$,e),new M$(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new M$(D$(this.r),D$(this.g),D$(this.b),T$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P$,formatHex:P$,formatHex8:function(){return`#${R$(this.r)}${R$(this.g)}${R$(this.b)}${R$(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:A$,toString:A$})),l$(I$,function(e,t,r,n){return 1===arguments.length?q$(e):new I$(e,t,r,null==n?1:n)},c$(d$,{brighter(e){return e=null==e?m$:Math.pow(m$,e),new I$(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?u$:Math.pow(u$,e),new I$(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new M$(B$(e>=240?e-240:e+120,s,n),B$(e,s,n),B$(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new I$(F$(this.h),z$(this.s),z$(this.l),T$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=T$(this.opacity);return`${1===e?"hsl(":"hsla("}${F$(this.h)}, ${100*z$(this.s)}%, ${100*z$(this.l)}%${1===e?")":`, ${e})`}`}}));const $$=e=>()=>e;function U$(e){return 1===(e=+e)?V$:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):$$(isNaN(t)?r:t)}}function V$(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):$$(isNaN(e)?t:e)}const W$=function e(t){var r=U$(t);function n(e,t){var n=r((e=O$(e)).r,(t=O$(t)).r),s=r(e.g,t.g),a=r(e.b,t.b),i=V$(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=s(t),e.b=a(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function H$(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,s=t.slice();return function(a){for(r=0;r<n;++r)s[r]=e[r]*(1-a)+t[r]*a;return s}}function Y$(e,t){var r,n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n);for(r=0;r<s;++r)a[r]=eU(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<s;++r)i[r]=a[r](e);return i}}function K$(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function G$(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function X$(e,t){var r,n={},s={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=eU(e[r],t[r]):s[r]=t[r];return function(e){for(r in n)s[r]=n[r](e);return s}}var Q$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z$=new RegExp(Q$.source,"g");function J$(e,t){var r,n,s,a=Q$.lastIndex=Z$.lastIndex=0,i=-1,o=[],l=[];for(e+="",t+="";(r=Q$.exec(e))&&(n=Z$.exec(t));)(s=n.index)>a&&(s=t.slice(a,s),o[i]?o[i]+=s:o[++i]=s),(r=r[0])===(n=n[0])?o[i]?o[i]+=n:o[++i]=n:(o[++i]=null,l.push({i:i,x:G$(r,n)})),a=Z$.lastIndex;return a<t.length&&(s=t.slice(a),o[i]?o[i]+=s:o[++i]=s),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function eU(e,t){var r,n,s=typeof t;return null==t||"boolean"===s?$$(t):("number"===s?G$:"string"===s?(r=k$(t))?(t=r,W$):J$:t instanceof k$?W$:t instanceof Date?K$:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Y$:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?X$:G$:H$))(e,t)}function tU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function rU(e){return+e}var nU=[0,1];function sU(e){return e}function aU(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function iU(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=aU(s,n),a=r(i,a)):(n=aU(n,s),a=r(a,i)),function(e){return a(n(e))}}function oU(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=aU(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(t){var r=IB(e,t,1,n)-1;return a[r](s[r](t))}}function lU(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cU(){var e,t,r,n,s,a,i=nU,o=nU,l=eU,c=sU;function d(){var e,t,r,l=Math.min(i.length,o.length);return c!==sU&&(e=i[0],t=i[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?oU:iU,s=a=null,u}function u(t){return null==t||isNaN(t=+t)?r:(s||(s=n(i.map(e),o,l)))(e(c(t)))}return u.invert=function(r){return c(t((a||(a=n(o,i.map(e),G$)))(r)))},u.domain=function(e){return arguments.length?(i=Array.from(e,rU),d()):i.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=tU,d()},u.clamp=function(e){return arguments.length?(c=!!e||sU,d()):c!==sU},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function dU(){return cU()(sU,sU)}function uU(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mU(e){return(e=uU(Math.abs(e)))?e[1]:NaN}var hU,pU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fU(e){if(!(t=pU.exec(e)))throw new Error("invalid format: "+e);var t;return new xU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function xU(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function gU(e,t){var r=uU(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}fU.prototype=xU.prototype,xU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const vU={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gU(100*e,t),r:gU,s:function(e,t){var r=uU(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(hU=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+uU(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yU(e){return e}var jU,bU,wU,NU=Array.prototype.map,_U=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function SU(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?yU:(t=NU.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var s=e.length,a=[],i=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(e.substring(s-=o,s+o)),!((l+=o+1)>n));)o=t[i=(i+1)%t.length];return a.reverse().join(r)}),s=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?yU:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(NU.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=fU(e)).fill,r=e.align,u=e.sign,m=e.symbol,h=e.zero,p=e.width,f=e.comma,x=e.precision,g=e.trim,v=e.type;"n"===v?(f=!0,v="g"):vU[v]||(void 0===x&&(x=12),g=!0,v="g"),(h||"0"===t&&"="===r)&&(h=!0,t="0",r="=");var y="$"===m?s:"#"===m&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",j="$"===m?a:/[%p]/.test(v)?l:"",b=vU[v],w=/[defgprs%]/.test(v);function N(e){var s,a,l,m=y,N=j;if("c"===v)N=b(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:b(Math.abs(e),x),g&&(e=function(e){e:for(var t,r=e.length,n=1,s=-1;n<r;++n)switch(e[n]){case".":s=t=n;break;case"0":0===s&&(s=n),t=n;break;default:if(!+e[n])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),m=(_?"("===u?u:c:"-"===u||"("===u?"":u)+m,N=("s"===v?_U[8+hU/3]:"")+N+(_&&"("===u?")":""),w)for(s=-1,a=e.length;++s<a;)if(48>(l=e.charCodeAt(s))||l>57){N=(46===l?i+e.slice(s+1):e.slice(s))+N,e=e.slice(0,s);break}}f&&!h&&(e=n(e,1/0));var S=m.length+e.length+N.length,k=S<p?new Array(p-S+1).join(t):"";switch(f&&h&&(e=n(k+e,k.length?p-N.length:1/0),k=""),r){case"<":e=m+e+N+k;break;case"=":e=m+k+e+N;break;case"^":e=k.slice(0,S=k.length>>1)+m+e+N+k.slice(S);break;default:e=k+m+e+N}return o(e)}return x=void 0===x?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=fU(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(mU(t)/3))),s=Math.pow(10,-n),a=_U[8+n/3];return function(e){return r(s*e)+a}}}}function kU(e,t,r,n){var s,a=GB(e,t,r);switch((n=fU(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mU(t)/3)))-mU(Math.abs(e)))}(a,i))||(n.precision=s),wU(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mU(t)-mU(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=function(e){return Math.max(0,-mU(Math.abs(e)))}(a))||(n.precision=s-2*("%"===n.type))}return bU(n)}function CU(e){var t=e.domain;return e.ticks=function(e){var r=t();return YB(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return kU(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,s,a=t(),i=0,o=a.length-1,l=a[i],c=a[o],d=10;for(c<l&&(s=l,l=c,c=s,s=i,i=o,o=s);d-- >0;){if((s=KB(l,c,r))===n)return a[i]=l,a[o]=c,t(a);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}n=s}return e},e}function EU(){var e=dU();return e.copy=function(){return lU(e,EU())},t$.apply(e,arguments),CU(e)}function OU(e,t){var r,n=0,s=(e=e.slice()).length-1,a=e[n],i=e[s];return i<a&&(r=n,n=s,s=r,r=a,a=i,i=r),e[n]=t.floor(a),e[s]=t.ceil(i),e}function MU(e){return Math.log(e)}function PU(e){return Math.exp(e)}function AU(e){return-Math.log(-e)}function TU(e){return-Math.exp(-e)}function DU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function RU(e){return(t,r)=>-e(-t,r)}function LU(e){const t=e(MU,PU),r=t.domain;let n,s,a=10;function i(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),s=function(e){return 10===e?DU:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),r()[0]<0?(n=RU(n),s=RU(s),e(AU,TU)):e(MU,PU),t}return t.base=function(e){return arguments.length?(a=+e,i()):a},t.domain=function(e){return arguments.length?(r(e),i()):r()},t.ticks=e=>{const t=r();let i=t[0],o=t[t.length-1];const l=o<i;l&&([i,o]=[o,i]);let c,d,u=n(i),m=n(o);const h=null==e?10:+e;let p=[];if(!(a%1)&&m-u<h){if(u=Math.floor(u),m=Math.ceil(m),i>0){for(;u<=m;++u)for(c=1;c<a;++c)if(d=u<0?c/s(-u):c*s(u),!(d<i)){if(d>o)break;p.push(d)}}else for(;u<=m;++u)for(c=a-1;c>=1;--c)if(d=u>0?c/s(-u):c*s(u),!(d<i)){if(d>o)break;p.push(d)}2*p.length<h&&(p=YB(i,o,h))}else p=YB(u,m,Math.min(m-u,h)).map(s);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=fU(r)).precision||(r.trim=!0),r=bU(r)),e===1/0)return r;const i=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/s(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=i?r(e):""}},t.nice=()=>r(OU(r(),{floor:e=>s(Math.floor(n(e))),ceil:e=>s(Math.ceil(n(e)))})),t}function qU(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function IU(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function FU(e){var t=1,r=e(qU(t),IU(t));return r.constant=function(r){return arguments.length?e(qU(t=+r),IU(t)):t},CU(r)}function zU(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $U(e){return e<0?-e*e:e*e}function UU(e){var t=e(sU,sU),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(sU,sU):.5===r?e(BU,$U):e(zU(r),zU(1/r)):r},CU(t)}function VU(){var e=UU(cU());return e.copy=function(){return lU(e,VU()).exponent(e.exponent())},t$.apply(e,arguments),e}function WU(e){return Math.sign(e)*e*e}jU=SU({thousands:",",grouping:[3],currency:["$",""]}),bU=jU.format,wU=jU.formatPrefix;const HU=new Date,YU=new Date;function KU(e,t,r,n){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=e=>{const t=s(e),r=s.ceil(e);return e-t<r-e?t:r},s.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),s.range=(r,n,a)=>{const i=[];if(r=s.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return i;let o;do{i.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return i},s.filter=r=>KU(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(s.count=(t,n)=>(HU.setTime(+t),YU.setTime(+n),e(HU),e(YU),Math.floor(r(HU,YU))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(n?t=>n(t)%e===0:t=>s.count(0,t)%e===0):s:null)),s}const GU=KU(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);GU.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?KU(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):GU:null),GU.range;const XU=1e3,QU=6e4,ZU=36e5,JU=864e5,eV=6048e5,tV=2592e6,rV=31536e6,nV=KU(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*XU)},(e,t)=>(t-e)/XU,e=>e.getUTCSeconds());nV.range;const sV=KU(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*XU)},(e,t)=>{e.setTime(+e+t*QU)},(e,t)=>(t-e)/QU,e=>e.getMinutes());sV.range;const aV=KU(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*QU)},(e,t)=>(t-e)/QU,e=>e.getUTCMinutes());aV.range;const iV=KU(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*XU-e.getMinutes()*QU)},(e,t)=>{e.setTime(+e+t*ZU)},(e,t)=>(t-e)/ZU,e=>e.getHours());iV.range;const oV=KU(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ZU)},(e,t)=>(t-e)/ZU,e=>e.getUTCHours());oV.range;const lV=KU(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*QU)/JU,e=>e.getDate()-1);lV.range;const cV=KU(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/JU,e=>e.getUTCDate()-1);cV.range;const dV=KU(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/JU,e=>Math.floor(e/JU));function uV(e){return KU(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*QU)/eV)}dV.range;const mV=uV(0),hV=uV(1),pV=uV(2),fV=uV(3),xV=uV(4),gV=uV(5),vV=uV(6);function yV(e){return KU(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/eV)}mV.range,hV.range,pV.range,fV.range,xV.range,gV.range,vV.range;const jV=yV(0),bV=yV(1),wV=yV(2),NV=yV(3),_V=yV(4),SV=yV(5),kV=yV(6);jV.range,bV.range,wV.range,NV.range,_V.range,SV.range,kV.range;const CV=KU(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());CV.range;const EV=KU(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());EV.range;const OV=KU(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());OV.every=e=>isFinite(e=Math.floor(e))&&e>0?KU(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,OV.range;const MV=KU(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function PV(e,t,r,n,s,a){const i=[[nV,1,XU],[nV,5,5e3],[nV,15,15e3],[nV,30,3e4],[a,1,QU],[a,5,3e5],[a,15,9e5],[a,30,18e5],[s,1,ZU],[s,3,108e5],[s,6,216e5],[s,12,432e5],[n,1,JU],[n,2,1728e5],[r,1,eV],[t,1,tV],[t,3,7776e6],[e,1,rV]];function o(t,r,n){const s=Math.abs(r-t)/n,a=RB(([,,e])=>e).right(i,s);if(a===i.length)return e.every(GB(t/rV,r/rV,n));if(0===a)return GU.every(Math.max(GB(t,r,n),1));const[o,l]=i[s/i[a-1][2]<i[a][2]/s?a-1:a];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const s=r&&"function"==typeof r.range?r:o(e,t,r),a=s?s.range(e,+t+1):[];return n?a.reverse():a},o]}MV.every=e=>isFinite(e=Math.floor(e))&&e>0?KU(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,MV.range;const[AV,TV]=PV(MV,EV,jV,dV,oV,aV),[DV,RV]=PV(OV,CV,mV,lV,iV,sV);function LV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function IV(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var FV,zV,BV,$V={"-":"",_:" ",0:"0"},UV=/^\s*\d+/,VV=/^%/,WV=/[\\^$*+?|[\]().{}]/g;function HV(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function YV(e){return e.replace(WV,"\\$&")}function KV(e){return new RegExp("^(?:"+e.map(YV).join("|")+")","i")}function GV(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function XV(e,t,r){var n=UV.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function QV(e,t,r){var n=UV.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ZV(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function JV(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function eW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tW(e,t,r){var n=UV.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function nW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function sW(e,t,r){var n=UV.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function aW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function iW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=UV.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function dW(e,t,r){var n=UV.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function uW(e,t,r){var n=UV.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=UV.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function hW(e,t,r){var n=VV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function pW(e,t,r){var n=UV.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=UV.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xW(e,t){return HV(e.getDate(),t,2)}function gW(e,t){return HV(e.getHours(),t,2)}function vW(e,t){return HV(e.getHours()%12||12,t,2)}function yW(e,t){return HV(1+lV.count(OV(e),e),t,3)}function jW(e,t){return HV(e.getMilliseconds(),t,3)}function bW(e,t){return jW(e,t)+"000"}function wW(e,t){return HV(e.getMonth()+1,t,2)}function NW(e,t){return HV(e.getMinutes(),t,2)}function _W(e,t){return HV(e.getSeconds(),t,2)}function SW(e){var t=e.getDay();return 0===t?7:t}function kW(e,t){return HV(mV.count(OV(e)-1,e),t,2)}function CW(e){var t=e.getDay();return t>=4||0===t?xV(e):xV.ceil(e)}function EW(e,t){return e=CW(e),HV(xV.count(OV(e),e)+(4===OV(e).getDay()),t,2)}function OW(e){return e.getDay()}function MW(e,t){return HV(hV.count(OV(e)-1,e),t,2)}function PW(e,t){return HV(e.getFullYear()%100,t,2)}function AW(e,t){return HV((e=CW(e)).getFullYear()%100,t,2)}function TW(e,t){return HV(e.getFullYear()%1e4,t,4)}function DW(e,t){var r=e.getDay();return HV((e=r>=4||0===r?xV(e):xV.ceil(e)).getFullYear()%1e4,t,4)}function RW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+HV(t/60|0,"0",2)+HV(t%60,"0",2)}function LW(e,t){return HV(e.getUTCDate(),t,2)}function qW(e,t){return HV(e.getUTCHours(),t,2)}function IW(e,t){return HV(e.getUTCHours()%12||12,t,2)}function FW(e,t){return HV(1+cV.count(MV(e),e),t,3)}function zW(e,t){return HV(e.getUTCMilliseconds(),t,3)}function BW(e,t){return zW(e,t)+"000"}function $W(e,t){return HV(e.getUTCMonth()+1,t,2)}function UW(e,t){return HV(e.getUTCMinutes(),t,2)}function VW(e,t){return HV(e.getUTCSeconds(),t,2)}function WW(e){var t=e.getUTCDay();return 0===t?7:t}function HW(e,t){return HV(jV.count(MV(e)-1,e),t,2)}function YW(e){var t=e.getUTCDay();return t>=4||0===t?_V(e):_V.ceil(e)}function KW(e,t){return e=YW(e),HV(_V.count(MV(e),e)+(4===MV(e).getUTCDay()),t,2)}function GW(e){return e.getUTCDay()}function XW(e,t){return HV(bV.count(MV(e)-1,e),t,2)}function QW(e,t){return HV(e.getUTCFullYear()%100,t,2)}function ZW(e,t){return HV((e=YW(e)).getUTCFullYear()%100,t,2)}function JW(e,t){return HV(e.getUTCFullYear()%1e4,t,4)}function eH(e,t){var r=e.getUTCDay();return HV((e=r>=4||0===r?_V(e):_V.ceil(e)).getUTCFullYear()%1e4,t,4)}function tH(){return"+0000"}function rH(){return"%"}function nH(e){return+e}function sH(e){return Math.floor(+e/1e3)}function aH(e){return new Date(e)}function iH(e){return e instanceof Date?+e:+new Date(+e)}function oH(e,t,r,n,s,a,i,o,l,c){var d=dU(),u=d.invert,m=d.domain,h=c(".%L"),p=c(":%S"),f=c("%I:%M"),x=c("%I %p"),g=c("%a %d"),v=c("%b %d"),y=c("%B"),j=c("%Y");function b(e){return(l(e)<e?h:o(e)<e?p:i(e)<e?f:a(e)<e?x:n(e)<e?s(e)<e?g:v:r(e)<e?y:j)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?m(Array.from(e,iH)):m().map(aH)},d.ticks=function(t){var r=m();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?b:c(t)},d.nice=function(e){var r=m();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?m(OU(r,e)):d},d.copy=function(){return lU(d,oH(e,t,r,n,s,a,i,o,l,c))},d}function lH(){var e,t,r,n,s,a=0,i=1,o=sU,l=!1;function c(t){return null==t||isNaN(t=+t)?s:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(s){return arguments.length?([a,i]=s,e=n(a=+a),t=n(i=+i),r=e===t?0:1/(t-e),c):[a,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(eU),c.rangeRound=d(tU),c.unknown=function(e){return arguments.length?(s=e,c):s},function(s){return n=s,e=s(a),t=s(i),r=e===t?0:1/(t-e),c}}function cH(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dH(){var e=UU(lH());return e.copy=function(){return cH(e,dH()).exponent(e.exponent())},r$.apply(e,arguments)}function uH(){var e,t,r,n,s,a,i,o=0,l=.5,c=1,d=1,u=sU,m=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+a(e))-t)*(d*e<d*t?n:s),u(m?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,s;return arguments.length?([r,n,s]=t,u=function(e,t){void 0===t&&(t=e,e=eU);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}(e,[r,n,s]),h):[u(0),u(.5),u(1)]}}return h.domain=function(i){return arguments.length?([o,l,c]=i,e=a(o=+o),t=a(l=+l),r=a(c=+c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,h):[o,l,c]},h.clamp=function(e){return arguments.length?(m=!!e,h):m},h.interpolator=function(e){return arguments.length?(u=e,h):u},h.range=p(eU),h.rangeRound=p(tU),h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return a=i,e=i(o),t=i(l),r=i(c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,h}}function mH(){var e=UU(uH());return e.copy=function(){return cH(e,mH()).exponent(e.exponent())},r$.apply(e,arguments)}!function(e){FV=function(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,c=KV(s),d=GV(s),u=KV(a),m=GV(a),h=KV(i),p=GV(i),f=KV(o),x=GV(o),g=KV(l),v=GV(l),y={a:function(e){return i[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:xW,e:xW,f:bW,g:AW,G:DW,H:gW,I:vW,j:yW,L:jW,m:wW,M:NW,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:nH,s:sH,S:_W,u:SW,U:kW,V:EW,w:OW,W:MW,x:null,X:null,y:PW,Y:TW,Z:RW,"%":rH},j={a:function(e){return i[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:LW,e:LW,f:BW,g:ZW,G:eH,H:qW,I:IW,j:FW,L:zW,m:$W,M:UW,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:nH,s:sH,S:VW,u:WW,U:HW,V:KW,w:GW,W:XW,x:null,X:null,y:QW,Y:JW,Z:tH,"%":rH},b={a:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:iW,e:iW,f:mW,g:rW,G:tW,H:lW,I:lW,j:oW,L:uW,m:aW,M:cW,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:sW,Q:pW,s:fW,S:dW,u:QV,U:ZV,V:JV,w:XV,W:eW,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:rW,Y:tW,Z:nW,"%":hW};function w(e,t){return function(r){var n,s,a,i=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(i.push(e.slice(l,o)),null!=(s=$V[n=e.charAt(++o)])?n=e.charAt(++o):s="e"===n?" ":"0",(a=t[n])&&(n=a(r,s)),i.push(n),l=o+1);return i.push(e.slice(l,o)),i.join("")}}function N(e,t){return function(r){var n,s,a=IV(1900,void 0,1);if(_(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(s=(n=qV(IV(a.y,0,1))).getUTCDay(),n=s>4||0===s?bV.ceil(n):bV(n),n=cV.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(s=(n=LV(IV(a.y,0,1))).getDay(),n=s>4||0===s?hV.ceil(n):hV(n),n=lV.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),s="Z"in a?qV(IV(a.y,0,1)).getUTCDay():LV(IV(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(s+5)%7:a.w+7*a.U-(s+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,qV(a)):LV(a)}}function _(e,t,r,n){for(var s,a,i=0,o=t.length,l=r.length;i<o;){if(n>=l)return-1;if(37===(s=t.charCodeAt(i++))){if(s=t.charAt(i++),!(a=b[s in $V?t.charAt(i++):s])||(n=a(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++))return-1}return n}return y.x=w(r,y),y.X=w(n,y),y.c=w(t,y),j.x=w(r,j),j.X=w(n,j),j.c=w(t,j),{format:function(e){var t=w(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",j);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),zV=FV.format,FV.parse,BV=FV.utcFormat,FV.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const hH=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:a$,scaleDiverging:function e(){var t=CU(uH()(sU));return t.copy=function(){return cH(t,e())},r$.apply(t,arguments)},scaleDivergingLog:function e(){var t=LU(uH()).domain([.1,1,10]);return t.copy=function(){return cH(t,e()).base(t.base())},r$.apply(t,arguments)},scaleDivergingPow:mH,scaleDivergingSqrt:function(){return mH.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=FU(uH());return t.copy=function(){return cH(t,e()).constant(t.constant())},r$.apply(t,arguments)},scaleIdentity:function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,rU),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,rU):[0,1],CU(n)},scaleImplicit:n$,scaleLinear:EU,scaleLog:function e(){const t=LU(cU()).domain([1,10]);return t.copy=()=>lU(t,e()).base(t.base()),t$.apply(t,arguments),t},scaleOrdinal:s$,scalePoint:o$,scalePow:VU,scaleQuantile:function e(){var t,r=[],n=[],s=[];function a(){var e=0,t=Math.max(1,n.length);for(s=new Array(t-1);++e<t;)s[e-1]=e$(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:n[IB(s,e)]}return i.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?s[t-1]:r[0],t<s.length?s[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();r=[];for(let t of e)null==t||isNaN(t=+t)||r.push(t);return r.sort(TB),a()},i.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return s.slice()},i.copy=function(){return e().domain(r).range(n).unknown(t)},t$.apply(i,arguments)},scaleQuantize:function e(){var t,r=0,n=1,s=1,a=[.5],i=[0,1];function o(e){return null!=e&&e<=e?i[IB(a,e,0,s)]:t}function l(){var e=-1;for(a=new Array(s);++e<s;)a[e]=((e+1)*n-(e-s)*r)/(s+1);return o}return o.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},o.range=function(e){return arguments.length?(s=(i=Array.from(e)).length-1,l()):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=s?[a[s-1],n]:[a[t-1],a[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return e().domain([r,n]).range(i).unknown(t)},t$.apply(CU(o),arguments)},scaleRadial:function e(){var t,r=dU(),n=[0,1],s=!1;function a(e){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(r(e));return isNaN(n)?t:s?Math.round(n):n}return a.invert=function(e){return r.invert(WU(e))},a.domain=function(e){return arguments.length?(r.domain(e),a):r.domain()},a.range=function(e){return arguments.length?(r.range((n=Array.from(e,rU)).map(WU)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(s=!!e,a):s},a.clamp=function(e){return arguments.length?(r.clamp(e),a):r.clamp()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e(r.domain(),n).round(s).clamp(r.clamp()).unknown(t)},t$.apply(a,arguments),CU(a)},scaleSequential:function e(){var t=CU(lH()(sU));return t.copy=function(){return cH(t,e())},r$.apply(t,arguments)},scaleSequentialLog:function e(){var t=LU(lH()).domain([1,10]);return t.copy=function(){return cH(t,e()).base(t.base())},r$.apply(t,arguments)},scaleSequentialPow:dH,scaleSequentialQuantile:function e(){var t=[],r=sU;function n(e){if(null!=e&&!isNaN(e=+e))return r((IB(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(TB),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>function(e,t){if((r=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||r<2)return QB(e);if(t>=1)return XB(e);var r,n=(r-1)*t,s=Math.floor(n),a=XB(ZB(e,s).subarray(0,s+1));return a+(QB(e.subarray(s+1))-a)*(n-s)}}(t,n/e))},n.copy=function(){return e(r).domain(t)},r$.apply(n,arguments)},scaleSequentialSqrt:function(){return dH.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=FU(lH());return t.copy=function(){return cH(t,e()).constant(t.constant())},r$.apply(t,arguments)},scaleSqrt:function(){return VU.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=FU(cU());return t.copy=function(){return lU(t,e()).constant(t.constant())},t$.apply(t,arguments)},scaleThreshold:function e(){var t,r=[.5],n=[0,1],s=1;function a(e){return null!=e&&e<=e?n[IB(r,e,0,s)]:t}return a.domain=function(e){return arguments.length?(r=Array.from(e),s=Math.min(r.length,n.length-1),a):r.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),s=Math.min(r.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(r).range(n).unknown(t)},t$.apply(a,arguments)},scaleTime:function(){return t$.apply(oH(DV,RV,OV,CV,mV,lV,iV,sV,nV,zV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return t$.apply(oH(AV,TV,MV,EV,jV,cV,oV,aV,nV,BV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:kU},Symbol.toStringTag,{value:"Module"}));var pH=_O;var fH=function(e,t,r){for(var n=-1,s=e.length;++n<s;){var a=e[n],i=t(a);if(null!=i&&(void 0===o?i==i&&!pH(i):r(i,o)))var o=i,l=a}return l};var xH=function(e,t){return e>t},gH=fH,vH=xH,yH=Yq;const jH=Ee(function(e){return e&&e.length?gH(e,yH,vH):void 0});var bH=function(e,t){return e<t},wH=fH,NH=bH,_H=Yq;const SH=Ee(function(e){return e&&e.length?wH(e,_H,NH):void 0});var kH=aP,CH=sI,EH=ZI,OH=sO;var MH=VI,PH=function(e,t){return(OH(e)?kH:EH)(e,CH(t))};const AH=Ee(function(e,t){return MH(PH(e,t),1)});var TH=bq;const DH=Ee(function(e,t){return TH(e,t)});var RH,LH=1e9,qH=!0,IH="[DecimalError] ",FH=IH+"Invalid argument: ",zH=IH+"Exponent out of range: ",BH=Math.floor,$H=Math.pow,UH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,VH=1e7,WH=9007199254740991,HH=BH(1286742750677284.5),YH={};function KH(e,t){var r,n,s,a,i,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),qH?sY(t,u):t;if(l=e.d,c=t.d,i=e.e,s=t.e,l=l.slice(),a=i-s){for(a<0?(n=l,a=-a,o=c.length):(n=c,s=i,o=l.length),a>(o=(i=Math.ceil(u/7))>o?i+1:o+1)&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((o=l.length)-(a=c.length)<0&&(a=o,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/VH|0,l[a]%=VH;for(r&&(l.unshift(r),++s),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=s,qH?sY(t,u):t}function GH(e,t,r){if(e!==~~e||e<t||e>r)throw Error(FH+e)}function XH(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)(r=7-(n=e[t]+"").length)&&(a+=tY(r)),a+=n;(r=7-(n=(i=e[t])+"").length)&&(a+=tY(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return a+i}YH.absoluteValue=YH.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},YH.comparedTo=YH.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,r=(n=a.d.length)<(s=e.d.length)?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1},YH.decimalPlaces=YH.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},YH.dividedBy=YH.div=function(e){return QH(this,new this.constructor(e))},YH.dividedToIntegerBy=YH.idiv=function(e){var t=this.constructor;return sY(QH(this,new t(e),0,1),t.precision)},YH.equals=YH.eq=function(e){return!this.cmp(e)},YH.exponent=function(){return JH(this)},YH.greaterThan=YH.gt=function(e){return this.cmp(e)>0},YH.greaterThanOrEqualTo=YH.gte=function(e){return this.cmp(e)>=0},YH.isInteger=YH.isint=function(){return this.e>this.d.length-2},YH.isNegative=YH.isneg=function(){return this.s<0},YH.isPositive=YH.ispos=function(){return this.s>0},YH.isZero=function(){return 0===this.s},YH.lessThan=YH.lt=function(e){return this.cmp(e)<0},YH.lessThanOrEqualTo=YH.lte=function(e){return this.cmp(e)<1},YH.logarithm=YH.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(RH))throw Error(IH+"NaN");if(r.s<1)throw Error(IH+(r.s?"NaN":"-Infinity"));return r.eq(RH)?new n(0):(qH=!1,t=QH(rY(r,a),rY(e,a),a),qH=!0,sY(t,s))},YH.minus=YH.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aY(t,e):KH(t,(e.s=-e.s,e))},YH.modulo=YH.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(!(e=new n(e)).s)throw Error(IH+"NaN");return r.s?(qH=!1,t=QH(r,e,0,1).times(e),qH=!0,r.minus(t)):sY(new n(r),s)},YH.naturalExponential=YH.exp=function(){return ZH(this)},YH.naturalLogarithm=YH.ln=function(){return rY(this)},YH.negated=YH.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},YH.plus=YH.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KH(t,e):aY(t,(e.s=-e.s,e))},YH.precision=YH.sd=function(e){var t,r,n,s=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(FH+e);if(t=JH(s)+1,r=7*(n=s.d.length-1)+1,n=s.d[n]){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},YH.squareRoot=YH.sqrt=function(){var e,t,r,n,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(IH+"NaN")}for(e=JH(o),qH=!1,0==(s=Math.sqrt(+o))||s==1/0?(((t=XH(o.d)).length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=BH((e+1)/2)-(e<0||e%2),n=new l(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(s.toString()),s=i=(r=l.precision)+3;;)if(n=(a=n).plus(QH(o,a,i+2)).times(.5),XH(a.d).slice(0,i)===(t=XH(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&"4999"==t){if(sY(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if("9999"!=t)break;i+=4}return qH=!0,sY(n,r)},YH.times=YH.mul=function(e){var t,r,n,s,a,i,o,l,c,d=this,u=d.constructor,m=d.d,h=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,r=d.e+e.e,(l=m.length)<(c=h.length)&&(a=m,m=h,h=a,i=l,l=c,c=i),a=[],n=i=l+c;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,s=l+n;s>n;)o=a[s]+h[n]*m[s-n-1]+t,a[s--]=o%VH|0,t=o/VH|0;a[s]=(a[s]+t)%VH|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,qH?sY(e,u.precision):e},YH.toDecimalPlaces=YH.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(GH(e,0,LH),void 0===t?t=n.rounding:GH(t,0,8),sY(r,e+JH(r)+1,t))},YH.toExponential=function(e,t){var r,n=this,s=n.constructor;return void 0===e?r=iY(n,!0):(GH(e,0,LH),void 0===t?t=s.rounding:GH(t,0,8),r=iY(n=sY(new s(n),e+1,t),!0,e+1)),r},YH.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return void 0===e?iY(s):(GH(e,0,LH),void 0===t?t=a.rounding:GH(t,0,8),r=iY((n=sY(new a(s),e+JH(s)+1,t)).abs(),!1,e+JH(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)},YH.toInteger=YH.toint=function(){var e=this,t=e.constructor;return sY(new t(e),JH(e)+1,t.rounding)},YH.toNumber=function(){return+this},YH.toPower=YH.pow=function(e){var t,r,n,s,a,i,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(RH);if(!(o=new l(o)).s){if(e.s<1)throw Error(IH+"Infinity");return o}if(o.eq(RH))return o;if(n=l.precision,e.eq(RH))return sY(o,n);if(i=(t=e.e)>=(r=e.d.length-1),a=o.s,i){if((r=c<0?-c:c)<=WH){for(s=new l(RH),t=Math.ceil(n/7+4),qH=!1;r%2&&oY((s=s.times(o)).d,t),0!==(r=BH(r/2));)oY((o=o.times(o)).d,t);return qH=!0,e.s<0?new l(RH).div(s):sY(s,n)}}else if(a<0)throw Error(IH+"NaN");return a=a<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,qH=!1,s=e.times(rY(o,n+12)),qH=!0,(s=ZH(s)).s=a,s},YH.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return void 0===e?n=iY(s,(r=JH(s))<=a.toExpNeg||r>=a.toExpPos):(GH(e,1,LH),void 0===t?t=a.rounding:GH(t,0,8),n=iY(s=sY(new a(s),e,t),e<=(r=JH(s))||r<=a.toExpNeg,e)),n},YH.toSignificantDigits=YH.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(GH(e,1,LH),void 0===t?t=r.rounding:GH(t,0,8)),sY(new r(this),e,t)},YH.toString=YH.valueOf=YH.val=YH.toJSON=YH[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=JH(e),r=e.constructor;return iY(e,t<=r.toExpNeg||t>=r.toExpPos)};var QH=function(){function e(e,t){var r,n=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+n,e[s]=r%VH|0,n=r/VH|0;return n&&e.unshift(n),e}function t(e,t,r,n){var s,a;if(r!=n)a=r>n?1:-1;else for(s=a=0;s<r;s++)if(e[s]!=t[s]){a=e[s]>t[s]?1:-1;break}return a}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*VH+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,s,a,i){var o,l,c,d,u,m,h,p,f,x,g,v,y,j,b,w,N,_,S=n.constructor,k=n.s==s.s?1:-1,C=n.d,E=s.d;if(!n.s)return new S(n);if(!s.s)throw Error(IH+"Division by zero");for(l=n.e-s.e,N=E.length,b=C.length,p=(h=new S(k)).d=[],c=0;E[c]==(C[c]||0);)++c;if(E[c]>(C[c]||0)&&--l,(v=null==a?a=S.precision:i?a+(JH(n)-JH(s))+1:a)<0)return new S(0);if(v=v/7+2|0,c=0,1==N)for(d=0,E=E[0],v++;(c<b||d)&&v--;c++)y=d*VH+(C[c]||0),p[c]=y/E|0,d=y%E|0;else{for((d=VH/(E[0]+1)|0)>1&&(E=e(E,d),C=e(C,d),N=E.length,b=C.length),j=N,x=(f=C.slice(0,N)).length;x<N;)f[x++]=0;(_=E.slice()).unshift(0),w=E[0],E[1]>=VH/2&&++w;do{d=0,(o=t(E,f,N,x))<0?(g=f[0],N!=x&&(g=g*VH+(f[1]||0)),(d=g/w|0)>1?(d>=VH&&(d=VH-1),1==(o=t(u=e(E,d),f,m=u.length,x=f.length))&&(d--,r(u,N<m?_:E,m))):(0==d&&(o=d=1),u=E.slice()),(m=u.length)<x&&u.unshift(0),r(f,u,x),-1==o&&(o=t(E,f,N,x=f.length))<1&&(d++,r(f,N<x?_:E,x)),x=f.length):0===o&&(d++,f=[0]),p[c++]=d,o&&f[0]?f[x++]=C[j]||0:(f=[C[j]],x=1)}while((j++<b||void 0!==f[0])&&v--)}return p[0]||p.shift(),h.e=l,sY(h,i?a+JH(h)+1:a)}}();function ZH(e,t){var r,n,s,a,i,o=0,l=0,c=e.constructor,d=c.precision;if(JH(e)>16)throw Error(zH+JH(e));if(!e.s)return new c(RH);for(null==t?(qH=!1,i=d):i=t,a=new c(.03125);e.abs().gte(.1);)e=e.times(a),l+=5;for(i+=Math.log($H(2,l))/Math.LN10*2+5|0,r=n=s=new c(RH),c.precision=i;;){if(n=sY(n.times(e),i),r=r.times(++o),XH((a=s.plus(QH(n,r,i))).d).slice(0,i)===XH(s.d).slice(0,i)){for(;l--;)s=sY(s.times(s),i);return c.precision=d,null==t?(qH=!0,sY(s,d)):s}s=a}}function JH(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function eY(e,t,r){if(t>e.LN10.sd())throw qH=!0,r&&(e.precision=r),Error(IH+"LN10 precision limit exceeded");return sY(new e(e.LN10),t)}function tY(e){for(var t="";e--;)t+="0";return t}function rY(e,t){var r,n,s,a,i,o,l,c,d,u=1,m=e,h=m.d,p=m.constructor,f=p.precision;if(m.s<1)throw Error(IH+(m.s?"NaN":"-Infinity"));if(m.eq(RH))return new p(0);if(null==t?(qH=!1,c=f):c=t,m.eq(10))return null==t&&(qH=!0),eY(p,c);if(c+=10,p.precision=c,n=(r=XH(h)).charAt(0),a=JH(m),!(Math.abs(a)<15e14))return l=eY(p,c+2,f).times(a+""),m=rY(new p(n+"."+r.slice(1)),c-10).plus(l),p.precision=f,null==t?(qH=!0,sY(m,f)):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=XH((m=m.times(e)).d)).charAt(0),u++;for(a=JH(m),n>1?(m=new p("0."+r),a++):m=new p(n+"."+r.slice(1)),o=i=m=QH(m.minus(RH),m.plus(RH),c),d=sY(m.times(m),c),s=3;;){if(i=sY(i.times(d),c),XH((l=o.plus(QH(i,new p(s),c))).d).slice(0,c)===XH(o.d).slice(0,c))return o=o.times(2),0!==a&&(o=o.plus(eY(p,c+2,f).times(a+""))),o=QH(o,new p(u),c),p.precision=f,null==t?(qH=!0,sY(o,f)):o;o=l,s+=2}}function nY(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(s=t.length;48===t.charCodeAt(s-1);)--s;if(t=t.slice(n,s)){if(s-=n,r=r-n-1,e.e=BH(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=7;n<s;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),qH&&(e.e>HH||e.e<-HH))throw Error(zH+r)}else e.s=0,e.e=0,e.d=[0];return e}function sY(e,t,r){var n,s,a,i,o,l,c,d,u=e.d;for(i=1,a=u[0];a>=10;a/=10)i++;if((n=t-i)<0)n+=7,s=t,c=u[d=0];else{if((d=Math.ceil((n+1)/7))>=(a=u.length))return e;for(c=a=u[d],i=1;a>=10;a/=10)i++;s=(n%=7)-7+i}if(void 0!==r&&(o=c/(a=$H(10,i-s-1))%10|0,l=t<0||void 0!==u[d+1]||c%a,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?s>0?c/$H(10,i-s):0:u[d-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return l?(a=JH(e),u.length=1,t=t-a-1,u[0]=$H(10,(7-t%7)%7),e.e=BH(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==n?(u.length=d,a=1,d--):(u.length=d+1,a=$H(10,7-n),u[d]=s>0?(c/$H(10,i-s)%$H(10,s)|0)*a:0),l)for(;;){if(0==d){(u[0]+=a)==VH&&(u[0]=1,++e.e);break}if(u[d]+=a,u[d]!=VH)break;u[d--]=0,a=1}for(n=u.length;0===u[--n];)u.pop();if(qH&&(e.e>HH||e.e<-HH))throw Error(zH+JH(e));return e}function aY(e,t){var r,n,s,a,i,o,l,c,d,u,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),qH?sY(t,h):t;if(l=e.d,u=t.d,n=t.e,c=e.e,l=l.slice(),i=c-n){for((d=i<0)?(r=l,i=-i,o=u.length):(r=u,n=c,o=l.length),i>(s=Math.max(Math.ceil(h/7),o)+2)&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for((d=(s=l.length)<(o=u.length))&&(o=s),s=0;s<o;s++)if(l[s]!=u[s]){d=l[s]<u[s];break}i=0}for(d&&(r=l,l=u,u=r,t.s=-t.s),o=l.length,s=u.length-o;s>0;--s)l[o++]=0;for(s=u.length;s>i;){if(l[--s]<u[s]){for(a=s;a&&0===l[--a];)l[a]=VH-1;--l[a],l[s]+=VH}l[s]-=u[s]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,qH?sY(t,h):t):new m(0)}function iY(e,t,r){var n,s=JH(e),a=XH(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+tY(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+tY(-s-1)+a,r&&(n=r-i)>0&&(a+=tY(n))):s>=i?(a+=tY(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+tY(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=tY(n))),e.s<0?"-"+a:a}function oY(e,t){if(e.length>t)return e.length=t,!0}function lY(e){if(!e||"object"!=typeof e)throw Error(IH+"Object expected");var t,r,n,s=["precision",1,LH,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if(void 0!==(n=e[r=s[t]])){if(!(BH(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(FH+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(FH+r+": "+n);this[r]=new this(n)}return this}var cY=function e(t){var r,n,s;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(FH+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):nY(t,e.toString())}if("string"!=typeof e)throw Error(FH+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!UH.test(e))throw Error(FH+e);nY(t,e)}if(a.prototype=YH,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=lY,void 0===t&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(n=s[r++])||(t[n]=this[n]);return a.config(t),a}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});RH=new cY(1);const dY=cY;function uY(e){return function(e){if(Array.isArray(e))return mY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mY(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hY=function(e){return e},pY={"@@functional/placeholder":!0},fY=function(e){return e===pY},xY=function(e){return function t(){return 0===arguments.length||1===arguments.length&&fY(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},gY=function e(t,r){return 1===t?r:xY(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var i=s.filter(function(e){return e!==pY}).length;return i>=t?r.apply(void 0,s):e(t-i,xY(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=s.map(function(e){return fY(e)?t.shift():e});return r.apply(void 0,uY(a).concat(t))}))})},vY=function(e){return gY(e.length,e)},yY=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},jY=vY(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),bY=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},wY=function(e){var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every(function(e,r){return e===t[r]})?r:(t=s,r=e.apply(void 0,s))}};const NY={rangeStep:function(e,t,r){for(var n=new dY(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new dY(e).abs().log(10).toNumber())+1},interpolateNumber:vY(function(e,t,r){var n=+e;return n+r*(+t-n)}),uninterpolateNumber:vY(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),uninterpolateTruncation:vY(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))})};function _Y(e){return function(e){if(Array.isArray(e))return CY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||kY(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,s=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(hte){s=!0,a=hte}finally{try{n||null==o.return||o.return()}finally{if(s)throw a}}return r}(e,t)||kY(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kY(e,t){if(e){if("string"==typeof e)return CY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CY(e,t):void 0}}function CY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EY(e){var t=SY(e,2),r=t[0],n=t[1],s=r,a=n;return r>n&&(s=n,a=r),[s,a]}function OY(e,t,r){if(e.lte(0))return new dY(0);var n=NY.getDigitCount(e.toNumber()),s=new dY(10).pow(n),a=e.div(s),i=1!==n?.05:.1,o=new dY(Math.ceil(a.div(i).toNumber())).add(r).mul(i).mul(s);return t?o:new dY(Math.ceil(o))}function MY(e,t,r){var n=1,s=new dY(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new dY(10).pow(NY.getDigitCount(e)-1),s=new dY(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new dY(Math.floor(e)))}else 0===e?s=new dY(Math.floor((t-1)/2)):r||(s=new dY(Math.floor(e)));var i=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return hY;var n=t.reverse(),s=n[0],a=n.slice(1);return function(){return a.reduce(function(e,t){return t(e)},s.apply(void 0,arguments))}}(jY(function(e){return s.add(new dY(e-i).mul(n)).toNumber()}),yY);return o(0,t)}function PY(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new dY(0),tickMin:new dY(0),tickMax:new dY(0)};var a,i=OY(new dY(t).sub(e).div(r-1),n,s);a=e<=0&&t>=0?new dY(0):(a=new dY(e).add(t).div(2)).sub(new dY(a).mod(i));var o=Math.ceil(a.sub(e).div(i).toNumber()),l=Math.ceil(new dY(t).sub(a).div(i).toNumber()),c=o+l+1;return c>r?PY(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:i,tickMin:a.sub(new dY(o).mul(i)),tickMax:a.add(new dY(l).mul(i))})}var AY=wY(function(e){var t=SY(e,2),r=t[0],n=t[1],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(s,2),o=SY(EY([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(_Y(yY(0,s-1).map(function(){return 1/0}))):[].concat(_Y(yY(0,s-1).map(function(){return-1/0})),[c]);return r>n?bY(d):d}if(l===c)return MY(l,s,a);var u=PY(l,c,i,a),m=u.step,h=u.tickMin,p=u.tickMax,f=NY.rangeStep(h,p.add(new dY(.1).mul(m)),m);return r>n?bY(f):f}),TY=wY(function(e,t){var r=SY(e,2),n=r[0],s=r[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=SY(EY([n,s]),2),o=i[0],l=i[1];if(o===-1/0||l===1/0)return[n,s];if(o===l)return[o];var c=Math.max(t,2),d=OY(new dY(l).sub(o).div(c-1),a,0),u=[].concat(_Y(NY.rangeStep(new dY(o),new dY(l).sub(new dY(.99).mul(d)),d)),[l]);return n>s?bY(u):u});function DY(e,t){throw new Error("Invariant failed")}var RY=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function LY(e){return(LY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qY(){return qY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qY.apply(this,arguments)}function IY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FY(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zY(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BY(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YY(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Y(e,t,r){return t=VY(t),function(e,t){if(t&&("object"===LY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,UY()?Reflect.construct(t,r||[],VY(e).constructor):t.apply(e,r))}function UY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(UY=function(){return!!e})()}function VY(e){return(VY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WY(e,t){return(WY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HY(e,t,r){return(t=YY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YY(e){var t=function(e,t){if("object"!=LY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=LY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LY(t)?t:t+""}var KY=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$Y(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WY(e,t)}(e,ke.Component),BY(e,[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,s=e.dataKey,a=e.data,i=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=zY(e,RY),d=RA(c,!1);"x"===this.props.direction&&"number"!==o.type&&DY();var u=a.map(function(e){var a=i(e,s),c=a.x,u=a.y,m=a.value,h=a.errorVal;if(!h)return null;var p,f,x=[];if(Array.isArray(h)){var g=IY(h,2);p=g[0],f=g[1]}else p=f=h;if("vertical"===r){var v=o.scale,y=u+t,j=y+n,b=y-n,w=v(m-p),N=v(m+f);x.push({x1:N,y1:j,x2:N,y2:b}),x.push({x1:w,y1:y,x2:N,y2:y}),x.push({x1:w,y1:j,x2:w,y2:b})}else if("horizontal"===r){var _=l.scale,S=c+t,k=S-n,C=S+n,E=_(m-p),O=_(m+f);x.push({x1:k,y1:O,x2:C,y2:O}),x.push({x1:S,y1:E,x2:S,y2:O}),x.push({x1:k,y1:E,x2:C,y2:E})}return ke.createElement(HA,qY({className:"recharts-errorBar",key:"bar-".concat(x.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),x.map(function(e){return ke.createElement("line",qY({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return ke.createElement(HA,{className:"recharts-errorBars"},u)}}])}();function GY(e){return(GY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XY(Object(r),!0).forEach(function(t){ZY(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZY(e,t,r){var n;return n=function(e,t){if("object"!=GY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==GY(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}HY(KY,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),HY(KY,"displayName","ErrorBar");var JY=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,s=e.legendContent,a=PA(t,II);if(!a)return null;var i,o=II.defaultProps,l=void 0!==o?QY(QY({},o),a.props):{};return i=a.props&&a.props.payload?a.props&&a.props.payload:"children"===s?(r||[]).reduce(function(e,t){var r=t.item,n=t.props,s=n.sectors||n.data||[];return e.concat(s.map(function(e){return{type:a.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(r||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?QY(QY({},r),t.props):{},s=n.dataKey,a=n.name,i=n.legendType;return{inactive:n.hide,dataKey:s,type:l.iconType||i||"square",color:lK(t),value:a||s,payload:n}}),QY(QY(QY({},l),II.getWithHeight(a,n)),{},{payload:i,item:a})};function eK(e){return(eK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tK(e){return function(e){if(Array.isArray(e))return rK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rK(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nK(Object(r),!0).forEach(function(t){aK(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function aK(e,t,r){var n;return n=function(e,t){if("object"!=eK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==eK(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e,t,r){return CP(e)||CP(t)?r:iA(t)?kP(e,t,r):RO(t)?t(e):r}function oK(e,t,r,n){var s=AH(e,function(e){return iK(e,t)});if("number"===r){var a=s.filter(function(e){return aA(e)||parseFloat(e)});return a.length?[SH(a),jH(a)]:[1/0,-1/0]}return(n?s.filter(function(e){return!CP(e)}):s).map(function(e){return iA(e)||e instanceof Date?e:""})}var lK=function(e){var t,r,n=e.type.displayName,s=null!==(t=e.type)&&void 0!==t&&t.defaultProps?sK(sK({},e.type.defaultProps),e.props):e.props,a=s.stroke,i=s.fill;switch(n){case"Line":r=a;break;case"Area":case"Radar":r=a&&"none"!==a?a:i;break;default:r=i}return r},cK=function(e,t,r,n,s){var a=MA(t.props.children,KY).filter(function(e){return function(e,t,r){return!!CP(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,s,e.props.direction)});if(a&&a.length){var i=a.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=iK(t,r);if(CP(n))return e;var s=Array.isArray(n)?[SH(n),jH(n)]:[n,n],a=i.reduce(function(e,r){var n=iK(t,r,0),a=s[0]-Math.abs(Array.isArray(n)?n[0]:n),i=s[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(a,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]},[1/0,-1/0])}return null},dK=function(e,t,r,n,s){var a=t.map(function(t){var a=t.props.dataKey;return"number"===r&&a&&cK(e,t,a,n)||oK(e,a,r,s)});if("number"===r)return a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return a.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},uK=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},mK=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var s,a,i=e.map(function(e){return e.coordinate===t&&(s=!0),e.coordinate===r&&(a=!0),e.coordinate});return s||i.push(t),a||i.push(r),i},hK=function(e,t,r){if(!e)return null;var n=e.scale,s=e.duplicateDomain,a=e.type,i=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===a&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*nA(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=s?s.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}}).filter(function(e){return!rA(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:s?s[e]:e,index:t,offset:l}})},pK=new WeakMap,fK=function(e,t){if("function"!=typeof t)return e;pK.has(e)||pK.set(e,new WeakMap);var r=pK.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},xK=function(e,t,r){var n=e.scale,s=e.type,a=e.layout,i=e.axisType;if("auto"===n)return"radial"===a&&"radiusAxis"===i?{scale:a$(),realScaleType:"band"}:"radial"===a&&"angleAxis"===i?{scale:EU(),realScaleType:"linear"}:"category"===s&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:o$(),realScaleType:"point"}:"category"===s?{scale:a$(),realScaleType:"band"}:{scale:EU(),realScaleType:"linear"};if(PP(n)){var o="scale".concat(vT(n));return{scale:(hH[o]||o$)(),realScaleType:hH[o]?o:"point"}}return RO(n)?{scale:n}:{scale:o$(),realScaleType:"point"}},gK=1e-4,vK=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-gK,a=Math.max(n[0],n[1])+gK,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},yK={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=rA(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,s,a=0,i=e[0].length;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}yD(e,t)}},none:yD,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,s=e[t[0]],a=s.length;n<a;++n){for(var i=0,o=0;i<r;++i)o+=e[i][n][1]||0;s[n][1]+=s[n][0]=-o/2}yD(e,t)}},wiggle:function(e,t){if((s=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,s,a=0,i=1;i<n;++i){for(var o=0,l=0,c=0;o<s;++o){for(var d=e[t[o]],u=d[i][1]||0,m=(u-(d[i-1][1]||0))/2,h=0;h<o;++h){var p=e[t[h]];m+=(p[i][1]||0)-(p[i-1][1]||0)}l+=u,c+=m*u}r[i-1][1]+=r[i-1][0]=a,l&&(a-=c/l)}r[i-1][1]+=r[i-1][0]=a,yD(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=rA(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}}},jK=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),s=yK[r],a=function(){var e=yT([]),t=jD,r=yD,n=bD;function s(s){var a,i,o=Array.from(e.apply(this,arguments),wD),l=o.length,c=-1;for(const e of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(e,o[a].key,c,s)]).data=e;for(a=0,i=AT(t(o));a<l;++a)o[i[a]].index=a;return r(o,i),o}return s.keys=function(t){return arguments.length?(e="function"==typeof t?t:yT(Array.from(t)),s):e},s.value=function(e){return arguments.length?(n="function"==typeof e?e:yT(+e),s):n},s.order=function(e){return arguments.length?(t=null==e?jD:"function"==typeof e?e:yT(Array.from(e)),s):t},s.offset=function(e){return arguments.length?(r=null==e?yD:e,s):r},s}().keys(n).value(function(e,t){return+iK(e,t,0)}).order(jD).offset(s);return a(e)},bK=function(e,t){var r=t.realScaleType,n=t.type,s=t.tickCount,a=t.originalDomain,i=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(s&&"number"===n&&a&&("auto"===a[0]||"auto"===a[1])){var l=e.domain();if(!l.length)return null;var c=AY(l,s,i);return e.domain([SH(c),jH(c)]),{niceTicks:c}}if(s&&"number"===n){var d=e.domain();return{niceTicks:TY(d,s,i)}}return null};function wK(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,a=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!CP(s[t.dataKey])){var o=mA(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=iK(s,CP(i)?t.dataKey:i);return CP(l)?null:t.scale(l)}var NK=function(e){var t=e.axis,r=e.ticks,n=e.offset,s=e.bandSize,a=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var o=iK(a,t.dataKey,t.domain[i]);return CP(o)?null:t.scale(o)-s/2+n},_K=function(e,t,r){return Object.keys(e).reduce(function(n,s){var a=e[s].stackedData.reduce(function(e,n){var s=n.slice(t,r+1).reduce(function(e,t){return[SH(t.concat([e[0]]).filter(aA)),jH(t.concat([e[1]]).filter(aA))]},[1/0,-1/0]);return[Math.min(e[0],s[0]),Math.max(e[1],s[1])]},[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},SK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CK=function(e,t,r){if(RO(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(aA(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(SK.test(e[0])){var s=+SK.exec(e[0])[1];n[0]=t[0]-s}else RO(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(aA(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(kK.test(e[1])){var a=+kK.exec(e[1])[1];n[1]=t[1]+a}else RO(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},EK=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=DF(t,function(e){return e.coordinate}),a=1/0,i=1,o=s.length;i<o;i++){var l=s[i],c=s[i-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},OK=function(e,t,r){return e&&e.length?DH(e,kP(r,"type.defaultProps.domain"))?t:e:t},MK=function(e,t){var r=e.type.defaultProps?sK(sK({},e.type.defaultProps),e.props):e.props,n=r.dataKey,s=r.name,a=r.unit,i=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return sK(sK({},RA(e,!1)),{},{dataKey:n,unit:a,formatter:i,name:s||n,color:lK(e),value:iK(t,n),type:o,payload:t,chartType:l,hide:c})};function PK(e){return(PK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AK(Object(r),!0).forEach(function(t){DK(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DK(e,t,r){var n;return n=function(e,t){if("object"!=PK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==PK(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LK(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qK=Math.PI/180,IK=function(e){return 180*e/Math.PI},FK=function(e,t,r,n){return{x:e+Math.cos(-qK*n)*r,y:t+Math.sin(-qK*n)*r}},zK=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},BK=function(e,t){var r=e.x,n=e.y,s=t.cx,a=t.cy,i=function(e,t){var r=e.x,n=e.y,s=t.x,a=t.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(n-a,2))}({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i};var o=(r-s)/i,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:i,angle:IK(l),angleInRadian:l}},$K=function(e,t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),a=Math.floor(n/360);return e+360*Math.min(s,a)},UK=function(e,t){var r=e.x,n=e.y,s=BK({x:r,y:n},t),a=s.radius,i=s.angle,o=t.innerRadius,l=t.outerRadius;if(a<o||a>l)return!1;if(0===a)return!0;var c,d=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-360*a,endAngle:r-360*a}}(t),u=d.startAngle,m=d.endAngle,h=i;if(u<=m){for(;h>m;)h-=360;for(;h<u;)h+=360;c=h>=u&&h<=m}else{for(;h>u;)h-=360;for(;h<m;)h+=360;c=h>=m&&h<=u}return c?TK(TK({},t),{},{radius:a,angle:$K(h,t)}):null},VK=function(e){return Ne.isValidElement(e)||RO(e)||"boolean"==typeof e?"":e.className};function WK(e){return(WK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var HK=["offset"];function YK(e){return function(e){if(Array.isArray(e))return KK(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return KK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KK(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GK(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XK(Object(r),!0).forEach(function(t){ZK(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZK(e,t,r){var n;return n=function(e,t){if("object"!=WK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==WK(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JK(){return JK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JK.apply(this,arguments)}var eG=function(e,t,r){var n,s,a=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,p=c.startAngle,f=c.endAngle,x=c.clockWise,g=(m+h)/2,v=function(e,t){return nA(t-e)*Math.min(Math.abs(t-e),360)}(p,f),y=v>=0?1:-1;"insideStart"===a?(n=p+y*o,s=x):"insideEnd"===a?(n=f-y*o,s=!x):"end"===a&&(n=f+y*o,s=x),s=v<=0?s:!s;var j=FK(d,u,g,n),b=FK(d,u,g,n+359*(s?1:-1)),w="M".concat(j.x,",").concat(j.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(s?0:1,",\n    ").concat(b.x,",").concat(b.y),N=CP(e.id)?lA("recharts-radial-line-"):e.id;return ke.createElement("text",JK({},r,{dominantBaseline:"central",className:Pr("recharts-radial-bar-label",l)}),ke.createElement("defs",null,ke.createElement("path",{id:N,d:w})),ke.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function tG(e){var t,r=e.offset,n=QK({offset:void 0===r?5:r},GK(e,HK)),s=n.viewBox,a=n.position,i=n.value,o=n.children,l=n.content,c=n.className,d=void 0===c?"":c,u=n.textBreakAll;if(!s||CP(i)&&CP(o)&&!Ne.isValidElement(l)&&!RO(l))return null;if(Ne.isValidElement(l))return Ne.cloneElement(l,n);if(RO(l)){if(t=Ne.createElement(l,n),Ne.isValidElement(t))return t}else t=function(e){var t=e.value,r=e.formatter,n=CP(e.children)?t:e.children;return RO(r)?r(n):n}(n);var m=function(e){return"cx"in e&&aA(e.cx)}(s),h=RA(n,!0);if(m&&("insideStart"===a||"insideEnd"===a||"end"===a))return eG(n,t,h);var p=m?function(e){var t=e.viewBox,r=e.offset,n=e.position,s=t,a=s.cx,i=s.cy,o=s.innerRadius,l=s.outerRadius,c=(s.startAngle+s.endAngle)/2;if("outside"===n){var d=FK(a,i,l+r,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=FK(a,i,(o+l)/2,c);return{x:m.x,y:m.y,textAnchor:"middle",verticalAnchor:"middle"}}(n):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,s=e.position,a=t,i=a.x,o=a.y,l=a.width,c=a.height,d=c>=0?1:-1,u=d*n,m=d>0?"end":"start",h=d>0?"start":"end",p=l>=0?1:-1,f=p*n,x=p>0?"end":"start",g=p>0?"start":"end";if("top"===s)return QK(QK({},{x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:m}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===s)return QK(QK({},{x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===s){var v={x:i-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return QK(QK({},v),r?{width:Math.max(v.x-r.x,0),height:c}:{})}if("right"===s){var y={x:i+l+f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return QK(QK({},y),r?{width:Math.max(r.x+r.width-y.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return"insideLeft"===s?QK({x:i+f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},j):"insideRight"===s?QK({x:i+l-f,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):"insideTop"===s?QK({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:h},j):"insideBottom"===s?QK({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:m},j):"insideTopLeft"===s?QK({x:i+f,y:o+u,textAnchor:g,verticalAnchor:h},j):"insideTopRight"===s?QK({x:i+l-f,y:o+u,textAnchor:x,verticalAnchor:h},j):"insideBottomLeft"===s?QK({x:i+f,y:o+c-u,textAnchor:g,verticalAnchor:m},j):"insideBottomRight"===s?QK({x:i+l-f,y:o+c-u,textAnchor:x,verticalAnchor:m},j):PO(s)&&(aA(s.x)||sA(s.x))&&(aA(s.y)||sA(s.y))?QK({x:i+cA(s.x,l),y:o+cA(s.y,c),textAnchor:"end",verticalAnchor:"end"},j):QK({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)}(n);return ke.createElement(AB,JK({className:Pr("recharts-label",d)},h,p,{breakAll:u}),t)}tG.displayName="Label";var rG=function(e){var t=e.cx,r=e.cy,n=e.angle,s=e.startAngle,a=e.endAngle,i=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,m=e.top,h=e.left,p=e.width,f=e.height,x=e.clockWise,g=e.labelViewBox;if(g)return g;if(aA(p)&&aA(f)){if(aA(d)&&aA(u))return{x:d,y:u,width:p,height:f};if(aA(m)&&aA(h))return{x:m,y:h,width:p,height:f}}return aA(d)&&aA(u)?{x:d,y:u,width:0,height:0}:aA(t)&&aA(r)?{cx:t,cy:r,startAngle:s||n||0,endAngle:a||n||0,innerRadius:l||0,outerRadius:c||o||i||0,clockWise:x}:e.viewBox?e.viewBox:{}};tG.parseViewBox=rG,tG.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=rG(e),a=MA(n,tG).map(function(e,r){return Ne.cloneElement(e,{viewBox:t||s,key:"label-".concat(r)})});if(!r)return a;var i=function(e,t){return e?!0===e?ke.createElement(tG,{key:"label-implicit",viewBox:t}):iA(e)?ke.createElement(tG,{key:"label-implicit",viewBox:t,value:e}):Ne.isValidElement(e)?e.type===tG?Ne.cloneElement(e,{key:"label-implicit",viewBox:t}):ke.createElement(tG,{key:"label-implicit",content:e,viewBox:t}):RO(e)?ke.createElement(tG,{key:"label-implicit",content:e,viewBox:t}):PO(e)?ke.createElement(tG,JK({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||s);return[i].concat(YK(a))};const nG=Ee(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function sG(e){return(sG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var aG=["valueAccessor"],iG=["data","dataKey","clockWise","id","textBreakAll"];function oG(e){return function(e){if(Array.isArray(e))return lG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return lG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cG(){return cG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cG.apply(this,arguments)}function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(t){mG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mG(e,t,r){var n;return n=function(e,t){if("object"!=sG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==sG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var pG=function(e){return Array.isArray(e.value)?nG(e.value):e.value};function fG(e){var t=e.valueAccessor,r=void 0===t?pG:t,n=hG(e,aG),s=n.data,a=n.dataKey,i=n.clockWise,o=n.id,l=n.textBreakAll,c=hG(n,iG);return s&&s.length?ke.createElement(HA,{className:"recharts-label-list"},s.map(function(e,t){var n=CP(a)?r(e,t):iK(e&&e.payload,a),s=CP(o)?{}:{id:"".concat(o,"-").concat(t)};return ke.createElement(tG,cG({},RA(e,!0),c,s,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:tG.parseViewBox(CP(i)?e:uG(uG({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))})):null}function xG(e){return(xG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gG(){return gG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gG.apply(this,arguments)}function vG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vG(Object(r),!0).forEach(function(t){jG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jG(e,t,r){var n;return n=function(e,t){if("object"!=xG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}fG.displayName="LabelList",fG.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=MA(e.children,fG).map(function(e,r){return Ne.cloneElement(e,{data:t,key:"labelList-".concat(r)})});return r?[function(e,t){return e?!0===e?ke.createElement(fG,{key:"labelList-implicit",data:t}):ke.isValidElement(e)||RO(e)?ke.createElement(fG,{key:"labelList-implicit",data:t,content:e}):PO(e)?ke.createElement(fG,cG({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(oG(n)):n};var bG=function(e){var t=e.cx,r=e.cy,n=e.radius,s=e.angle,a=e.sign,i=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(i?1:-1)+n,d=Math.asin(o/c)/qK,u=l?s:s+a*d,m=l?s-a*d:s;return{center:FK(t,r,c,u),circleTangency:FK(t,r,n,u),lineTangency:FK(t,r,c*Math.cos(d*qK),m),theta:d}},wG=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,s=e.outerRadius,a=e.startAngle,i=function(e,t){return nA(t-e)*Math.min(Math.abs(t-e),359.999)}(a,e.endAngle),o=a+i,l=FK(t,r,s,a),c=FK(t,r,s,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(s,",").concat(s,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(a>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=FK(t,r,n,a),m=FK(t,r,n,o);d+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(a<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},NG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_G=function(e){var t=yG(yG({},NG),e),r=t.cx,n=t.cy,s=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(a<s||c===d)return null;var m,h=Pr("recharts-sector",u),p=a-s,f=cA(i,p,0,!0);return m=f>0&&Math.abs(c-d)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=nA(c-l),u=bG({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),m=u.circleTangency,h=u.lineTangency,p=u.theta,f=bG({cx:t,cy:r,radius:s,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),x=f.circleTangency,g=f.lineTangency,v=f.theta,y=o?Math.abs(l-c):Math.abs(l-c)-p-v;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):wG({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var j="M ".concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n  ");if(n>0){var b=bG({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),w=b.circleTangency,N=b.lineTangency,_=b.theta,S=bG({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),k=S.circleTangency,C=S.lineTangency,E=S.theta,O=o?Math.abs(l-c):Math.abs(l-c)-_-E;if(O<0&&0===a)return"".concat(j,"L").concat(t,",").concat(r,"Z");j+="L".concat(C.x,",").concat(C.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else j+="L".concat(t,",").concat(r,"Z");return j}({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(f,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):wG({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:c,endAngle:d}),ke.createElement("path",gG({},RA(t,!0),{className:h,d:m,role:"img"}))};function SG(e){return(SG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kG(){return kG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kG.apply(this,arguments)}function CG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CG(Object(r),!0).forEach(function(t){OG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function OG(e,t,r){var n;return n=function(e,t){if("object"!=SG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==SG(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MG={curveBasisClosed:function(e){return new iD(e)},curveBasisOpen:function(e){return new oD(e)},curveBasis:function(e){return new aD(e)},curveBumpX:function(e){return new FT(e,!0)},curveBumpY:function(e){return new FT(e,!1)},curveLinearClosed:function(e){return new lD(e)},curveLinear:DT,curveMonotoneX:function(e){return new hD(e)},curveMonotoneY:function(e){return new pD(e)},curveNatural:function(e){return new xD(e)},curveStep:function(e){return new vD(e,.5)},curveStepAfter:function(e){return new vD(e,1)},curveStepBefore:function(e){return new vD(e,0)}},PG=function(e){return e.x===+e.x&&e.y===+e.y},AG=function(e){return e.x},TG=function(e){return e.y},DG=function(e){var t,r=e.type,n=void 0===r?"linear":r,s=e.points,a=void 0===s?[]:s,i=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(RO(e))return e;var r="curve".concat(vT(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?MG[r]||DT:MG["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),u=c?a.filter(function(e){return PG(e)}):a;if(Array.isArray(i)){var m=c?i.filter(function(e){return PG(e)}):i,h=u.map(function(e,t){return EG(EG({},e),{},{base:m[t]})});return(t="vertical"===o?IT().y(TG).x1(AG).x0(function(e){return e.base.x}):IT().x(AG).y1(TG).y0(function(e){return e.base.y})).defined(PG).curve(d),t(h)}return(t="vertical"===o&&aA(i)?IT().y(TG).x1(AG).x0(i):aA(i)?IT().x(AG).y1(TG).y0(i):qT().x(AG).y(TG)).defined(PG).curve(d),t(u)},RG=function(e){var t=e.className,r=e.points,n=e.path,s=e.pathRef;if(!(r&&r.length||n))return null;var a=r&&r.length?DG(e):n;return ke.createElement("path",kG({},RA(e,!1),yA(e),{className:Pr("recharts-curve",t),d:a,ref:s}))},LG={exports:{}};function qG(){}function IG(){}IG.resetWarningCache=qG;LG.exports=function(){function e(e,t,r,n,s,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:IG,resetWarningCache:qG};return r.PropTypes=r,r}();const FG=Ee(LG.exports);var zG=Object.getOwnPropertyNames,BG=Object.getOwnPropertySymbols,$G=Object.prototype.hasOwnProperty;function UG(e,t){return function(r,n,s){return e(r,n,s)&&t(r,n,s)}}function VG(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var s=n.cache,a=s.get(t),i=s.get(r);if(a&&i)return a===r&&i===t;s.set(t,r),s.set(r,t);var o=e(t,r,n);return s.delete(t),s.delete(r),o}}function WG(e){return zG(e).concat(BG(e))}var HG=Object.hasOwn||function(e,t){return $G.call(e,t)};function YG(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var KG="_owner",GG=Object.getOwnPropertyDescriptor,XG=Object.keys;function QG(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function ZG(e,t){return YG(e.getTime(),t.getTime())}function JG(e,t,r){if(e.size!==t.size)return!1;for(var n,s,a={},i=e.entries(),o=0;(n=i.next())&&!n.done;){for(var l=t.entries(),c=!1,d=0;(s=l.next())&&!s.done;){var u=n.value,m=u[0],h=u[1],p=s.value,f=p[0],x=p[1];c||a[d]||!(c=r.equals(m,f,o,d,e,t,r)&&r.equals(h,x,m,f,e,t,r))||(a[d]=!0),d++}if(!c)return!1;o++}return!0}function eX(e,t,r){var n,s=XG(e),a=s.length;if(XG(t).length!==a)return!1;for(;a-- >0;){if((n=s[a])===KG&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!HG(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1}return!0}function tX(e,t,r){var n,s,a,i=WG(e),o=i.length;if(WG(t).length!==o)return!1;for(;o-- >0;){if((n=i[o])===KG&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!HG(t,n))return!1;if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;if(s=GG(e,n),a=GG(t,n),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable))return!1}return!0}function rX(e,t){return YG(e.valueOf(),t.valueOf())}function nX(e,t){return e.source===t.source&&e.flags===t.flags}function sX(e,t,r){if(e.size!==t.size)return!1;for(var n,s,a={},i=e.values();(n=i.next())&&!n.done;){for(var o=t.values(),l=!1,c=0;(s=o.next())&&!s.done;)l||a[c]||!(l=r.equals(n.value,s.value,n.value,s.value,e,t,r))||(a[c]=!0),c++;if(!l)return!1}return!0}function aX(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var iX=Array.isArray,oX="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,lX=Object.assign,cX=Object.prototype.toString.call.bind(Object.prototype.toString);var dX=uX();function uX(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,s=e.createInternalComparator,a=e.createState,i=e.strict,o=void 0!==i&&i,l=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?tX:QG,areDatesEqual:ZG,areMapsEqual:n?UG(JG,tX):JG,areObjectsEqual:n?tX:eX,arePrimitiveWrappersEqual:rX,areRegExpsEqual:nX,areSetsEqual:n?UG(sX,tX):sX,areTypedArraysEqual:n?tX:aX};if(r&&(s=lX({},s,r(s))),t){var a=VG(s.areArraysEqual),i=VG(s.areMapsEqual),o=VG(s.areObjectsEqual),l=VG(s.areSetsEqual);s=lX({},s,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return s}(e),c=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,s=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,o=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,c,d){if(e===c)return!0;if(null==e||null==c||"object"!=typeof e||"object"!=typeof c)return e!=e&&c!=c;var u=e.constructor;if(u!==c.constructor)return!1;if(u===Object)return s(e,c,d);if(iX(e))return t(e,c,d);if(null!=oX&&oX(e))return l(e,c,d);if(u===Date)return r(e,c,d);if(u===RegExp)return i(e,c,d);if(u===Map)return n(e,c,d);if(u===Set)return o(e,c,d);var m=cX(e);return"[object Date]"===m?r(e,c,d):"[object RegExp]"===m?i(e,c,d):"[object Map]"===m?n(e,c,d):"[object Set]"===m?o(e,c,d):"[object Object]"===m?"function"!=typeof e.then&&"function"!=typeof c.then&&s(e,c,d):"[object Arguments]"===m?s(e,c,d):("[object Boolean]"===m||"[object Number]"===m||"[object String]"===m)&&a(e,c,d)}}(l);return function(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,a=e.strict;if(n)return function(e,i){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return r(e,i,{cache:c,equals:s,meta:d,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var i={cache:void 0,equals:s,meta:void 0,strict:a};return function(e,t){return r(e,t,i)}}({circular:n,comparator:c,createState:a,equals:s?s(c):(t=c,function(e,r,n,s,a,i,o){return t(e,r,o)}),strict:o})}function mX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(s){r<0&&(r=s),s-r>t?(e(s),r=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)})}function hX(e){return(hX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pX(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xX(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var s=pX(n),a=s[0],i=s.slice(1);return"number"==typeof a?void mX(r.bind(null,i),a):(r(a),void mX(r.bind(null,i)))}"object"===hX(n)&&e(n),"function"==typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function gX(e){return(gX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vX(Object(r),!0).forEach(function(t){jX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jX(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==gX(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==gX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gX(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}uX({strict:!0}),uX({circular:!0}),uX({circular:!0,strict:!0}),uX({createInternalComparator:function(){return YG}}),uX({strict:!0,createInternalComparator:function(){return YG}}),uX({circular:!0,createInternalComparator:function(){return YG}}),uX({circular:!0,createInternalComparator:function(){return YG},strict:!0});var bX=function(e){return e},wX=function(e,t){return Object.keys(t).reduce(function(r,n){return yX(yX({},r),{},jX({},n,e(n,t[n])))},{})},NX=function(e,t,r){return e.map(function(e){return"".concat((n=e,n.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(r);var n}).join(",")};function _X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||kX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SX(e){return function(e){if(Array.isArray(e))return CX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kX(e,t){if(e){if("string"==typeof e)return CX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CX(e,t):void 0}}function CX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var EX=1e-4,OX=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},MX=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},PX=function(e,t){return function(r){var n=OX(e,t);return MX(n,r)}},AX=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],s=t[1],a=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,s=0,a=1,i=1;break;case"ease":n=.25,s=.1,a=.25,i=1;break;case"ease-in":n=.42,s=0,a=1,i=1;break;case"ease-out":n=.42,s=0,a=.58,i=1;break;case"ease-in-out":n=0,s=0,a=.58,i=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=_X(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],s=l[1],a=l[2],i=l[3]}}var c,d,u=PX(n,a),m=PX(s,i),h=(c=n,d=a,function(e){var t=OX(c,d),r=[].concat(SX(t.map(function(e,t){return e*t}).slice(1)),[0]);return MX(r,e)}),p=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var s=u(r)-t,a=h(r);if(Math.abs(s-t)<EX||a<EX)return m(r);r=p(r-s/a)}return m(r)};return f.isStepper=!1,f},TX=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AX(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,s=void 0===n?8:n,a=e.dt,i=void 0===a?17:a,o=function(e,t,n){var a=n+(-(e-t)*r-n*s)*i/1e3,o=n*i/1e3+e;return Math.abs(o-t)<EX&&Math.abs(a)<EX?[t,0]:[o,a]};return o.isStepper=!0,o.dt=i,o}();default:if("cubic-bezier"===n.split("(")[0])return AX(n)}return"function"==typeof n?n:null};function DX(e){return(DX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RX(e){return function(e){if(Array.isArray(e))return BX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LX(Object(r),!0).forEach(function(t){IX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function IX(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==DX(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==DX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===DX(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||zX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zX(e,t){if(e){if("string"==typeof e)return BX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BX(e,t):void 0}}function BX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $X=function(e,t,r){return e+(t-e)*r},UX=function(e){return e.from!==e.to},VX=function e(t,r,n){var s=wX(function(e,r){if(UX(r)){var n=FX(t(r.from,r.to,r.velocity),2),s=n[0],a=n[1];return qX(qX({},r),{},{from:s,velocity:a})}return r},r);return n<1?wX(function(e,t){return UX(t)?qX(qX({},t),{},{velocity:$X(t.velocity,s[e].velocity,n),from:$X(t.from,s[e].from,n)}):t},r):e(t,s,n-1)};const WX=function(e,t,r,n,s){var a,i,o,l,c=(a=e,i=t,[Object.keys(a),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(r,n){return qX(qX({},r),{},IX({},n,[e[n],t[n]]))},{}),u=c.reduce(function(r,n){return qX(qX({},r),{},IX({},n,{from:e[n],velocity:0,to:t[n]}))},{}),m=-1,h=function(){return null};return h=r.isStepper?function(n){o||(o=n);var a=(n-o)/r.dt;u=VX(r,u,a),s(qX(qX(qX({},e),t),wX(function(e,t){return t.from},u))),o=n,Object.values(u).filter(UX).length&&(m=requestAnimationFrame(h))}:function(a){l||(l=a);var i=(a-l)/n,o=wX(function(e,t){return $X.apply(void 0,RX(t).concat([r(i)]))},d);if(s(qX(qX(qX({},e),t),o)),i<1)m=requestAnimationFrame(h);else{var c=wX(function(e,t){return $X.apply(void 0,RX(t).concat([r(1)]))},d);s(qX(qX(qX({},e),t),c))}},function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(m)}}};function HX(e){return(HX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var YX=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KX(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GX(e){return function(e){if(Array.isArray(e))return XX(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return XX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QX(Object(r),!0).forEach(function(t){JX(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function JX(e,t,r){return(t=tQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQ(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tQ(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tQ(e){var t=function(e,t){if("object"!==HX(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==HX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HX(t)?t:String(t)}function rQ(e,t){return(rQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(mte){return!1}}();return function(){var r,n=iQ(e);if(t){var s=iQ(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return sQ(this,r)}}function sQ(e,t){if(t&&("object"===HX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aQ(e)}function aQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iQ(e){return(iQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oQ=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rQ(e,t)}(t,Ne.PureComponent);var e=nQ(t);function t(r,n){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=(s=e.call(this,r,n)).props,i=a.isActive,o=a.attributeName,l=a.from,c=a.to,d=a.steps,u=a.children,m=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(aQ(s)),s.changeStyle=s.changeStyle.bind(aQ(s)),!i||m<=0)return s.state={style:{}},"function"==typeof u&&(s.state={style:c}),sQ(s);if(d&&d.length)s.state={style:d[0].style};else if(l){if("function"==typeof u)return s.state={style:l},sQ(s);s.state={style:o?JX({},o,l):l}}else s.state={style:{}};return s}return eQ(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,s=t.attributeName,a=t.shouldReAnimate,i=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(dX(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||a?o:e.to;if(this.state&&l){var u={style:s?JX({},s,d):d};(s&&l[s]!==d||!s&&l!==d)&&this.setState(u)}this.runAnimation(ZX(ZX({},this.props),{},{from:d,begin:0}))}}else{var m={style:s?JX({},s,i):i};this.state&&l&&(s&&l[s]!==i||!s&&l!==i)&&this.setState(m)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,s=e.duration,a=e.easing,i=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=WX(r,n,TX(a),s,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},s,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,s=e.onAnimationStart,a=r[0],i=a.style,o=a.duration,l=void 0===o?0:o;return this.manager.start([s].concat(GX(r.reduce(function(e,n,s){if(0===s)return e;var a=n.duration,i=n.easing,o=void 0===i?"ease":i,l=n.style,c=n.properties,d=n.onAnimationEnd,u=s>0?r[s-1]:n,m=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(GX(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:a,easing:o}),a]);var h=NX(m,a,o),p=ZX(ZX(ZX({},u.style),l),{},{transition:h});return[].concat(GX(e),[p,a,d]).filter(bX)},[i,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=xX());var t=e.begin,r=e.duration,n=e.attributeName,s=e.to,a=e.easing,i=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof a&&"function"!=typeof c&&"spring"!==a)if(l.length>1)this.runStepAnimation(e);else{var u=n?JX({},n,s):s,m=NX(Object.keys(u),r,a);d.start([i,t,ZX(ZX({},u),{},{transition:m}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var r=e.duration;e.attributeName,e.easing;var n=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var s=KX(e,YX),a=Ne.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!n||0===a||r<=0)return t;var o=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,a=t.className;return Ne.cloneElement(e,ZX(ZX({},s),{},{style:ZX(ZX({},n),i),className:a}))};return 1===a?o(Ne.Children.only(t)):ke.createElement("div",null,Ne.Children.map(t,function(e){return o(e)}))}}]),t}();function lQ(e){return(lQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cQ(){return cQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cQ.apply(this,arguments)}function dQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uQ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mQ(Object(r),!0).forEach(function(t){pQ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pQ(e,t,r){var n;return n=function(e,t){if("object"!=lQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lQ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}oQ.displayName="Animate",oQ.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},oQ.propTypes={from:FG.oneOfType([FG.object,FG.string]),to:FG.oneOfType([FG.object,FG.string]),attributeName:FG.string,duration:FG.number,begin:FG.number,easing:FG.oneOfType([FG.string,FG.func]),steps:FG.arrayOf(FG.shape({duration:FG.number.isRequired,style:FG.object.isRequired,easing:FG.oneOfType([FG.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),FG.func]),properties:FG.arrayOf("string"),onAnimationEnd:FG.func})),children:FG.oneOfType([FG.node,FG.func]),isActive:FG.bool,canBegin:FG.bool,onAnimationEnd:FG.func,shouldReAnimate:FG.bool,onAnimationStart:FG.func,onAnimationReStart:FG.func},FG.object,FG.object,FG.object,FG.element,FG.object,FG.object,FG.object,FG.oneOfType([FG.array,FG.element]),FG.any;var fQ=function(e,t,r,n,s){var a,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=s[u]>i?i:s[u];a="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(a+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),a+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(a+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),a+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(a+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),a+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(a+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),a+="Z"}else if(i>0&&s===+s&&s>0){var m=Math.min(i,s);a="M ".concat(e,",").concat(t+o*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,"\n            L ").concat(e+r-l*m,",").concat(t,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,"\n            L ").concat(e+r,",").concat(t+n-o*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,"\n            L ").concat(e+l*m,",").concat(t+n,"\n            A ").concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else a="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return a},xQ=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,s=t.x,a=t.y,i=t.width,o=t.height;if(Math.abs(i)>0&&Math.abs(o)>0){var l=Math.min(s,s+i),c=Math.max(s,s+i),d=Math.min(a,a+o),u=Math.max(a,a+o);return r>=l&&r<=c&&n>=d&&n<=u}return!1},gQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vQ=function(e){var t=hQ(hQ({},gQ),e),r=Ne.useRef(),n=dQ(Ne.useState(-1),2),s=n[0],a=n[1];Ne.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&a(e)}catch(hte){}},[]);var i=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,m=t.animationEasing,h=t.animationDuration,p=t.animationBegin,f=t.isAnimationActive,x=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var g=Pr("recharts-rectangle",u);return x?ke.createElement(oQ,{canBegin:s>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:h,animationEasing:m,isActive:x},function(e){var n=e.width,a=e.height,i=e.x,o=e.y;return ke.createElement(oQ,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:f,easing:m},ke.createElement("path",cQ({},RA(t,!0),{className:g,d:fQ(i,o,n,a,d),ref:r})))}):ke.createElement("path",cQ({},RA(t,!0),{className:g,d:fQ(i,o,l,c,d)}))},yQ=["points","className","baseLinePoints","connectNulls"];function jQ(){return jQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jQ.apply(this,arguments)}function bQ(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wQ(e){return function(e){if(Array.isArray(e))return NQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return NQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NQ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _Q=function(e){return e&&e.x===+e.x&&e.y===+e.y},SQ=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){_Q(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),_Q(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce(function(e,t){return[].concat(wQ(e),wQ(t))},[])]);var n=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(n,"Z"):n},kQ=function(e){var t=e.points,r=e.className,n=e.baseLinePoints,s=e.connectNulls,a=bQ(e,yQ);if(!t||!t.length)return null;var i=Pr("recharts-polygon",r);if(n&&n.length){var o=a.stroke&&"none"!==a.stroke,l=function(e,t,r){var n=SQ(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(SQ(t.reverse(),r).slice(1))}(t,n,s);return ke.createElement("g",{className:i},ke.createElement("path",jQ({},RA(a,!0),{fill:"Z"===l.slice(-1)?a.fill:"none",stroke:"none",d:l})),o?ke.createElement("path",jQ({},RA(a,!0),{fill:"none",d:SQ(t,s)})):null,o?ke.createElement("path",jQ({},RA(a,!0),{fill:"none",d:SQ(n,s)})):null)}var c=SQ(t,s);return ke.createElement("path",jQ({},RA(a,!0),{fill:"Z"===c.slice(-1)?a.fill:"none",className:i,d:c}))};function CQ(){return CQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CQ.apply(this,arguments)}var EQ=function(e){var t=e.cx,r=e.cy,n=e.r,s=Pr("recharts-dot",e.className);return t===+t&&r===+r&&n===+n?ke.createElement("circle",CQ({},RA(e,!1),yA(e),{className:s,cx:t,cy:r,r:n})):null};function OQ(e){return(OQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var MQ=["x","y","top","left","width","height","className"];function PQ(){return PQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PQ.apply(this,arguments)}function AQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TQ(e,t,r){var n;return n=function(e,t){if("object"!=OQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==OQ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DQ(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var RQ=function(e,t,r,n,s,a){return"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r)},LQ=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,s=void 0===n?0:n,a=e.top,i=void 0===a?0:a,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,m=void 0===u?0:u,h=e.className,p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AQ(Object(r),!0).forEach(function(t){TQ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:s,top:i,left:l,width:d,height:m},DQ(e,MQ));return aA(r)&&aA(s)&&aA(d)&&aA(m)&&aA(i)&&aA(l)?ke.createElement("path",PQ({},RA(p,!0),{className:Pr("recharts-cross",h),d:RQ(r,s,d,m,i,l)})):null},qQ=fH,IQ=xH,FQ=sI;const zQ=Ee(function(e,t){return e&&e.length?qQ(e,FQ(t),IQ):void 0});var BQ=fH,$Q=sI,UQ=bH;const VQ=Ee(function(e,t){return e&&e.length?BQ(e,$Q(t),UQ):void 0});var WQ=["cx","cy","angle","ticks","axisLine"],HQ=["ticks","tick","angle","tickFormatter","stroke"];function YQ(e){return(YQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KQ(){return KQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KQ.apply(this,arguments)}function GQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function XQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GQ(Object(r),!0).forEach(function(t){nZ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function QQ(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sZ(n.key),n)}}function JQ(e,t,r){return t=tZ(t),function(e,t){if(t&&("object"===YQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eZ()?Reflect.construct(t,r||[],tZ(e).constructor):t.apply(e,r))}function eZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(eZ=function(){return!!e})()}function tZ(e){return(tZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rZ(e,t){return(rZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nZ(e,t,r){return(t=sZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sZ(e){var t=function(e,t){if("object"!=YQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YQ(t)?t:t+""}var aZ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),JQ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rZ(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement(AB,KQ({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],(r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,s=r.cx,a=r.cy;return FK(s,a,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,s=e.ticks,a=zQ(s,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:VQ(s,function(e){return e.coordinate||0}).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,s=e.ticks,a=e.axisLine,i=QQ(e,WQ),o=s.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=FK(t,r,o[0],n),c=FK(t,r,o[1],n),d=XQ(XQ(XQ({},RA(i,!1)),{},{fill:"none"},RA(a,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return ke.createElement("line",KQ({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,s=r.tick,a=r.angle,i=r.tickFormatter,o=r.stroke,l=QQ(r,HQ),c=this.getTickTextAnchor(),d=RA(l,!1),u=RA(s,!1),m=n.map(function(r,n){var l=t.getTickValueCoord(r),m=XQ(XQ(XQ(XQ({textAnchor:c,transform:"rotate(".concat(90-a,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:n},l),{},{payload:r});return ke.createElement(HA,KQ({className:Pr("recharts-polar-radius-axis-tick",VK(s)),key:"tick-".concat(r.coordinate)},jA(t.props,r,n)),e.renderTickItem(s,m,i?i(r.value,n):r.value))});return ke.createElement(HA,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,n=e.tick;return t&&t.length?ke.createElement(HA,{className:Pr("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),n&&this.renderTicks(),tG.renderCallByParent(this.props,this.getViewBox())):null}}])&&ZQ(t.prototype,r),n&&ZQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function iZ(e){return(iZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oZ(){return oZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oZ.apply(this,arguments)}function lZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lZ(Object(r),!0).forEach(function(t){fZ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xZ(n.key),n)}}function uZ(e,t,r){return t=hZ(t),function(e,t){if(t&&("object"===iZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mZ()?Reflect.construct(t,r||[],hZ(e).constructor):t.apply(e,r))}function mZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mZ=function(){return!!e})()}function hZ(e){return(hZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pZ(e,t){return(pZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fZ(e,t,r){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZ(e){var t=function(e,t){if("object"!=iZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iZ(t)?t:t+""}nZ(aZ,"displayName","PolarRadiusAxis"),nZ(aZ,"axisType","radiusAxis"),nZ(aZ,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var gZ=Math.PI/180,vZ=1e-5,yZ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uZ(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pZ(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement(AB,oZ({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],(r=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,s=t.radius,a=t.orientation,i=t.tickSize||8,o=FK(r,n,s,e.coordinate),l=FK(r,n,s+("inner"===a?-1:1)*i,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*gZ);return r>vZ?"outer"===t?"start":"end":r<-vZ?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,s=e.axisLine,a=e.axisLineType,i=cZ(cZ({},RA(this.props,!1)),{},{fill:"none"},RA(s,!1));if("circle"===a)return ke.createElement(EQ,oZ({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:r,r:n}));var o=this.props.ticks.map(function(e){return FK(t,r,n,e.coordinate)});return ke.createElement(kQ,oZ({className:"recharts-polar-angle-axis-line"},i,{points:o}))}},{key:"renderTicks",value:function(){var t=this,r=this.props,n=r.ticks,s=r.tick,a=r.tickLine,i=r.tickFormatter,o=r.stroke,l=RA(this.props,!1),c=RA(s,!1),d=cZ(cZ({},l),{},{fill:"none"},RA(a,!1)),u=n.map(function(r,n){var u=t.getTickLineCoord(r),m=cZ(cZ(cZ({textAnchor:t.getTickTextAnchor(r)},l),{},{stroke:"none",fill:o},c),{},{index:n,payload:r,x:u.x2,y:u.y2});return ke.createElement(HA,oZ({className:Pr("recharts-polar-angle-axis-tick",VK(s)),key:"tick-".concat(r.coordinate)},jA(t.props,r,n)),a&&ke.createElement("line",oZ({className:"recharts-polar-angle-axis-tick-line"},d,u)),s&&e.renderTickItem(s,m,i?i(r.value,n):r.value))});return ke.createElement(HA,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,n=e.axisLine;return r<=0||!t||!t.length?null:ke.createElement(HA,{className:Pr("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks())}}])&&dZ(t.prototype,r),n&&dZ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();fZ(yZ,"displayName","PolarAngleAxis"),fZ(yZ,"axisType","angleAxis"),fZ(yZ,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var jZ=wL(Object.getPrototypeOf,Object),bZ=jO,wZ=jZ,NZ=bO,_Z=Function.prototype,SZ=Object.prototype,kZ=_Z.toString,CZ=SZ.hasOwnProperty,EZ=kZ.call(Object);const OZ=Ee(function(e){if(!NZ(e)||"[object Object]"!=bZ(e))return!1;var t=wZ(e);if(null===t)return!0;var r=CZ.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&kZ.call(r)==EZ});var MZ=jO,PZ=bO;const AZ=Ee(function(e){return!0===e||!1===e||PZ(e)&&"[object Boolean]"==MZ(e)});function TZ(e){return(TZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DZ(){return DZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DZ.apply(this,arguments)}function RZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LZ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function IZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qZ(Object(r),!0).forEach(function(t){FZ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function FZ(e,t,r){var n;return n=function(e,t){if("object"!=TZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==TZ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zZ,BZ=function(e,t,r,n,s){var a,i=r-n;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-i/2,",").concat(t+s),a+="L ".concat(e+r-i/2-n,",").concat(t+s),a+="L ".concat(e,",").concat(t," Z")},$Z={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UZ=function(e){var t=IZ(IZ({},$Z),e),r=Ne.useRef(),n=RZ(Ne.useState(-1),2),s=n[0],a=n[1];Ne.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&a(e)}catch(hte){}},[]);var i=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,m=t.animationEasing,h=t.animationDuration,p=t.animationBegin,f=t.isUpdateAnimationActive;if(i!==+i||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var x=Pr("recharts-trapezoid",u);return f?ke.createElement(oQ,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:i,y:o},duration:h,animationEasing:m,isActive:f},function(e){var n=e.upperWidth,a=e.lowerWidth,i=e.height,o=e.x,l=e.y;return ke.createElement(oQ,{canBegin:s>0,from:"0px ".concat(-1===s?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:m},ke.createElement("path",DZ({},RA(t,!0),{className:x,d:BZ(o,l,n,a,i),ref:r})))}):ke.createElement("g",null,ke.createElement("path",DZ({},RA(t,!0),{className:x,d:BZ(i,o,l,c,d)})))},VZ=["option","shapeType","propTransformer","activeClassName","isActive"];function WZ(e){return(WZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HZ(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YZ(Object(r),!0).forEach(function(t){GZ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GZ(e,t,r){var n;return n=function(e,t){if("object"!=WZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==WZ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XZ(e,t){return KZ(KZ({},t),e)}function QZ(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ke.createElement(vQ,r);case"trapezoid":return ke.createElement(UZ,r);case"sector":return ke.createElement(_G,r);case"symbols":if(function(e){return"symbols"===e}(t))return ke.createElement(AD,r);break;default:return null}}function ZZ(e){var t,r=e.option,n=e.shapeType,s=e.propTransformer,a=void 0===s?XZ:s,i=e.activeClassName,o=void 0===i?"recharts-active-shape":i,l=e.isActive,c=HZ(e,VZ);if(Ne.isValidElement(r))t=Ne.cloneElement(r,KZ(KZ({},c),function(e){return Ne.isValidElement(e)?e.props:e}(r)));else if(RO(r))t=r(c);else if(OZ(r)&&!AZ(r)){var d=a(r,c);t=ke.createElement(QZ,{shapeType:n,elementProps:d})}else{var u=c;t=ke.createElement(QZ,{shapeType:n,elementProps:u})}return l?ke.createElement(HA,{className:o},t):t}function JZ(e,t){return null!=t&&"trapezoids"in e.props}function eJ(e,t){return null!=t&&"sectors"in e.props}function tJ(e,t){return null!=t&&"points"in e.props}function rJ(e,t){var r,n,s=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,a=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return s&&a}function nJ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function sJ(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function aJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=function(e,t){var r;return JZ(e,t)?r="trapezoids":eJ(e,t)?r="sectors":tJ(e,t)&&(r="points"),r}(r,t),a=function(e,t){var r,n;return JZ(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:eJ(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:tJ(e,t)?t.payload:{}}(r,t),i=n.filter(function(e,n){var i=DH(a,e),o=r.props[s].filter(function(e){var n=function(e,t){var r;return JZ(e,t)?r=rJ:eJ(e,t)?r=nJ:tJ(e,t)&&(r=sJ),r}(r,t);return n(e,t)}),l=r.props[s].indexOf(o[o.length-1]);return i&&n===l});return n.indexOf(i[i.length-1])}function iJ(e){return(iJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oJ(){return oJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oJ.apply(this,arguments)}function lJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lJ(Object(r),!0).forEach(function(t){fJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xJ(n.key),n)}}function uJ(e,t,r){return t=hJ(t),function(e,t){if(t&&("object"===iJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mJ()?Reflect.construct(t,r||[],hJ(e).constructor):t.apply(e,r))}function mJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mJ=function(){return!!e})()}function hJ(e){return(hJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pJ(e,t){return(pJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fJ(e,t,r){return(t=xJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xJ(e){var t=function(e,t){if("object"!=iJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iJ(t)?t:t+""}var gJ=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fJ(r=uJ(this,e,[t]),"pieRef",null),fJ(r,"sectorRefs",[]),fJ(r,"id",lA("recharts-pie-")),fJ(r,"handleAnimationEnd",function(){var e=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),RO(e)&&e()}),fJ(r,"handleAnimationStart",function(){var e=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),RO(e)&&e()}),r.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pJ(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,r){if(ke.isValidElement(e))return ke.cloneElement(e,t);if(RO(e))return e(t);var n=Pr("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return ke.createElement(RG,oJ({},t,{key:r,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,t,r){if(ke.isValidElement(e))return ke.cloneElement(e,t);var n=r;if(RO(e)&&(n=e(t),ke.isValidElement(n)))return n;var s=Pr("recharts-pie-label-text","boolean"==typeof e||RO(e)?"":e.className);return ke.createElement(AB,oJ({},t,{alignmentBaseline:"middle",className:s}),n)}}],(r=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.label,s=r.labelLine,a=r.dataKey,i=r.valueKey,o=RA(this.props,!1),l=RA(n,!1),c=RA(s,!1),d=n&&n.offsetRadius||20,u=t.map(function(t,r){var u=(t.startAngle+t.endAngle)/2,m=FK(t.cx,t.cy,t.outerRadius+d,u),h=cJ(cJ(cJ(cJ({},o),t),{},{stroke:"none"},l),{},{index:r,textAnchor:e.getTextAnchor(m.x,t.cx)},m),p=cJ(cJ(cJ(cJ({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:r,points:[FK(t.cx,t.cy,t.outerRadius,u),m]}),f=a;return CP(a)&&CP(i)?f="value":CP(a)&&(f=i),ke.createElement(HA,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(r)},s&&e.renderLabelLineItem(s,p,"line"),e.renderLabelItem(n,h,iK(t,f)))});return ke.createElement(HA,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,n=r.activeShape,s=r.blendStroke,a=r.inactiveShape;return e.map(function(r,i){if(0===(null==r?void 0:r.startAngle)&&0===(null==r?void 0:r.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(i),l=a&&t.hasActiveIndex()?a:null,c=o?n:l,d=cJ(cJ({},r),{},{stroke:s?r.fill:r.stroke,tabIndex:-1});return ke.createElement(HA,oJ({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},jA(t.props,r,i),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(i)}),ke.createElement(ZZ,oJ({option:c,isActive:o,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,n=t.isAnimationActive,s=t.animationBegin,a=t.animationDuration,i=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return ke.createElement(oQ,{begin:s,duration:a,isActive:n,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,s=[],a=(r&&r[0]).startAngle;return r.forEach(function(e,t){var r=c&&c[t],i=t>0?kP(e,"paddingAngle",0):0;if(r){var o=uA(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=cJ(cJ({},e),{},{startAngle:a+i,endAngle:a+o(n)+i});s.push(l),a=l.endAngle}else{var d=e.endAngle,u=e.startAngle,m=uA(0,d-u)(n),h=cJ(cJ({},e),{},{startAngle:a+i,endAngle:a+m+i});s.push(h),a=h.endAngle}}),ke.createElement(HA,null,e.renderSectorsStatically(s))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&DH(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,r=t.hide,n=t.sectors,s=t.className,a=t.label,i=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(r||!n||!n.length||!aA(i)||!aA(o)||!aA(l)||!aA(c))return null;var m=Pr("recharts-pie",s);return ke.createElement(HA,{tabIndex:this.props.rootTabIndex,className:m,ref:function(t){e.pieRef=t}},this.renderSectors(),a&&this.renderLabels(n),tG.renderCallByParent(this.props,null,!1),(!d||u)&&fG.renderCallByParent(this.props,n,!1))}}])&&dJ(t.prototype,r),n&&dJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();zZ=gJ,fJ(gJ,"displayName","Pie"),fJ(gJ,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!oz.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),fJ(gJ,"parseDeltaAngle",function(e,t){return nA(t-e)*Math.min(Math.abs(t-e),360)}),fJ(gJ,"getRealPieData",function(e){var t=e.data,r=e.children,n=RA(e,!1),s=MA(r,Gz);return t&&t.length?t.map(function(e,t){return cJ(cJ(cJ({payload:e},n),e),s&&s[t]&&s[t].props)}):s&&s.length?s.map(function(e){return cJ(cJ({},n),e.props)}):[]}),fJ(gJ,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,a=t.height,i=zK(s,a);return{cx:n+cA(e.cx,s,s/2),cy:r+cA(e.cy,a,a/2),innerRadius:cA(e.innerRadius,i,0),outerRadius:cA(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(s*s+a*a)/2}}),fJ(gJ,"getComposedData",function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?cJ(cJ({},t.type.defaultProps),t.props):t.props,s=zZ.getRealPieData(n);if(!s||!s.length)return null;var a=n.cornerRadius,i=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,d=n.nameKey,u=n.valueKey,m=n.tooltipType,h=Math.abs(n.minAngle),p=zZ.parseCoordinateOfPie(n,r),f=zZ.parseDeltaAngle(i,o),x=Math.abs(f),g=c;CP(c)&&CP(u)?(YA(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),g="value"):CP(c)&&(YA(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),g=u);var v,y,j=s.filter(function(e){return 0!==iK(e,g,0)}).length,b=x-j*h-(x>=360?j:j-1)*l,w=s.reduce(function(e,t){var r=iK(t,g,0);return e+(aA(r)?r:0)},0);w>0&&(v=s.map(function(e,t){var r,n=iK(e,g,0),s=iK(e,d,t),o=(aA(n)?n:0)/w,c=(r=t?y.endAngle+nA(f)*l*(0!==n?1:0):i)+nA(f)*((0!==n?h:0)+o*b),u=(r+c)/2,x=(p.innerRadius+p.outerRadius)/2,v=[{name:s,value:n,payload:e,dataKey:g,type:m}],j=FK(p.cx,p.cy,x,u);return y=cJ(cJ(cJ({percent:o,cornerRadius:a,name:s,tooltipPayload:v,midAngle:u,middleRadius:x,tooltipPosition:j},e),p),{},{value:iK(e,g),startAngle:r,endAngle:c,payload:e,paddingAngle:nA(f)*l})}));return cJ(cJ({},p),{},{sectors:v,data:s})});var vJ=Math.ceil,yJ=Math.max;var jJ=Pz,bJ=1/0;var wJ=function(e){return e?(e=jJ(e))===bJ||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},NJ=function(e,t,r,n){for(var s=-1,a=yJ(vJ((t-e)/(r||1)),0),i=Array(a);a--;)i[n?a:++s]=e,e+=r;return i},_J=MF,SJ=wJ;const kJ=Ee(function(e){return function(t,r,n){return n&&"number"!=typeof n&&_J(t,r,n)&&(r=n=void 0),t=SJ(t),void 0===r?(r=t,t=0):r=SJ(r),n=void 0===n?t<r?1:-1:SJ(n),NJ(t,r,n,e)}}());function CJ(e){return(CJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EJ(Object(r),!0).forEach(function(t){MJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function MJ(e,t,r){var n;return n=function(e,t){if("object"!=CJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==CJ(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PJ=["Webkit","Moz","O","ms"];function AJ(e){return(AJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TJ(){return TJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TJ.apply(this,arguments)}function DJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DJ(Object(r),!0).forEach(function(t){BJ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$J(n.key),n)}}function qJ(e,t,r){return t=FJ(t),function(e,t){if(t&&("object"===AJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,IJ()?Reflect.construct(t,r||[],FJ(e).constructor):t.apply(e,r))}function IJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(IJ=function(){return!!e})()}function FJ(e){return(FJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zJ(e,t){return(zJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function BJ(e,t,r){return(t=$J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=function(e,t){if("object"!=AJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AJ(t)?t:t+""}var UJ=function(e){return e.changedTouches&&!!e.changedTouches.length},VJ=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),BJ(r=qJ(this,e,[t]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),BJ(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),BJ(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,s=e.startIndex;null==n||n({endIndex:t,startIndex:s})}),r.detachDragEndListener()}),BJ(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),BJ(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),BJ(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),BJ(r,"handleSlideDragStart",function(e){var t=UJ(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zJ(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,s=e.height,a=e.stroke,i=Math.floor(r+s/2)-1;return ke.createElement(ke.Fragment,null,ke.createElement("rect",{x:t,y:r,width:n,height:s,fill:a,stroke:"none"}),ke.createElement("line",{x1:t+1,y1:i,x2:t+n-1,y2:i,fill:"none",stroke:"#fff"}),ke.createElement("line",{x1:t+1,y1:i+2,x2:t+n-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,r){return ke.isValidElement(t)?ke.cloneElement(t,r):RO(t)?t(r):e.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,s=e.x,a=e.travellerWidth,i=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return RJ({prevData:r,prevTravellerWidth:a,prevUpdateId:i,prevX:s,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,s=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=o$().domain(kJ(0,o)).range([s,s+a-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:s,travellerWidth:a,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||s!==t.prevX||a!==t.prevTravellerWidth)){t.scale.range([s,s+n-a]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:a,prevUpdateId:i,prevX:s,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var s=Math.floor((r+n)/2);e[s]>t?n=s:r=s}return t>=e[n]?n:r}}],(r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var r=t.startX,n=t.endX,s=this.state.scaleValues,a=this.props,i=a.gap,o=a.data.length-1,l=Math.min(r,n),c=Math.max(r,n),d=e.getIndexInRange(s,l),u=e.getIndexInRange(s,c);return{startIndex:d-d%i,endIndex:u===o?o:u-u%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,s=t.dataKey,a=iK(r[e],s,e);return RO(n)?n(a,e):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,s=t.endX,a=this.props,i=a.x,o=a.width,l=a.travellerWidth,c=a.startIndex,d=a.endIndex,u=a.onChange,m=e.pageX-r;m>0?m=Math.min(m,i+o-l-s,i+o-l-n):m<0&&(m=Math.max(m,i-n,i-s));var h=this.getIndex({startX:n+m,endX:s+m});h.startIndex===c&&h.endIndex===d||!u||u(h),this.setState({startX:n+m,endX:s+m,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=UJ(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,s=t.endX,a=t.startX,i=this.state[n],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,m=o.gap,h=o.data,p={startX:this.state.startX,endX:this.state.endX},f=e.pageX-r;f>0?f=Math.min(f,l+c-d-i):f<0&&(f=Math.max(f,l-i)),p[n]=i+f;var x=this.getIndex(p),g=x.startIndex,v=x.endIndex;this.setState(BJ(BJ({},n,i+f),"brushMoveStartX",e.pageX),function(){var e;u&&(e=h.length-1,("startX"===n&&(s>a?g%m===0:v%m===0)||s<a&&v===e||"endX"===n&&(s>a?v%m===0:g%m===0)||s>a&&v===e)&&u(x))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,s=n.scaleValues,a=n.startX,i=n.endX,o=this.state[t],l=s.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=s.length)){var d=s[c];"startX"===t&&d>=i||"endX"===t&&d<=a||this.setState(BJ({},t,d),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,a=e.fill,i=e.stroke;return ke.createElement("rect",{stroke:i,fill:a,x:t,y:r,width:n,height:s})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,a=e.data,i=e.children,o=e.padding,l=Ne.Children.only(i);return l?ke.cloneElement(l,{x:t,y:r,width:n,height:s,margin:o,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(t,r){var n,s,a=this,i=this.props,o=i.y,l=i.travellerWidth,c=i.height,d=i.traveller,u=i.ariaLabel,m=i.data,h=i.startIndex,p=i.endIndex,f=Math.max(t,this.props.x),x=RJ(RJ({},RA(this.props,!1)),{},{x:f,y:o,width:l,height:c}),g=u||"Min value: ".concat(null===(n=m[h])||void 0===n?void 0:n.name,", Max value: ").concat(null===(s=m[p])||void 0===s?void 0:s.name);return ke.createElement(HA,{tabIndex:0,role:"slider","aria-label":g,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),a.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,x))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,s=r.height,a=r.stroke,i=r.travellerWidth,o=Math.min(e,t)+i,l=Math.max(Math.abs(t-e)-i,0);return ke.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:o,y:n,width:l,height:s})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,s=e.height,a=e.travellerWidth,i=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:i};return ke.createElement(HA,{className:"recharts-brush-texts"},ke.createElement(AB,TJ({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:n+s/2},d),this.getTextOfTick(t)),ke.createElement(AB,TJ({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+a+5,y:n+s/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,s=e.x,a=e.y,i=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,m=c.isTextActive,h=c.isSlideMoving,p=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!aA(s)||!aA(a)||!aA(i)||!aA(o)||i<=0||o<=0)return null;var x,g,v,y,j=Pr("recharts-brush",r),b=1===ke.Children.count(n),w=(g="none",v=(x="userSelect").replace(/(\w)/,function(e){return e.toUpperCase()}),(y=PJ.reduce(function(e,t){return OJ(OJ({},e),{},MJ({},t+v,g))},{}))[x]=g,y);return ke.createElement(HA,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(m||h||p||f||l)&&this.renderText())}}])&&LJ(t.prototype,r),n&&LJ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();BJ(VJ,"displayName","Brush"),BJ(VJ,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WJ=GI;var HJ=lR,YJ=sI,KJ=function(e,t){var r;return WJ(e,function(e,n,s){return!(r=t(e,n,s))}),!!r},GJ=sO,XJ=MF;const QJ=Ee(function(e,t,r){var n=GJ(e)?HJ:KJ;return r&&XJ(e,t,r)&&(t=void 0),n(e,YJ(t))});var ZJ=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},JJ=gF;var e0=function(e,t,r){"__proto__"==t&&JJ?JJ(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},t0=YI,r0=sI;const n0=Ee(function(e,t){var r={};return t=r0(t),t0(e,function(e,n,s){e0(r,n,t(e,n,s))}),r});var s0=GI;var a0=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0},i0=function(e,t){var r=!0;return s0(e,function(e,n,s){return r=!!t(e,n,s)}),r},o0=sI,l0=sO,c0=MF;const d0=Ee(function(e,t,r){var n=l0(e)?a0:i0;return r&&c0(e,t,r)&&(t=void 0),n(e,o0(t))});var u0=["x","y"];function m0(e){return(m0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(this,arguments)}function p0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p0(Object(r),!0).forEach(function(t){x0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function x0(e,t,r){var n;return n=function(e,t){if("object"!=m0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==m0(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g0(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function v0(e,t){var r=e.x,n=e.y,s=g0(e,u0),a="".concat(r),i=parseInt(a,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||s.height),d=parseInt(c,10),u="".concat(t.width||s.width),m=parseInt(u,10);return f0(f0(f0(f0(f0({},t),s),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function y0(e){return ke.createElement(ZZ,h0({shapeType:"rectangle",propTransformer:v0,activeClassName:"recharts-active-bar"},e))}var j0,b0=["value","background"];function w0(e){return(w0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N0(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(this,arguments)}function S0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S0(Object(r),!0).forEach(function(t){A0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T0(n.key),n)}}function E0(e,t,r){return t=M0(t),function(e,t){if(t&&("object"===w0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O0()?Reflect.construct(t,r||[],M0(e).constructor):t.apply(e,r))}function O0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(O0=function(){return!!e})()}function M0(e){return(M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P0(e,t){return(P0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A0(e,t,r){return(t=T0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T0(e){var t=function(e,t){if("object"!=w0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w0(t)?t:t+""}var D0=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return A0(t=E0(this,e,[].concat(n)),"state",{isAnimationFinished:!1}),A0(t,"id",lA("recharts-bar-")),A0(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),A0(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P0(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],(r=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,s=r.dataKey,a=r.activeIndex,i=r.activeBar,o=RA(this.props,!1);return e&&e.map(function(e,r){var l=r===a,c=l?i:n,d=k0(k0(k0({},o),e),{},{isActive:l,option:c,index:r,dataKey:s,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return ke.createElement(HA,_0({className:"recharts-bar-rectangle"},jA(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value)}),ke.createElement(y0,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,s=t.isAnimationActive,a=t.animationBegin,i=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return ke.createElement(oQ,{begin:a,duration:i,isActive:s,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var s=t.t,a=r.map(function(e,t){var r=c&&c[t];if(r){var a=uA(r.x,e.x),i=uA(r.y,e.y),o=uA(r.width,e.width),l=uA(r.height,e.height);return k0(k0({},e),{},{x:a(s),y:i(s),width:o(s),height:l(s)})}if("horizontal"===n){var d=uA(0,e.height)(s);return k0(k0({},e),{},{y:e.y+e.height-d,height:d})}var u=uA(0,e.width)(s);return k0(k0({},e),{},{width:u})});return ke.createElement(HA,null,e.renderRectanglesStatically(a))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return!(r&&t&&t.length)||n&&DH(n,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,s=t.activeIndex,a=RA(this.props.background,!1);return r.map(function(t,r){t.value;var i=t.background,o=N0(t,b0);if(!i)return null;var l=k0(k0(k0(k0(k0({},o),{},{fill:"#eee"},i),a),jA(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return ke.createElement(y0,_0({key:"background-bar-".concat(r),option:e.props.background,isActive:r===s},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,s=r.xAxis,a=r.yAxis,i=r.layout,o=MA(r.children,KY);if(!o)return null;var l="vertical"===i?n[0].height/2:n[0].width/2,c=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:iK(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ke.createElement(HA,d,o.map(function(e){return ke.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:s,yAxis:a,layout:i,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,s=e.xAxis,a=e.yAxis,i=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,m=e.id;if(t||!r||!r.length)return null;var h=this.state.isAnimationFinished,p=Pr("recharts-bar",n),f=s&&s.allowDataOverflow,x=a&&a.allowDataOverflow,g=f||x,v=CP(m)?this.id:m;return ke.createElement(HA,{className:p},f||x?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(v)},ke.createElement("rect",{x:f?i:i-l/2,y:x?o:o-c/2,width:f?l:2*l,height:x?c:2*c}))):null,ke.createElement(HA,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(v,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(g,v),(!d||h)&&fG.renderCallByParent(this.props,r))}}])&&C0(t.prototype,r),n&&C0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function R0(e){return(R0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z0(n.key),n)}}function q0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q0(Object(r),!0).forEach(function(t){F0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F0(e,t,r){return(t=z0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z0(e){var t=function(e,t){if("object"!=R0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R0(t)?t:t+""}j0=D0,A0(D0,"displayName","Bar"),A0(D0,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!oz.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),A0(D0,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,a=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,m=e.offset,h=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null}(n,r);if(!h)return null;var p=t.layout,f=r.type.defaultProps,x=void 0!==f?k0(k0({},f),r.props):r.props,g=x.dataKey,v=x.children,y=x.minPointSize,j="horizontal"===p?i:a,b=c?j.scale.domain():null,w=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]}({numericAxis:j}),N=MA(v,Gz),_=u.map(function(e,t){var n,u,m,f,x,v;c?n=function(e,t){if(!t||2!==t.length||!aA(t[0])||!aA(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!aA(e[0])||e[0]<r)&&(s[0]=r),(!aA(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s}(c[d+t],b):(n=iK(e,g),Array.isArray(n)||(n=[w,n]));var j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var s="number"==typeof r;return s?e(r,n):(s||DY(),t)}}(y,j0.defaultProps.minPointSize)(n[1],t);if("horizontal"===p){var _,S=[i.scale(n[0]),i.scale(n[1])],k=S[0],C=S[1];u=NK({axis:a,ticks:o,bandSize:s,offset:h.offset,entry:e,index:t}),m=null!==(_=null!=C?C:k)&&void 0!==_?_:void 0,f=h.size;var E=k-C;if(x=Number.isNaN(E)?0:E,v={x:u,y:i.y,width:f,height:i.height},Math.abs(j)>0&&Math.abs(x)<Math.abs(j)){var O=nA(x||j)*(Math.abs(j)-Math.abs(x));m-=O,x+=O}}else{var M=[a.scale(n[0]),a.scale(n[1])],P=M[0],A=M[1];if(u=P,m=NK({axis:i,ticks:l,bandSize:s,offset:h.offset,entry:e,index:t}),f=A-P,x=h.size,v={x:a.x,y:m,width:a.width,height:x},Math.abs(j)>0&&Math.abs(f)<Math.abs(j))f+=nA(f||j)*(Math.abs(j)-Math.abs(f))}return k0(k0(k0({},e),{},{x:u,y:m,width:f,height:x,value:c?n:n[1],payload:e,background:v},N&&N[t]&&N[t].props),{},{tooltipPayload:[MK(r,e)],tooltipPosition:{x:u+f/2,y:m+x/2}})});return k0({data:_,layout:p},m)});var B0=function(e,t,r,n,s){var a=e.width,i=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:i-r.bottom,bottomMirror:i-r.bottom},u=!!PA(l,D0);return c.reduce(function(a,i){var l,c,m,h,p,f=t[i],x=f.orientation,g=f.domain,v=f.padding,y=void 0===v?{}:v,j=f.mirror,b=f.reversed,w="".concat(x).concat(j?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=g[1]-g[0],_=1/0,S=f.categoricalDomain.sort();if(S.forEach(function(e,t){t>0&&(_=Math.min((e||0)-(S[t-1]||0),_))}),Number.isFinite(_)){var k=_/N,C="vertical"===f.layout?r.height:r.width;if("gap"===f.padding&&(l=k*C/2),"no-gap"===f.padding){var E=cA(e.barCategoryGap,k*C),O=k*C/2;l=O-E-(O-E)/C*E}}}c="xAxis"===n?[r.left+(y.left||0)+(l||0),r.left+r.width-(y.right||0)-(l||0)]:"yAxis"===n?"horizontal"===o?[r.top+r.height-(y.bottom||0),r.top+(y.top||0)]:[r.top+(y.top||0)+(l||0),r.top+r.height-(y.bottom||0)-(l||0)]:f.range,b&&(c=[c[1],c[0]]);var M=xK(f,s,u),P=M.scale,A=M.realScaleType;P.domain(g).range(c),vK(P);var T=bK(P,I0(I0({},f),{},{realScaleType:A}));"xAxis"===n?(p="top"===x&&!j||"bottom"===x&&j,m=r.left,h=d[w]-p*f.height):"yAxis"===n&&(p="left"===x&&!j||"right"===x&&j,m=d[w]-p*f.width,h=r.top);var D=I0(I0(I0({},f),T),{},{realScaleType:A,x:m,y:h,scale:P,width:"xAxis"===n?r.width:f.width,height:"yAxis"===n?r.height:f.height});return D.bandSize=EK(D,T),f.hide||"xAxis"!==n?f.hide||(d[w]+=(p?-1:1)*D.width):d[w]+=(p?-1:1)*D.height,I0(I0({},a),{},F0({},i,D))},{})},$0=function(e,t){var r=e.x,n=e.y,s=t.x,a=t.y;return{x:Math.min(r,s),y:Math.min(n,a),width:Math.abs(s-r),height:Math.abs(a-n)}},U0=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&L0(t.prototype,r),n&&L0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();F0(U0,"EPS",1e-4);var V0=function(e){var t=Object.keys(e).reduce(function(t,r){return I0(I0({},t),{},F0({},r,U0.create(e[r])))},{});return I0(I0({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,s=r.position;return n0(e,function(e,r){return t[r].apply(e,{bandAware:n,position:s})})},isInRange:function(e){return d0(e,function(e,r){return t[r].isInRange(e)})}})};var W0=sI,H0=OL,Y0=TL;var K0=function(e){return function(t,r,n){var s=Object(t);if(!H0(t)){var a=W0(r);t=Y0(t),r=function(e){return a(s[e],e,s)}}var i=e(t,r,n);return i>-1?s[a?t[i]:i]:void 0}},G0=wJ;var X0=aI,Q0=sI,Z0=function(e){var t=G0(e),r=t%1;return t==t?r?t-r:t:0},J0=Math.max;const e1=Ee(K0(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:Z0(r);return s<0&&(s=J0(n+s,0)),X0(e,Q0(t),s)}));var t1=eP(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),r1=Ne.createContext(void 0),n1=Ne.createContext(void 0),s1=Ne.createContext(void 0),a1=Ne.createContext({}),i1=Ne.createContext(void 0),o1=Ne.createContext(0),l1=Ne.createContext(0),c1=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,s=t.offset,a=e.clipPathId,i=e.children,o=e.width,l=e.height,c=t1(s);return ke.createElement(r1.Provider,{value:r},ke.createElement(n1.Provider,{value:n},ke.createElement(a1.Provider,{value:s},ke.createElement(s1.Provider,{value:c},ke.createElement(i1.Provider,{value:a},ke.createElement(o1.Provider,{value:l},ke.createElement(l1.Provider,{value:o},i)))))))},d1=function(e){var t=Ne.useContext(r1);null==t&&DY();var r=t[e];return null==r&&DY(),r},u1=function(e){var t=Ne.useContext(n1);null==t&&DY();var r=t[e];return null==r&&DY(),r},m1=function(){return Ne.useContext(l1)},h1=function(){return Ne.useContext(o1)};function p1(e){return(p1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N1(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x1(e,t,r){return t=v1(t),function(e,t){if(t&&("object"===p1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g1()?Reflect.construct(t,r||[],v1(e).constructor):t.apply(e,r))}function g1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(g1=function(){return!!e})()}function v1(e){return(v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y1(e,t){return(y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j1(Object(r),!0).forEach(function(t){w1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w1(e,t,r){return(t=N1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N1(e){var t=function(e,t){if("object"!=p1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p1(t)?t:t+""}function _1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k1.apply(this,arguments)}function C1(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,a=e.yAxisId,i=e.shape,o=e.className,l=e.alwaysShow,c=Ne.useContext(i1),d=d1(s),u=u1(a),m=Ne.useContext(s1);if(!c||!m)return null;YA(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=function(e,t,r,n,s,a,i,o,l){var c=s.x,d=s.y,u=s.width,m=s.height;if(r){var h=l.y,p=e.y.apply(h,{position:a});if(ZJ(l,"discard")&&!e.y.isInRange(p))return null;var f=[{x:c+u,y:p},{x:c,y:p}];return"left"===o?f.reverse():f}if(t){var x=l.x,g=e.x.apply(x,{position:a});if(ZJ(l,"discard")&&!e.x.isInRange(g))return null;var v=[{x:g,y:d+m},{x:g,y:d}];return"top"===i?v.reverse():v}if(n){var y=l.segment.map(function(t){return e.apply(t,{position:a})});return ZJ(l,"discard")&&QJ(y,function(t){return!e.isInRange(t)})?null:y}return null}(V0({x:d.scale,y:u.scale}),iA(t),iA(r),n&&2===n.length,m,e.position,d.orientation,u.orientation,e);if(!h)return null;var p=_1(h,2),f=p[0],x=f.x,g=f.y,v=p[1],y=v.x,j=v.y,b=b1(b1({clipPath:ZJ(e,"hidden")?"url(#".concat(c,")"):void 0},RA(e,!0)),{},{x1:x,y1:g,x2:y,y2:j});return ke.createElement(HA,{className:Pr("recharts-reference-line",o)},function(e,t){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement("line",k1({},t,{className:"recharts-reference-line-line"}))}(i,b),tG.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,s=e.y2;return $0({x:t,y:r},{x:n,y:s})}({x1:x,y1:g,x2:y,y2:j})))}var E1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y1(e,t)}(e,ke.Component),f1(e,[{key:"render",value:function(){return ke.createElement(C1,this.props)}}])}();function O1(){return O1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O1.apply(this,arguments)}function M1(e){return(M1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P1(Object(r),!0).forEach(function(t){I1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F1(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D1(e,t,r){return t=L1(t),function(e,t){if(t&&("object"===M1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,R1()?Reflect.construct(t,r||[],L1(e).constructor):t.apply(e,r))}function R1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(R1=function(){return!!e})()}function L1(e){return(L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q1(e,t){return(q1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I1(e,t,r){return(t=F1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F1(e){var t=function(e,t){if("object"!=M1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M1(t)?t:t+""}w1(E1,"displayName","ReferenceLine"),w1(E1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var z1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q1(e,t)}(e,ke.Component),T1(e,[{key:"render",value:function(){var t=this.props,r=t.x,n=t.y,s=t.r,a=t.alwaysShow,i=t.clipPathId,o=iA(r),l=iA(n);if(YA(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,r=e.y,n=e.xAxis,s=e.yAxis,a=V0({x:n.scale,y:s.scale}),i=a.apply({x:t,y:r},{bandAware:!0});return ZJ(e,"discard")&&!a.isInRange(i)?null:i}(this.props);if(!c)return null;var d=c.x,u=c.y,m=this.props,h=m.shape,p=m.className,f=A1(A1({clipPath:ZJ(this.props,"hidden")?"url(#".concat(i,")"):void 0},RA(this.props,!0)),{},{cx:d,cy:u});return ke.createElement(HA,{className:Pr("recharts-reference-dot",p)},e.renderDot(h,f),tG.renderCallByParent(this.props,{x:d-s,y:u-s,width:2*s,height:2*s}))}}])}();function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B1.apply(this,arguments)}function $1(e){return($1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U1(Object(r),!0).forEach(function(t){X1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W1(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q1(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H1(e,t,r){return t=K1(t),function(e,t){if(t&&("object"===$1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y1()?Reflect.construct(t,r||[],K1(e).constructor):t.apply(e,r))}function Y1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Y1=function(){return!!e})()}function K1(e){return(K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G1(e,t){return(G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function X1(e,t,r){return(t=Q1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q1(e){var t=function(e,t){if("object"!=$1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$1(t)?t:t+""}I1(z1,"displayName","ReferenceDot"),I1(z1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),I1(z1,"renderDot",function(e,t){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement(EQ,O1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var Z1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G1(e,t)}(e,ke.Component),W1(e,[{key:"render",value:function(){var t=this.props,r=t.x1,n=t.x2,s=t.y1,a=t.y2,i=t.className,o=t.alwaysShow,l=t.clipPathId;YA(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=iA(r),d=iA(n),u=iA(s),m=iA(a),h=this.props.shape;if(!(c||d||u||m||h))return null;var p=function(e,t,r,n,s){var a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var u=V0({x:c.scale,y:d.scale}),m={x:e?u.x.apply(a,{position:"start"}):u.x.rangeMin,y:r?u.y.apply(o,{position:"start"}):u.y.rangeMin},h={x:t?u.x.apply(i,{position:"end"}):u.x.rangeMax,y:n?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!ZJ(s,"discard")||u.isInRange(m)&&u.isInRange(h)?$0(m,h):null}(c,d,u,m,this.props);if(!p&&!h)return null;var f=ZJ(this.props,"hidden")?"url(#".concat(l,")"):void 0;return ke.createElement(HA,{className:Pr("recharts-reference-area",i)},e.renderRect(h,V1(V1({clipPath:f},RA(this.props,!0)),p)),tG.renderCallByParent(this.props,p))}}])}();function J1(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function e2(e,t,r){return function(e){var t=e.width,r=e.height,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),s=n*Math.PI/180,a=Math.atan(r/t),i=s>a&&s<Math.PI-a?r/Math.sin(s):t/Math.cos(s);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},r)}function t2(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function r2(e){return(r2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(t){a2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a2(e,t,r){var n;return n=function(e,t){if("object"!=r2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=r2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r2(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i2(e,t,r){var n=e.tick,s=e.ticks,a=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!s||!s.length||!n)return[];if(aA(l)||oz.isSsr)return function(e,t){return J1(e,t+1)}(s,"number"==typeof l&&aA(l)?l:0);var m=[],h="top"===o||"bottom"===o?"width":"height",p=d&&"width"===h?nB(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},f=function(e,n){var s=RO(c)?c(e.value,n):e.value;return"width"===h?e2(nB(s,{fontSize:t,letterSpacing:r}),p,u):nB(s,{fontSize:t,letterSpacing:r})[h]},x=s.length>=2?nA(s[1].coordinate-s[0].coordinate):1,g=function(e,t,r){var n="width"===r,s=e.x,a=e.y,i=e.width,o=e.height;return 1===t?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}(a,x,h);return"equidistantPreserveStart"===l?function(e,t,r,n,s){for(var a,i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,m=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:J1(n,d)};var a,i=c,m=function(){return void 0===a&&(a=r(t,i)),a},h=t.coordinate,p=0===c||t2(e,h,m,u,l);p||(c=0,u=o,d+=1),p&&(u=h+e*(m()/2+s),c+=d)};d<=i.length;)if(a=m())return a.v;return[]}(x,g,f,s,i):(m="preserveStart"===l||"preserveStartEnd"===l?function(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end;if(a){var d=n[o-1],u=r(d,o-1),m=e*(d.coordinate+e*u/2-c);i[o-1]=d=s2(s2({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate}),t2(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+s),i[o-1]=s2(s2({},d),{},{isShow:!0}))}for(var h=a?o-1:o,p=function(t){var n,a=i[t],o=function(){return void 0===n&&(n=r(a,t)),n};if(0===t){var d=e*(a.coordinate-e*o()/2-l);i[t]=a=s2(s2({},a),{},{tickCoord:d<0?a.coordinate-d*e:a.coordinate})}else i[t]=a=s2(s2({},a),{},{tickCoord:a.coordinate});t2(e,a.tickCoord,o,l,c)&&(l=a.tickCoord+e*(o()/2+s),i[t]=s2(s2({},a),{},{isShow:!0}))},f=0;f<h;f++)p(f);return i}(x,g,f,s,i,"preserveStartEnd"===l):function(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,o=t.start,l=t.end,c=function(t){var n,c=a[t],d=function(){return void 0===n&&(n=r(c,t)),n};if(t===i-1){var u=e*(c.coordinate+e*d()/2-l);a[t]=c=s2(s2({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else a[t]=c=s2(s2({},c),{},{tickCoord:c.coordinate});t2(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+s),a[t]=s2(s2({},c),{},{isShow:!0}))},d=i-1;d>=0;d--)c(d);return a}(x,g,f,s,i),m.filter(function(e){return e.isShow}))}X1(Z1,"displayName","ReferenceArea"),X1(Z1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),X1(Z1,"renderRect",function(e,t){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement(vQ,B1({},t,{className:"recharts-reference-area-rect"}))});var o2=["viewBox"],l2=["viewBox"],c2=["ticks"];function d2(e){return(d2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u2.apply(this,arguments)}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(t){j2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p2(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b2(n.key),n)}}function x2(e,t,r){return t=v2(t),function(e,t){if(t&&("object"===d2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g2()?Reflect.construct(t,r||[],v2(e).constructor):t.apply(e,r))}function g2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(g2=function(){return!!e})()}function v2(e){return(v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y2(e,t){return(y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j2(e,t,r){return(t=b2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b2(e){var t=function(e,t){if("object"!=d2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d2(t)?t:t+""}var w2=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=x2(this,e,[t])).state={fontSize:"",letterSpacing:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y2(e,t)}(e,Ne.Component),t=e,n=[{key:"renderTickItem",value:function(e,t,r){return ke.isValidElement(e)?ke.cloneElement(e,t):RO(e)?e(t):ke.createElement(AB,u2({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=p2(e,o2),s=this.props,a=s.viewBox,i=p2(s,l2);return!hA(r,a)||!hA(n,i)||!hA(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,s,a,i,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,m=o.orientation,h=o.tickSize,p=o.mirror,f=o.tickMargin,x=p?-1:1,g=e.tickSize||h,v=aA(e.tickCoord)?e.tickCoord:e.coordinate;switch(m){case"top":t=r=e.coordinate,i=(n=(s=c+ +!p*u)-x*g)-x*f,a=v;break;case"left":n=s=e.coordinate,a=(t=(r=l+ +!p*d)-x*g)-x*f,i=v;break;case"right":n=s=e.coordinate,a=(t=(r=l+ +p*d)+x*g)+x*f,i=v;break;default:t=r=e.coordinate,i=(n=(s=c+ +p*u)+x*g)+x*f,a=v}return{line:{x1:t,y1:n,x2:r,y2:s},tick:{x:a,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,s=e.height,a=e.orientation,i=e.mirror,o=e.axisLine,l=h2(h2(h2({},RA(this.props,!1)),RA(o,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!i||"bottom"===a&&i);l=h2(h2({},l),{},{x1:t,y1:r+c*s,x2:t+n,y2:r+c*s})}else{var d=+("left"===a&&!i||"right"===a&&i);l=h2(h2({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+s})}return ke.createElement("line",u2({},l,{className:Pr("recharts-cartesian-axis-line",kP(o,"className"))}))}},{key:"renderTicks",value:function(t,r,n){var s=this,a=this.props,i=a.tickLine,o=a.stroke,l=a.tick,c=a.tickFormatter,d=a.unit,u=i2(h2(h2({},this.props),{},{ticks:t}),r,n),m=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=RA(this.props,!1),f=RA(l,!1),x=h2(h2({},p),{},{fill:"none"},RA(i,!1)),g=u.map(function(t,r){var n=s.getTickLineCoord(t),a=n.line,g=n.tick,v=h2(h2(h2(h2({textAnchor:m,verticalAnchor:h},p),{},{stroke:"none",fill:o},f),g),{},{index:r,payload:t,visibleTicksCount:u.length,tickFormatter:c});return ke.createElement(HA,u2({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},jA(s.props,t,r)),i&&ke.createElement("line",u2({},x,a,{className:Pr("recharts-cartesian-axis-tick-line",kP(i,"className"))})),l&&e.renderTickItem(l,v,"".concat(RO(c)?c(t.value,r):t.value).concat(d||"")))});return ke.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,s=t.height,a=t.ticksGenerator,i=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=p2(o,c2),d=l;return RO(a)&&(d=l&&l.length>0?a(this.props):a(c)),n<=0||s<=0||!d||!d.length?null:ke.createElement(HA,{className:Pr("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),tG.renderCallByParent(this.props))}}])&&f2(t.prototype,r),n&&f2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();j2(w2,"displayName","CartesianAxis"),j2(w2,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var N2=["x1","y1","x2","y2","key"],_2=["offset"];function S2(e){return(S2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k2(Object(r),!0).forEach(function(t){E2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E2(e,t,r){var n;return n=function(e,t){if("object"!=S2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==S2(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O2.apply(this,arguments)}function M2(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var P2=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,s=e.y,a=e.width,i=e.height,o=e.ry;return ke.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function A2(e,t){var r;if(ke.isValidElement(e))r=ke.cloneElement(e,t);else if(RO(e))r=e(t);else{var n=t.x1,s=t.y1,a=t.x2,i=t.y2,o=t.key,l=M2(t,N2),c=RA(l,!1);c.offset;var d=M2(c,_2);r=ke.createElement("line",O2({},d,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function T2(e){var t=e.x,r=e.width,n=e.horizontal,s=void 0===n||n,a=e.horizontalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(n,a){var i=C2(C2({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(a),index:a});return A2(s,i)});return ke.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function D2(e){var t=e.y,r=e.height,n=e.vertical,s=void 0===n||n,a=e.verticalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(n,a){var i=C2(C2({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(a),index:a});return A2(s,i)});return ke.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function R2(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,a=e.width,i=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==c[0]&&c.unshift(0);var d=c.map(function(e,o){var l=!c[o+1]?s+i-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return ke.createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:a,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function L2(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,s=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!r||!n||!n.length)return null;var d=c.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var r=!d[t+1]?a+o-e:d[t+1]-e;if(r<=0)return null;var c=t%n.length;return ke.createElement("rect",{key:"react-".concat(t),x:e,y:i,width:r,height:l,stroke:"none",fill:n[c],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var q2=function(e,t){var r=e.xAxis,n=e.width,s=e.height,a=e.offset;return mK(i2(C2(C2(C2({},w2.defaultProps),r),{},{ticks:hK(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},I2=function(e,t){var r=e.yAxis,n=e.width,s=e.height,a=e.offset;return mK(i2(C2(C2(C2({},w2.defaultProps),r),{},{ticks:hK(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},F2={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function z2(e){var t,r,n,s,a,i,o,l,c=m1(),d=h1(),u=Ne.useContext(a1),m=C2(C2({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:F2.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:F2.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:F2.horizontal,horizontalFill:null!==(s=e.horizontalFill)&&void 0!==s?s:F2.horizontalFill,vertical:null!==(a=e.vertical)&&void 0!==a?a:F2.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:F2.verticalFill,x:aA(e.x)?e.x:u.left,y:aA(e.y)?e.y:u.top,width:aA(e.width)?e.width:u.width,height:aA(e.height)?e.height:u.height}),h=m.x,p=m.y,f=m.width,x=m.height,g=m.syncWithTicks,v=m.horizontalValues,y=m.verticalValues,j=(o=Ne.useContext(r1),dA(o)),b=(l=Ne.useContext(n1),e1(l,function(e){return d0(e.domain,Number.isFinite)})||dA(l));if(!aA(f)||f<=0||!aA(x)||x<=0||!aA(h)||h!==+h||!aA(p)||p!==+p)return null;var w=m.verticalCoordinatesGenerator||q2,N=m.horizontalCoordinatesGenerator||I2,_=m.horizontalPoints,S=m.verticalPoints;if((!_||!_.length)&&RO(N)){var k=v&&v.length,C=N({yAxis:b?C2(C2({},b),{},{ticks:k?v:b.ticks}):void 0,width:c,height:d,offset:u},!!k||g);YA(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(S2(C),"]")),Array.isArray(C)&&(_=C)}if((!S||!S.length)&&RO(w)){var E=y&&y.length,O=w({xAxis:j?C2(C2({},j),{},{ticks:E?y:j.ticks}):void 0,width:c,height:d,offset:u},!!E||g);YA(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(S2(O),"]")),Array.isArray(O)&&(S=O)}return ke.createElement("g",{className:"recharts-cartesian-grid"},ke.createElement(P2,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),ke.createElement(T2,O2({},m,{offset:u,horizontalPoints:_,xAxis:j,yAxis:b})),ke.createElement(D2,O2({},m,{offset:u,verticalPoints:S,xAxis:j,yAxis:b})),ke.createElement(R2,O2({},m,{horizontalPoints:_})),ke.createElement(L2,O2({},m,{verticalPoints:S})))}z2.displayName="CartesianGrid";var B2=["type","layout","connectNulls","ref"],$2=["key"];function U2(e){return(U2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V2(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W2.apply(this,arguments)}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(t){t4(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K2(e){return function(e){if(Array.isArray(e))return G2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return G2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G2(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r4(n.key),n)}}function Q2(e,t,r){return t=J2(t),function(e,t){if(t&&("object"===U2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z2()?Reflect.construct(t,r||[],J2(e).constructor):t.apply(e,r))}function Z2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Z2=function(){return!!e})()}function J2(e){return(J2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e4(e,t){return(e4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t4(e,t,r){return(t=r4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r4(e){var t=function(e,t){if("object"!=U2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U2(t)?t:t+""}var n4=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t4(t=Q2(this,e,[].concat(n)),"state",{isAnimationFinished:!0,totalLength:0}),t4(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),t4(t,"getStrokeDasharray",function(r,n,s){var a=s.reduce(function(e,t){return e+t});if(!a)return t.generateSimpleStrokeDasharray(n,r);for(var i=Math.floor(r/a),o=r%a,l=n-r,c=[],d=0,u=0;d<s.length;u+=s[d],++d)if(u+s[d]>o){c=[].concat(K2(s.slice(0,d)),[o-u]);break}var m=c.length%2==0?[0,l]:[l];return[].concat(K2(e.repeat(s,i)),K2(c),m).map(function(e){return"".concat(e,"px")}).join(", ")}),t4(t,"id",lA("recharts-line-")),t4(t,"pathRef",function(e){t.mainCurve=e}),t4(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),t4(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e4(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(K2(e),[0]):e,n=[],s=0;s<t;++s)n=[].concat(K2(n),K2(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(ke.isValidElement(e))r=ke.cloneElement(e,t);else if(RO(e))r=e(t);else{var n=t.key,s=V2(t,$2),a=Pr("recharts-line-dot","boolean"!=typeof e?e.className:"");r=ke.createElement(EQ,W2({key:n},s,{className:a}))}return r}}],(r=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(hte){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,s=r.xAxis,a=r.yAxis,i=r.layout,o=MA(r.children,KY);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:iK(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return ke.createElement(HA,c,o.map(function(e){return ke.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:s,yAxis:a,layout:i,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.dot,i=s.points,o=s.dataKey,l=RA(this.props,!1),c=RA(a,!0),d=i.map(function(t,r){var n=Y2(Y2(Y2({key:"dot-".concat(r),r:3},l),c),{},{value:t.value,dataKey:o,cx:t.x,cy:t.y,index:r,payload:t.payload});return e.renderDotItem(a,n)}),u={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return ke.createElement(HA,W2({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,r,n){var s=this.props,a=s.type,i=s.layout,o=s.connectNulls;s.ref;var l=V2(s,B2),c=Y2(Y2(Y2({},RA(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:a,layout:i,connectNulls:o});return ke.createElement(RG,W2({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,s=n.points,a=n.strokeDasharray,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=n.animateNewValues,m=n.width,h=n.height,p=this.state,f=p.prevPoints,x=p.totalLength;return ke.createElement(oQ,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(f){var o=f.length/s.length,l=s.map(function(e,t){var r=Math.floor(t*o);if(f[r]){var n=f[r],s=uA(n.x,e.x),a=uA(n.y,e.y);return Y2(Y2({},e),{},{x:s(i),y:a(i)})}if(u){var l=uA(2*m,e.x),c=uA(h/2,e.y);return Y2(Y2({},e),{},{x:l(i),y:c(i)})}return Y2(Y2({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,t)}var c,d=uA(0,x)(i);if(a){var p="".concat(a).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(d,x,p)}else c=r.generateSimpleStrokeDasharray(x,d);return r.renderCurveStatically(s,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,s=r.isAnimationActive,a=this.state,i=a.prevPoints,o=a.totalLength;return s&&n&&n.length&&(!i&&o>0||!DH(i,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,s=t.points,a=t.className,i=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,m=t.isAnimationActive,h=t.id;if(r||!s||!s.length)return null;var p=this.state.isAnimationFinished,f=1===s.length,x=Pr("recharts-line",a),g=i&&i.allowDataOverflow,v=o&&o.allowDataOverflow,y=g||v,j=CP(h)?this.id:h,b=null!==(e=RA(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=b.r,N=void 0===w?3:w,_=b.strokeWidth,S=void 0===_?2:_,k=(DA(n)?n:{}).clipDot,C=void 0===k||k,E=2*N+S;return ke.createElement(HA,{className:x},g||v?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(j)},ke.createElement("rect",{x:g?c:c-d/2,y:v?l:l-u/2,width:g?d:2*d,height:v?u:2*u})),!C&&ke.createElement("clipPath",{id:"clipPath-dots-".concat(j)},ke.createElement("rect",{x:c-E/2,y:l-E/2,width:d+E,height:u+E}))):null,!f&&this.renderCurve(y,j),this.renderErrorBar(y,j),(f||n)&&this.renderDots(y,C,j),(!m||p)&&fG.renderCallByParent(this.props,s))}}])&&X2(t.prototype,r),n&&X2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();t4(n4,"displayName","Line"),t4(n4,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!oz.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),t4(n4,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,a=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return Y2({points:l.map(function(e,t){var l=iK(e,i);return"horizontal"===d?{x:wK({axis:r,ticks:s,bandSize:o,entry:e,index:t}),y:CP(l)?null:n.scale(l),value:l,payload:e}:{x:CP(l)?null:r.scale(l),y:wK({axis:n,ticks:a,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var s4,a4=["layout","type","stroke","connectNulls","isRange","ref"],i4=["key"];function o4(e){return(o4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l4(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function c4(){return c4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c4.apply(this,arguments)}function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(t){g4(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v4(n.key),n)}}function h4(e,t,r){return t=f4(t),function(e,t){if(t&&("object"===o4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p4()?Reflect.construct(t,r||[],f4(e).constructor):t.apply(e,r))}function p4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(p4=function(){return!!e})()}function f4(e){return(f4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x4(e,t){return(x4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g4(e,t,r){return(t=v4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v4(e){var t=function(e,t){if("object"!=o4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o4(t)?t:t+""}var y4=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return g4(t=h4(this,e,[].concat(n)),"state",{isAnimationFinished:!0}),g4(t,"id",lA("recharts-area-")),g4(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),RO(e)&&e()}),g4(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),RO(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x4(e,t)}(e,Ne.PureComponent),t=e,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(r=[{key:"renderDots",value:function(t,r,n){var s=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(s&&!a)return null;var i=this.props,o=i.dot,l=i.points,c=i.dataKey,d=RA(this.props,!1),u=RA(o,!0),m=l.map(function(t,r){var n=u4(u4(u4({key:"dot-".concat(r),r:3},d),u),{},{index:r,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,n)}),h={clipPath:t?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return ke.createElement(HA,c4({className:"recharts-area-dots"},h),m)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,s=t.strokeWidth,a=n[0].x,i=n[n.length-1].x,o=e*Math.abs(a-i),l=jH(n.map(function(e){return e.y||0}));return aA(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(jH(r.map(function(e){return e.y||0})),l)),aA(l)?ke.createElement("rect",{x:a<i?a:a-o,y:0,width:o,height:Math.floor(l+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,s=t.strokeWidth,a=n[0].y,i=n[n.length-1].y,o=e*Math.abs(a-i),l=jH(n.map(function(e){return e.x||0}));return aA(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(jH(r.map(function(e){return e.x||0})),l)),aA(l)?ke.createElement("rect",{x:0,y:a<i?a:a-o,width:l+(s?parseInt("".concat(s),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var s=this.props,a=s.layout,i=s.type,o=s.stroke,l=s.connectNulls,c=s.isRange;s.ref;var d=l4(s,a4);return ke.createElement(HA,{clipPath:r?"url(#clipPath-".concat(n,")"):null},ke.createElement(RG,c4({},RA(d,!0),{points:e,connectNulls:l,type:i,baseLine:t,layout:a,stroke:"none",className:"recharts-area-area"})),"none"!==o&&ke.createElement(RG,c4({},RA(this.props,!1),{className:"recharts-area-curve",layout:a,type:i,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&ke.createElement(RG,c4({},RA(this.props,!1),{className:"recharts-area-curve",layout:a,type:i,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,s=n.points,a=n.baseLine,i=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,c=n.animationEasing,d=n.animationId,u=this.state,m=u.prevPoints,h=u.prevBaseLine;return ke.createElement(oQ,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(m){var o,l=m.length/s.length,c=s.map(function(e,t){var r=Math.floor(t*l);if(m[r]){var n=m[r],s=uA(n.x,e.x),a=uA(n.y,e.y);return u4(u4({},e),{},{x:s(i),y:a(i)})}return e});return o=aA(a)&&"number"==typeof a?uA(h,a)(i):CP(a)||rA(a)?uA(h,0)(i):a.map(function(e,t){var r=Math.floor(t*l);if(h[r]){var n=h[r],s=uA(n.x,e.x),a=uA(n.y,e.y);return u4(u4({},e),{},{x:s(i),y:a(i)})}return e}),r.renderAreaStatically(c,o,e,t)}return ke.createElement(HA,null,ke.createElement("defs",null,ke.createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(i))),ke.createElement(HA,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(s,a,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,s=r.baseLine,a=r.isAnimationActive,i=this.state,o=i.prevPoints,l=i.prevBaseLine,c=i.totalLength;return a&&n&&n.length&&(!o&&c>0||!DH(o,n)||!DH(l,s))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,s,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,s=t.points,a=t.className,i=t.top,o=t.left,l=t.xAxis,c=t.yAxis,d=t.width,u=t.height,m=t.isAnimationActive,h=t.id;if(r||!s||!s.length)return null;var p=this.state.isAnimationFinished,f=1===s.length,x=Pr("recharts-area",a),g=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,y=g||v,j=CP(h)?this.id:h,b=null!==(e=RA(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},w=b.r,N=void 0===w?3:w,_=b.strokeWidth,S=void 0===_?2:_,k=(DA(n)?n:{}).clipDot,C=void 0===k||k,E=2*N+S;return ke.createElement(HA,{className:x},g||v?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(j)},ke.createElement("rect",{x:g?o:o-d/2,y:v?i:i-u/2,width:g?d:2*d,height:v?u:2*u})),!C&&ke.createElement("clipPath",{id:"clipPath-dots-".concat(j)},ke.createElement("rect",{x:o-E/2,y:i-E/2,width:d+E,height:u+E}))):null,f?null:this.renderArea(y,j),(n||f)&&this.renderDots(y,C,j),(!m||p)&&fG.renderCallByParent(this.props,s))}}])&&m4(t.prototype,r),n&&m4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function j4(e){return(j4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b4(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C4(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w4(e,t,r){return t=_4(t),function(e,t){if(t&&("object"===j4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N4()?Reflect.construct(t,r||[],_4(e).constructor):t.apply(e,r))}function N4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(N4=function(){return!!e})()}function _4(e){return(_4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S4(e,t){return(S4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k4(e,t,r){return(t=C4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C4(e){var t=function(e,t){if("object"!=j4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j4(t)?t:t+""}function E4(){return E4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E4.apply(this,arguments)}function O4(e){var t=e.xAxisId,r=m1(),n=h1(),s=d1(t);return null==s?null:ke.createElement(w2,E4({},s,{className:Pr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return hK(e,!0)}}))}s4=y4,g4(y4,"displayName","Area"),g4(y4,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!oz.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),g4(y4,"getBaseValue",function(e,t,r,n){var s=e.layout,a=e.baseValue,i=t.props.baseValue,o=null!=i?i:a;if(aA(o)&&"number"==typeof o)return o;var l="horizontal"===s?n:r,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===o?u:"dataMax"===o||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),g4(y4,"getComposedData",function(e){var t,r=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,h=e.offset,p=r.layout,f=d&&d.length,x=s4.getBaseValue(r,n,s,a),g="horizontal"===p,v=!1,y=m.map(function(e,t){var r;f?r=d[u+t]:(r=iK(e,c),Array.isArray(r)?v=!0:r=[x,r]);var n=null==r[1]||f&&null==iK(e,c);return g?{x:wK({axis:s,ticks:i,bandSize:l,entry:e,index:t}),y:n?null:a.scale(r[1]),value:r,payload:e}:{x:n?null:s.scale(r[1]),y:wK({axis:a,ticks:o,bandSize:l,entry:e,index:t}),value:r,payload:e}});return t=f||v?y.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return g?{x:e.x,y:null!=t&&null!=e.y?a.scale(t):null}:{x:null!=t?s.scale(t):null,y:e.y}}):g?a.scale(x):s.scale(x),u4({points:y,baseLine:t,layout:p,isRange:v},h)}),g4(y4,"renderDotItem",function(e,t){var r;if(ke.isValidElement(e))r=ke.cloneElement(e,t);else if(RO(e))r=e(t);else{var n=Pr("recharts-area-dot","boolean"!=typeof e?e.className:""),s=t.key,a=l4(t,i4);r=ke.createElement(EQ,c4({},a,{key:s,className:n}))}return r});var M4=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S4(e,t)}(e,ke.Component),b4(e,[{key:"render",value:function(){return ke.createElement(O4,this.props)}}])}();function P4(e){return(P4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A4(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I4(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T4(e,t,r){return t=R4(t),function(e,t){if(t&&("object"===P4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D4()?Reflect.construct(t,r||[],R4(e).constructor):t.apply(e,r))}function D4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(D4=function(){return!!e})()}function R4(e){return(R4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L4(e,t){return(L4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q4(e,t,r){return(t=I4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I4(e){var t=function(e,t){if("object"!=P4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P4(t)?t:t+""}function F4(){return F4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F4.apply(this,arguments)}k4(M4,"displayName","XAxis"),k4(M4,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var z4=function(e){var t=e.yAxisId,r=m1(),n=h1(),s=u1(t);return null==s?null:ke.createElement(w2,F4({},s,{className:Pr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return hK(e,!0)}}))},B4=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L4(e,t)}(e,ke.Component),A4(e,[{key:"render",value:function(){return ke.createElement(z4,this.props)}}])}();function $4(e){return function(e){if(Array.isArray(e))return U4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}q4(B4,"displayName","YAxis"),q4(B4,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var V4=function(e,t,r,n,s){var a=MA(e,E1),i=MA(e,z1),o=[].concat($4(a),$4(i)),l=MA(e,Z1),c="".concat(n,"Id"),d=n[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===r&&ZJ(t.props,"extendDomain")&&aA(t.props[d])){var n=t.props[d];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},u)),l.length){var m="".concat(d,"1"),h="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===r&&ZJ(t.props,"extendDomain")&&aA(t.props[m])&&aA(t.props[h])){var n=t.props[m],s=t.props[h];return[Math.min(e[0],n,s),Math.max(e[1],n,s)]}return e},u)}return s&&s.length&&(u=s.reduce(function(e,t){return aA(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},W4={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new s(n,a||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,i=new Array(a);s<a;s++)i[s]=n[s].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,s,a,i){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,a),!0;case 6:return d.fn.call(d.context,t,n,s,a,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var m,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,s);break;default:if(!l)for(m=1,l=new Array(u-1);m<u;m++)l[m-1]=arguments[m];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,s){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return i(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||s&&!o.once||n&&o.context!==n||i(this,a);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||s&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:i(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(W4);var H4=new(Ee(W4.exports)),Y4="recharts.syncMouseEvents";function K4(e){return(K4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G4(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q4(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X4(e,t,r){return(t=Q4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q4(e){var t=function(e,t){if("object"!=K4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=K4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==K4(t)?t:t+""}var Z4=function(){return G4(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X4(this,"activeIndex",0),X4(this,"coordinateList",[]),X4(this,"layout","horizontal")},[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,s=e.container,a=void 0===s?null:s,i=e.layout,o=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!=a?a:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,s=r.y,a=r.height,i=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+i+o,d=s+this.offset.top+a/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function J4(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,a=e.endAngle;return{points:[FK(t,r,n,s),FK(t,r,n,a)],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function e3(e,t,r){var n,s,a,i;if("horizontal"===e)a=n=t.x,s=r.top,i=r.top+r.height;else if("vertical"===e)i=s=t.y,n=r.left,a=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return J4(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,m=FK(o,l,c,u),h=FK(o,l,d,u);n=m.x,s=m.y,a=h.x,i=h.y}return[{x:n,y:s},{x:a,y:i}]}function t3(e){return(t3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(t){s3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s3(e,t,r){var n;return n=function(e,t){if("object"!=t3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=t3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==t3(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3(e){var t,r,n,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,m=e.layout,h=e.chartName,p=null!==(t=s.props.cursor)&&void 0!==t?t:null===(r=s.type.defaultProps)||void 0===r?void 0:r.cursor;if(!s||!p||!i||!o||"ScatterChart"!==h&&"axis"!==a)return null;var f=RG;if("ScatterChart"===h)n=o,f=LQ;else if("BarChart"===h)n=function(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-s:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-s,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(m,o,c,u),f=vQ;else if("radial"===m){var x=J4(o),g=x.cx,v=x.cy,y=x.radius;n={cx:g,cy:v,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:y,outerRadius:y},f=_G}else n={points:e3(m,o,c)},f=RG;var j=n3(n3(n3(n3({stroke:"#ccc",pointerEvents:"none"},c),n),RA(p,!1)),{},{payload:l,payloadIndex:d,className:Pr("recharts-tooltip-cursor",p.className)});return Ne.isValidElement(p)?Ne.cloneElement(p,j):Ne.createElement(f,j)}var i3=["item"],o3=["children","className","width","height","style","compact","title","desc"];function l3(e){return(l3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c3(){return c3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c3.apply(this,arguments)}function d3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||v3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u3(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function m3(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N3(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h3(e,t,r){return t=f3(t),function(e,t){if(t&&("object"===l3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p3()?Reflect.construct(t,r||[],f3(e).constructor):t.apply(e,r))}function p3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(p3=function(){return!!e})()}function f3(e){return(f3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x3(e,t){return(x3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g3(e){return function(e){if(Array.isArray(e))return y3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v3(e,t){if(e){if("string"==typeof e)return y3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y3(e,t):void 0}}function y3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j3(Object(r),!0).forEach(function(t){w3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w3(e,t,r){return(t=N3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N3(e){var t=function(e,t){if("object"!=l3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l3(t)?t:t+""}var _3={xAxis:["bottom","top"],yAxis:["left","right"]},S3={width:"100%",height:"100%"},k3={x:0,y:0};function C3(e){return e}var E3=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,s=t.dataEndIndex,a=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(g3(e),g3(r)):e},[]);return a.length>0?a:e&&e.length&&aA(n)&&aA(s)?e.slice(n,s+1):[]};function O3(e){return"number"===e?[0,"auto"]:void 0}var M3=function(e,t,r,n){var s=e.graphicalItems,a=e.tooltipAxis,i=E3(t,e);return r<0||!s||!s.length||r>=i.length?null:s.reduce(function(s,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),a.dataKey&&!a.allowDuplicatedCategory)?c=mA(void 0===d?i:d,a.dataKey,n):c=d&&d[r]||i[r];return c?[].concat(g3(s),[MK(o,c)]):s},[])},P3=function(e,t,r,n){var s=n||{x:e.chartX,y:e.chartY},a=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(s,r),i=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,i=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(s&&"angleAxis"===s.axisType&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var o=s.range,l=0;l<i;l++){var c=l>0?n[l-1].coordinate:n[i-1].coordinate,d=n[l].coordinate,u=l>=i-1?n[0].coordinate:n[l+1].coordinate,m=void 0;if(nA(d-c)!==nA(u-d)){var h=[];if(nA(u-d)===nA(o[1]-o[0])){m=u;var p=d+o[1]-o[0];h[0]=Math.min(p,(p+c)/2),h[1]=Math.max(p,(p+c)/2)}else{m=c;var f=u+o[1]-o[0];h[0]=Math.min(d,(f+d)/2),h[1]=Math.max(d,(f+d)/2)}var x=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>x[0]&&e<=x[1]||e>=h[0]&&e<=h[1]){a=n[l].index;break}}else{var g=Math.min(c,u),v=Math.max(c,u);if(e>(g+d)/2&&e<=(v+d)/2){a=n[l].index;break}}}else for(var y=0;y<i;y++)if(0===y&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y>0&&y<i-1&&e>(r[y].coordinate+r[y-1].coordinate)/2&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y===i-1&&e>(r[y].coordinate+r[y-1].coordinate)/2){a=r[y].index;break}return a}(a,i,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=M3(e,t,c,d),m=function(e,t,r,n){var s=t.find(function(e){return e&&e.index===r});if(s){if("horizontal"===e)return{x:s.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:s.coordinate};if("centric"===e){var a=s.coordinate,i=n.radius;return b3(b3(b3({},n),FK(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,l=n.angle;return b3(b3(b3({},n),FK(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return k3}(r,i,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:m}}return null},A3=function(e,t){var r=t.axes,n=t.graphicalItems,s=t.axisType,a=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,m=uK(c,s);return r.reduce(function(t,r){var h,p=void 0!==r.type.defaultProps?b3(b3({},r.type.defaultProps),r.props):r.props,f=p.type,x=p.dataKey,g=p.allowDataOverflow,v=p.allowDuplicatedCategory,y=p.scale,j=p.ticks,b=p.includeHidden,w=p[a];if(t[w])return t;var N,_,S,k=E3(e.data,{graphicalItems:n.filter(function(e){var t;return(a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a])===w}),dataStartIndex:o,dataEndIndex:l}),C=k.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],s=null==e?void 0:e[1];if(n&&s&&aA(n)&&aA(s))return!0}return!1})(p.domain,g,f)&&(N=CK(p.domain,null,g),!m||"number"!==f&&"auto"===y||(S=oK(k,x,"category")));var E=O3(f);if(!N||0===N.length){var O,M=null!==(O=p.domain)&&void 0!==O?O:E;if(x){if(N=oK(k,x,f),"category"===f&&m){var P=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(N);v&&P?(_=N,N=kJ(0,C)):v||(N=OK(M,N,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(g3(e),[t])},[]))}else if("category"===f)N=v?N.filter(function(e){return""!==e&&!CP(e)}):OK(M,N,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||CP(t)?e:[].concat(g3(e),[t])},[]);else if("number"===f){var A=function(e,t,r,n,s){var a=t.map(function(t){return cK(e,t,r,s,n)}).filter(function(e){return!CP(e)});return a&&a.length?a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(k,n.filter(function(e){var t,r,n=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],s="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===w&&(b||!s)}),x,s,c);A&&(N=A)}!m||"number"!==f&&"auto"===y||(S=oK(k,x,"category"))}else N=m?kJ(0,C):i&&i[w]&&i[w].hasStack&&"number"===f?"expand"===u?[0,1]:_K(i[w].stackGroups,o,l):dK(k,n.filter(function(e){var t=a in e.props?e.props[a]:e.type.defaultProps[a],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(b||!r)}),f,c,!0);if("number"===f)N=V4(d,N,w,s,j),M&&(N=CK(M,N,g));else if("category"===f&&M){var T=M;N.every(function(e){return T.indexOf(e)>=0})&&(N=T)}}return b3(b3({},t),{},w3({},w,b3(b3({},p),{},{axisType:s,domain:N,categoricalDomain:S,duplicateDomain:_,originalDomain:null!==(h=p.domain)&&void 0!==h?h:E,isCategorical:m,layout:c})))},{})},T3=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,s=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(n,"Id"),u=MA(c,s),m={};return u&&u.length?m=A3(e,{axes:u,graphicalItems:a,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l}):a&&a.length&&(m=function(e,t){var r=t.graphicalItems,n=t.Axis,s=t.axisType,a=t.axisIdKey,i=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=E3(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),m=u.length,h=uK(c,s),p=-1;return r.reduce(function(e,t){var f,x=(void 0!==t.type.defaultProps?b3(b3({},t.type.defaultProps),t.props):t.props)[a],g=O3("number");return e[x]?e:(p++,h?f=kJ(0,m):i&&i[x]&&i[x].hasStack?(f=_K(i[x].stackGroups,o,l),f=V4(d,f,x,s)):(f=CK(g,dK(u,r.filter(function(e){var t,r,n=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],s="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===x&&!s}),"number",c),n.defaultProps.allowDataOverflow),f=V4(d,f,x,s)),b3(b3({},e),{},w3({},x,b3(b3({axisType:s},n.defaultProps),{},{hide:!0,orientation:kP(_3,"".concat(s,".").concat(p%2),null),domain:f,originalDomain:g,isCategorical:h,layout:c}))))},{})}(e,{Axis:s,graphicalItems:a,axisType:n,axisIdKey:d,stackGroups:i,dataStartIndex:o,dataEndIndex:l})),m},D3=function(e){var t=e.children,r=e.defaultShowTooltip,n=PA(t,VJ),s=0,a=0;return e.data&&0!==e.data.length&&(a=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(s=n.props.startIndex),n.props.endIndex>=0&&(a=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},R3=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},L3=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),s=void 0===n?{}:n,a=e.yAxisMap,i=void 0===a?{}:a,o=r.width,l=r.height,c=r.children,d=r.margin||{},u=PA(c,VJ),m=PA(c,II),h=Object.keys(i).reduce(function(e,t){var r=i[t],n=r.orientation;return r.mirror||r.hide?e:b3(b3({},e),{},w3({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),p=Object.keys(s).reduce(function(e,t){var r=s[t],n=r.orientation;return r.mirror||r.hide?e:b3(b3({},e),{},w3({},n,kP(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),f=b3(b3({},p),h),x=f.bottom;u&&(f.bottom+=u.props.height||VJ.defaultProps.height),m&&t&&(f=function(e,t,r,n){var s=r.children,a=r.width,i=r.margin,o=a-(i.left||0)-(i.right||0),l=JY({children:s,legendWidth:o});if(l){var c=n||{},d=c.width,u=c.height,m=l.align,h=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===h)&&"center"!==m&&aA(e[m]))return sK(sK({},e),{},aK({},m,e[m]+(d||0)));if(("horizontal"===p||"vertical"===p&&"center"===m)&&"middle"!==h&&aA(e[h]))return sK(sK({},e),{},aK({},h,e[h]+(u||0)))}return e}(f,0,r,t));var g=o-f.left-f.right,v=l-f.top-f.bottom;return b3(b3({brushBottom:x},f),{},{width:Math.max(g,0),height:Math.max(v,0)})},q3=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},I3=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,s=void 0===n?"axis":n,a=e.validateTooltipEventTypes,i=void 0===a?["axis"]:a,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var r=t.graphicalItems,n=t.stackGroups,s=t.offset,a=t.updateId,i=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,m=e.barCategoryGap,h=e.maxBarSize,p=R3(d),f=p.numericAxisName,x=p.cateAxisName,g=function(e){return!(!e||!e.length)&&e.some(function(e){var t=kA(e&&e.type);return t&&t.indexOf("Bar")>=0})}(r),v=[];return r.forEach(function(r,p){var y=E3(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:l}),j=void 0!==r.type.defaultProps?b3(b3({},r.type.defaultProps),r.props):r.props,b=j.dataKey,w=j.maxBarSize,N=j["".concat(f,"Id")],_=j["".concat(x,"Id")],S=o.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],s=j["".concat(r.axisType,"Id")];n&&n[s]||"zAxis"===r.axisType||DY();var a=n[s];return b3(b3({},e),{},w3(w3({},r.axisType,a),"".concat(r.axisType,"Ticks"),hK(a)))},{}),k=S[x],C=S["".concat(x,"Ticks")],E=n&&n[N]&&n[N].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?sK(sK({},e.type.defaultProps),e.props):e.props).stackId;if(iA(n)){var s=t[n];if(s){var a=s.items.indexOf(e);return a>=0?s.stackedData[a]:null}}return null}(r,n[N].stackGroups),O=kA(r.type).indexOf("Bar")>=0,M=EK(k,C),P=[],A=g&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,s=void 0===n?{}:n;if(!s)return{};for(var a={},i=Object.keys(s),o=0,l=i.length;o<l;o++)for(var c=s[i[o]].stackGroups,d=Object.keys(c),u=0,m=d.length;u<m;u++){var h=c[d[u]],p=h.items,f=h.cateAxisId,x=p.filter(function(e){return kA(e.type).indexOf("Bar")>=0});if(x&&x.length){var g=x[0].type.defaultProps,v=void 0!==g?sK(sK({},g),x[0].props):x[0].props,y=v.barSize,j=v[f];a[j]||(a[j]=[]);var b=CP(y)?t:y;a[j].push({item:x[0],stackList:x.slice(1),barSize:CP(b)?void 0:cA(b,r,0)})}}return a}({barSize:c,stackGroups:n,totalSize:q3(S,x)});if(O){var T,D,R=CP(w)?h:w,L=null!==(T=null!==(D=EK(k,C,!0))&&void 0!==D?D:R)&&void 0!==T?T:0;P=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,s=e.sizeList,a=void 0===s?[]:s,i=e.maxBarSize,o=a.length;if(o<1)return null;var l,c=cA(t,n,0,!0),d=[];if(a[0].barSize===+a[0].barSize){var u=!1,m=n/o,h=a.reduce(function(e,t){return e+t.barSize||0},0);(h+=(o-1)*c)>=n&&(h-=(o-1)*c,c=0),h>=n&&m>0&&(u=!0,h=o*(m*=.9));var p={offset:((n-h)/2|0)-c,size:0};l=a.reduce(function(e,t){var r={item:t.item,position:{offset:p.offset+p.size+c,size:u?m:t.barSize}},n=[].concat(tK(e),[r]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:p})}),n},d)}else{var f=cA(r,n,0,!0);n-2*f-(o-1)*c<=0&&(c=0);var x=(n-2*f-(o-1)*c)/o;x>1&&(x>>=0);var g=i===+i?Math.min(x,i):x;l=a.reduce(function(e,t,r){var n=[].concat(tK(e),[{item:t.item,position:{offset:f+(x+c)*r+(x-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},d)}return l}({barGap:u,barCategoryGap:m,bandSize:L!==M?L:M,sizeList:A[_],maxBarSize:R}),L!==M&&(P=P.map(function(e){return b3(b3({},e),{},{position:b3(b3({},e.position),{},{offset:e.position.offset-L/2})})}))}var q,I,F=r&&r.type&&r.type.getComposedData;F&&v.push({props:b3(b3({},F(b3(b3({},S),{},{displayedData:y,props:e,dataKey:b,item:r,bandSize:M,barPosition:P,offset:s,stackedData:E,layout:d,dataStartIndex:i,dataEndIndex:l}))),{},w3(w3(w3({key:r.key||"item-".concat(p)},f,S[f]),x,S[x]),"animationId",a)),childIndex:(q=r,I=e.children,OA(I).indexOf(q)),item:r})}),v},m=function(e,n){var s=e.props,a=e.dataStartIndex,i=e.dataEndIndex,l=e.updateId;if(!AA({props:s}))return null;var d=s.children,m=s.layout,h=s.stackOffset,p=s.data,f=s.reverseStackOrder,x=R3(m),g=x.numericAxisName,v=x.cateAxisName,y=MA(d,r),j=function(e,t,r,n,s,a){if(!e)return null;var i=(a?t.reverse():t).reduce(function(e,t){var s,a=null!==(s=t.type)&&void 0!==s&&s.defaultProps?sK(sK({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(a.hide)return e;var o=a[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(iA(i)){var c=l.stackGroups[i]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[lA("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return sK(sK({},e),{},aK({},o,l))},{});return Object.keys(i).reduce(function(t,a){var o=i[a];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,a){var i=o.stackGroups[a];return sK(sK({},t),{},aK({},a,{numericAxisId:r,cateAxisId:n,items:i.items,stackedData:jK(e,i.items,s)}))},{})),sK(sK({},t),{},aK({},a,o))},{})}(p,y,"".concat(g,"Id"),"".concat(v,"Id"),h,f),b=o.reduce(function(e,t){var r="".concat(t.axisType,"Map");return b3(b3({},e),{},w3({},r,T3(s,b3(b3({},t),{},{graphicalItems:y,stackGroups:t.axisType===g&&j,dataStartIndex:a,dataEndIndex:i}))))},{}),w=L3(b3(b3({},b),{},{props:s,graphicalItems:y}),null==n?void 0:n.legendBBox);Object.keys(b).forEach(function(e){b[e]=c(s,b[e],w,e.replace("Map",""),t)});var N,_,S=b["".concat(v,"Map")],k=(N=dA(S),{tooltipTicks:_=hK(N,!1,!0),orderedTooltipTicks:DF(_,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:EK(N,_)}),C=u(s,b3(b3({},b),{},{dataStartIndex:a,dataEndIndex:i,updateId:l,graphicalItems:y,stackGroups:j,offset:w}));return b3(b3({formattedGraphicalItems:C,graphicalItems:y,offset:w,stackGroups:j},k),b)},h=function(){function e(r){var n,s,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w3(a=h3(this,e,[r]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),w3(a,"accessibilityManager",new Z4),w3(a,"handleLegendBBoxUpdate",function(e){if(e){var t=a.state,r=t.dataStartIndex,n=t.dataEndIndex,s=t.updateId;a.setState(b3({legendBBox:e},m({props:a.props,dataStartIndex:r,dataEndIndex:n,updateId:s},b3(b3({},a.state),{},{legendBBox:e}))))}}),w3(a,"handleReceiveSyncEvent",function(e,t,r){if(a.props.syncId===e){if(r===a.eventEmitterSymbol&&"function"!=typeof a.props.syncMethod)return;a.applySyncEvent(t)}}),w3(a,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==a.state.dataStartIndex||r!==a.state.dataEndIndex){var n=a.state.updateId;a.setState(function(){return b3({dataStartIndex:t,dataEndIndex:r},m({props:a.props,dataStartIndex:t,dataEndIndex:r,updateId:n},a.state))}),a.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),w3(a,"handleMouseEnter",function(e){var t=a.getMouseInfo(e);if(t){var r=b3(b3({},t),{},{isTooltipActive:!0});a.setState(r),a.triggerSyncEvent(r);var n=a.props.onMouseEnter;RO(n)&&n(r,e)}}),w3(a,"triggeredAfterMouseMove",function(e){var t=a.getMouseInfo(e),r=t?b3(b3({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};a.setState(r),a.triggerSyncEvent(r);var n=a.props.onMouseMove;RO(n)&&n(r,e)}),w3(a,"handleItemMouseEnter",function(e){a.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),w3(a,"handleItemMouseLeave",function(){a.setState(function(){return{isTooltipActive:!1}})}),w3(a,"handleMouseMove",function(e){e.persist(),a.throttleTriggeredAfterMouseMove(e)}),w3(a,"handleMouseLeave",function(e){a.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};a.setState(t),a.triggerSyncEvent(t);var r=a.props.onMouseLeave;RO(r)&&r(t,e)}),w3(a,"handleOuterEvent",function(e){var t,r=function(e){var t=e&&e.type;return t&&SA[t]?SA[t]:null}(e),n=kP(a.props,"".concat(r));r&&RO(n)&&n(null!==(t=/.*touch.*/i.test(r)?a.getMouseInfo(e.changedTouches[0]):a.getMouseInfo(e))&&void 0!==t?t:{},e)}),w3(a,"handleClick",function(e){var t=a.getMouseInfo(e);if(t){var r=b3(b3({},t),{},{isTooltipActive:!0});a.setState(r),a.triggerSyncEvent(r);var n=a.props.onClick;RO(n)&&n(r,e)}}),w3(a,"handleMouseDown",function(e){var t=a.props.onMouseDown;RO(t)&&t(a.getMouseInfo(e),e)}),w3(a,"handleMouseUp",function(e){var t=a.props.onMouseUp;RO(t)&&t(a.getMouseInfo(e),e)}),w3(a,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),w3(a,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseDown(e.changedTouches[0])}),w3(a,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseUp(e.changedTouches[0])}),w3(a,"triggerSyncEvent",function(e){void 0!==a.props.syncId&&H4.emit(Y4,a.props.syncId,e,a.eventEmitterSymbol)}),w3(a,"applySyncEvent",function(e){var t=a.props,r=t.layout,n=t.syncMethod,s=a.state.updateId,i=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)a.setState(b3({dataStartIndex:i,dataEndIndex:o},m({props:a.props,dataStartIndex:i,dataEndIndex:o,updateId:s},a.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=a.state,h=u.offset,p=u.tooltipTicks;if(!h)return;if("function"==typeof n)d=n(p,e);else if("value"===n){d=-1;for(var f=0;f<p.length;f++)if(p[f].value===e.activeLabel){d=f;break}}var x=b3(b3({},h),{},{x:h.left,y:h.top}),g=Math.min(l,x.x+x.width),v=Math.min(c,x.y+x.height),y=p[d]&&p[d].value,j=M3(a.state,a.props.data,d),b=p[d]?{x:"horizontal"===r?p[d].coordinate:g,y:"horizontal"===r?v:p[d].coordinate}:k3;a.setState(b3(b3({},e),{},{activeLabel:y,activeCoordinate:b,activePayload:j,activeTooltipIndex:d}))}else a.setState(e)}),w3(a,"renderCursor",function(e){var r,n=a.state,s=n.isTooltipActive,i=n.activeCoordinate,o=n.activePayload,l=n.offset,c=n.activeTooltipIndex,d=n.tooltipAxisBandSize,u=a.getTooltipEventType(),m=null!==(r=e.props.active)&&void 0!==r?r:s,h=a.props.layout,p=e.key||"_recharts-cursor";return ke.createElement(a3,{key:p,activeCoordinate:i,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:m,layout:h,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})}),w3(a,"renderPolarAxis",function(e,t,r){var n=kP(e,"type.axisType"),s=kP(a.state,"".concat(n,"Map")),i=e.type.defaultProps,o=void 0!==i?b3(b3({},i),e.props):e.props,l=s&&s[o["".concat(n,"Id")]];return Ne.cloneElement(e,b3(b3({},l),{},{className:Pr(n,l.className),key:e.key||"".concat(t,"-").concat(r),ticks:hK(l,!0)}))}),w3(a,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,s=t.polarRadius,i=a.state,o=i.radiusAxisMap,l=i.angleAxisMap,c=dA(o),d=dA(l),u=d.cx,m=d.cy,h=d.innerRadius,p=d.outerRadius;return Ne.cloneElement(e,{polarAngles:Array.isArray(n)?n:hK(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(s)?s:hK(c,!0).map(function(e){return e.coordinate}),cx:u,cy:m,innerRadius:h,outerRadius:p,key:e.key||"polar-grid",radialLines:r})}),w3(a,"renderLegend",function(){var e=a.state.formattedGraphicalItems,t=a.props,r=t.children,n=t.width,s=t.height,i=a.props.margin||{},o=n-(i.left||0)-(i.right||0),c=JY({children:r,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=u3(c,i3);return Ne.cloneElement(d,b3(b3({},u),{},{chartWidth:n,chartHeight:s,margin:i,onBBoxUpdate:a.handleLegendBBoxUpdate}))}),w3(a,"renderTooltip",function(){var e,t=a.props,r=t.children,n=t.accessibilityLayer,s=PA(r,yz);if(!s)return null;var i=a.state,o=i.isTooltipActive,l=i.activeCoordinate,c=i.activePayload,d=i.activeLabel,u=i.offset,m=null!==(e=s.props.active)&&void 0!==e?e:o;return Ne.cloneElement(s,{viewBox:b3(b3({},u),{},{x:u.left,y:u.top}),active:m,label:d,payload:m?c:[],coordinate:l,accessibilityLayer:n})}),w3(a,"renderBrush",function(e){var t=a.props,r=t.margin,n=t.data,s=a.state,i=s.offset,o=s.dataStartIndex,l=s.dataEndIndex,c=s.updateId;return Ne.cloneElement(e,{key:e.key||"_recharts-brush",onChange:fK(a.handleBrushChange,e.props.onChange),data:n,x:aA(e.props.x)?e.props.x:i.left,y:aA(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(r.bottom||0),width:aA(e.props.width)?e.props.width:i.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),w3(a,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=a.clipPathId,s=a.state,i=s.xAxisMap,o=s.yAxisMap,l=s.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,m=void 0===u?c.xAxisId:u,h=d.yAxisId,p=void 0===h?c.yAxisId:h;return Ne.cloneElement(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:i[m],yAxis:o[p],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:n})}),w3(a,"renderActivePoints",function(t){var r=t.item,n=t.activePoint,s=t.basePoint,a=t.childIndex,i=t.isRange,o=[],l=r.props.key,c=void 0!==r.item.type.defaultProps?b3(b3({},r.item.type.defaultProps),r.item.props):r.item.props,d=c.activeDot,u=b3(b3({index:a,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:lK(r.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},RA(d,!1)),yA(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(a))),s?o.push(e.renderActiveDot(d,b3(b3({},u),{},{cx:s.x,cy:s.y}),"".concat(l,"-basePoint-").concat(a))):i&&o.push(null),o}),w3(a,"renderGraphicChild",function(e,t,r){var n=a.filterFormatItem(e,t,r);if(!n)return null;var s=a.getTooltipEventType(),i=a.state,o=i.isTooltipActive,l=i.tooltipAxis,c=i.activeTooltipIndex,d=i.activeLabel,u=PA(a.props.children,yz),m=n.props,h=m.points,p=m.isRange,f=m.baseLine,x=void 0!==n.item.type.defaultProps?b3(b3({},n.item.type.defaultProps),n.item.props):n.item.props,g=x.activeDot,v=x.hide,y=x.activeBar,j=x.activeShape,b=Boolean(!v&&o&&u&&(g||y||j)),w={};"axis"!==s&&u&&"click"===u.props.trigger?w={onClick:fK(a.handleItemMouseEnter,e.props.onClick)}:"axis"!==s&&(w={onMouseLeave:fK(a.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:fK(a.handleItemMouseEnter,e.props.onMouseEnter)});var N=Ne.cloneElement(e,b3(b3({},n.props),w));if(b){if(!(c>=0)){var _,S=(null!==(_=a.getItemByXY(a.state.activeCoordinate))&&void 0!==_?_:{graphicalItem:N}).graphicalItem,k=S.item,C=void 0===k?e:k,E=S.childIndex,O=b3(b3(b3({},n.props),w),{},{activeIndex:E});return[Ne.cloneElement(C,O),null,null]}var M,P;if(l.dataKey&&!l.allowDuplicatedCategory){var A="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());M=mA(h,A,d),P=p&&f&&mA(f,A,d)}else M=null==h?void 0:h[c],P=p&&f&&f[c];if(j||y){var T=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[Ne.cloneElement(e,b3(b3(b3({},n.props),w),{},{activeIndex:T})),null,null]}if(!CP(M))return[N].concat(g3(a.renderActivePoints({item:n,activePoint:M,basePoint:P,childIndex:c,isRange:p})))}return p?[N,null,null]:[N,null]}),w3(a,"renderCustomized",function(e,t,r){return Ne.cloneElement(e,b3(b3({key:"recharts-customized-".concat(r)},a.props),a.state))}),w3(a,"renderMap",{CartesianGrid:{handler:C3,once:!0},ReferenceArea:{handler:a.renderReferenceElement},ReferenceLine:{handler:C3},ReferenceDot:{handler:a.renderReferenceElement},XAxis:{handler:C3},YAxis:{handler:C3},Brush:{handler:a.renderBrush,once:!0},Bar:{handler:a.renderGraphicChild},Line:{handler:a.renderGraphicChild},Area:{handler:a.renderGraphicChild},Radar:{handler:a.renderGraphicChild},RadialBar:{handler:a.renderGraphicChild},Scatter:{handler:a.renderGraphicChild},Pie:{handler:a.renderGraphicChild},Funnel:{handler:a.renderGraphicChild},Tooltip:{handler:a.renderCursor,once:!0},PolarGrid:{handler:a.renderPolarGrid,once:!0},PolarAngleAxis:{handler:a.renderPolarAxis},PolarRadiusAxis:{handler:a.renderPolarAxis},Customized:{handler:a.renderCustomized}}),a.clipPathId="".concat(null!==(n=r.id)&&void 0!==n?n:lA("recharts"),"-clip"),a.throttleTriggeredAfterMouseMove=Bz(a.triggeredAfterMouseMove,null!==(s=r.throttleDelay)&&void 0!==s?s:1e3/60),a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x3(e,t)}(e,Ne.Component),m3(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,s=e.layout,a=PA(t,yz);if(a){var i=a.props.defaultIndex;if(!("number"!=typeof i||i<0||i>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=M3(this.state,r,i,o),c=this.state.tooltipTicks[i].coordinate,d=(this.state.offset.top+n)/2,u="horizontal"===s?{x:c,y:d}:{y:c,x:d},m=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});m&&(u=b3(b3({},u),m.props.points[i].tooltipPosition),l=m.props.points[i].tooltipPayload);var h={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(h),this.renderCursor(a),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var r,n;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}});return null}},{key:"componentDidUpdate",value:function(e){LA([PA(e.children,yz)],[PA(this.props.children,yz)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=PA(this.props.children,yz);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:s}return s}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),s={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(e.pageX-s.left),chartY:Math.round(e.pageY-s.top)},i=n.width/r.offsetWidth||1,o=this.inRange(a.chartX,a.chartY,i);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&d){var u=dA(c).scale,m=dA(d).scale,h=u&&u.invert?u.invert(a.chartX):null,p=m&&m.invert?m.invert(a.chartY):null;return b3(b3({},a),{},{xValue:h,yValue:p})}var f=P3(this.state,this.props.data,this.props.layout,o);return f?b3(b3({},a),f):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,s=e/r,a=t/r;if("horizontal"===n||"vertical"===n){var i=this.state.offset;return s>=i.left&&s<=i.left+i.width&&a>=i.top&&a<=i.top+i.height?{x:s,y:a}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=dA(l);return UK({x:s,y:a},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=PA(e,yz),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),b3(b3({},yA(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){H4.on(Y4,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){H4.removeListener(Y4,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,s=0,a=n.length;s<a;s++){var i=n[s];if(i.item===e||i.props.key===e.key||t===kA(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,s=t.height,a=t.width;return ke.createElement("defs",null,ke.createElement("clipPath",{id:e},ke.createElement("rect",{x:r,y:n,height:s,width:a})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=d3(t,2),n=r[0],s=r[1];return b3(b3({},e),{},w3({},n,s.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=d3(t,2),n=r[0],s=r[1];return b3(b3({},e),{},w3({},n,s.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var s=0,a=r.length;s<a;s++){var i=r[s],o=i.props,l=i.item,c=void 0!==l.type.defaultProps?b3(b3({},l.type.defaultProps),l.props):l.props,d=kA(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return xQ(e,t)});if(u)return{graphicalItem:i,payload:u}}else if("RadialBar"===d){var m=(o.data||[]).find(function(t){return UK(e,t)});if(m)return{graphicalItem:i,payload:m}}else if(JZ(i,n)||eJ(i,n)||tJ(i,n)){var h=aJ({graphicalItem:i,activeTooltipItem:n,itemData:c.data}),p=void 0===c.activeIndex?h:c.activeIndex;return{graphicalItem:b3(b3({},i),{},{childIndex:p}),payload:tJ(i,n)?c.data[h]:i.props.data[h]}}}return null}},{key:"render",value:function(){var e=this;if(!AA(this))return null;var t,r,n=this.props,s=n.children,a=n.className,i=n.width,o=n.height,l=n.style,c=n.compact,d=n.title,u=n.desc,m=u3(n,o3),h=RA(m,!1);if(c)return ke.createElement(c1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement($A,c3({},h,{width:i,height:o,title:d,desc:u}),this.renderClipPath(),IA(s,this.renderMap)));this.props.accessibilityLayer&&(h.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,h.role=null!==(r=this.props.role)&&void 0!==r?r:"application",h.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},h.onFocus=function(){e.accessibilityManager.focus()});var p=this.parseEventsOfWrapper();return ke.createElement(c1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement("div",c3({className:Pr("recharts-wrapper",a),style:b3({position:"relative",cursor:"default",width:i,height:o},l)},p,{ref:function(t){e.container=t}}),ke.createElement($A,c3({},h,{width:i,height:o,title:d,desc:u,style:S3}),this.renderClipPath(),IA(s,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();return w3(h,"displayName",t),w3(h,"defaultProps",b3({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),w3(h,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,s=e.children,a=e.width,i=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var h=D3(e);return b3(b3(b3({},h),{},{updateId:0},m(b3(b3({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:a,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:s})}if(r!==t.prevDataKey||n!==t.prevData||a!==t.prevWidth||i!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!hA(c,t.prevMargin)){var p=D3(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},x=b3(b3({},P3(t,n,o)),{},{updateId:t.updateId+1}),g=b3(b3(b3({},p),f),x);return b3(b3(b3({},g),m(b3({props:e},g),t)),{},{prevDataKey:r,prevData:n,prevWidth:a,prevHeight:i,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:s})}if(!LA(s,t.prevChildren)){var v,y,j,b,w=PA(s,VJ),N=w&&null!==(v=null===(y=w.props)||void 0===y?void 0:y.startIndex)&&void 0!==v?v:d,_=w&&null!==(j=null===(b=w.props)||void 0===b?void 0:b.endIndex)&&void 0!==j?j:u,S=N!==d||_!==u,k=!CP(n)&&!S?t.updateId:t.updateId+1;return b3(b3({updateId:k},m(b3(b3({props:e},t),{},{updateId:k,dataStartIndex:N,dataEndIndex:_}),t)),{},{prevChildren:s,dataStartIndex:N,dataEndIndex:_})}return null}),w3(h,"renderActiveDot",function(e,t,r){var n;return n=Ne.isValidElement(e)?Ne.cloneElement(e,t):RO(e)?e(t):ke.createElement(EQ,t),ke.createElement(HA,{className:"recharts-active-dot",key:r},n)}),function(e){return ke.createElement(h,e)}},F3=I3({chartName:"LineChart",GraphicalChild:n4,axisComponents:[{axisType:"xAxis",AxisComp:M4},{axisType:"yAxis",AxisComp:B4}],formatAxisMap:B0}),z3=I3({chartName:"BarChart",GraphicalChild:D0,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:M4},{axisType:"yAxis",AxisComp:B4}],formatAxisMap:B0}),B3=I3({chartName:"PieChart",GraphicalChild:gJ,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yZ},{axisType:"radiusAxis",AxisComp:aZ}],formatAxisMap:function(e,t,r,n,s){var a=e.width,i=e.height,o=e.startAngle,l=e.endAngle,c=cA(e.cx,a,a/2),d=cA(e.cy,i,i/2),u=zK(a,i,r),m=cA(e.innerRadius,u,0),h=cA(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,r){var a,i=t[r],u=i.domain,p=i.reversed;if(CP(i.range))"angleAxis"===n?a=[o,l]:"radiusAxis"===n&&(a=[m,h]),p&&(a=[a[1],a[0]]);else{var f=RK(a=i.range,2);o=f[0],l=f[1]}var x=xK(i,s),g=x.realScaleType,v=x.scale;v.domain(u).range(a),vK(v);var y=bK(v,TK(TK({},i),{},{realScaleType:g})),j=TK(TK(TK({},i),y),{},{range:a,radius:h,realScaleType:g,scale:v,cx:c,cy:d,innerRadius:m,outerRadius:h,startAngle:o,endAngle:l});return TK(TK({},e),{},DK({},r,j))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),$3=I3({chartName:"AreaChart",GraphicalChild:y4,axisComponents:[{axisType:"xAxis",AxisComp:M4},{axisType:"yAxis",AxisComp:B4}],formatAxisMap:B0});const U3=()=>{const[e,t]=Ne.useState(null),[r,n]=Ne.useState([]),[s,a]=Ne.useState(null),[i,o]=Ne.useState([]),[l,c]=Ne.useState(!0),d=async()=>{try{const e=await u(),r={overallStatus:e.status,cpuUsage:e.responseTime>1e3?Math.floor(20*Math.random())+70:Math.floor(30*Math.random())+25,memoryUsage:e.responseTime>500?Math.floor(20*Math.random())+60:Math.floor(25*Math.random())+35,databaseStatus:e.status,activeConnections:Math.floor(15*Math.random())+8},s=Array.from({length:24},(t,n)=>{const s=new Date(Date.now()-60*(23-n)*60*1e3),a=e.responseTime||100;return{timestamp:s.toISOString(),cpu:r.cpuUsage+Math.floor(10*Math.random())-5,memory:r.memoryUsage+Math.floor(8*Math.random())-4,responseTime:Math.max(50,a+Math.floor(50*Math.random())-25),requests:Math.floor(800*Math.random())+200}}),i={uptime:"healthy"===e.status?"99.95%":"warning"===e.status?"98.5%":"95.2%",lastIncident:"critical"===e.status?"Now":Math.floor(30*Math.random())+1+" days ago"},l="critical"===e.status?[{component:"Database",message:e.error||"Database connection issues detected",severity:"critical",timestamp:(new Date).toISOString()}]:"warning"===e.status?[{component:"Database",message:"Slow database response times detected",severity:"medium",timestamp:(new Date).toISOString()}]:[];t(r),n(s),a(i),o(l)}catch(e){}finally{c(!1)}},u=async()=>{try{const e=Date.now(),{data:t,error:r}=await mr.from("user_profiles").select("id").limit(1),n=Date.now()-e;return{status:r?"critical":n>1e3?"warning":"healthy",responseTime:n,error:null==r?void 0:r.message}}catch(e){return{status:"critical",responseTime:0,error:"Connection failed"}}};return Ne.useEffect(()=>{d();const e=setInterval(d,6e4);return()=>clearInterval(e)},[]),{systemMetrics:e,performanceData:r,uptimeStats:s,alerts:i,isLoading:l,refreshHealth:d,checkDatabaseHealth:u}},V3=()=>{br();const{toast:e}=fp(),{t:t,isRTL:r}=cr(),{systemMetrics:s,alerts:a,isLoading:i}=U3(),[o,l]=Ne.useState({totalUsers:0,totalRequests:0,totalOffers:0,totalOrders:0,totalRevenue:0,activeUsers:0,pendingApprovals:0,systemHealth:"healthy",securityScore:85,performanceScore:87}),[c,d]=Ne.useState(!0),[u,m]=Ne.useState([]),[h,p]=Ne.useState([]),f=[{title:t("navigation.userManagement"),description:t("navigation.userManagementDescription"),icon:Zh,link:"/admin/users",color:"bg-blue-500",count:o.totalUsers},{title:t("navigation.approvalQueue"),description:t("navigation.approvalQueueDescription"),icon:gm,link:"/admin/requests",color:"bg-orange-500",count:o.pendingApprovals},{title:t("navigation.financialOverview"),description:t("navigation.financialOverviewDescription"),icon:_m,link:"/admin/financial-transactions",color:"bg-green-500"},{title:t("navigation.systemHealth"),description:t("navigation.systemHealthDescription"),icon:wh,link:"/admin/performance-monitor",color:"healthy"===(null==s?void 0:s.overallStatus)?"bg-green-500":"warning"===(null==s?void 0:s.overallStatus)?"bg-yellow-500":"bg-red-500"},{title:t("navigation.securityCenter"),description:t("navigation.securityCenterDescription"),icon:Sh,link:"/admin/security",color:"bg-purple-500"},{title:t("navigation.communications"),description:t("navigation.communicationsDescription"),icon:nh,link:"/admin/communications",color:"bg-indigo-500"},{title:t("navigation.analytics"),description:t("navigation.analyticsDescription"),icon:Ju,link:"/admin/analytics",color:"bg-teal-500"},{title:t("navigation.automation"),description:t("navigation.automationDescription"),icon:ap,link:"/admin/automation",color:"bg-yellow-500"}];return Ne.useEffect(()=>{(async()=>{try{d(!0);const[e,t,n,a,i,o]=await Promise.all([mr.from("user_profiles").select("id, role, created_at, updated_at"),mr.from("requests").select("id, admin_approval_status, created_at"),mr.from("offers").select("id, admin_approval_status, client_approval_status, created_at"),mr.from("orders").select("id, amount, status, created_at"),mr.from("financial_transactions").select("amount, status, created_at"),mr.from("audit_log").select("action, entity_type, created_at").order("created_at",{ascending:!1}).limit(10)]),c=e.data||[],u=t.data||[],h=n.data||[],f=a.data||[],x=i.data||[],g=new Date;g.setDate(g.getDate()-30);const v=c.filter(e=>new Date(e.updated_at)>=g).length,y=u.filter(e=>"pending"===e.admin_approval_status).length,j=h.filter(e=>"pending"===e.admin_approval_status||"pending"===e.client_approval_status).length,b=x.filter(e=>"completed"===e.status).reduce((e,t)=>{var r;return e+parseFloat((null==(r=t.amount)?void 0:r.toString())||"0")},0),w=Array.from({length:7},(e,t)=>{const n=new Date;n.setDate(n.getDate()-(6-t));const s=c.filter(e=>new Date(e.created_at).toDateString()===n.toDateString()).length,a=u.filter(e=>new Date(e.created_at).toDateString()===n.toDateString()).length,i=f.filter(e=>new Date(e.created_at).toDateString()===n.toDateString()).length;return{date:n.toLocaleDateString(r?"ar-SA":"en-US",{month:"short",day:"numeric"}),users:s,requests:a,orders:i,revenue:1e4*Math.random()+5e3}});l({totalUsers:c.length,totalRequests:u.length,totalOffers:h.length,totalOrders:f.length,totalRevenue:b,activeUsers:v,pendingApprovals:y+j,systemHealth:(null==s?void 0:s.overallStatus)||"healthy",securityScore:85,performanceScore:87}),p(w),m(o.data||[])}catch(n){e({title:t("admin.messages.error"),description:t("admin.system.metricsError"),variant:"destructive"})}finally{d(!1)}})()},[s]),c&&!s?n.jsx("div",{className:"space-y-6",children:Array.from({length:4}).map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsxs(Au,{className:"p-6",children:[n.jsx("div",{className:"h-6 bg-muted rounded w-1/3 mb-2"}),n.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},t))}):n.jsxs("div",{className:"space-y-6",dir:r?"rtl":"ltr",children:[a&&a.length>0&&n.jsx(Eu,{className:"border-destructive/50 bg-destructive/5",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cm,{className:"h-5 w-5 text-destructive"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-destructive",children:t("admin.system.alerts")}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," ",t("admin.system.activeSystemAlerts")," ",t("admin.system.requireAttention")]})]}),n.jsx(ku,{variant:"outline",size:"sm",asChild:!0,className:"ml-auto",children:n.jsx(Zt,{to:"/admin/performance-monitor",children:t("admin.actions.viewDetails")})})]})})}),n.jsxs("div",{className:_u("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",r&&"rtl"),children:[n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("admin.analytics.totalUsers")}),n.jsx("p",{className:"text-2xl font-bold",children:o.totalUsers.toLocaleString()}),n.jsxs("p",{className:_u("text-xs text-success",r&&"text-right"),children:[n.jsx($h,{className:"h-3 w-3 inline mr-1"}),o.activeUsers," ",t("admin.users.activeThisMonth")]})]}),n.jsx(Zh,{className:"h-8 w-8 text-primary"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("admin.analytics.totalRevenue")}),n.jsxs("p",{className:"text-2xl font-bold",children:["$",o.totalRevenue.toLocaleString()]}),n.jsxs("p",{className:_u("text-xs text-success",r&&"text-right"),children:[n.jsx($h,{className:"h-3 w-3 inline mr-1"}),t("admin.financial.monthlyGrowth")]})]}),n.jsx(_m,{className:"h-8 w-8 text-success"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("admin.analytics.pendingApprovals")}),n.jsx("p",{className:"text-2xl font-bold",children:o.pendingApprovals}),n.jsx("p",{className:_u("text-xs text-muted-foreground",r&&"text-right"),children:t("admin.requests.requiresAdminReview")})]}),n.jsx(gm,{className:"h-8 w-8 text-warning"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t("admin.system.health")}),n.jsx("p",{className:_u("text-2xl font-bold capitalize","healthy"===o.systemHealth?"text-success":"warning"===o.systemHealth?"text-warning":"text-destructive"),children:t(`admin.system.${o.systemHealth}`)}),n.jsx("p",{className:_u("text-xs text-muted-foreground",r&&"text-right"),children:t("admin.system.allSystemsOperational")})]}),n.jsx(wh,{className:_u("h-8 w-8","healthy"===o.systemHealth?"text-success":"warning"===o.systemHealth?"text-warning":"text-destructive")})]})})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("admin.analytics.platformActivity")}),n.jsx(Pu,{children:t("admin.analytics.platformActivityDesc")})]}),n.jsx(Au,{children:n.jsx("div",{className:"h-80",children:n.jsx(Kz,{width:"100%",height:"100%",children:n.jsxs($3,{data:h,children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"date"}),n.jsx(B4,{}),n.jsx(yz,{}),n.jsx(y4,{type:"monotone",dataKey:"users",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3}),n.jsx(y4,{type:"monotone",dataKey:"requests",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.3}),n.jsx(y4,{type:"monotone",dataKey:"orders",stackId:"1",stroke:"#ffc658",fill:"#ffc658",fillOpacity:.3})]})})})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("admin.dashboardData.quickActions")}),n.jsx(Pu,{children:t("admin.dashboardData.quickActionsDesc")})]}),n.jsx(Au,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map(e=>n.jsx(Zt,{to:e.link,children:n.jsx(Eu,{className:"hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:_u("p-2 rounded-lg",e.color),children:n.jsx(e.icon,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm",children:e.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),void 0!==e.count&&n.jsx(Xf,{variant:"secondary",className:"mt-1",children:e.count.toLocaleString()})]})]})})})},e.title))})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("admin.system.status")}),n.jsx(Pu,{children:t("admin.system.statusDescription")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:t("admin.system.database")})]}),n.jsx(Xf,{variant:"healthy"===(null==s?void 0:s.databaseStatus)?"default":"destructive",children:t(`admin.system.${(null==s?void 0:s.databaseStatus)||"healthy"}`)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:t("admin.system.cpuUsage")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(G_,{value:(null==s?void 0:s.cpuUsage)||25,className:"w-16"}),n.jsxs("span",{className:"text-sm",children:[(null==s?void 0:s.cpuUsage)||25,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Bm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:t("admin.system.memoryUsage")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(G_,{value:(null==s?void 0:s.memoryUsage)||45,className:"w-16"}),n.jsxs("span",{className:"text-sm",children:[(null==s?void 0:s.memoryUsage)||45,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Im,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:t("admin.system.activeConnections")})]}),n.jsx("span",{className:"text-sm",children:(null==s?void 0:s.activeConnections)||12})]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("admin.analytics.recentActivity")}),n.jsx(Pu,{children:t("admin.analytics.recentActivityDescription")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-3",children:[u.slice(0,5).map((e,r)=>{var s;return n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"capitalize",children:null==(s=e.action)?void 0:s.replace("_"," ")}),n.jsxs("span",{className:"text-muted-foreground",children:[" ",t("admin.analytics.activityOn")," "]}),n.jsx("span",{className:"capitalize",children:e.entity_type})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleTimeString()})]},r)}),0===u.length&&n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:t("admin.analytics.noRecentActivity")})]})})]})]})]})},W3=()=>{const{t:e}=cr();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:e("admin.dashboard")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:e("admin.dashboardData.description")})]}),n.jsx(V3,{})]})},H3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:_u("w-full caption-bottom text-sm",e),...t})}));H3.displayName="Table";const Y3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:_u("[&_tr]:border-b",e),...t}));Y3.displayName="TableHeader";const K3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:_u("[&_tr:last-child]:border-0",e),...t}));K3.displayName="TableBody";Ne.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:_u("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const G3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:_u("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));G3.displayName="TableRow";const X3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:_u("h-12 px-4 text-left align-middle font-medium text-foreground [&:has([role=checkbox])]:pr-0",e),...t}));X3.displayName="TableHead";const Q3=Ne.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:_u("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Q3.displayName="TableCell";Ne.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:_u("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const Z3=()=>{const[e,t]=Ne.useState([]),[r,s]=Ne.useState(!0),[a,i]=Ne.useState(null),[o,l]=Ne.useState({}),[c,d]=Ne.useState({}),[u,m]=Ne.useState("pending"),[h,p]=Ne.useState(""),[f,x]=Ne.useState([]),[g,v]=Ne.useState("cards"),[y,j]=Ne.useState("date"),[b,w]=Ne.useState(!1),[N,_]=Ne.useState(null),[S,k]=Ne.useState(""),{showSuccess:C,showError:E}=dy(),{t:O,isRTL:M,formatDate:P}=cr(),A=Ne.useMemo(()=>{let t=e;if("all"!==u&&(t=t.filter(e=>e.status===u)),h.trim()){const e=h.toLowerCase();t=t.filter(t=>{var r,n,s,a,i,o;return(null==(n=null==(r=t.user_profiles)?void 0:r.full_name)?void 0:n.toLowerCase().includes(e))||(null==(a=null==(s=t.user_profiles)?void 0:s.company_name)?void 0:a.toLowerCase().includes(e))||(null==(o=null==(i=t.user_profiles)?void 0:i.email)?void 0:o.toLowerCase().includes(e))||t.document_type.toLowerCase().includes(e)})}return t.sort((e,t)=>{var r,n,s,a;switch(y){case"name":const i=(null==(r=e.user_profiles)?void 0:r.full_name)||(null==(n=e.user_profiles)?void 0:n.email)||"",o=(null==(s=t.user_profiles)?void 0:s.full_name)||(null==(a=t.user_profiles)?void 0:a.email)||"";return i.localeCompare(o);case"status":return e.status.localeCompare(t.status);default:return new Date(t.submitted_at).getTime()-new Date(e.submitted_at).getTime()}}),t},[e,u,h,y]),T=Ne.useMemo(()=>{const t=e.length,r=e.filter(e=>"pending"===e.status).length,n=e.filter(e=>"approved"===e.status).length,s=e.filter(e=>"rejected"===e.status).length,a=e.filter(e=>"under_review"===e.status).length,i=e.filter(e=>e.reviewed_at&&e.submitted_at),o=i.length>0?i.reduce((e,t)=>{const r=new Date(t.submitted_at).getTime();return e+(new Date(t.reviewed_at).getTime()-r)},0)/i.length/864e5:0,l=t>0?n/(n+s)*100:0;return{total:t,pending:r,approved:n,rejected:s,underReview:a,avgProcessingTime:Math.round(10*o)/10,approvalRate:Math.round(10*l)/10}},[e]),D=Ne.useMemo(()=>({all:e.length,pending:e.filter(e=>"pending"===e.status).length,approved:e.filter(e=>"approved"===e.status).length,rejected:e.filter(e=>"rejected"===e.status).length,under_review:e.filter(e=>"under_review"===e.status).length}),[e]),R=async()=>{try{s(!0);const{data:e,error:r}=await mr.from("verification_requests").select("\n          *,\n          user_profiles(\n            id,\n            full_name,\n            company_name,\n            email\n          )\n        ").order("submitted_at",{ascending:!1});if(r){if("42P01"===r.code)return void E(O("admin.verification.tableNotFoundError"));throw r}const n=(e||[]).map(e=>({id:e.id,user_id:e.user_id,document_type:e.document_type,document_url:e.document_url,status:e.status,submitted_at:e.submitted_at,reviewed_at:e.reviewed_at||void 0,reviewed_by:e.reviewed_by||void 0,reviewer_notes:e.reviewer_notes||void 0,user_profiles:Array.isArray(e.user_profiles)?e.user_profiles[0]||void 0:e.user_profiles||void 0}));t(n),n.forEach(async e=>{d(t=>({...t,[e.id]:"checking"}));const t=UE(e.document_url),r=await zE(t);d(t=>({...t,[e.id]:r.success?"available":"missing"}))})}catch(e){if("42P01"===e.code)E(O("admin.verification.tableNotFoundMessage"));else{E(O("admin.verification.fallbackToDemo"));const e=[{id:"demo-1",user_id:"demo-user-1",document_type:"business_license",document_url:"/demo/business-license.pdf",status:"pending",submitted_at:(new Date).toISOString(),user_profiles:{id:"demo-profile-1",full_name:O("admin.verification.demoUser1"),company_name:O("admin.verification.demoCompany1"),email:"demo1@example.com"}},{id:"demo-2",user_id:"demo-user-2",document_type:"tax_certificate",document_url:"/demo/tax-certificate.pdf",status:"approved",submitted_at:new Date(Date.now()-864e5).toISOString(),user_profiles:{id:"demo-profile-2",full_name:O("admin.verification.demoUser2"),company_name:O("admin.verification.demoCompany2"),email:"demo2@example.com"}}];t(e),e.forEach(e=>{d(t=>({...t,[e.id]:"available"}))})}}finally{s(!1)}},L=async(e,t)=>{if("missing"===c[t])return void E(O("admin.verification.documentNotFound"));const r=UE(e),n=await BE(r);n.success&&n.signedUrl?window.open(n.signedUrl,"_blank"):E(n.error||O("admin.verification.failedAccessDocument"))},q=async(e,t)=>{i(e);try{const{error:r}=await mr.from("verification_requests").update({status:t,reviewed_at:(new Date).toISOString(),reviewer_notes:o[e]||null,reviewed_by:"current_admin"}).eq("id",e);if(r)throw r;await R(),C(O("admin.verification.requestUpdated")+` ${t}`),l(t=>({...t,[e]:""}))}catch(r){E(O("admin.verification.failedUpdateStatus"))}finally{i(null)}},I=e=>{switch(e){case"approved":return n.jsx(Xf,{variant:"secondary",className:"bg-green-100 text-green-800",children:O("admin.verificationQueue.approved")});case"rejected":return n.jsx(Xf,{variant:"destructive",children:O("admin.verificationQueue.rejected")});case"under_review":return n.jsx(Xf,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:O("admin.verificationQueue.underReview")});default:return n.jsx(Xf,{variant:"secondary",children:O("admin.verificationQueue.pending")})}},F=e=>{switch(c[e]){case"checking":return n.jsx(Xf,{variant:"outline",children:O("admin.verificationQueue.checking")});case"available":return n.jsx(Xf,{variant:"secondary",className:"bg-green-100 text-green-800",children:O("admin.verificationQueue.available")});case"missing":return n.jsx(Xf,{variant:"destructive",children:O("admin.verificationQueue.missing")});default:return n.jsx(Xf,{variant:"secondary",children:O("admin.verificationQueue.unknown")})}},z=e=>{var t,r,s,i,d;return n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsxs(Au,{className:"p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(CE,{checked:f.includes(e.id),onCheckedChange:t=>{x(t?[...f,e.id]:f.filter(t=>t!==e.id))}}),n.jsx(Xh,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-foreground",children:(null==(t=e.user_profiles)?void 0:t.full_name)||O("admin.verificationQueue.unknownUser")}),I(e.status)]})]}),(null==(r=e.user_profiles)?void 0:r.company_name)&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground ml-8",children:[n.jsx(Xu,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:e.user_profiles.company_name})]}),n.jsxs("div",{className:"ml-8 space-y-1",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:O("admin.verificationQueue.email")})," ",null==(s=e.user_profiles)?void 0:s.email]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:[O("admin.verificationQueue.submitted")," ",P(new Date(e.submitted_at))]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:O("admin.verificationQueue.documentStatus")}),F(e.id)]})]})]})}),"missing"===c[e.id]&&n.jsxs(db,{variant:"destructive",className:"mb-4",children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsx("strong",{children:O("admin.verificationQueue.warning")})," ",O("admin.verificationQueue.documentMissing")]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>L(e.document_url,e.id),disabled:"missing"===c[e.id],className:"flex-1",children:[n.jsx(Mm,{className:"h-4 w-4 mr-2"}),O("admin.verificationQueue.viewDocument")]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{var t;return(async(e,t,r)=>{if("missing"===(r?c[r]:void 0))return void E(O("admin.verification.cannotDownloadMissing"));const n=UE(e),s=await BE(n,300);if(s.success&&s.signedUrl){const e=document.createElement("a");e.href=s.signedUrl,e.download=`CR_${t||"document"}.pdf`,e.click()}else E(s.error||O("admin.verification.failedDownloadDocument"))})(e.document_url,null==(t=e.user_profiles)?void 0:t.company_name,e.id)},disabled:"missing"===c[e.id],className:"flex-1",children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),O("admin.verificationQueue.download")]})]}),"pending"===e.status&&n.jsxs(n.Fragment,{children:[n.jsx(bC,{placeholder:O("admin.verificationQueue.addReviewNotesPlaceholder"),value:o[e.id]||"",onChange:t=>l(r=>({...r,[e.id]:t.target.value})),rows:3,className:"resize-none"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{onClick:()=>q(e.id,"approved"),disabled:a===e.id||"missing"===c[e.id],size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",children:[n.jsx(sm,{className:"h-4 w-4 mr-2"}),a===e.id?O("admin.verificationQueue.processing"):O("admin.verificationQueue.approve")]}),n.jsxs(ku,{onClick:()=>q(e.id,"rejected"),disabled:a===e.id||!(null==(i=o[e.id])?void 0:i.trim()),variant:"destructive",size:"sm",className:"flex-1",children:[n.jsx(sp,{className:"h-4 w-4 mr-2"}),a===e.id?O("admin.verificationQueue.processing"):O("admin.verificationQueue.reject")]})]}),"missing"===c[e.id]&&n.jsx("p",{className:"text-sm text-destructive",children:O("admin.verificationQueue.cannotApproveMessage")}),!(null==(d=o[e.id])?void 0:d.trim())&&"missing"!==c[e.id]&&n.jsx("p",{className:"text-sm text-muted-foreground",children:O("admin.verificationQueue.reviewNotesRequired")})]}),e.reviewer_notes&&n.jsx(db,{children:n.jsxs(ub,{children:[n.jsx("strong",{children:O("admin.verificationQueue.reviewNotes")}),n.jsx("br",{}),e.reviewer_notes]})})]})]})},e.id)};return Ne.useEffect(()=>{R()},[]),r?n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsx("div",{className:"flex justify-center",children:O("admin.verificationQueue.loadingRequests")})})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-4",children:[n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(Zh,{className:"h-4 w-4"}),O("admin.verificationQueue.totalRequests")]}),n.jsx(Mu,{className:"text-2xl",children:T.total})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(gm,{className:"h-4 w-4"}),O("admin.verificationQueue.pendingReview")]}),n.jsx(Mu,{className:"text-2xl text-orange-600",children:T.pending})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(Am,{className:"h-4 w-4"}),O("admin.verificationQueue.approved")]}),n.jsx(Mu,{className:"text-2xl text-green-600",children:T.approved})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(Dm,{className:"h-4 w-4"}),O("admin.verificationQueue.rejected")]}),n.jsx(Mu,{className:"text-2xl text-red-600",children:T.rejected})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(Mm,{className:"h-4 w-4"}),O("admin.verificationQueue.underReview")]}),n.jsx(Mu,{className:"text-2xl text-blue-600",children:T.underReview})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx($h,{className:"h-4 w-4"}),O("admin.verificationQueue.approvalRate")]}),n.jsxs(Mu,{className:"text-2xl",children:[T.approvalRate,"%"]})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsxs(Pu,{className:"flex items-center gap-2",children:[n.jsx(Zu,{className:"h-4 w-4"}),O("admin.verificationQueue.avgProcessing")]}),n.jsxs(Mu,{className:"text-2xl",children:[T.avgProcessingTime,"d"]})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx($j,{placeholder:O("admin.verificationQueue.searchPlaceholder"),value:h,onChange:e=>p(e.target.value),className:"pl-10"})]}),n.jsxs(lC,{value:y,onValueChange:e=>j(e),children:[n.jsx(dC,{className:"w-40",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"date",children:O("admin.verificationQueue.sortByDate")}),n.jsx(pC,{value:"name",children:O("admin.verificationQueue.sortByName")}),n.jsx(pC,{value:"status",children:O("admin.verificationQueue.sortByStatus")})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>v("cards"===g?"table":"cards"),children:["cards"===g?n.jsx(Gm,{className:"h-4 w-4"}):n.jsx(Fm,{className:"h-4 w-4"}),O("cards"===g?"admin.verificationQueue.tableView":"admin.verificationQueue.cardView")]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:R,children:O("admin.verificationQueue.refresh")})]})]}),f.length>0&&n.jsx(Eu,{children:n.jsx(Au,{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:O("admin.verificationQueue.requestsSelected").replace("{count}",f.length.toString())}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Sb,{open:b,onOpenChange:w,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>_("approve"),children:[n.jsx(Mh,{className:"h-4 w-4 mr-2"}),O("admin.verificationQueue.bulkApprove")]})}),n.jsxs(Ob,{children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:O("approve"===N?"admin.verificationQueue.bulkApproveTitle":"admin.verificationQueue.bulkRejectTitle")}),n.jsx(Tb,{children:O("admin.verificationQueue.bulkActionDescription").replace("{action}",N||"").replace("{count}",f.length.toString())})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(bC,{placeholder:O("admin.verificationQueue.bulkNotesPlaceholder").replace("{action}",N||""),value:S,onChange:e=>k(e.target.value),rows:3}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>w(!1),children:O("admin.verificationQueue.cancel")}),n.jsx(ku,{onClick:()=>{w(!1),k(""),x([])},children:O("approve"===N?"admin.verificationQueue.confirmApproval":"admin.verificationQueue.confirmRejection")})]})]})]})]}),n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>{_("reject"),w(!0)},children:[n.jsx(Ah,{className:"h-4 w-4 mr-2"}),O("admin.verificationQueue.bulkReject")]})]})]})})}),n.jsxs(BS,{value:u,onValueChange:e=>m(e),className:"w-full",children:[n.jsxs($S,{className:"grid w-full grid-cols-5",children:[n.jsxs(US,{value:"all",children:[O("admin.verificationQueue.all")," (",D.all,")"]}),n.jsxs(US,{value:"pending",children:[O("admin.verificationQueue.pending")," (",D.pending,")"]}),n.jsxs(US,{value:"approved",children:[O("admin.verificationQueue.approved")," (",D.approved,")"]}),n.jsxs(US,{value:"rejected",children:[O("admin.verificationQueue.rejected")," (",D.rejected,")"]}),n.jsxs(US,{value:"under_review",children:[O("admin.verificationQueue.underReview")," (",D.under_review,")"]})]}),["all","pending","approved","rejected","under_review"].map(e=>n.jsx(VS,{value:e,className:"space-y-4",children:0===A.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Tm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:O("admin.verificationQueue.noVerificationRequests")}),n.jsx("p",{className:"text-muted-foreground",children:"all"===e?O(h?"admin.verificationQueue.noRequestsMatch":"admin.verificationQueue.noVerificationRequestsFound"):O("admin.verificationQueue.noStatusRequestsFound").replace("{status}",e)}),h&&n.jsx(ku,{variant:"outline",className:"mt-4",onClick:()=>p(""),children:O("admin.verificationQueue.clearSearch")})]})}):"cards"===g?n.jsx("div",{className:"grid gap-4",children:A.map(z)}):n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Gm,{className:"h-5 w-5"}),O("admin.verificationQueue.verificationRequestsTable")]}),n.jsx(Pu,{children:O("admin.verificationQueue.comprehensiveView")})]}),n.jsx(Au,{className:"p-0",children:n.jsxs(H3,{children:[n.jsx(Y3,{children:n.jsxs(G3,{children:[n.jsx(X3,{className:"w-12",children:n.jsx(CE,{checked:f.length===A.length&&A.length>0,onCheckedChange:e=>{x(e?A.map(e=>e.id):[])}})}),n.jsx(X3,{children:O("admin.verificationQueue.vendorInformation")}),n.jsx(X3,{children:O("admin.verificationQueue.document")}),n.jsx(X3,{children:O("admin.verificationQueue.status")}),n.jsx(X3,{children:O("admin.verificationQueue.submitted")}),n.jsx(X3,{children:O("admin.verificationQueue.actions")})]})}),n.jsx(K3,{children:A.map(e=>{var t,r,s,i;return n.jsxs(G3,{className:"hover:bg-muted/50",children:[n.jsx(Q3,{children:n.jsx(CE,{checked:f.includes(e.id),onCheckedChange:t=>{x(t?[...f,e.id]:f.filter(t=>t!==e.id))}})}),n.jsx(Q3,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:(null==(t=e.user_profiles)?void 0:t.full_name)||O("admin.verificationQueue.unknownUser")}),n.jsx("div",{className:"text-sm text-muted-foreground",children:null==(r=e.user_profiles)?void 0:r.company_name}),n.jsx("div",{className:"text-xs text-muted-foreground",children:null==(s=e.user_profiles)?void 0:s.email})]})}),n.jsx(Q3,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tm,{className:"h-4 w-4"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium",children:e.document_type}),F(e.id)]})]})}),n.jsx(Q3,{children:I(e.status)}),n.jsx(Q3,{children:n.jsx("div",{className:"text-sm",children:P(new Date(e.submitted_at))})}),n.jsx(Q3,{children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>L(e.document_url,e.id),disabled:"missing"===c[e.id],children:n.jsx(Mm,{className:"h-4 w-4"})}),"pending"===e.status&&n.jsxs(n.Fragment,{children:[n.jsx(ku,{size:"sm",onClick:()=>q(e.id,"approved"),disabled:a===e.id||"missing"===c[e.id],className:"bg-green-600 hover:bg-green-700",children:n.jsx(sm,{className:"h-4 w-4"})}),n.jsx(ku,{size:"sm",variant:"destructive",onClick:()=>q(e.id,"rejected"),disabled:a===e.id||!(null==(i=o[e.id])?void 0:i.trim()),children:n.jsx(sp,{className:"h-4 w-4"})})]})]})})]},e.id)})})]})})]})},e))]})]})};function J3(){const{t:e,isRTL:t,formatDate:r}=cr(),[s,a]=Ne.useState([]),[i,o]=Ne.useState(!0),[l,c]=Ne.useState(""),[d,u]=Ne.useState("all"),[m,h]=Ne.useState("all"),[p,f]=Ne.useState([]),[x,g]=Ne.useState(""),[v,y]=Ne.useState(""),[j,b]=Ne.useState(!1),[w,N]=Ne.useState(null),[_,S]=Ne.useState(!1),[k,C]=Ne.useState({full_name:"",email:"",role:"client",company_name:"",phone:""}),[E,O]=Ne.useState({totalUsers:0,newThisMonth:0,activeThisWeek:0,growthRate:0}),{toast:M}=fp(),P=async()=>{try{o(!0);const{data:t,error:r}=await mr.from("user_profiles").select("*").order("created_at",{ascending:!1});if(r)return void M({title:e("common.error"),description:e("admin.users.fetchUsersError"),variant:"destructive"});const n=(t||[]).map(t=>({id:t.id,user_id:t.user_id,full_name:t.full_name||e("admin.users.noName"),email:t.email,role:t.role,status:t.status,verification_status:t.verification_status||"pending",company_name:t.company_name,phone:t.phone,created_at:t.created_at,updated_at:t.updated_at}));a(n)}catch(t){M({title:e("common.error"),description:e("admin.users.fetchUsersError"),variant:"destructive"})}finally{o(!1)}};Ne.useEffect(()=>{P(),(async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getTime()-6048e5),n=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0),{data:i}=await mr.from("user_profiles").select("id").gte("created_at",t.toISOString()),{data:o}=await mr.from("user_profiles").select("id").gte("updated_at",r.toISOString()),{data:l}=await mr.from("user_profiles").select("id").gte("created_at",n.toISOString()).lte("created_at",a.toISOString()),c=(null==l?void 0:l.length)?(((null==i?void 0:i.length)||0)-l.length)/l.length*100:0;O({totalUsers:s.length,newThisMonth:(null==i?void 0:i.length)||0,activeThisWeek:(null==o?void 0:o.length)||0,growthRate:Math.round(100*c)/100})}catch(e){}})()},[]);const A=t=>{const r={pending:e("admin.users.userPending"),approved:e("admin.users.userActive"),blocked:e("admin.users.userBlocked"),rejected:e("admin.users.userInactive")};return n.jsx(Xf,{variant:{pending:"secondary",approved:"secondary",blocked:"destructive",rejected:"destructive"}[t]||"secondary",children:r[t]||t})},T=t=>{const r={admin:e("admin.users.admin"),vendor:e("admin.users.vendor"),client:e("admin.users.client")};return n.jsx(Xf,{variant:{admin:"destructive",vendor:"default",client:"secondary"}[t]||"secondary",children:r[t]||t})},D=s.length,R=s.filter(e=>"approved"===e.status).length,L=s.filter(e=>"pending"===e.status).length,q=s.filter(e=>"admin"===e.role).length,I=s.filter(e=>{var t;const r=""===l||e.full_name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())||(null==(t=e.company_name)?void 0:t.toLowerCase().includes(l.toLowerCase())),n="all"===d||e.role===d,s="all"===m||e.status===m;return r&&n&&s}),F=p.length,z=F===I.length&&I.length>0;return i?n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:n.jsx(lb,{size:"lg"})}):n.jsxs("div",{className:_u("p-6 space-y-6",t?"rtl":"ltr"),dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:e("admin.users.userManagement")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:e("admin.users.userManagementDescription")})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.users.totalUsers")}),n.jsx(Zh,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:D.toLocaleString()}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.users.allRegisteredUsers")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.users.activeUsers")}),n.jsx(Yh,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:R.toLocaleString()}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.users.approvedUsers")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.users.pendingUsers")}),n.jsx(gm,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:L.toLocaleString()}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.users.awaitingApproval")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.users.adminUsers")}),n.jsx(Sh,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:q.toLocaleString()}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.users.systemAdministrators")})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:e("admin.users.filtersAndSearch")})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 mb-4",children:[n.jsx($j,{placeholder:e("admin.users.searchUsers"),value:l,onChange:e=>c(e.target.value)}),n.jsxs(lC,{value:d,onValueChange:u,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.filterByRole")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:e("admin.allRoles")}),n.jsx(pC,{value:"admin",children:e("admin.admin")}),n.jsx(pC,{value:"vendor",children:e("admin.vendor")}),n.jsx(pC,{value:"client",children:e("admin.client")})]})]}),n.jsxs(lC,{value:m,onValueChange:h,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:e("admin.allStatus")}),n.jsx(pC,{value:"approved",children:e("admin.approved")}),n.jsx(pC,{value:"pending",children:e("admin.pending")}),n.jsx(pC,{value:"blocked",children:e("admin.blocked")}),n.jsx(pC,{value:"rejected",children:e("admin.rejected")})]})]}),n.jsxs(ku,{variant:"outline",onClick:()=>{P(),M({title:e("common.dataRefreshed"),description:e("admin.dataUpdated")})},children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),e("admin.users.refresh")]}),n.jsxs(ku,{variant:"outline",onClick:()=>{const t=[e("admin.users.csvHeaders"),...I.map(e=>`${e.id},${e.full_name},${e.email},${e.role},${e.status},${e.verification_status},${e.company_name||""},${e.phone||""},${bj(new Date(e.created_at),"yyyy-MM-dd")}`)].join("\n"),r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=`users-${bj(new Date,"yyyy-MM-dd")}.csv`,s.click(),window.URL.revokeObjectURL(n),M({title:e("common.exportCompleted"),description:e("admin.exportDescription")})},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),e("admin.users.exportUsers")]}),n.jsxs(ku,{variant:"outline",onClick:()=>S(!0),children:[n.jsx(Gh,{className:"h-4 w-4 mr-2"}),e("admin.users.addUser")]})]}),I.length>0&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx(CE,{id:"select-all",checked:z,onCheckedChange:e=>{f(e?I.map(e=>e.id):[])}}),n.jsx("label",{htmlFor:"select-all",className:"text-sm font-medium",children:e("admin.users.selectAllUsers").replace("{count}",F.toString())})]}),F>0&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 sm:gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(lC,{value:x,onValueChange:g,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.selectRole")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"client",children:e("admin.client")}),n.jsx(pC,{value:"vendor",children:e("admin.vendor")}),n.jsx(pC,{value:"admin",children:e("admin.admin")})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(ku,{variant:"outline",size:"sm",disabled:!x||j,children:[n.jsx(Kh,{className:"h-4 w-4 mr-2"}),e("admin.updateRoleAction")]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:e("admin.bulkActionConfirm")}),n.jsx(lE,{children:e("admin.bulkRoleConfirm").replace("{role}",x).replace("{count}",F.toString())})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:e("common.cancel")}),n.jsx(cE,{onClick:async()=>{if(x&&0!==p.length){b(!0);try{const{error:t}=await mr.from("user_profiles").update({role:x}).in("id",p);if(t)throw t;M({title:e("common.success"),description:e("admin.users.bulkRoleUpdateSuccess").replace("{count}",p.length.toString())}),P(),f([]),g("")}catch(t){M({title:e("common.error"),description:e("admin.users.bulkRoleUpdateError"),variant:"destructive"})}finally{b(!1)}}},children:e("common.confirm")})]})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(lC,{value:v,onValueChange:y,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.selectStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"pending",children:e("admin.pendingStatus")}),n.jsx(pC,{value:"approved",children:e("admin.approvedStatus")}),n.jsx(pC,{value:"blocked",children:e("admin.blockedStatus")}),n.jsx(pC,{value:"rejected",children:e("admin.rejectedStatus")})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(ku,{variant:"outline",size:"sm",disabled:!v||j,children:[n.jsx(Sh,{className:"h-4 w-4 mr-2"}),e("admin.updateStatusAction")]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:e("admin.bulkActionConfirm")}),n.jsx(lE,{children:e("admin.bulkStatusConfirm").replace("{status}",v).replace("{count}",F.toString())})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:e("common.cancel")}),n.jsx(cE,{onClick:async()=>{if(v&&0!==p.length){b(!0);try{const{error:t}=await mr.from("user_profiles").update({status:v}).in("id",p);if(t)throw t;M({title:e("common.success"),description:e("admin.users.bulkStatusUpdateSuccess").replace("{count}",p.length.toString())}),P(),f([]),y("")}catch(t){M({title:e("common.error"),description:e("admin.users.bulkStatusUpdateError"),variant:"destructive"})}finally{b(!1)}}},children:e("common.confirm")})]})]})]})]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const t=I.filter(e=>p.includes(e.id)),r=[e("admin.users.csvHeaders"),...t.map(e=>`${e.id},${e.full_name},${e.email},${e.role},${e.status},${e.verification_status},${e.company_name||""},${e.phone||""},${bj(new Date(e.created_at),"yyyy-MM-dd")}`)].join("\n"),n=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`selected-users-${bj(new Date,"yyyy-MM-dd")}.csv`,a.click(),window.URL.revokeObjectURL(s),M({title:e("common.exportCompleted"),description:e("admin.users.exportSelectedSuccess").replace("{count}",p.length.toString())})},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),e("admin.exportSelectedAction")]})]})]})]})]}),n.jsxs(BS,{defaultValue:"users",className:"space-y-4",children:[n.jsxs($S,{children:[n.jsxs(US,{value:"users",className:"flex items-center gap-2",children:[n.jsx(Zh,{className:"h-4 w-4"}),e("admin.usersTab")]}),n.jsxs(US,{value:"verification",className:"flex items-center gap-2",children:[n.jsx(Am,{className:"h-4 w-4"}),e("admin.verificationQueueTab")]}),n.jsxs(US,{value:"analytics",className:"flex items-center gap-2",children:[n.jsx(Ju,{className:"h-4 w-4"}),e("admin.analyticsTab")]})]}),n.jsx(VS,{value:"users",children:n.jsx("div",{className:"space-y-4",children:0===I.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"py-12 text-center",children:[n.jsx(Zh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:e("admin.noUsersFound")}),n.jsx("p",{className:"text-muted-foreground",children:e("admin.noUsersMatchFilters")})]})}):I.map(t=>n.jsxs(Eu,{className:"hover:shadow-md transition-shadow",children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(CE,{checked:p.includes(t.id),onCheckedChange:e=>((e,t)=>{f(t?[...p,e]:p.filter(t=>t!==e))})(t.id,e)}),n.jsx(Zh,{className:"h-5 w-5 text-foreground"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx(Mu,{className:"text-base sm:text-lg truncate",children:t.full_name}),n.jsxs("p",{className:"text-sm text-foreground opacity-75 truncate",children:[t.company_name?`${t.company_name} • `:"",t.email]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-auto sm:ml-0",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 sm:gap-2",children:[T(t.role),A(t.status)]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>N(t),className:"h-8 w-8 p-0 sm:h-auto sm:w-auto sm:px-3",children:[n.jsx(Ph,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only sm:not-sr-only sm:ml-2",children:e("common.edit")})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(ku,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 sm:h-auto sm:w-auto sm:px-3",children:[n.jsx(zh,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only sm:not-sr-only sm:ml-2",children:e("common.delete")})]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:e("admin.deleteUserTitle")}),n.jsx(lE,{children:e("admin.deleteUserConfirm").replace("{name}",t.full_name)})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:e("common.cancel")}),n.jsx(cE,{onClick:()=>(async(t,r)=>{try{const{error:n}=await mr.from("user_profiles").delete().eq("id",t);if(n)throw n;M({title:e("common.success"),description:e("admin.users.userDeletedSuccess").replace("{name}",r)}),P()}catch(n){M({title:e("common.error"),description:n.message,variant:"destructive"})}})(t.id,t.full_name),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:e("common.delete")})]})]})]})]})]})]})}),n.jsx(Au,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[t.phone&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"font-medium",children:t.phone})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zm,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"font-medium",children:e("admin.verificationText").replace("{status}",t.verification_status)})]})]}),n.jsx("span",{className:"text-foreground opacity-75 text-xs sm:text-sm",children:e("admin.joinedText").replace("{date}",bj(new Date(t.created_at),"MMM dd, yyyy"))})]})})]},t.id))})}),n.jsx(VS,{value:"verification",children:n.jsx(Z3,{})}),n.jsx(VS,{value:"analytics",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.newThisMonthAnalytics")}),n.jsx($h,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:E.newThisMonth}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.usersRegisteredAnalytics")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.activeThisWeekAnalytics")}),n.jsx(Fu,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:E.activeThisWeek}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.usersWithActivityAnalytics")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.growthRateAnalytics")}),n.jsx(Ju,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[E.growthRate>0?"+":"",E.growthRate,"%"]}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.vsLastMonthAnalytics")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.totalUsersAnalytics")}),n.jsx(Zh,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:E.totalUsers}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:e("admin.allTimeAnalytics")})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:e("admin.userDistributionByRole")})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.clients")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"secondary",children:s.filter(e=>"client"===e.role).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"client"===e.role).length/s.length*100),"%"]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.vendors")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"default",children:s.filter(e=>"vendor"===e.role).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"vendor"===e.role).length/s.length*100),"%"]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.admins")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"destructive",children:s.filter(e=>"admin"===e.role).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"admin"===e.role).length/s.length*100),"%"]})]})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:e("admin.userStatusOverview")})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.approvedStatus")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"secondary",children:s.filter(e=>"approved"===e.status).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"approved"===e.status).length/s.length*100),"%"]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.pendingStatus")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"secondary",children:s.filter(e=>"pending"===e.status).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"pending"===e.status).length/s.length*100),"%"]})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:e("admin.blockedStatus")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"destructive",children:s.filter(e=>"blocked"===e.status).length}),n.jsxs("span",{className:"text-sm text-foreground opacity-75",children:[Math.round(s.filter(e=>"blocked"===e.status).length/s.length*100),"%"]})]})]})]})]})]})]})})]}),n.jsx(Sb,{open:_,onOpenChange:S,children:n.jsxs(Ob,{children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:e("admin.addNewUser")}),n.jsx(Tb,{children:e("admin.addNewUserDescription")})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"full_name",children:e("admin.fullNameRequired")}),n.jsx($j,{id:"full_name",value:k.full_name,onChange:e=>C({...k,full_name:e.target.value}),placeholder:e("admin.enterFullName")})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"email",children:e("admin.emailRequired")}),n.jsx($j,{id:"email",type:"email",value:k.email,onChange:e=>C({...k,email:e.target.value}),placeholder:e("admin.enterEmailAddress")})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"role",children:e("admin.roleLabel")}),n.jsxs(lC,{value:k.role,onValueChange:e=>C({...k,role:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"client",children:e("admin.clientRole")}),n.jsx(pC,{value:"vendor",children:e("admin.vendorRole")}),n.jsx(pC,{value:"admin",children:e("admin.adminRole")})]})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"company_name",children:e("admin.companyName")}),n.jsx($j,{id:"company_name",value:k.company_name,onChange:e=>C({...k,company_name:e.target.value}),placeholder:e("admin.enterCompanyNameOptional")})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"phone",children:e("common.phone")}),n.jsx($j,{id:"phone",value:k.phone,onChange:e=>C({...k,phone:e.target.value}),placeholder:e("admin.enterPhoneOptional")})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(ku,{onClick:async()=>{if(k.email&&k.full_name)try{const{data:t}=await mr.from("user_profiles").select("id").eq("email",k.email).single();if(t)return void M({title:e("common.error"),description:e("admin.users.userExistsError"),variant:"destructive"});const{error:r}=await mr.from("user_profiles").insert([{email:k.email,full_name:k.full_name,role:k.role,company_name:k.company_name,phone:k.phone,status:"pending",verification_status:"pending",user_id:crypto.randomUUID()}]);if(r)throw r;M({title:e("common.success"),description:e("admin.users.userAddedSuccess")}),S(!1),C({full_name:"",email:"",role:"client",company_name:"",phone:""}),P()}catch(t){M({title:e("common.error"),description:t.message,variant:"destructive"})}else M({title:e("common.error"),description:e("admin.users.fillRequiredFields"),variant:"destructive"})},className:"flex-1",children:[n.jsx(Gh,{className:"h-4 w-4 mr-2"}),e("admin.addUser")]}),n.jsx(ku,{variant:"outline",onClick:()=>S(!1),children:e("common.cancel")})]})]})]})}),n.jsx(Sb,{open:!!w,onOpenChange:()=>N(null),children:n.jsxs(Ob,{children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:e("admin.editUser")}),n.jsx(Tb,{children:e("admin.editUserDescription")})]}),w&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_full_name",children:e("admin.editFullName")}),n.jsx($j,{id:"edit_full_name",value:w.full_name,onChange:e=>N({...w,full_name:e.target.value})})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_email",children:e("admin.editEmail")}),n.jsx($j,{id:"edit_email",type:"email",value:w.email,onChange:e=>N({...w,email:e.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_role",children:e("admin.editRole")}),n.jsxs(lC,{value:w.role,onValueChange:e=>N({...w,role:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"client",children:e("admin.clientRole")}),n.jsx(pC,{value:"vendor",children:e("admin.vendorRole")}),n.jsx(pC,{value:"admin",children:e("admin.adminRole")})]})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_status",children:e("admin.editStatus")}),n.jsxs(lC,{value:w.status,onValueChange:e=>N({...w,status:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"pending",children:e("admin.pendingStatus")}),n.jsx(pC,{value:"approved",children:e("admin.approvedStatus")}),n.jsx(pC,{value:"blocked",children:e("admin.blockedStatus")}),n.jsx(pC,{value:"rejected",children:e("admin.rejectedStatus")})]})]})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_company_name",children:e("admin.editCompanyName")}),n.jsx($j,{id:"edit_company_name",value:w.company_name||"",onChange:e=>N({...w,company_name:e.target.value})})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"edit_phone",children:e("admin.editPhone")}),n.jsx($j,{id:"edit_phone",value:w.phone||"",onChange:e=>N({...w,phone:e.target.value})})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(ku,{onClick:async()=>{if(w)try{const{error:t}=await mr.from("user_profiles").update({full_name:w.full_name,email:w.email,role:w.role,status:w.status,company_name:w.company_name,phone:w.phone}).eq("id",w.id);if(t)throw t;M({title:e("common.success"),description:e("admin.users.userUpdatedSuccess")}),N(null),P()}catch(t){M({title:e("common.error"),description:t.message,variant:"destructive"})}},className:"flex-1",children:[n.jsx(Ph,{className:"h-4 w-4 mr-2"}),e("admin.updateUser")]}),n.jsx(ku,{variant:"outline",onClick:()=>N(null),children:e("common.cancel")})]})]})]})})]})]})}const e5=({selectedItems:e,itemType:t,onRefresh:r,onClearSelection:s})=>{const{toast:a}=fp(),{t:i,isRTL:o}=cr(),[l,c]=Ne.useState(!1),[d,u]=Ne.useState(""),[m,h]=Ne.useState(!1),[p,f]=Ne.useState(null),{bulkApproveRequests:x,bulkRejectRequests:g}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s}=br(),{toast:a}=fp(),i=async()=>{if(s)try{const{data:e,error:r}=await mr.from("requests").select("\n          id,\n          title,\n          description,\n          category,\n          budget_min,\n          budget_max,\n          currency,\n          location,\n          deadline,\n          urgency,\n          admin_approval_status,\n          created_at,\n          client_id,\n          client_profile:user_profiles!requests_client_id_fkey(\n            full_name,\n            email,\n            company_name\n          )\n        ").eq("admin_approval_status","pending").order("created_at",{ascending:!1});if(r)throw r;const n=(e||[]).map(e=>({id:e.id,title:e.title,description:e.description,category:e.category,budget_min:e.budget_min,budget_max:e.budget_max,currency:e.currency||"SAR",location:e.location,deadline:e.deadline,urgency:e.urgency||"medium",admin_approval_status:e.admin_approval_status,created_at:e.created_at,client_id:e.client_id,client_profile:e.client_profile}));t(n)}catch(e){a({title:"Error",description:"Failed to load pending requests",variant:"destructive"})}finally{n(!1)}};return Ne.useEffect(()=>{i()},[s]),{requests:e,loading:r,fetchPendingRequests:i,approveRequest:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("requests").update({admin_approval_status:"approved"}).eq("id",t);if(n)throw n;const s=e.find(e=>e.id===t);s&&await mr.from("notifications").insert({user_id:s.client_id,type:"request_approved",title:"Request Approved",message:"Your procurement request has been approved by admin.",category:"requests",priority:"high",data:{request_id:t,notes:r}}),await i(),a({title:"Success",description:"Request approved successfully"})}catch(n){throw n}},rejectRequest:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("requests").update({admin_approval_status:"rejected"}).eq("id",t);if(n)throw n;const s=e.find(e=>e.id===t);s&&await mr.from("notifications").insert({user_id:s.client_id,type:"request_rejected",title:"Request Rejected",message:"Your procurement request has been rejected by admin.",category:"requests",priority:"high",data:{request_id:t,rejection_notes:r}}),await i(),a({title:"Success",description:"Request rejected successfully"})}catch(n){throw n}},bulkApproveRequests:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("requests").update({admin_approval_status:"approved"}).in("id",t);if(n)throw n;const s=t.map(t=>{const n=e.find(e=>e.id===t);return{user_id:null==n?void 0:n.client_id,type:"request_approved",title:"Request Approved",message:"Your procurement request has been approved by admin.",category:"requests",priority:"high",data:{request_id:t,notes:r}}}).filter(e=>e.user_id);s.length>0&&await mr.from("notifications").insert(s),await i(),a({title:"Success",description:`${t.length} requests approved successfully`})}catch(n){throw n}},bulkRejectRequests:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("requests").update({admin_approval_status:"rejected"}).in("id",t);if(n)throw n;const s=t.map(t=>{const n=e.find(e=>e.id===t);return{user_id:null==n?void 0:n.client_id,type:"request_rejected",title:"Request Rejected",message:"Your procurement request has been rejected by admin.",category:"requests",priority:"high",data:{request_id:t,rejection_notes:r}}}).filter(e=>e.user_id);s.length>0&&await mr.from("notifications").insert(s),await i(),a({title:"Success",description:`${t.length} requests rejected successfully`})}catch(n){throw n}}}})(),{approveOffer:v,rejectOffer:y}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s}=br(),{toast:a}=fp(),i=async()=>{if(s)try{const{data:e,error:r}=await mr.from("offers").select("\n          id,\n          title,\n          description,\n          price,\n          currency,\n          delivery_time_days,\n          client_approval_status,\n          created_at,\n          vendor_id,\n          request_id,\n          request:requests(\n            title,\n            client_id\n          )\n        ").eq("client_approval_status","pending").order("created_at",{ascending:!1});if(r)throw r;const n=(e||[]).map(e=>({id:e.id,title:e.title,description:e.description,price:e.price,currency:e.currency||"SAR",delivery_time_days:e.delivery_time_days||0,client_approval_status:e.client_approval_status,created_at:e.created_at,vendor_id:e.vendor_id,request_id:e.request_id,request:e.request}));t(n)}catch(e){a({title:"Error",description:"Failed to load pending offers",variant:"destructive"})}finally{n(!1)}};return Ne.useEffect(()=>{i()},[s]),{offers:e,loading:r,fetchPendingOffers:i,approveOffer:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("offers").update({client_approval_status:"approved"}).eq("id",t);if(n)throw n;const s=e.find(e=>e.id===t);s&&await mr.from("notifications").insert({user_id:s.vendor_id,type:"offer_approved",title:"Offer Approved",message:"Your offer has been approved by the client.",category:"offers",priority:"high",data:{offer_id:t,notes:r}}),await i(),a({title:"Success",description:"Offer approved successfully"})}catch(n){throw n}},rejectOffer:async(t,r)=>{if(!s)throw new Error("User not authenticated");try{const{error:n}=await mr.from("offers").update({client_approval_status:"rejected"}).eq("id",t);if(n)throw n;const s=e.find(e=>e.id===t);s&&await mr.from("notifications").insert({user_id:s.vendor_id,type:"offer_rejected",title:"Offer Rejected",message:"Your offer has been rejected by the client.",category:"offers",priority:"high",data:{offer_id:t,rejection_notes:r}}),await i(),a({title:"Success",description:"Offer rejected successfully"})}catch(n){throw n}}}})(),j=e=>{f(e),h(!0)};return 0===e.length?null:n.jsx("div",{className:_u(o?"rtl":"ltr"),dir:o?"rtl":"ltr",children:n.jsxs(Eu,{className:"border-primary/20 bg-primary/5",children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs(Mu,{className:_u("text-lg flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx(CE,{checked:!0}),i("admin.actions.itemsSelected")]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:_u("flex flex-wrap gap-2",o&&"flex-row-reverse"),children:[n.jsxs(ku,{onClick:()=>j("approve"),className:_u("flex items-center gap-2",o&&"flex-row-reverse"),disabled:l,children:[n.jsx(dm,{className:"h-4 w-4"}),i("admin.actions.bulkApprove")]}),n.jsxs(ku,{onClick:()=>j("reject"),variant:"destructive",className:_u("flex items-center gap-2",o&&"flex-row-reverse"),disabled:l,children:[n.jsx(fm,{className:"h-4 w-4"}),i("admin.actions.bulkReject")]}),n.jsxs(ku,{onClick:async()=>{try{const r=[i("common.id"),i("common.type"),i("common.status"),i("common.createdAt")],n=e.map(e=>[e,t.slice(0,-1),i("common.pending"),(new Date).toISOString()]),s=[r.join(","),...n.map(e=>e.join(","))].join("\n"),o=new Blob([s],{type:"text/csv"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`${t}_export_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),a({title:i("common.success"),description:i("admin.actions.exportSuccess")})}catch(r){a({title:i("common.error"),description:i("admin.actions.exportFailed"),variant:"destructive"})}},variant:"outline",className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx(Sm,{className:"h-4 w-4"}),i("admin.actions.exportSelected")]}),n.jsx(ku,{onClick:s,variant:"outline",children:i("admin.actions.clearSelection")})]}),n.jsx(Sb,{open:m,onOpenChange:h,children:n.jsxs(Ob,{children:[n.jsx(Mb,{children:n.jsx(Ab,{children:i("admin.actions.bulkApproveTitle")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:_u("flex items-center gap-2 mb-2",o&&"flex-row-reverse"),children:[n.jsx(Uh,{className:"h-4 w-4 text-warning"}),n.jsx("span",{className:"font-medium",children:i("admin.actions.confirmationRequired")})]}),n.jsx("p",{className:_u("text-sm text-muted-foreground",o?"text-right":"text-left"),children:i("admin.actions.bulkActionWarning")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:_u("text-sm font-medium",o?"text-right":"text-left"),children:i("admin.actions.notesOptional")}),n.jsx(bC,{value:d,onChange:e=>u(e.target.value),placeholder:i("admin.actions.addNotesPlaceholder"),className:"min-h-20"})]}),n.jsxs("div",{className:_u("flex gap-2 justify-end",o&&"flex-row-reverse justify-start"),children:[n.jsx(ku,{variant:"outline",onClick:()=>h(!1),disabled:l,children:i("common.cancel")}),n.jsx(ku,{onClick:()=>(async n=>{if(0!==e.length){c(!0);try{if("requests"===t)"approve"===n?await x(e,d):await g(e,d);else if("offers"===t)for(const t of e)"approve"===n?await v(t,d):await y(t,d);a({title:i("admin.actions.bulkApproved"),description:i("admin.actions.bulkActionCompleted"),variant:"approve"===n?"default":"destructive"}),s(),r(),h(!1),u("")}catch(o){a({title:i("common.error"),description:i("admin.actions.bulkActionFailed"),variant:"destructive"})}finally{c(!1)}}})(p),variant:"approve"===p?"default":"destructive",disabled:l,className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:l?i("common.processing"):n.jsxs(n.Fragment,{children:["approve"===p?n.jsx(dm,{className:"h-4 w-4"}):n.jsx(fm,{className:"h-4 w-4"}),i("admin.actions.confirm"+("approve"===p?"Approve":"Reject"))]})})]})]})]})})]})]})})},t5=()=>{br();const{toast:e}=fp(),{t:t,isRTL:r,formatDate:s}=cr(),[a,i]=Ne.useState([]),[o,l]=Ne.useState(!0),[c,d]=Ne.useState(""),[u,m]=Ne.useState("all"),[h,p]=Ne.useState("all"),[f,x]=Ne.useState("all"),[g,v]=Ne.useState([]),y=async()=>{try{l(!0);const{data:e,error:t}=await mr.from("requests").select("\n          *,\n          user_profiles:client_id(full_name, email, company_name),\n          offers(id, status)\n        ").order("created_at",{ascending:!1});if(t)throw t;const r=(e||[]).map(e=>{var t;return{...e,_count:{offers:(null==(t=e.offers)?void 0:t.length)||0}}});i(r)}catch(r){e({title:t("common.error"),description:t("admin.requestsManagement.fetchError"),variant:"destructive"})}finally{l(!1)}},j=async(r,n)=>{try{const{error:s}=await mr.from("requests").update({admin_approval_status:n,updated_at:(new Date).toISOString()}).eq("id",r);if(s)throw s;e({title:t("common.success"),description:t("approved"===n?"admin.requestsManagement.approveSuccess":"admin.requestsManagement.rejectSuccess")}),y()}catch(s){e({title:t("common.error"),description:t("admin.requestsManagement.updateError"),variant:"destructive"})}},b=a.filter(e=>{var t,r;const n=e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase())||(null==(r=null==(t=e.user_profiles)?void 0:t.company_name)?void 0:r.toLowerCase().includes(c.toLowerCase())),s="all"===u||e.status===u,a="all"===h||e.admin_approval_status===h,i="all"===f||e.urgency===f;return n&&s&&a&&i}),w=e=>{switch(e){case"new":return"info";case"in_progress":return"warning";case"completed":return"success";case"cancelled":return"destructive";default:return"secondary"}},N=e=>{switch(e){case"approved":return"success";case"rejected":return"destructive";case"pending":return"warning";default:return"secondary"}},_=e=>{switch(e){case"urgent":return"destructive";case"high":return"warning";case"medium":default:return"secondary";case"low":return"success"}};Ne.useEffect(()=>{y()},[]);const S=a.filter(e=>"pending"===e.admin_approval_status),k=a.filter(e=>"approved"===e.admin_approval_status),C=a.filter(e=>"rejected"===e.admin_approval_status);return n.jsxs("div",{className:_u("p-6 space-y-6",r?"rtl":"ltr"),dir:r?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:t("admin.requestsManagement.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:t("admin.requestsManagement.description")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("admin.requestsManagement.totalRequests")}),n.jsx(gm,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold",children:a.length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("admin.requestsManagement.pendingApproval")}),n.jsx(cm,{className:"h-4 w-4 text-warning"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-warning",children:S.length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("admin.requestsManagement.approved")}),n.jsx(dm,{className:"h-4 w-4 text-success"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-success",children:k.length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("admin.requestsManagement.rejected")}),n.jsx(fm,{className:"h-4 w-4 text-destructive"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-destructive",children:C.length})})]})]}),n.jsxs(Eu,{className:"mb-6",children:[n.jsx(Ou,{children:n.jsx(Mu,{className:"text-lg",children:t("admin.requestsManagement.filtersAndSearch")})}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-foreground opacity-75"}),n.jsx($j,{placeholder:t("admin.requestsManagement.searchPlaceholder"),value:c,onChange:e=>d(e.target.value),className:"pl-10"})]}),n.jsxs(lC,{value:u,onValueChange:m,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:t("admin.requestsManagement.statusPlaceholder")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:t("admin.requestsManagement.allStatuses")}),n.jsx(pC,{value:"new",children:t("admin.requestsManagement.new")}),n.jsx(pC,{value:"in_progress",children:t("admin.requestsManagement.inProgress")}),n.jsx(pC,{value:"completed",children:t("admin.requestsManagement.completed")}),n.jsx(pC,{value:"cancelled",children:t("admin.requestsManagement.cancelled")})]})]}),n.jsxs(lC,{value:h,onValueChange:p,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:t("admin.requestsManagement.approvalStatusPlaceholder")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:t("admin.requestsManagement.allApprovals")}),n.jsx(pC,{value:"pending",children:t("admin.requestsManagement.pending")}),n.jsx(pC,{value:"approved",children:t("admin.requestsManagement.approved")}),n.jsx(pC,{value:"rejected",children:t("admin.requestsManagement.rejected")})]})]}),n.jsxs(lC,{value:f,onValueChange:x,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:t("admin.requestsManagement.urgencyPlaceholder")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:t("admin.requestsManagement.allUrgencies")}),n.jsx(pC,{value:"urgent",children:t("admin.requestsManagement.urgent")}),n.jsx(pC,{value:"high",children:t("admin.requestsManagement.high")}),n.jsx(pC,{value:"medium",children:t("admin.requestsManagement.medium")}),n.jsx(pC,{value:"low",children:t("admin.requestsManagement.low")})]})]}),n.jsxs(ku,{onClick:y,variant:"outline",className:"flex items-center gap-2",children:[n.jsx(qm,{className:"h-4 w-4"}),t("admin.requestsManagement.refresh")]})]})})]}),g.length>0&&n.jsx(e5,{selectedItems:g,itemType:"requests",onRefresh:y,onClearSelection:()=>{v([])}}),n.jsxs(BS,{value:"all",className:"w-full",children:[n.jsxs($S,{className:"grid w-full grid-cols-4",children:[n.jsxs(US,{value:"all",children:[t("admin.requestsManagement.allRequests")," (",b.length,")"]}),n.jsxs(US,{value:"pending",children:[t("admin.requestsManagement.pending")," (",S.length,")"]}),n.jsxs(US,{value:"approved",children:[t("admin.requestsManagement.approved")," (",k.length,")"]}),n.jsxs(US,{value:"rejected",children:[t("admin.requestsManagement.rejected")," (",C.length,")"]})]}),n.jsx(VS,{value:"all",className:"space-y-4",children:o?n.jsx("div",{className:"text-center py-8",children:t("admin.requestsManagement.loading")}):0===b.length?n.jsx(Eu,{children:n.jsx(Au,{className:"text-center py-8",children:n.jsx("p",{className:"text-foreground opacity-75",children:t("admin.requestsManagement.noRequestsFound")})})}):b.map(e=>{var r,s,a;return n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[n.jsx(CE,{checked:g.includes(e.id),onCheckedChange:()=>{return t=e.id,void v(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsx(Mu,{className:"text-lg",children:e.title}),n.jsx(Pu,{className:"line-clamp-2",children:e.description}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground opacity-75",children:[n.jsx(Xh,{className:"h-4 w-4"}),(null==(r=e.user_profiles)?void 0:r.company_name)||(null==(s=e.user_profiles)?void 0:s.full_name)||t("admin.requestsManagement.unknownClient"),n.jsx("span",{children:"•"}),n.jsx("span",{children:e.category}),e.location&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsx("span",{children:e.location})]})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 text-right",children:[n.jsx(Xf,{variant:N(e.admin_approval_status),children:e.admin_approval_status.replace("_"," ").toUpperCase()}),n.jsx(Xf,{variant:w(e.status),children:e.status.replace("_"," ").toUpperCase()}),n.jsx(Xf,{variant:_(e.urgency),children:e.urgency.toUpperCase()})]})]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:t("admin.requestsManagement.budgetRange")}),n.jsx("p",{className:"text-sm",children:e.budget_min&&e.budget_max?`${e.budget_min.toLocaleString()} - ${e.budget_max.toLocaleString()} ${e.currency||"SAR"}`:t("admin.requestsManagement.notSpecified")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:t("admin.requestsManagement.deadline")}),n.jsx("p",{className:"text-sm",children:e.deadline?bj(new Date(e.deadline),"MMM dd, yyyy"):t("admin.requestsManagement.notSpecified")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:t("admin.requestsManagement.offersReceived")}),n.jsxs("p",{className:"text-sm font-bold text-primary",children:[(null==(a=e._count)?void 0:a.offers)||0," ",t("admin.requestsManagement.offers")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:t("admin.requestsManagement.created")}),n.jsx("p",{className:"text-sm",children:bj(new Date(e.created_at),"MMM dd, yyyy HH:mm")})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[n.jsx(Mm,{className:"h-4 w-4"}),t("admin.requestsManagement.viewDetails")]}),n.jsxs(ku,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[n.jsx(nh,{className:"h-4 w-4"}),t("admin.requestsManagement.contactClient")]}),"pending"===e.admin_approval_status&&n.jsxs(n.Fragment,{children:[n.jsxs(ku,{size:"sm",className:"flex items-center gap-1",onClick:()=>j(e.id,"approved"),children:[n.jsx(dm,{className:"h-4 w-4"}),t("admin.requestsManagement.approve")]}),n.jsxs(ku,{variant:"destructive",size:"sm",className:"flex items-center gap-1",onClick:()=>j(e.id,"rejected"),children:[n.jsx(fm,{className:"h-4 w-4"}),t("admin.requestsManagement.reject")]})]})]})]})]},e.id)})}),n.jsx(VS,{value:"pending"}),n.jsx(VS,{value:"approved"}),n.jsx(VS,{value:"rejected"})]})]})},r5=0,n5=640,s5=768,a5=1024,i5=1280,o5=1536,l5=()=>{const[e,t]=Ne.useState(()=>"undefined"!=typeof window?window.innerWidth:1024);Ne.useEffect(()=>{const e=()=>{t(window.innerWidth)};let r;const n=()=>{clearTimeout(r),r=window.setTimeout(e,150)};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),clearTimeout(r)}},[]);return{xs:e>=r5,sm:e>=n5,md:e>=s5,lg:e>=a5,xl:e>=i5,"2xl":e>=o5,current:e>=o5?"2xl":e>=i5?"xl":e>=a5?"lg":e>=s5?"md":e>=n5?"sm":"xs"}},c5=({children:e,className:t,title:r,description:s,headerActions:a,maxWidth:i="full",spacing:o="md"})=>{const{isRTL:l}=cr(),c=l5();return n.jsx("div",{className:_u("min-h-full relative",l?"rtl":"ltr"),dir:l?"rtl":"ltr",children:n.jsxs("div",{className:_u("mx-auto",{sm:"px-4 py-4 sm:px-6 sm:py-6",md:"px-4 sm:px-6 lg:px-8 py-6 sm:py-8",lg:"px-6 sm:px-8 lg:px-12 py-8 sm:py-12"}[o],{sm:"max-w-3xl",md:"max-w-4xl",lg:"max-w-6xl",xl:"max-w-7xl","2xl":"max-w-full",full:"max-w-none"}[i],t),children:[(r||s||a)&&n.jsxs("div",{className:_u("mb-6 sm:mb-8",a&&"flex flex-col gap-4",a&&c.sm&&"sm:flex-row sm:justify-between sm:items-start"),children:[n.jsxs("div",{className:_u(l?"text-right":"text-left"),children:[r&&n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:r}),s&&n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:s})]}),a&&n.jsx("div",{className:_u("flex items-center gap-2 flex-shrink-0",l&&"flex-row-reverse"),children:a})]}),n.jsx("div",{className:{sm:"space-y-4",md:"space-y-6",lg:"space-y-8"}[o],children:e})]})})},d5=()=>{const{user:e}=br(),{toast:t}=fp(),{t:r,isRTL:s}=cr(),[a,i]=Ne.useState([]),[o,l]=Ne.useState(!0),[c,d]=Ne.useState(""),[u,m]=Ne.useState("all"),[h,p]=Ne.useState("all"),[f,x]=Ne.useState("all"),g=async()=>{try{l(!0);const{data:e,error:t}=await mr.from("offers").select("\n          *,\n          request:requests(title, client_id, category, budget_min, budget_max),\n          vendor:user_profiles!offers_vendor_id_fkey(full_name, company_name, email)\n        ").order("created_at",{ascending:!1});if(t)throw t;const r=await Promise.all((e||[]).map(async e=>{var t;if(null==(t=e.request)?void 0:t.client_id){const{data:t}=await mr.from("user_profiles").select("full_name, company_name, email").eq("user_id",e.request.client_id).single();return{...e,client:t}}return e}));i(r)}catch(e){t({title:r("common.error"),description:r("admin.offersManagement.loadingOffers"),variant:"destructive"})}finally{l(!1)}},v=a.filter(e=>{var t,r,n,s;const a=e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||(null==(r=null==(t=e.vendor)?void 0:t.company_name)?void 0:r.toLowerCase().includes(c.toLowerCase()))||(null==(s=null==(n=e.request)?void 0:n.title)?void 0:s.toLowerCase().includes(c.toLowerCase())),i="all"===u||e.client_approval_status===u,o="all"===h||e.admin_approval_status===h;let l=!0;if("all"!==f){const t=e.price;switch(f){case"low":l=t<1e4;break;case"medium":l=t>=1e4&&t<5e4;break;case"high":l=t>=5e4}}return a&&i&&o&&l}),y=e=>{switch(e){case"approved":return"success";case"rejected":return"destructive";case"pending":return"warning";default:return"secondary"}},j=e=>{const t=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5);return"pending"===e.admin_approval_status&&t>2?"high":"pending"===e.client_approval_status&&t>5?"medium":"normal"};Ne.useEffect(()=>{g()},[]);const b=a.filter(e=>"pending"===e.admin_approval_status),w=a.filter(e=>"approved"===e.admin_approval_status),N=a.filter(e=>"approved"===e.client_approval_status),_=a.filter(e=>"high"===j(e));return n.jsx("div",{dir:s?"rtl":"ltr",children:n.jsxs(c5,{title:r("admin.offersManagement.title"),description:r("admin.offersManagement.description"),children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",s&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:r("admin.offersManagement.totalOffers")}),n.jsx(dh,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a.length}),n.jsxs("p",{className:"text-xs text-foreground opacity-75",children:[b.length," ",r("admin.offersManagement.pendingApproval")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:r("admin.offersManagement.conversionRate")}),n.jsx($h,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[(()=>{const e=a.filter(e=>"approved"===e.client_approval_status).length;return a.length>0?(e/a.length*100).toFixed(1):"0"})(),"%"]}),n.jsxs("p",{className:"text-xs text-foreground opacity-75",children:[N.length," ",r("admin.offersManagement.offersAcceptedByClients")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:r("admin.offersManagement.averagePrice")}),n.jsx(_m,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[(()=>{if(0===a.length)return 0;return(a.reduce((e,t)=>e+t.price,0)/a.length).toLocaleString()})()," SAR"]}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:r("admin.offersManagement.acrossAllOffers")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:r("admin.offersManagement.avgResponseTime")}),n.jsx(gm,{className:"h-4 w-4 text-foreground opacity-75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:r("admin.offersManagement.averageResponseTime")}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:r("admin.offersManagement.vendorResponseTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:r("admin.offersManagement.highPriority")}),n.jsx(Uh,{className:"h-4 w-4 text-warning"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-warning",children:_.length}),n.jsx("p",{className:"text-xs text-foreground opacity-75",children:r("admin.offersManagement.requiresAttention")})]})]})]}),n.jsxs(Eu,{className:"mb-6",children:[n.jsx(Ou,{children:n.jsx(Mu,{className:"text-lg",children:r("admin.offersManagement.filtersAndSearch")})}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-foreground opacity-75"}),n.jsx($j,{placeholder:r("admin.offersManagement.searchPlaceholder"),value:c,onChange:e=>d(e.target.value),className:"pl-10"})]}),n.jsxs(lC,{value:u,onValueChange:m,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:r("admin.offersManagement.clientStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:r("admin.offersManagement.allClientStatuses")}),n.jsx(pC,{value:"pending",children:r("admin.offersManagement.pending")}),n.jsx(pC,{value:"approved",children:r("admin.offersManagement.approved")}),n.jsx(pC,{value:"rejected",children:r("admin.offersManagement.rejected")})]})]}),n.jsxs(lC,{value:h,onValueChange:p,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:r("admin.offersManagement.adminApproval")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:r("admin.offersManagement.allAdminApprovals")}),n.jsx(pC,{value:"pending",children:r("admin.offersManagement.pending")}),n.jsx(pC,{value:"approved",children:r("admin.offersManagement.approved")}),n.jsx(pC,{value:"rejected",children:r("admin.offersManagement.rejected")})]})]}),n.jsxs(lC,{value:f,onValueChange:x,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:r("admin.offersManagement.priceRange")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:r("admin.offersManagement.allPrices")}),n.jsx(pC,{value:"low",children:r("admin.offersManagement.lessThan10k")}),n.jsx(pC,{value:"medium",children:r("admin.offersManagement.between10k50k")}),n.jsx(pC,{value:"high",children:r("admin.offersManagement.greaterThan50k")})]})]}),n.jsx(ku,{onClick:g,variant:"outline",children:r("admin.offersManagement.refresh")}),n.jsxs(ku,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(Tm,{className:"h-4 w-4"}),r("admin.offersManagement.exportReport")]})]})})]}),n.jsxs(BS,{defaultValue:"all",className:"space-y-4",children:[n.jsxs($S,{children:[n.jsxs(US,{value:"all",children:[r("admin.offersManagement.allOffers")," (",a.length,")"]}),n.jsxs(US,{value:"pending",children:[r("admin.offersManagement.pendingReview")," (",b.length,")"]}),n.jsxs(US,{value:"urgent",children:[r("admin.offersManagement.highPriority")," (",_.length,")"]}),n.jsxs(US,{value:"approved",children:[r("admin.offersManagement.approved")," (",w.length,")"]})]}),n.jsx(VS,{value:"all",className:"space-y-4",children:o?n.jsx("div",{className:"text-center py-8",children:r("admin.offersManagement.loading")}):0===v.length?n.jsx(Eu,{children:n.jsx(Au,{className:"text-center py-8",children:n.jsx("p",{className:"text-foreground opacity-75",children:r("admin.offersManagement.noOffersFound")})})}):v.map(s=>{var i,o,l,c,d,u,m;return n.jsxs(Eu,{className:"high"===j(s)?"border-orange-200 bg-orange-50/50":"",children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mu,{className:"text-lg",children:s.title}),"high"===j(s)&&n.jsxs(Xf,{variant:"outline",className:"bg-orange-100 text-orange-700 border-orange-300",children:[n.jsx(Uh,{className:"h-3 w-3 mr-1"}),r("admin.offersManagement.urgent")]})]}),n.jsx(Pu,{className:"line-clamp-2",children:s.description}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-foreground opacity-75",children:[n.jsxs("span",{children:[r("admin.offersManagement.forRequest"),": ",null==(i=s.request)?void 0:i.title]}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[r("admin.offersManagement.vendor"),": ",(null==(o=s.vendor)?void 0:o.company_name)||(null==(l=s.vendor)?void 0:l.full_name)]}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[r("admin.offersManagement.client"),": ",(null==(c=s.client)?void 0:c.company_name)||(null==(d=s.client)?void 0:d.full_name)]})]})]}),n.jsx("div",{className:"flex flex-col gap-2 text-right",children:n.jsxs(Xf,{variant:y(s.client_approval_status),children:[r("admin.offersManagement.status"),": ",s.client_approval_status.toUpperCase()]})})]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:r("admin.offersManagement.price")}),n.jsxs("p",{className:"text-lg font-bold text-primary",children:[s.price.toLocaleString()," ",s.currency]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:r("admin.offersManagement.budgetRange")}),n.jsx("p",{className:"text-sm",children:(null==(u=s.request)?void 0:u.budget_min)&&(null==(m=s.request)?void 0:m.budget_max)?`${s.request.budget_min.toLocaleString()} - ${s.request.budget_max.toLocaleString()}`:r("admin.offersManagement.notSpecified")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:r("admin.offersManagement.deliveryTime")}),n.jsxs("p",{className:"text-sm",children:[s.delivery_time_days," ",r("admin.offersManagement.days")]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground opacity-75",children:r("admin.offersManagement.created")}),n.jsx("p",{className:"text-sm",children:bj(new Date(s.created_at),"MMM dd, yyyy HH:mm")})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[n.jsx(Mm,{className:"h-4 w-4"}),r("admin.offersManagement.viewDetails")]}),n.jsxs(ku,{variant:"outline",size:"sm",className:"flex items-center gap-1",onClick:()=>{var n;return(async(n,s,a)=>{try{const{data:i,error:o}=await mr.from("conversations").insert([{client_id:s,vendor_id:n,offer_id:a,status:"active",conversation_type:"business"}]).select().single();if(o)throw o;await mr.from("messages").insert([{conversation_id:i.id,sender_id:null==e?void 0:e.id,recipient_id:n,content:"Admin has initiated this conversation regarding the offer. Please discuss any concerns or questions here.",message_type:"text"}]),t({title:r("common.success"),description:r("admin.offersManagement.conversationSuccess")})}catch(i){t({title:r("common.error"),description:r("admin.offersManagement.conversationError"),variant:"destructive"})}})(s.vendor_id,(null==(n=s.request)?void 0:n.client_id)||"",s.id)},children:[n.jsx(nh,{className:"h-4 w-4"}),r("admin.offersManagement.initiateDiscussion")]}),n.jsxs(ku,{variant:"outline",size:"sm",className:"flex items-center gap-1",onClick:()=>(async(n,s)=>{try{if(!a.find(e=>e.id===n))return;const{error:i}=await mr.from("support_tickets").insert([{user_id:null==e?void 0:e.id,subject:`Offer Issue - ${s.charAt(0).toUpperCase()+s.slice(1)}`,category:"offer_issue",priority:"high",status:"open"}]);if(i)throw i;t({title:r("common.success"),description:r("admin.offersManagement.escalateSuccess")})}catch(i){t({title:r("common.error"),description:r("admin.offersManagement.escalateError"),variant:"destructive"})}})(s.id,"pricing"),children:[n.jsx(Uh,{className:"h-4 w-4"}),r("admin.offersManagement.escalateToSupport")]})]})]})]},s.id)})}),n.jsx(VS,{value:"pending",className:"space-y-4",children:b.map(e=>n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"text-sm text-foreground opacity-75 mb-2",children:[e.title," - Pending admin approval since ",bj(new Date(e.created_at),"MMM dd, yyyy")]})})},e.id))}),n.jsx(VS,{value:"urgent",className:"space-y-4",children:_.map(e=>n.jsx(Eu,{className:"border-orange-200 bg-orange-50/50",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Uh,{className:"h-4 w-4 text-warning"}),n.jsx("span",{className:"font-medium",children:e.title}),n.jsx(Xf,{variant:"outline",className:"bg-orange-100 text-orange-700",children:"Requires Attention"})]})})},e.id))}),n.jsx(VS,{value:"approved",className:"space-y-4",children:w.map(e=>n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"text-sm text-foreground opacity-75 mb-2",children:[e.title," - Approved and active"]})})},e.id))})]})]})})},u5=()=>{const{toast:e}=fp(),{t:t,isRTL:r,formatNumber:s,formatCurrency:a}=cr(),[i,o]=Ne.useState(null),[l,c]=Ne.useState([]),[d,u]=Ne.useState(!0),[m,h]=Ne.useState("30");Ne.useEffect(()=>{p(),f()},[m]);const p=async()=>{try{const e=25,t=15,r=12,n=[{amount:5e3,status:"completed",created_at:(new Date).toISOString(),type:"payment"},{amount:3500,status:"completed",created_at:new Date(Date.now()-864e5).toISOString(),type:"payment"},{amount:7200,status:"completed",created_at:new Date(Date.now()-1728e5).toISOString(),type:"payment"}],s=n.length,a=n.filter(e=>"completed"===e.status&&"payment"===e.type&&new Date(e.created_at).getMonth()===(new Date).getMonth()).reduce((e,t)=>e+(t.amount||0),0);o({totalUsers:e,totalRequests:t,totalOffers:r||0,totalTransactions:s,activeSubscriptions:0,monthlyRevenue:a})}catch(r){e({title:t("common.error"),description:r.message,variant:"destructive"})}finally{u(!1)}},f=async()=>{try{const e=[{id:"1",action:"create",entity_type:"request",created_at:(new Date).toISOString(),reason:"New request created"},{id:"2",action:"update",entity_type:"offer",created_at:new Date(Date.now()-864e5).toISOString(),reason:"Offer status updated"}].map(e=>({id:e.id,action:`${e.action} ${e.entity_type}`,user_email:"System User",timestamp:e.created_at,details:e.reason||`${e.action} action performed on ${e.entity_type}`}));c(e)}catch(e){c([])}};return d?n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n.jsxs("div",{className:_u("space-y-6",r?"rtl":"ltr"),dir:r?"rtl":"ltr",children:[n.jsxs("div",{className:_u("flex justify-between items-center",r&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(r?"text-right":"text-left"),children:[n.jsx("h3",{className:"text-lg font-semibold",children:t("analytics.platformAnalytics")}),n.jsx("p",{className:"text-sm text-foreground/75",children:t("analytics.comprehensiveInsights")})]}),n.jsxs(lC,{value:m,onValueChange:h,children:[n.jsx(dC,{className:"w-32",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"7",children:t("analytics.last7Days")}),n.jsx(pC,{value:"30",children:t("analytics.last30Days")}),n.jsx(pC,{value:"90",children:t("analytics.last90Days")})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.totalUsers")}),n.jsx(Zh,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==i?void 0:i.totalUsers)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.registeredUsers")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.totalRequests")}),n.jsx(Tm,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==i?void 0:i.totalRequests)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.serviceRequests")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.totalOffers")}),n.jsx(zm,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==i?void 0:i.totalOffers)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.offersSubmitted")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.monthlyRevenue")}),n.jsx(_m,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a((null==i?void 0:i.monthlyRevenue)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.thisMonth")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.totalTransactions")}),n.jsx(bm,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==i?void 0:i.totalTransactions)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.transactionsProcessed")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.activeSubscriptions")}),n.jsx(Fu,{className:"h-4 w-4 text-foreground/75"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==i?void 0:i.activeSubscriptions)||0)}),n.jsx("p",{className:"text-xs text-foreground/75",children:t("analytics.currentlyActive")})]})]})]}),n.jsxs(BS,{defaultValue:"activity",className:"space-y-4",children:[n.jsxs($S,{children:[n.jsxs(US,{value:"activity",className:_u("flex items-center gap-2",r&&"flex-row-reverse"),children:[n.jsx(Fu,{className:"h-4 w-4"}),t("analytics.recentActivity")]}),n.jsxs(US,{value:"performance",className:_u("flex items-center gap-2",r&&"flex-row-reverse"),children:[n.jsx($h,{className:"h-4 w-4"}),t("analytics.performanceMetrics")]}),n.jsxs(US,{value:"trends",className:_u("flex items-center gap-2",r&&"flex-row-reverse"),children:[n.jsx(em,{className:"h-4 w-4"}),t("analytics.usageTrends")]})]}),n.jsx(VS,{value:"activity",className:"space-y-4",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("analytics.recentActivity")}),n.jsx(Pu,{children:t("analytics.systemActivity")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[l.map(e=>n.jsxs("div",{className:_u("flex items-center justify-between p-3 border rounded-lg",r&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(r?"text-right":"text-left"),children:[n.jsx("div",{className:"font-medium",children:e.action}),n.jsxs("div",{className:"text-sm text-foreground/75",children:[e.user_email," • ",new Date(e.timestamp).toLocaleString()]}),e.details&&n.jsx("div",{className:"text-xs text-foreground/75 mt-1",children:e.details})]}),n.jsx(Xf,{variant:"outline",children:t("analytics.system")})]},e.id)),0===l.length&&n.jsx("div",{className:_u("text-center text-foreground/75 py-8",r?"text-right":"text-left"),children:t("analytics.noActivityLogs")})]})})]})}),n.jsx(VS,{value:"performance",className:"space-y-4",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("analytics.performanceMetrics")}),n.jsx(Pu,{children:t("analytics.performanceDescription")})]}),n.jsx(Au,{children:n.jsx("div",{className:_u("text-center text-foreground/75 py-8",r?"text-right":"text-left"),children:t("analytics.performanceContent")})})]})}),n.jsx(VS,{value:"trends",className:"space-y-4",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:t("analytics.usageTrends")}),n.jsx(Pu,{children:t("analytics.trendsDescription")})]}),n.jsx(Au,{children:n.jsx("div",{className:_u("text-center text-foreground/75 py-8",r?"text-right":"text-left"),children:t("analytics.trendsContent")})})]})})]})]})};function m5(){const{t:e}=cr();return n.jsx(c5,{title:e("analytics.platformAnalytics"),description:e("analytics.monitorDescription"),children:n.jsx(u5,{})})}const h5=()=>{var e;const[t,r]=Ne.useState([]),[s,a]=Ne.useState(null),[i,o]=Ne.useState(!0),[l,c]=Ne.useState(!1),{systemMetrics:d,performanceData:u,alerts:m,isLoading:h,refreshHealth:p}=U3(),{deviceCapabilities:f,networkSpeed:x,performanceConfig:g}=ab(),{t:v,isRTL:y}=cr(),j=async()=>{var e,t,n;const s=performance.getEntriesByType("navigation"),a=performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name),i=performance.getEntriesByType("largest-contentful-paint"),o=s[0],l=[{name:v("performance.firstContentfulPaint"),value:(null==a?void 0:a.startTime)||0,unit:"ms",status:((null==a?void 0:a.startTime)||0)<1800?"good":((null==a?void 0:a.startTime)||0)<3e3?"needs-improvement":"poor",threshold:{good:1800,poor:3e3},trend:"stable",description:v("performance.fcpDescription")},{name:v("performance.largestContentfulPaint"),value:(null==(e=i[i.length-1])?void 0:e.startTime)||0,unit:"ms",status:((null==(t=i[i.length-1])?void 0:t.startTime)||0)<2500?"good":((null==(n=i[i.length-1])?void 0:n.startTime)||0)<4e3?"needs-improvement":"poor",threshold:{good:2500,poor:4e3},trend:"stable",description:v("performance.lcpDescription")},{name:v("performance.timeToInteractive"),value:(null==o?void 0:o.loadEventStart)-(null==o?void 0:o.fetchStart)||0,unit:"ms",status:((null==o?void 0:o.loadEventStart)-(null==o?void 0:o.fetchStart)||0)<3800?"good":((null==o?void 0:o.loadEventStart)-(null==o?void 0:o.fetchStart)||0)<7300?"needs-improvement":"poor",threshold:{good:3800,poor:7300},trend:"stable",description:v("performance.ttiDescription")},{name:v("performance.domContentLoaded"),value:(null==o?void 0:o.domContentLoadedEventEnd)-(null==o?void 0:o.fetchStart)||0,unit:"ms",status:((null==o?void 0:o.domContentLoadedEventEnd)-(null==o?void 0:o.fetchStart)||0)<1500?"good":((null==o?void 0:o.domContentLoadedEventEnd)-(null==o?void 0:o.fetchStart)||0)<2500?"needs-improvement":"poor",threshold:{good:1500,poor:2500},trend:"stable",description:v("performance.dclDescription")},{name:v("performance.memoryUsage"),value:performance.memory?Math.round(performance.memory.usedJSHeapSize/1024/1024):0,unit:"MB",status:(performance.memory?performance.memory.usedJSHeapSize/1024/1024:0)<50?"good":(performance.memory?performance.memory.usedJSHeapSize/1024/1024:0)<100?"needs-improvement":"poor",threshold:{good:50,poor:100},trend:"stable",description:v("performance.memoryDescription")}];r(l)},b=async()=>{c(!0),setTimeout(()=>{a({totalSize:2936012.8,gzippedSize:867328,chunks:[{name:"main.js",size:1258291.2,percentage:42.9},{name:"vendor.js",size:972800,percentage:34},{name:"chunk-vendors.js",size:460800,percentage:16.1},{name:"styles.css",size:204800,percentage:7.1}],suggestions:["Consider code splitting for vendor libraries","Implement lazy loading for admin components","Optimize image assets and use WebP format","Remove unused dependencies from package.json","Enable tree shaking for better dead code elimination"]}),c(!1)},2e3)},w=e=>{switch(e){case"good":return"text-success";case"needs-improvement":return"text-warning";case"poor":return"text-destructive";default:return"text-muted-foreground"}},N=e=>{switch(e){case"good":return n.jsx(Xf,{variant:"default",className:"bg-success text-success-foreground",children:v("performance.good")});case"needs-improvement":return n.jsx(Xf,{variant:"secondary",className:"bg-warning text-warning-foreground",children:v("performance.needsImprovement")});case"poor":return n.jsx(Xf,{variant:"destructive",children:v("performance.poor")});default:return n.jsx(Xf,{variant:"secondary",children:e})}},_=e=>{switch(e){case"up":return n.jsx($h,{className:"h-3 w-3 text-destructive"});case"down":return n.jsx(Bh,{className:"h-3 w-3 text-success"});default:return n.jsx(gm,{className:"h-3 w-3 text-muted-foreground"})}},S=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]};return Ne.useEffect(()=>{const e=async()=>{o(!0),await j(),o(!1)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()},[]),i&&0===t.length?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold",children:v("performance.performanceMonitor")}),n.jsx("div",{className:"animate-spin",children:n.jsx(gh,{className:"h-5 w-5"})})]}),Array.from({length:4}).map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsxs(Au,{className:"p-6",children:[n.jsx("div",{className:"h-6 bg-muted rounded w-1/3 mb-2"}),n.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},t))]}):n.jsxs("div",{className:_u("space-y-6",y?"rtl":"ltr"),dir:y?"rtl":"ltr",children:[n.jsxs("div",{className:_u("flex items-center justify-between",y&&"flex-row-reverse"),children:[n.jsxs("div",{children:[n.jsxs("h2",{className:_u("text-2xl font-bold flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(lh,{className:"h-6 w-6"}),v("performance.performanceMonitor")]}),n.jsx("p",{className:_u("text-muted-foreground",y?"text-right":"text-left"),children:v("performance.realTimeMetrics")})]}),n.jsxs("div",{className:_u("flex gap-2",y&&"flex-row-reverse"),children:[n.jsxs(ku,{onClick:j,variant:"outline",children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),v("performance.refreshMetrics")]}),n.jsxs(ku,{onClick:p,variant:"outline",disabled:h,children:[n.jsx(wh,{className:"h-4 w-4 mr-2"}),v(h?"performance.checking":"performance.checkSystemHealth")]}),n.jsxs(ku,{onClick:b,disabled:l,children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),v(l?"performance.analyzing":"performance.analyzeBundle")]})]})]}),n.jsxs(BS,{defaultValue:"vitals",className:"space-y-6",children:[n.jsxs($S,{children:[n.jsx(US,{value:"vitals",children:v("performance.coreWebVitals")}),n.jsx(US,{value:"system",children:v("performance.systemHealth")}),n.jsx(US,{value:"bundle",children:v("performance.bundleAnalysis")}),n.jsx(US,{value:"network",children:v("performance.network")}),n.jsx(US,{value:"recommendations",children:v("performance.recommendations")})]}),n.jsxs(VS,{value:"vitals",className:"space-y-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(ap,{className:"h-5 w-5 text-primary"}),v("performance.performanceScore")]}),n.jsx(Pu,{children:v("performance.overallAssessment")})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-success",children:"87"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:v("performance.performanceScore")})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-warning",children:"73"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:v("performance.accessibility")})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-success",children:"92"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:v("performance.bestPractices")})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-success",children:"89"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:v("performance.seo")})]})]}),n.jsx(G_,{value:87,className:"w-full"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>n.jsxs(Eu,{className:"hover:shadow-md transition-shadow",children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Mu,{className:"text-sm font-medium",children:e.name}),N(e.status)]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:_u("text-2xl font-bold",w(e.status)),children:[e.value.toFixed(0),e.unit]}),_(e.trend)]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Good: < ",e.threshold.good,e.unit]}),n.jsxs("span",{children:["Poor: > ",e.threshold.poor,e.unit]})]}),n.jsx(G_,{value:Math.min(e.value/e.threshold.poor*100,100),className:"w-full h-2"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.description})]})]},e.name))})]}),n.jsxs(VS,{value:"system",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:v("performance.realTimeSystemMonitor")}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[v("performance.lastUpdated"),": ",(new Date).toLocaleTimeString()]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(wh,{className:_u("h-4 w-4","healthy"===(null==d?void 0:d.overallStatus)?"text-success":"warning"===(null==d?void 0:d.overallStatus)?"text-warning":"text-destructive")}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.systemStatus")})]}),n.jsx("p",{className:_u("text-2xl font-bold capitalize","healthy"===(null==d?void 0:d.overallStatus)?"text-success":"warning"===(null==d?void 0:d.overallStatus)?"text-warning":"text-destructive"),children:(null==d?void 0:d.overallStatus)||v("performance.healthy")}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-success rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:v("performance.operational")})]})]})}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(jm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.cpuUsage")})]}),n.jsxs("p",{className:"text-2xl font-bold",children:[(null==d?void 0:d.cpuUsage)||Math.floor(30*Math.random()+40),"%"]}),n.jsx(G_,{value:(null==d?void 0:d.cpuUsage)||Math.floor(30*Math.random()+40),className:"w-full mt-2"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(null==d?void 0:d.cpuUsage)>80?v("performance.highLoad"):v("performance.normal")})]})}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Bm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.memoryUsage")})]}),n.jsxs("p",{className:"text-2xl font-bold",children:[(null==d?void 0:d.memoryUsage)||Math.floor(20*Math.random()+60),"%"]}),n.jsx(G_,{value:(null==d?void 0:d.memoryUsage)||Math.floor(20*Math.random()+60),className:"w-full mt-2"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u&&Array.isArray(u)&&u.length>0?`${Math.round((null==(e=u[0])?void 0:e.heapUsed)/1024/1024)}MB used`:"2.3GB available"})]})}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Nm,{className:_u("h-4 w-4","healthy"===(null==d?void 0:d.databaseStatus)?"text-success":"warning"===(null==d?void 0:d.databaseStatus)?"text-warning":"text-destructive")}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.database")})]}),n.jsx("p",{className:_u("text-lg font-bold capitalize","healthy"===(null==d?void 0:d.databaseStatus)?"text-success":"warning"===(null==d?void 0:d.databaseStatus)?"text-warning":"text-destructive"),children:(null==d?void 0:d.databaseStatus)||"Healthy"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==d?void 0:d.activeConnections)||12," ",v("performance.activeConnections")]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(Uh,{className:"h-5 w-5 text-warning"}),v("performance.systemAlerts")]}),n.jsx(Pu,{children:v("performance.realTimeSystemAlerts")})]}),n.jsx(Au,{className:"space-y-3",children:m&&m.length>0?m.slice(0,3).map((e,t)=>n.jsxs(db,{className:"border-l-4 border-l-warning",children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsx(ub,{children:n.jsx("div",{className:_u("flex items-start justify-between",y&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:e.component||v("performance.systemAlert")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})})})]},t)):n.jsxs("div",{className:_u("text-center py-8 text-muted-foreground",y?"text-right":"text-left"),children:[n.jsx(dm,{className:"h-8 w-8 mx-auto mb-2 text-success"}),n.jsx("p",{children:v("performance.allSystemsOperational")})]})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(wh,{className:"h-5 w-5 text-primary"}),v("performance.serviceStatus")]}),n.jsx(Pu,{children:v("performance.corePlatformServicesHealth")})]}),n.jsx(Au,{className:"space-y-4",children:[{name:v("performance.apiGateway"),status:"operational",icon:wh},{name:v("performance.database"),status:"operational",icon:Nm},{name:v("performance.authentication"),status:"operational",icon:Im},{name:v("performance.realtimeServices"),status:"operational",icon:Fu}].map(e=>n.jsxs("div",{className:_u("flex items-center justify-between p-3 rounded-lg border",y&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",y&&"flex-row-reverse"),children:[n.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:e.name})]}),n.jsxs("div",{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx("div",{className:"w-2 h-2 bg-success rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm text-success capitalize",children:v("performance.operational")})]})]},e.name))})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:v("performance.deviceEnvironment")}),n.jsx(Pu,{children:v("performance.currentDeviceCapabilities")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.deviceType"),":"]}),n.jsx(Xf,{variant:f.isLowEnd?"destructive":"default",children:f.isLowEnd?v("performance.lowEnd"):v("performance.highPerformance")})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.cpuCores"),":"]}),n.jsx("span",{className:"text-sm font-medium",children:f.cpuCores})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.memory"),":"]}),n.jsxs("span",{className:"text-sm font-medium",children:[f.memory,"GB"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.networkSpeed"),":"]}),n.jsx(Xf,{variant:"fast"===x?"default":"medium"===x?"secondary":"destructive",children:x})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.animations"),":"]}),n.jsx(Xf,{variant:g.enableAnimations?"default":"secondary",children:g.enableAnimations?v("performance.enabled"):v("performance.disabled")})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.gpuAcceleration"),":"]}),n.jsx(Xf,{variant:g.useGPU?"default":"secondary",children:g.useGPU?v("performance.enabled"):v("performance.disabled")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.transitionDuration"),":"]}),n.jsx("span",{className:"text-sm font-medium",children:g.transitionDuration})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.maxAnimations"),":"]}),n.jsx("span",{className:"text-sm font-medium",children:g.maxConcurrentAnimations})]}),n.jsxs("div",{className:_u("flex justify-between",y&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm",children:[v("performance.debounceTime"),":"]}),n.jsxs("span",{className:"text-sm font-medium",children:[g.debounceMs,"ms"]})]})]})]})})]}),m&&m.length>0&&n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(Uh,{className:"h-5 w-5 text-warning"}),v("performance.systemAlerts")]})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-3",children:m.map((e,t)=>n.jsxs(db,{className:"critical"===e.severity?"border-destructive":"high"===e.severity?"border-warning":"",children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsxs("span",{className:"font-medium",children:[e.component,":"]})," ",e.message,n.jsx("span",{className:"text-xs text-muted-foreground block mt-1",children:new Date(e.timestamp).toLocaleString()})]})]},t))})})]})]}),n.jsx(VS,{value:"bundle",className:"space-y-4",children:s?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:_u("flex items-center gap-2 mb-2",y&&"flex-row-reverse"),children:[n.jsx(Nm,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.totalBundleSize")})]}),n.jsx("p",{className:"text-2xl font-bold",children:S(s.totalSize)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:v("performance.uncompressed")})]})}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:_u("flex items-center gap-2 mb-2",y&&"flex-row-reverse"),children:[n.jsx(Im,{className:"h-4 w-4 text-success"}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.gzippedSize")})]}),n.jsx("p",{className:"text-2xl font-bold text-success",children:S(s.gzippedSize)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(s.gzippedSize/s.totalSize*100),"% ",v("performance.compression")]})]})}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:_u("flex items-center gap-2 mb-2",y&&"flex-row-reverse"),children:[n.jsx(Ch,{className:"h-4 w-4 text-warning"}),n.jsx("span",{className:"text-sm font-medium",children:v("performance.mobileImpact")})]}),n.jsxs("p",{className:"text-2xl font-bold text-warning",children:[Math.round(s.gzippedSize/1024/100)/10,"s"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:v("performance.loadTimeOn3G")})]})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:v("performance.bundleComposition")}),n.jsx(Pu,{children:v("performance.bundleBreakdownDescription")})]}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:s.chunks.map(e=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:_u("flex justify-between items-center",y&&"flex-row-reverse"),children:[n.jsx("span",{className:"font-medium",children:e.name}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[S(e.size)," (",e.percentage.toFixed(1),"%)"]})]}),n.jsx(G_,{value:e.percentage,className:"w-full"})]},e.name))})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(Uh,{className:"h-5 w-5 text-warning"}),v("performance.optimizationSuggestions")]})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-3",children:s.suggestions.map((e,t)=>n.jsxs(db,{children:[n.jsx(Uh,{className:"h-4 w-4"}),n.jsx(ub,{children:e})]},t))})})]})]}):n.jsx(Eu,{children:n.jsxs(Au,{className:_u("py-12 text-center",y?"text-right":"text-left"),children:[n.jsx(Nm,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:v("performance.bundleAnalysisTitle")}),n.jsx("p",{className:"text-muted-foreground mb-4",children:v("performance.bundleAnalysisDescription")}),n.jsxs(ku,{onClick:b,disabled:l,children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),v(l?"performance.analyzing":"performance.startAnalysis")]})]})})}),n.jsx(VS,{value:"network",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:v("performance.networkPerformanceTitle")}),n.jsx(Pu,{children:v("performance.networkPerformanceDesc")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(Im,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("p",{children:v("performance.networkAnalysisComingSoon")})]})})]})}),n.jsx(VS,{value:"recommendations",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",y&&"flex-row-reverse"),children:[n.jsx(dm,{className:"h-5 w-5 text-success"}),v("performance.performanceRecommendations")]}),n.jsx(Pu,{children:v("performance.actionableSuggestions")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(db,{children:[n.jsx(dm,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsxs("strong",{children:[v("performance.implementLazyLoading"),":"]})," ",v("performance.lazyLoadingDescription")]})]}),n.jsxs(db,{children:[n.jsx(dm,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsxs("strong",{children:[v("performance.optimizeImages"),":"]})," ",v("performance.optimizeImagesDescription")]})]}),n.jsxs(db,{children:[n.jsx(dm,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsxs("strong",{children:[v("performance.enableCaching"),":"]})," ",v("performance.enableCachingDescription")]})]}),n.jsxs(db,{children:[n.jsx(dm,{className:"h-4 w-4"}),n.jsxs(ub,{children:[n.jsxs("strong",{children:[v("performance.databaseOptimization"),":"]})," ",v("performance.databaseOptimizationDescription")]})]})]})})]})})]})]})};function p5(){const{t:e,isRTL:t}=cr();return n.jsxs("div",{className:"p-6 space-y-6",dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:e("admin.performanceMonitor")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:e("admin.performanceMonitorDescription")})]}),n.jsx(h5,{})]})}function f5(){const[e,t]=Ne.useState([]),[r,s]=Ne.useState(!0),[a,i]=Ne.useState(""),[o,l]=Ne.useState("all"),[c,d]=Ne.useState([]),[u,m]=Ne.useState("all"),[h,p]=Ne.useState(null),[f,x]=Ne.useState(""),{t:g,formatCurrency:v,formatDate:y,isRTL:j}=cr(),{toast:b}=fp();Ne.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const{data:e,error:r}=await mr.from("orders").select("\n          *,\n          client:user_profiles!orders_client_id_fkey(full_name, email, company_name),\n          vendor:user_profiles!orders_vendor_id_fkey(full_name, email, company_name),\n          request:requests(title, category)\n        ").order("created_at",{ascending:!1});if(r)throw r;const n=(e||[]).map(e=>{var t;return{id:e.id,title:e.title||(null==(t=e.request)?void 0:t.title)||"Order",client_id:e.client_id,vendor_id:e.vendor_id,request_id:e.request_id,amount:Number(e.amount)||0,currency:e.currency||"SAR",status:e.status,delivery_date:e.delivery_date,completion_date:e.completion_date,notes:e.notes,created_at:e.created_at,updated_at:e.updated_at,client:e.client,vendor:e.vendor,request:e.request}});t(n)}catch(e){b({title:g("common.error"),description:g("admin.ordersManagement.fetchError"),variant:"destructive"})}finally{s(!1)}},N=new Date,_=new Date(N.getFullYear(),N.getMonth(),1);new Date(N.getFullYear(),N.getMonth()-1,1);const S=new Date(N);S.setDate(N.getDate()-7);const k=e.length,C=e.filter(e=>"completed"===e.status).length,E=e.filter(e=>"pending"===e.status).length,O=e.filter(e=>"in_progress"===e.status).length,M=e.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),P=e.filter(e=>new Date(e.created_at)>=_).length,A=e.filter(e=>"completed"===e.status&&new Date(e.created_at)>=S).length,T=C>0?M/C:0,D=e.filter(e=>{var t,r,n,s,i;const l=""===a||e.id.toLowerCase().includes(a.toLowerCase())||e.title.toLowerCase().includes(a.toLowerCase())||(null==(r=null==(t=e.client)?void 0:t.full_name)?void 0:r.toLowerCase().includes(a.toLowerCase()))||(null==(s=null==(n=e.vendor)?void 0:n.full_name)?void 0:s.toLowerCase().includes(a.toLowerCase()))||(null==(i=e.client)?void 0:i.email.toLowerCase().includes(a.toLowerCase())),c="all"===o||e.status===o,d="all"===u||"pending"===u&&"pending"===e.status||"active"===u&&["confirmed","in_progress"].includes(e.status)||"completed"===u&&"completed"===e.status;return l&&c&&d});return r?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]","data-admin-dashboard":!0,children:n.jsx(lb,{size:"lg"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:g("admin.ordersManagement.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:g("admin.ordersManagement.description")})]}),n.jsxs(BS,{value:u,onValueChange:m,children:[n.jsxs($S,{className:"grid w-full grid-cols-4",children:[n.jsx(US,{value:"all",children:g("admin.ordersManagement.allOrders")}),n.jsx(US,{value:"pending",children:g("admin.ordersManagement.pending")}),n.jsx(US,{value:"active",children:g("admin.ordersManagement.active")}),n.jsx(US,{value:"completed",children:g("admin.ordersManagement.completed")})]}),n.jsxs(VS,{value:u,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:g("admin.ordersManagement.totalOrders")}),n.jsx(kh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:k.toLocaleString()}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",P," ",g("admin.ordersManagement.thisMonth")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:g("admin.ordersManagement.completedOrders")}),n.jsx(dm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:C.toLocaleString()}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",A," ",g("admin.ordersManagement.thisWeek")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:g("admin.ordersManagement.totalRevenue")}),n.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[M.toLocaleString()," SAR"]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[g("admin.ordersManagement.average"),": ",T.toLocaleString()," SAR"]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:g("admin.ordersManagement.inProgress")}),n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:O.toLocaleString()}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[E," ",g("admin.ordersManagement.pendingCount")]})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:g("admin.ordersManagement.filtersActions")})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx($j,{placeholder:g("admin.ordersManagement.searchPlaceholder"),value:a,onChange:e=>i(e.target.value)}),n.jsxs(lC,{value:o,onValueChange:l,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:g("admin.ordersManagement.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:g("admin.ordersManagement.allStatus")}),n.jsx(pC,{value:"pending",children:g("admin.ordersManagement.pending")}),n.jsx(pC,{value:"confirmed",children:g("admin.ordersManagement.confirmed")}),n.jsx(pC,{value:"in_progress",children:g("admin.ordersManagement.inProgressStatus")}),n.jsx(pC,{value:"completed",children:g("admin.ordersManagement.completed")}),n.jsx(pC,{value:"cancelled",children:g("admin.ordersManagement.cancelled")}),n.jsx(pC,{value:"disputed",children:g("admin.ordersManagement.disputed")})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{variant:"outline",onClick:()=>{w(),b({title:g("common.success"),description:g("admin.ordersManagement.dataRefreshed")})},children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),g("admin.ordersManagement.refresh")]}),n.jsxs(ku,{variant:"outline",onClick:()=>{const e=c.length>0?D.filter(e=>c.includes(e.id)):D,t=[g("admin.ordersManagement.csvHeaders"),...e.map(e=>{var t,r,n,s;return`${e.id},"${e.title}","${(null==(t=e.client)?void 0:t.full_name)||(null==(r=e.client)?void 0:r.email)||"Unknown"}","${(null==(n=e.vendor)?void 0:n.full_name)||(null==(s=e.vendor)?void 0:s.email)||"Unknown"}",${e.status},${e.amount},${e.currency},${bj(new Date(e.created_at),"yyyy-MM-dd")}`})].join("\n"),r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=`orders-${bj(new Date,"yyyy-MM-dd")}.csv`,s.click(),window.URL.revokeObjectURL(n),b({title:g("common.success"),description:`${e.length} ${g("admin.ordersManagement.exportSuccess")}`})},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),g("admin.ordersManagement.export")]})]})]}),c.length>0&&n.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-lg",children:[n.jsxs("span",{className:"text-sm font-medium",children:[c.length," ",g("admin.ordersManagement.orderSelected")]}),n.jsxs(lC,{value:f,onValueChange:x,children:[n.jsx(dC,{className:"w-48",children:n.jsx(cC,{placeholder:g("admin.ordersManagement.bulkActionPlaceholder")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"confirmed",children:g("admin.ordersManagement.markAsConfirmed")}),n.jsx(pC,{value:"in_progress",children:g("admin.ordersManagement.markAsInProgress")}),n.jsx(pC,{value:"completed",children:g("admin.ordersManagement.markAsCompleted")}),n.jsx(pC,{value:"cancelled",children:g("admin.ordersManagement.markAsCancelled")}),n.jsx(pC,{value:"disputed",children:g("admin.ordersManagement.markAsDisputed")}),n.jsx(pC,{value:"delete",children:g("admin.ordersManagement.deleteOrders")})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{variant:"destructive",size:"sm",disabled:!f,children:g("admin.ordersManagement.applyAction")})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:g("admin.ordersManagement.confirmBulkAction")}),n.jsxs(lE,{children:[g("admin.ordersManagement.bulkActionConfirm")," ",g("delete"===f?"admin.ordersManagement.bulkActionDelete":"admin.ordersManagement.bulkActionUpdate")," ",c.length," ",g("admin.ordersManagement.orderSelected"),"?",g("admin.ordersManagement.bulkActionCannotUndo")]})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:g("admin.ordersManagement.cancel")}),n.jsx(cE,{onClick:async()=>{if(0!==c.length&&f)try{if("delete"===f){const{error:e}=await mr.from("orders").delete().in("id",c);if(e)throw e;b({title:g("common.success"),description:`${c.length} ${g("admin.ordersManagement.bulkDeleteSuccess")}`})}else{const{error:e}=await mr.from("orders").update({status:f}).in("id",c);if(e)throw e;b({title:g("common.success"),description:`${c.length} ${g("admin.ordersManagement.bulkUpdateSuccess")}`})}d([]),x(""),await w()}catch(e){b({title:g("common.error"),description:g("admin.ordersManagement.bulkActionError"),variant:"destructive"})}},children:g("admin.ordersManagement.confirm")})]})]})]})]})]})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Mu,{children:[g("admin.ordersManagement.ordersCount")," (",D.length,")"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(CE,{checked:c.length===D.length&&D.length>0,onCheckedChange:()=>{c.length===D.length?d([]):d(D.map(e=>e.id))}}),n.jsx("span",{className:"text-sm",children:g("admin.ordersManagement.selectAll")})]})]})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:0===D.length?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx(kh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:g("admin.ordersManagement.noOrdersFound")}),n.jsx("p",{className:"text-muted-foreground",children:g("admin.ordersManagement.noOrdersMatch")})]}):D.map(e=>{var t,r,s,a,i,o,l,u,m,h,f;return n.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsx(CE,{checked:c.includes(e.id),onCheckedChange:t=>{d(t?[...c,e.id]:c.filter(t=>t!==e.id))}}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",e.id.slice(0,8)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:(null==(t=e.client)?void 0:t.full_name)||(null==(r=e.client)?void 0:r.company_name)||g("admin.ordersManagement.unknownClient")}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[g("admin.ordersManagement.vendor"),": ",(null==(s=e.vendor)?void 0:s.full_name)||(null==(a=e.vendor)?void 0:a.company_name)||g("admin.ordersManagement.unknownVendor")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"font-medium",children:[e.amount.toLocaleString()," ",e.currency]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[(f=e.status,n.jsx(Xf,{variant:{pending:"secondary",confirmed:"outline",in_progress:"default",completed:"secondary",cancelled:"destructive",disputed:"destructive"}[f]||"secondary",children:f.replace("_"," ").charAt(0).toUpperCase()+f.replace("_"," ").slice(1)})),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Sb,{children:[n.jsx(kb,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>p(e),children:n.jsx(Mm,{className:"h-4 w-4"})})}),n.jsxs(Ob,{className:"max-w-2xl",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:g("admin.ordersManagement.orderDetails")}),n.jsxs(Tb,{children:[g("admin.ordersManagement.viewAndManage")," #",e.id.slice(0,8)]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.orderTitle")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.status")}),n.jsx("div",{className:"mt-1",children:n.jsxs(lC,{value:e.status,onValueChange:t=>(async(e,t)=>{try{const{error:r}=await mr.from("orders").update({status:t,updated_at:(new Date).toISOString(),..."completed"===t&&{completion_date:(new Date).toISOString()}}).eq("id",e);if(r)throw r;await w(),b({title:g("common.success"),description:`${g("admin.ordersManagement.statusUpdated")} ${t}`})}catch(r){b({title:g("common.error"),description:g("admin.ordersManagement.statusUpdateError"),variant:"destructive"})}})(e.id,t),children:[n.jsx(dC,{className:"w-full",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"pending",children:g("admin.ordersManagement.pending")}),n.jsx(pC,{value:"confirmed",children:g("admin.ordersManagement.confirmed")}),n.jsx(pC,{value:"in_progress",children:g("admin.ordersManagement.inProgressStatus")}),n.jsx(pC,{value:"completed",children:g("admin.ordersManagement.completed")}),n.jsx(pC,{value:"cancelled",children:g("admin.ordersManagement.cancelled")}),n.jsx(pC,{value:"disputed",children:g("admin.ordersManagement.disputed")})]})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.client")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(i=e.client)?void 0:i.full_name)||(null==(o=e.client)?void 0:o.company_name)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:null==(l=e.client)?void 0:l.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.vendor")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(u=e.vendor)?void 0:u.full_name)||(null==(m=e.vendor)?void 0:m.company_name)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:null==(h=e.vendor)?void 0:h.email})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.amount")}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.amount.toLocaleString()," ",e.currency]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.created")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:bj(new Date(e.created_at),"MMM dd, yyyy HH:mm")})]})]}),e.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:g("admin.ordersManagement.notes")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.notes})]})]})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",children:n.jsx(zh,{className:"h-4 w-4 text-destructive"})})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:g("admin.ordersManagement.deleteOrder")}),n.jsx(lE,{children:g("admin.ordersManagement.deleteConfirmation")})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:g("admin.ordersManagement.cancel")}),n.jsx(cE,{onClick:()=>(async e=>{try{const{error:t}=await mr.from("orders").delete().eq("id",e);if(t)throw t;await w(),b({title:g("common.success"),description:g("admin.ordersManagement.deleteSuccess")})}catch(t){b({title:g("common.error"),description:g("admin.ordersManagement.deleteError"),variant:"destructive"})}})(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:g("admin.ordersManagement.delete")})]})]})]})]})]})]})]},e.id)})})})]})]})]})]})}const x5=()=>n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:"Verification Queue"}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:"Review and manage vendor verification requests"})]}),n.jsx(Z3,{})]});var g5="Switch",[v5,y5]=o(g5),[j5,b5]=v5(g5),w5=Ne.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:i,defaultChecked:o,required:c,disabled:u,value:m="on",onCheckedChange:p,form:f,...x}=e,[g,v]=Ne.useState(null),y=l(t,e=>v(e)),j=Ne.useRef(!1),b=!g||(f||!!g.closest("form")),[w=!1,N]=d({prop:i,defaultProp:o,onChange:p});return n.jsxs(j5,{scope:r,checked:w,disabled:u,children:[n.jsx(a.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":k5(w),"data-disabled":u?"":void 0,disabled:u,value:m,...x,ref:y,onClick:h(e.onClick,e=>{N(e=>!e),b&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),b&&n.jsx(S5,{control:g,bubbles:!j.current,name:s,value:m,checked:w,required:c,disabled:u,form:f,style:{transform:"translateX(-100%)"}})]})});w5.displayName=g5;var N5="SwitchThumb",_5=Ne.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,i=b5(N5,r);return n.jsx(a.span,{"data-state":k5(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});_5.displayName=N5;var S5=e=>{const{control:t,checked:r,bubbles:s=!0,...a}=e,i=Ne.useRef(null),o=YS(r),l=be(t);return Ne.useEffect(()=>{const e=i.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==r&&n){const t=new Event("click",{bubbles:s});n.call(e,r),e.dispatchEvent(t)}},[o,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k5(e){return e?"checked":"unchecked"}var C5=w5,E5=_5;const O5=Ne.forwardRef(({className:e,...t},r)=>n.jsx(C5,{className:_u("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(E5,{className:_u("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));O5.displayName=C5.displayName;const M5=()=>{const{toast:e}=fp(),{t:t}=cr(),r=or("WorkflowAutomation"),{workflows:s,executions:a,loading:i,createWorkflow:o,updateWorkflow:l,deleteWorkflow:c,toggleWorkflowStatus:d,triggerWorkflow:u,refetch:m}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState([]),[s,a]=Ne.useState(!0),{user:i}=br(),o=async()=>{if(i)try{const{data:e,error:r}=await mr.from("workflow_rules").select("*").order("priority",{ascending:!1});if(r)throw r;t(e||[])}catch(e){t([])}else a(!1)},l=async()=>{if(i)try{const{data:e,error:t}=await mr.from("workflow_executions").select("\n          *,\n          workflow_rules (\n            name,\n            trigger_type\n          )\n        ").order("created_at",{ascending:!1}).limit(50);if(t)throw t;n(e||[])}catch(e){n([])}finally{a(!1)}else a(!1)},c=async(e,t)=>{try{const{data:r,error:n}=await mr.from("workflow_rules").update(t).eq("id",e).select().single();if(n)throw n;return await o(),r}catch(r){throw r}};return Ne.useEffect(()=>{i&&(o(),l())},[i]),Ne.useEffect(()=>{if(!i)return;const e=mr.channel("workflow_executions").on("postgres_changes",{event:"INSERT",schema:"public",table:"workflow_executions"},()=>{l()}).subscribe();return()=>{mr.removeChannel(e)}},[i]),{workflows:e,executions:r,loading:s,createWorkflow:async e=>{if(!i)return null;try{const t={name:e.name,description:e.description,trigger_type:e.trigger_type,trigger_conditions:e.trigger_conditions||{},actions:e.actions||[],status:e.status||"draft",priority:e.priority||1,delay_minutes:e.delay_minutes||0,created_by:i.id},{data:r,error:n}=await mr.from("workflow_rules").insert(t).select().single();if(n)throw n;return await o(),r}catch(t){throw t}},updateWorkflow:c,deleteWorkflow:async e=>{try{const{error:t}=await mr.from("workflow_rules").delete().eq("id",e);if(t)throw t;await o()}catch(t){throw t}},toggleWorkflowStatus:async(e,t)=>c(e,{status:t}),triggerWorkflow:async(e,t)=>{try{const{data:r,error:n}=await mr.rpc("execute_workflow_rules",{trigger_type_param:e,trigger_data_param:t});if(n)throw n;return await l(),r}catch(r){throw r}},refetch:()=>{o(),l()}}})(),{tasks:h,loading:p,updateTaskStatus:f,deleteTask:x,getTasksByStatus:g,getOverdueTasks:v,refetch:y}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s}=br(),a=async()=>{if(s)try{const{data:e,error:r}=await mr.from("automated_tasks").select("*").order("created_at",{ascending:!1});if(r)throw r;t(e||[])}catch(e){t([])}finally{n(!1)}else n(!1)};return Ne.useEffect(()=>{s&&a()},[s]),Ne.useEffect(()=>{if(!s)return;const e=mr.channel("automated_tasks").on("postgres_changes",{event:"*",schema:"public",table:"automated_tasks"},()=>{a()}).subscribe();return()=>{mr.removeChannel(e)}},[s]),{tasks:e,loading:r,updateTaskStatus:async(e,t)=>{try{const r={status:t};"completed"===t&&(r.completed_at=(new Date).toISOString());const{data:n,error:s}=await mr.from("automated_tasks").update(r).eq("id",e).select().single();if(s)throw s;return await a(),n}catch(r){throw r}},deleteTask:async e=>{try{const{error:t}=await mr.from("automated_tasks").delete().eq("id",e);if(t)throw t;await a()}catch(t){throw t}},getTasksByStatus:t=>e.filter(e=>e.status===t),getOverdueTasks:()=>{const t=new Date;return e.filter(e=>"completed"!==e.status&&e.due_date&&new Date(e.due_date)<t)},refetch:a}})(),[j,b]=Ne.useState(!1),[w,N]=Ne.useState({name:"",description:"",trigger_type:"manual",trigger_conditions:{},actions:{},status:"draft",priority:1,delay_minutes:0}),_=e=>{switch(e){case"active":return n.jsx(dm,{className:"h-4 w-4 text-success"});case"inactive":return n.jsx(mm,{className:"h-4 w-4 text-muted-foreground"});case"draft":return n.jsx(gm,{className:"h-4 w-4 text-warning"});default:return n.jsx(Uh,{className:"h-4 w-4 text-destructive"})}},S=e=>{switch(e){case"active":return"default";case"inactive":return"secondary";case"draft":return"outline";default:return"destructive"}},k=i||p;if(k)return n.jsx("div",{className:"flex items-center justify-center p-8",children:n.jsx(lb,{size:"lg",label:t("admin.workflowAutomation.messages.loading")})});r.debug("Workflow Automation state:",{workflows:s.length,executions:a.length,tasks:h.length,workflowLoading:i,tasksLoading:p,loading:k});const C=g("pending"),E=v(),O=s.filter(e=>"active"===e.status);return n.jsxs("div",{className:"space-y-6",children:[n.jsx(Eu,{children:n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(ap,{className:"h-5 w-5"}),t("admin.workflowAutomation.automationCenter")]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("admin.workflowAutomation.automationDescription")})]}),n.jsxs(Sb,{open:j,onOpenChange:b,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{className:"flex items-center gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),t("admin.workflowAutomation.createWorkflow")]})}),n.jsxs(Ob,{className:"sm:max-w-[600px]",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:t("admin.workflowAutomation.workflowForm.createTitle")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"name",children:t("admin.workflowAutomation.workflowForm.workflowName")}),n.jsx($j,{id:"name",placeholder:t("admin.workflowAutomation.workflowForm.workflowNamePlaceholder"),value:w.name,onChange:e=>N(t=>({...t,name:e.target.value}))})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"description",children:t("admin.workflowAutomation.workflowForm.description")}),n.jsx(bC,{id:"description",placeholder:t("admin.workflowAutomation.workflowForm.descriptionPlaceholder"),value:w.description,onChange:e=>N(t=>({...t,description:e.target.value}))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"trigger",children:t("admin.workflowAutomation.workflowForm.triggerType")}),n.jsx($j,{id:"trigger",placeholder:t("admin.workflowAutomation.workflowForm.triggerPlaceholder"),value:w.trigger_type,onChange:e=>N(t=>({...t,trigger_type:e.target.value}))})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"priority",children:t("admin.workflowAutomation.workflowForm.priority")}),n.jsx($j,{id:"priority",type:"number",min:"1",max:"10",value:w.priority,onChange:e=>N(t=>({...t,priority:parseInt(e.target.value)||1}))})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>b(!1),children:t("admin.workflowAutomation.workflowForm.cancel")}),n.jsx(ku,{onClick:async()=>{if(w.name.trim())try{await o(w),b(!1),N({name:"",description:"",trigger_type:"manual",trigger_conditions:{},actions:{},status:"draft",priority:1,delay_minutes:0}),e({title:t("common.success"),description:t("admin.workflowAutomation.messages.created")})}catch(r){e({title:t("common.error"),description:t("admin.workflowAutomation.messages.createError"),variant:"destructive"})}else e({title:t("common.error"),description:t("admin.workflowAutomation.messages.nameRequired"),variant:"destructive"})},children:t("admin.workflowAutomation.workflowForm.createButton")})]})]})]})]})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.workflowAutomation.overview.activeWorkflows")}),n.jsx("p",{className:"text-2xl font-bold",children:O.length})]}),n.jsx(ap,{className:"h-8 w-8 text-primary/20"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.workflowAutomation.overview.totalExecutions")}),n.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),n.jsx(Fu,{className:"h-8 w-8 text-primary/20"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.workflowAutomation.overview.pendingTasks")}),n.jsx("p",{className:"text-2xl font-bold",children:C.length})]}),n.jsx(gm,{className:"h-8 w-8 text-primary/20"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.workflowAutomation.overview.successRate")}),n.jsxs("p",{className:"text-2xl font-bold",children:[a.length>0?Math.round(a.filter(e=>"completed"===e.status).length/a.length*100):0,"%"]})]}),n.jsx($h,{className:"h-8 w-8 text-primary/20"})]})})})]}),n.jsxs(BS,{defaultValue:"workflows",className:"space-y-6",children:[n.jsxs($S,{className:"grid w-full grid-cols-3",children:[n.jsx(US,{value:"workflows",children:t("admin.workflowAutomation.tabs.workflows")}),n.jsx(US,{value:"executions",children:t("admin.workflowAutomation.tabs.executionHistory")}),n.jsx(US,{value:"tasks",children:t("admin.workflowAutomation.tabs.tasks")})]}),n.jsx(VS,{value:"workflows",className:"space-y-6",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(r=>n.jsxs(Eu,{className:"relative "+("active"===r.status?"border-primary/20":"border-muted"),children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_(r.status),n.jsx("h3",{className:"font-medium text-sm",children:r.name})]}),n.jsx(Xf,{variant:S(r.status),className:"text-xs",children:r.status})]}),n.jsx(O5,{checked:"active"===r.status,onCheckedChange:()=>(async(r,n)=>{const s="active"===n?"inactive":"active";try{await d(r,s);const n=t("active"===s?"admin.workflowAutomation.messages.enabled":"admin.workflowAutomation.messages.disabled");e({title:t("common.success"),description:`Workflow ${n}`})}catch(a){e({title:t("common.error"),description:t("admin.workflowAutomation.messages.toggleError"),variant:"destructive"})}})(r.id,r.status)})]})}),n.jsxs(Au,{className:"space-y-4",children:[r.description&&n.jsx("p",{className:"text-xs text-muted-foreground",children:r.description}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:t("admin.workflowAutomation.workflowCard.trigger")}),n.jsx("span",{className:"font-medium",children:r.trigger_type.replace("_"," ")})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:t("admin.workflowAutomation.workflowCard.priority")}),n.jsx("span",{className:"font-medium",children:r.priority})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:t("admin.workflowAutomation.workflowCard.created")}),n.jsx("span",{className:"font-medium",children:new Date(r.created_at).toLocaleDateString()})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(ku,{size:"sm",variant:"outline",onClick:()=>u(r.trigger_type,{workflow_id:r.id}),disabled:"active"!==r.status,className:"flex-1 text-xs",children:[n.jsx(hm,{className:"h-3 w-3 mr-1"}),t("admin.workflowAutomation.workflowCard.execute")]}),n.jsx(ku,{size:"sm",variant:"ghost",onClick:()=>(async r=>{try{await c(r),e({title:t("common.success"),description:t("admin.workflowAutomation.messages.deleted")})}catch(n){e({title:t("common.error"),description:t("admin.workflowAutomation.messages.deleteError"),variant:"destructive"})}})(r.id),className:"text-xs",children:n.jsx(zh,{className:"h-3 w-3"})})]})]})]},r.id))})}),n.jsx(VS,{value:"executions",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{className:"text-lg",children:t("admin.workflowAutomation.executions.title")})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[a.slice(0,10).map(e=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:["completed"===e.status&&n.jsx(dm,{className:"h-4 w-4 text-success"}),"failed"===e.status&&n.jsx(Uh,{className:"h-4 w-4 text-destructive"}),"running"===e.status&&n.jsx(gm,{className:"h-4 w-4 text-warning"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-sm",children:[t("admin.workflowAutomation.executions.workflowId"),e.workflow_rule_id]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleString()})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx(Xf,{variant:"completed"===e.status?"default":"failed"===e.status?"destructive":"secondary",children:e.status}),e.completed_at&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t("admin.workflowAutomation.executions.duration")," ",Math.round((new Date(e.completed_at).getTime()-new Date(e.created_at).getTime())/1e3),"s"]})]})]},e.id)),0===a.length&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:t("admin.workflowAutomation.executions.noExecutions")})]})})]})}),n.jsx(VS,{value:"tasks",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"text-lg flex items-center gap-2",children:[n.jsx(gm,{className:"h-5 w-5"}),t("admin.workflowAutomation.tasks.pendingTitle")," (",C.length,")"]})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-3",children:[C.slice(0,5).map(e=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t("admin.workflowAutomation.tasks.priorityLabel")," ",e.priority," | ",t("admin.workflowAutomation.tasks.dueLabel")," ",e.due_date?new Date(e.due_date).toLocaleDateString():t("admin.workflowAutomation.tasks.noDueDate")]})]}),n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>f(e.id,"completed"),children:t("admin.workflowAutomation.tasks.complete")})]},e.id)),0===C.length&&n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:t("admin.workflowAutomation.tasks.noPendingTasks")})]})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"text-lg flex items-center gap-2",children:[n.jsx(Uh,{className:"h-5 w-5 text-destructive"}),t("admin.workflowAutomation.tasks.overdueTitle")," (",E.length,")"]})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-3",children:[E.slice(0,5).map(e=>n.jsxs("div",{className:"flex items-center justify-between p-3 border border-destructive/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm",children:e.title}),n.jsxs("p",{className:"text-xs text-destructive",children:[t("admin.workflowAutomation.tasks.overdueBy")," ",e.due_date?Math.ceil((Date.now()-new Date(e.due_date).getTime())/864e5):0," ",t("admin.workflowAutomation.tasks.days")]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>f(e.id,"completed"),children:t("admin.workflowAutomation.tasks.complete")}),n.jsx(ku,{size:"sm",variant:"ghost",onClick:()=>x(e.id),children:n.jsx(zh,{className:"h-3 w-3"})})]})]},e.id)),0===E.length&&n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:t("admin.workflowAutomation.tasks.noOverdueTasks")})]})})]})]})})]})]})};function P5(){const{t:e}=cr();return n.jsx(c5,{title:e("admin.workflowAutomation.title"),description:e("admin.workflowAutomation.description"),children:n.jsx(M5,{})})}function A5(){const[e,t]=Ne.useState([]),[r,s]=Ne.useState(!0),[a,i]=Ne.useState(""),[o,l]=Ne.useState("all"),[c,d]=Ne.useState("all"),[u,m]=Ne.useState("all"),{toast:h}=fp(),{t:p}=cr(),f=async()=>{try{s(!0);const{data:e,error:r}=await mr.from("financial_transactions").select("\n          *,\n          user_profiles(\n            full_name,\n            email,\n            company_name\n          )\n        ").order("created_at",{ascending:!1});if(r){if("42P01"===r.code){const e=[{id:"demo-1",type:"payment",status:"completed",amount:15e3,currency:p("admin.financial.currency"),description:p("admin.financial.demoData.paymentForConstruction"),reference_id:"PAY-001",user_id:"demo-user-1",order_id:"order-1",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),payment_method:"credit_card",user_profile:{full_name:"Ahmed Al-Rashid",email:"ahmed@example.com",company_name:"Al-Rashid Construction"}},{id:"demo-2",type:"commission",status:"completed",amount:750,currency:p("admin.financial.currency"),description:p("admin.financial.demoData.platformCommission"),reference_id:"COM-001",user_id:"demo-user-2",order_id:"order-1",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString(),payment_method:"platform",user_profile:{full_name:"Sara Al-Mansouri",email:"sara@example.com",company_name:"Mansouri Trading"}},{id:"demo-3",type:"refund",status:"pending",amount:2500,currency:p("admin.financial.currency"),description:p("admin.financial.demoData.refundForCancelledOrder"),reference_id:"REF-001",user_id:"demo-user-3",order_id:"order-3",created_at:new Date(Date.now()-1728e5).toISOString(),updated_at:new Date(Date.now()-1728e5).toISOString(),payment_method:"bank_transfer",user_profile:{full_name:"Mohammed Al-Farisi",email:"mohammed@example.com",company_name:"Farisi Electronics"}}];return t(e),void h({title:p("admin.financial.demoMode"),description:p("admin.financial.demoDescription"),variant:"default"})}throw r}const n=(e||[]).map(e=>({id:e.id,type:e.type,status:e.status,amount:Number(e.amount)||0,currency:p("admin.financial.currency"),description:e.description||p("admin.financial.transaction"),reference_id:e.transaction_ref,user_id:e.user_id,order_id:e.order_id,created_at:e.created_at,updated_at:e.updated_at,payment_method:e.payment_method,gateway_response:void 0,user_profile:e.user_profiles}));t(n)}catch(e){h({title:p("admin.financial.error"),description:p("admin.financial.fetchError"),variant:"destructive"})}finally{s(!1)}};Ne.useEffect(()=>{f()},[]);const x=e=>{switch(e){case"pending":return n.jsx(gm,{className:"h-4 w-4 text-yellow-500"});case"completed":return n.jsx(dm,{className:"h-4 w-4 text-success"});case"failed":return n.jsx(cm,{className:"h-4 w-4 text-destructive"});case"cancelled":return n.jsx(cm,{className:"h-4 w-4 text-gray-500"})}},g=e.filter(e=>{var t,r,n,s,i,l;const d=(null==(t=e.description)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(r=e.reference_id)?void 0:r.toLowerCase().includes(a.toLowerCase()))||(null==(s=null==(n=e.user_profile)?void 0:n.full_name)?void 0:s.toLowerCase().includes(a.toLowerCase()))||(null==(l=null==(i=e.user_profile)?void 0:i.email)?void 0:l.toLowerCase().includes(a.toLowerCase())),m="all"===c||e.status===c,h="all"===u||e.type===u,p="all"===o||e.status===o;return d&&m&&h&&p}),v={total:e.length,pending:e.filter(e=>"pending"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,failed:e.filter(e=>"failed"===e.status).length,totalAmount:e.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),totalRevenue:e.filter(e=>"completed"===e.status&&["commission","fee"].includes(e.type)).reduce((e,t)=>e+t.amount,0)};return r?n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:Array.from({length:4}).map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsxs(Au,{className:"p-6",children:[n.jsx("div",{className:"h-6 bg-muted rounded w-1/3 mb-2"}),n.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},t))})]}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:p("admin.financialTransactionsTitle")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:p("admin.financialTransactionsDesc")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xh,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:v.total}),n.jsx("p",{className:"text-sm text-muted-foreground",children:p("admin.financial.totalTransactions")})]})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(dm,{className:"h-8 w-8 text-success"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:v.completed}),n.jsx("p",{className:"text-sm text-muted-foreground",children:p("admin.financial.completed")})]})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gm,{className:"h-8 w-8 text-yellow-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:v.pending}),n.jsx("p",{className:"text-sm text-muted-foreground",children:p("admin.financial.pending")})]})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_m,{className:"h-8 w-8 text-success"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold",children:[v.totalAmount.toLocaleString()," ",p("admin.financial.currency")]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:p("admin.financial.totalVolume")})]})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx($h,{className:"h-8 w-8 text-success"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold",children:[v.totalRevenue.toLocaleString()," ",p("admin.financial.currency")]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:p("admin.financial.platformRevenue")})]})]})})})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx($j,{placeholder:p("admin.financial.searchTransactions"),value:a,onChange:e=>i(e.target.value),className:"pl-9"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(lC,{value:c,onValueChange:d,children:[n.jsx(dC,{className:"w-[140px]",children:n.jsx(cC,{placeholder:p("admin.financial.status")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:p("admin.financial.allStatus")}),n.jsx(pC,{value:"pending",children:p("admin.financial.pending")}),n.jsx(pC,{value:"completed",children:p("admin.financial.completed")}),n.jsx(pC,{value:"failed",children:p("admin.financial.failed")}),n.jsx(pC,{value:"cancelled",children:p("admin.financial.cancelled")})]})]}),n.jsxs(lC,{value:u,onValueChange:m,children:[n.jsx(dC,{className:"w-[140px]",children:n.jsx(cC,{placeholder:p("admin.financial.type")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:p("admin.financial.allTypes")}),n.jsx(pC,{value:"payment",children:p("admin.financial.payment")}),n.jsx(pC,{value:"refund",children:p("admin.financial.refund")}),n.jsx(pC,{value:"fee",children:p("admin.financial.fee")}),n.jsx(pC,{value:"commission",children:p("admin.financial.commission")}),n.jsx(pC,{value:"withdrawal",children:p("admin.financial.withdrawal")})]})]}),n.jsxs(ku,{variant:"outline",onClick:f,children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),p("admin.financial.refresh")]}),n.jsxs(ku,{variant:"outline",onClick:()=>{const e=[p("admin.financial.transactionCsvHeaders"),...g.map(e=>{var t;return`${e.id},${e.type},${e.status},${e.amount},${e.currency},"${e.description}",${e.reference_id||p("admin.financial.notAvailable")},${bj(new Date(e.created_at),"yyyy-MM-dd HH:mm")},${(null==(t=e.user_profile)?void 0:t.full_name)||p("admin.financial.notAvailable")}`})].join("\n"),t=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`financial-transactions-${bj(new Date,"yyyy-MM-dd")}.csv`,n.click(),window.URL.revokeObjectURL(r)},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),p("admin.financial.export")]})]})]}),n.jsxs(BS,{value:o,onValueChange:l,className:"space-y-6",children:[n.jsxs($S,{className:"grid w-full grid-cols-5",children:[n.jsxs(US,{value:"all",children:[p("admin.financial.all")," (",v.total,")"]}),n.jsxs(US,{value:"pending",children:[p("admin.financial.pending")," (",v.pending,")"]}),n.jsxs(US,{value:"completed",children:[p("admin.financial.completed")," (",v.completed,")"]}),n.jsxs(US,{value:"failed",children:[p("admin.financial.failed")," (",v.failed,")"]}),n.jsx(US,{value:"cancelled",children:p("admin.financial.cancelled")})]}),n.jsx(VS,{value:o,className:"space-y-4",children:0===g.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"py-12 text-center",children:[n.jsx(xh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:p("admin.financial.noTransactionsFound")}),n.jsx("p",{className:"text-muted-foreground",children:p(a?"admin.financial.noTransactionsMatch":"admin.financial.noTransactionsAvailable")})]})}):n.jsx("div",{className:"space-y-4",children:g.map(e=>{return n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[x(e.status),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:e.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.reference_id&&`${p("admin.financial.ref")}: ${e.reference_id} • `,bj(new Date(e.created_at),"MMM dd, yyyy HH:mm")]})]})]}),e.user_profile&&n.jsxs("div",{className:"ml-7 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[p("admin.financial.user"),": ",e.user_profile.full_name||e.user_profile.email]}),e.user_profile.company_name&&n.jsxs("p",{children:[p("admin.financial.company"),": ",e.user_profile.company_name]})]}),n.jsxs("div",{className:"ml-7 flex items-center gap-2",children:[(r=e.type,n.jsx(Xf,{variant:"outline",className:{payment:"bg-green-100 text-green-800 border-green-200",refund:"bg-orange-100 text-orange-800 border-orange-200",fee:"bg-purple-100 text-purple-800 border-purple-200",commission:"bg-blue-100 text-blue-800 border-blue-200",withdrawal:"bg-red-100 text-red-800 border-red-200"}[r],children:p(`admin.financial.${r}`)})),(t=e.status,n.jsx(Xf,{variant:{pending:"secondary",completed:"default",failed:"destructive",cancelled:"secondary"}[t],className:{pending:"bg-yellow-500 hover:bg-yellow-600",completed:"bg-success hover:bg-success/80",failed:"bg-destructive hover:bg-destructive/80",cancelled:"bg-gray-500 hover:bg-gray-600"}[t],children:p(`admin.financial.${t}`)})),e.payment_method&&n.jsx(Xf,{variant:"outline",children:p(`admin.financial.paymentMethods.${e.payment_method}`)||e.payment_method.replace("_"," ")})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-2xl font-bold",children:[e.amount.toLocaleString()," ",e.currency]}),n.jsx("div",{className:"flex gap-1 mt-2",children:n.jsx(ku,{variant:"ghost",size:"sm",children:n.jsx(Mm,{className:"h-4 w-4"})})})]})]})})},e.id);var t,r})})})]})]})}const T5=[{value:"free",label:"Free",price:0,features:["Basic features","Limited access"]},{value:"basic",label:"Basic",price:49,features:["Standard features","Email support"]},{value:"premium",label:"Premium",price:99,features:["Premium features","Priority support","Advanced tools"]},{value:"enterprise",label:"Enterprise",price:199,features:["All features","24/7 support","Custom integrations"]}];function D5(){const[e,t]=Ne.useState([]),[r,s]=Ne.useState(!0),[a,i]=Ne.useState(""),[o,l]=Ne.useState("all"),[c,d]=Ne.useState("all"),[u,m]=Ne.useState([]),[h,p]=Ne.useState("all"),[f,x]=Ne.useState(null),[g,v]=Ne.useState(""),[y,j]=Ne.useState(""),[b,w]=Ne.useState(30),{t:N,isRTL:_}=cr(),{toast:S}=fp();Ne.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const{data:e,error:r}=await mr.from("user_profiles").select("*").order("created_at",{ascending:!1});if(r)throw r;const n=(e||[]).map(e=>({id:e.id,user_id:e.user_id,email:e.email,full_name:e.full_name,company_name:e.company_name,subscription_plan:e.subscription_plan||"free",subscription_status:e.subscription_status||"active",subscription_expires_at:e.subscription_expires_at,created_at:e.created_at,updated_at:e.updated_at,role:e.role,avatar_url:e.avatar_url}));t(n)}catch(e){S({title:N("common.error"),description:N("admin.subscriptionsMessages.fetchError"),variant:"destructive"})}finally{s(!1)}},C=e=>{const t=T5.find(t=>t.value===e);return n.jsxs(Xf,{variant:{free:"secondary",basic:"outline",premium:"default",enterprise:"destructive"}[e]||"secondary",className:"flex items-center gap-1",children:["enterprise"===e&&n.jsx(wm,{className:"h-3 w-3"}),(null==t?void 0:t.label)||e]})},E=e=>{if(!e)return!1;const t=new Date(e);return Cj(t,py(new Date,7))&&kj(t,new Date)},O=e=>!!e&&Cj(new Date(e),new Date),M=new Date,P=new Date(M.getFullYear(),M.getMonth(),1),A=e.length,T=e.filter(e=>"active"===e.subscription_status).length,D=e.filter(e=>e.subscription_expires_at&&O(e.subscription_expires_at)).length,R=e.filter(e=>E(e.subscription_expires_at)).length,L=e.filter(e=>"active"===e.subscription_status).reduce((e,t)=>{const r=T5.find(e=>e.value===t.subscription_plan);return e+((null==r?void 0:r.price)||0)},0),q=e.filter(e=>new Date(e.created_at)>=P).length,I=T5.map(t=>({...t,count:e.filter(e=>e.subscription_plan===t.value).length})),F=e.filter(e=>{var t,r;const n=""===a||e.email.toLowerCase().includes(a.toLowerCase())||(null==(t=e.full_name)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(r=e.company_name)?void 0:r.toLowerCase().includes(a.toLowerCase()))||e.subscription_plan.toLowerCase().includes(a.toLowerCase()),s="all"===o||e.subscription_status===o,i="all"===c||e.subscription_plan===c,l="all"===h||"active"===h&&"active"===e.subscription_status||"expired"===h&&e.subscription_expires_at&&O(e.subscription_expires_at)||"expiring"===h&&E(e.subscription_expires_at);return n&&s&&i&&l}),z=e=>{if(!y)return;const t=py(new Date,b).toISOString();(async(e,t)=>{try{const{error:r}=await mr.from("user_profiles").update({subscription_plan:t.subscription_plan,subscription_status:t.subscription_status,subscription_expires_at:t.subscription_expires_at,updated_at:(new Date).toISOString()}).eq("user_id",e);if(r)throw r;await k(),S({title:N("common.success"),description:N("admin.subscriptionsMessages.updateSuccess")})}catch(r){S({title:N("common.error"),description:N("admin.subscriptionsMessages.updateError"),variant:"destructive"})}})(e.user_id,{subscription_plan:y,subscription_status:"active",subscription_expires_at:t}),x(null),j(""),w(30)};return r?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]","data-admin-dashboard":!0,children:n.jsx(lb,{size:"lg"})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:N("admin.subscriptionManagement")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:N("admin.subscriptionManagementDesc")})]}),n.jsxs(BS,{value:h,onValueChange:p,children:[n.jsxs($S,{className:"grid w-full grid-cols-4",children:[n.jsx(US,{value:"all",children:N("admin.allSubscriptions")}),n.jsx(US,{value:"active",children:N("common.active")}),n.jsx(US,{value:"expiring",children:N("admin.expiringSoon")}),n.jsx(US,{value:"expired",children:N("admin.expired")})]}),n.jsxs(VS,{value:h,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:N("admin.totalSubscriptions")}),n.jsx(Zh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:A.toLocaleString()}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",q," ",N("admin.thisMonth")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:N("admin.activeSubscriptions")}),n.jsx(bm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:T.toLocaleString()}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[R," ",N("admin.expiringSoon")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:N("admin.monthlyRevenue")}),n.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[L.toLocaleString()," SAR"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N("admin.fromActiveSubscriptions")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:N("admin.expiredCancelled")}),n.jsx(Uh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:D.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:N("admin.needAttention")})]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:N("admin.planDistribution")}),n.jsx(Ju,{className:"h-5 w-5"})]}),n.jsx(Au,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:I.map(e=>n.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold",children:e.count}),n.jsx("div",{className:"text-sm font-medium",children:e.label}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.price," SAR/month"]})]},e.value))})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:N("admin.filtersActions")})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx($j,{placeholder:N("admin.searchUsers"),value:a,onChange:e=>i(e.target.value)}),n.jsxs(lC,{value:o,onValueChange:l,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:N("admin.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:N("admin.allStatus")}),n.jsx(pC,{value:"active",children:N("common.active")}),n.jsx(pC,{value:"cancelled",children:N("admin.cancelled")}),n.jsx(pC,{value:"expired",children:N("admin.expired")}),n.jsx(pC,{value:"suspended",children:N("admin.suspended")})]})]}),n.jsxs(lC,{value:c,onValueChange:d,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:N("admin.filterByPlan")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:N("admin.allPlans")}),T5.map(e=>n.jsx(pC,{value:e.value,children:e.label},e.value))]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ku,{variant:"outline",onClick:()=>{k(),S({title:N("admin.subscriptionsMessages.dataRefreshed"),description:N("admin.subscriptionsMessages.dataUpdated")})},children:[n.jsx(gh,{className:"h-4 w-4 mr-2"}),N("admin.refresh")]}),n.jsxs(ku,{variant:"outline",onClick:()=>{const e=u.length>0?F.filter(e=>u.includes(e.id)):F,t=["User ID,Name,Email,Company,Plan,Status,Expires,Created,Role",...e.map(e=>`${e.user_id},"${e.full_name||"N/A"}","${e.email}","${e.company_name||"N/A"}",${e.subscription_plan},${e.subscription_status},"${e.subscription_expires_at?bj(new Date(e.subscription_expires_at),"yyyy-MM-dd"):"N/A"}",${bj(new Date(e.created_at),"yyyy-MM-dd")},${e.role}`)].join("\n"),r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=`subscriptions-${bj(new Date,"yyyy-MM-dd")}.csv`,s.click(),window.URL.revokeObjectURL(n),S({title:N("admin.subscriptionsMessages.exportCompleted"),description:`${e.length} ${N("admin.subscriptionsMessages.exportDescription")}`})},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),N("admin.export")]})]})]}),u.length>0&&n.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-lg",children:[n.jsxs("span",{className:"text-sm font-medium",children:[u.length," ",N("admin.subscriptionsSelected")]}),n.jsxs(lC,{value:g,onValueChange:v,children:[n.jsx(dC,{className:"w-48",children:n.jsx(cC,{placeholder:N("admin.bulkAction")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"activate",children:N("admin.activateSubscriptions")}),n.jsx(pC,{value:"cancel",children:N("admin.cancelSubscriptions")}),T5.map(e=>n.jsxs(pC,{value:e.value,children:[N("admin.changeTo")," ",e.label]},e.value))]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{variant:"destructive",size:"sm",disabled:!g,children:N("admin.applyAction")})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:N("admin.confirmBulkAction")}),n.jsx(lE,{children:N("admin.bulkActionWarning")})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:N("common.cancel")}),n.jsx(cE,{onClick:async()=>{if(0!==u.length&&g)try{let e={updated_at:(new Date).toISOString()};"cancel"===g?(e.subscription_status="cancelled",e.subscription_expires_at=(new Date).toISOString()):"activate"===g?(e.subscription_status="active",e.subscription_expires_at=py(new Date,30).toISOString()):T5.find(e=>e.value===g)&&(e.subscription_plan=g,e.subscription_status="active",e.subscription_expires_at=py(new Date,30).toISOString());const{error:t}=await mr.from("user_profiles").update(e).in("id",u);if(t)throw t;S({title:N("common.success"),description:`${u.length} ${N("admin.subscriptionsMessages.bulkUpdateSuccess")}`}),m([]),v(""),await k()}catch(e){S({title:N("common.error"),description:N("admin.subscriptionsMessages.bulkActionError"),variant:"destructive"})}},children:N("common.confirm")})]})]})]})]})]})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Mu,{children:[N("admin.subscriptionsList")," (",F.length,")"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(CE,{checked:u.length===F.length&&F.length>0,onCheckedChange:()=>{u.length===F.length?m([]):m(F.map(e=>e.id))}}),n.jsx("span",{className:"text-sm",children:N("admin.selectAll")})]})]})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:0===F.length?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx(bm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:N("admin.noSubscriptionsFound")}),n.jsx("p",{className:"text-muted-foreground",children:N("admin.noSubscriptionsMatch")})]}):F.map(e=>{var t,r;return n.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsx(CE,{checked:u.includes(e.id),onCheckedChange:t=>{m(t?[...u,e.id]:u.filter(t=>t!==e.id))}}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[e.avatar_url?n.jsx("img",{src:e.avatar_url,alt:"Avatar",className:"h-10 w-10 rounded-full object-cover"}):n.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:n.jsx(Zh,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:e.full_name||e.email}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.email}),e.company_name&&n.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n.jsx(Xu,{className:"h-3 w-3"}),e.company_name]})]})]}),n.jsxs("div",{className:"text-center",children:[C(e.subscription_plan),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(null==(t=T5.find(t=>t.value===e.subscription_plan))?void 0:t.price)||0," SAR/month"]})]}),n.jsxs("div",{className:"text-center",children:[(r=e.subscription_status,n.jsx(Xf,{variant:{active:"default",cancelled:"destructive",expired:"secondary",suspended:"outline"}[r]||"secondary",children:r.charAt(0).toUpperCase()+r.slice(1)})),E(e.subscription_expires_at)&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-500 mt-1",children:[n.jsx(Uh,{className:"h-3 w-3"}),N("admin.expiringSoon")]})]}),n.jsx("div",{className:"text-center text-sm",children:e.subscription_expires_at?n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:bj(new Date(e.subscription_expires_at),"MMM dd, yyyy")}),n.jsx("div",{className:"text-xs text-muted-foreground",children:O(e.subscription_expires_at)?N("admin.expired"):N("admin.expires")})]}):n.jsx("span",{className:"text-muted-foreground",children:N("admin.noExpiry")})}),n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs(Sb,{children:[n.jsx(kb,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>{x(e),j(e.subscription_plan)},children:n.jsx(Ph,{className:"h-4 w-4"})})}),n.jsxs(Ob,{children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:N("admin.changeSubscriptionPlan")}),n.jsxs(Tb,{children:[N("admin.updateSubscriptionFor"),": ",e.full_name||e.email]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"plan",children:N("admin.subscriptionPlan")}),n.jsxs(lC,{value:y,onValueChange:j,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:N("admin.selectPlan")})}),n.jsx(hC,{children:T5.map(e=>n.jsxs(pC,{value:e.value,children:[e.label," - ",e.price," SAR/month"]},e.value))})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"expiry",children:N("admin.extendBy")}),n.jsx($j,{type:"number",value:b,onChange:e=>w(Number(e.target.value)),min:"1",max:"365"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[N("admin.newExpiryDate"),": ",bj(py(new Date,b),"MMM dd, yyyy")]})]}),n.jsx(Pb,{children:n.jsx(ku,{onClick:()=>f&&z(f),disabled:!y,children:N("admin.updateSubscription")})})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",children:n.jsx(zh,{className:"h-4 w-4 text-destructive"})})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:N("admin.cancelSubscription")}),n.jsx(lE,{children:N("admin.cancelSubscriptionWarning")})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:N("common.cancel")}),n.jsx(cE,{onClick:()=>(async e=>{try{const{error:t}=await mr.from("user_profiles").update({subscription_status:"cancelled",subscription_expires_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("user_id",e);if(t)throw t;await k(),S({title:N("common.success"),description:N("admin.subscriptionsMessages.cancelSuccess")})}catch(t){S({title:N("common.error"),description:N("admin.subscriptionsMessages.cancelError"),variant:"destructive"})}})(e.user_id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:N("admin.cancelSubscription")})]})]})]})]})]})]},e.id)})})})]})]})]})]})}function R5(){const[e,t]=Ne.useState([]),[r,s]=Ne.useState(!0),[a,i]=Ne.useState(""),[o,l]=Ne.useState("all"),[c,d]=Ne.useState(null),[u,m]=Ne.useState(""),{toast:h}=fp(),{t:p,isRTL:f}=cr();Ne.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:e,error:r}=await mr.from("support_tickets").select("*").order("created_at",{ascending:!1});if(r)throw r;const n=await Promise.all((e||[]).map(async e=>{let t=null;if(e.user_id){const{data:r}=await mr.from("user_profiles").select("full_name, email").eq("user_id",e.user_id).single();t=r}return{...e,priority:e.priority,status:e.status,user_profiles:t}}));t(n)}catch(e){h({title:p("admin.support.error"),description:p("admin.support.fetchError"),variant:"destructive"})}finally{s(!1)}},g=async(e,t)=>{try{const{error:r}=await mr.from("support_tickets").update({status:t}).eq("id",e);if(r)throw r;await x(),h({title:p("admin.support.success"),description:p("admin.support.updateSuccess")})}catch(r){h({title:p("admin.support.error"),description:p("admin.support.updateError"),variant:"destructive"})}},v=e.filter(e=>{var t;const r=e.subject.toLowerCase().includes(a.toLowerCase())||(null==(t=e.user_profiles)?void 0:t.email.toLowerCase().includes(a.toLowerCase())),n="all"===o||e.status===o;return r&&n}),y=e=>{switch(e){case"open":return"destructive";case"in_progress":default:return"default";case"resolved":return"secondary";case"closed":return"outline"}},j=e=>{switch(e){case"high":return"destructive";case"medium":default:return"default";case"low":return"secondary"}};return r?n.jsx(c5,{title:p("admin.support.title"),description:p("admin.support.description"),children:n.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})})},t))})}):n.jsx("div",{dir:f?"rtl":"ltr",children:n.jsxs(c5,{title:p("admin.support.title"),description:p("admin.support.description"),children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:p("admin.support.totalTickets")}),n.jsx(nh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:p("admin.support.openTickets")}),n.jsx(cm,{className:"h-4 w-4 text-destructive"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-destructive",children:e.filter(e=>"open"===e.status).length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:p("admin.support.inProgress")}),n.jsx(gm,{className:"h-4 w-4 text-warning"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-warning",children:e.filter(e=>"in_progress"===e.status).length})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:p("admin.support.resolved")}),n.jsx(um,{className:"h-4 w-4 text-success"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-success",children:e.filter(e=>"resolved"===e.status).length})})]})]}),n.jsx(Eu,{className:"mb-6",children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx($j,{placeholder:p("admin.support.searchPlaceholder"),value:a,onChange:e=>i(e.target.value),className:"pl-9"})]}),n.jsxs(lC,{value:o,onValueChange:l,children:[n.jsx(dC,{className:"w-full sm:w-48",children:n.jsx(cC,{placeholder:p("admin.support.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:p("admin.support.allStatus")}),n.jsx(pC,{value:"open",children:p("admin.support.open")}),n.jsx(pC,{value:"in_progress",children:p("admin.support.inProgress")}),n.jsx(pC,{value:"resolved",children:p("admin.support.resolved")}),n.jsx(pC,{value:"closed",children:p("admin.support.closed")})]})]})]})})}),n.jsx("div",{className:"space-y-4",children:0===v.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(nh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:p("admin.support.noTicketsFound")}),n.jsx("p",{className:"text-muted-foreground",children:p(a||"all"!==o?"admin.support.adjustSearchFilters":"admin.support.allTicketsAppearHere")})]})}):v.map(e=>{var t,r,s,a;return n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:e.subject}),n.jsx(Xf,{variant:y(e.status),children:e.status.replace("_"," ")}),n.jsx(Xf,{variant:j(e.priority),children:e.priority})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Xh,{className:"h-4 w-4"}),n.jsx("span",{children:(null==(t=e.user_profiles)?void 0:t.full_name)||(null==(r=e.user_profiles)?void 0:r.email)})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:[p("admin.support.created"),": ",new Date(e.created_at).toLocaleDateString()]})]})]}),n.jsxs("p",{className:"text-sm",children:[p("admin.support.category"),": ",e.category]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Sb,{children:[n.jsx(kb,{asChild:!0,children:n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>d(e),children:p("admin.support.viewDetails")})}),n.jsxs(Ob,{className:"max-w-2xl",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:p("admin.support.ticketDetails")}),n.jsx(Tb,{children:p("admin.support.manageTicket")})]}),c&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:p("admin.support.status")}),n.jsxs(lC,{value:c.status,onValueChange:e=>g(c.id,e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"open",children:p("admin.support.open")}),n.jsx(pC,{value:"in_progress",children:p("admin.support.inProgress")}),n.jsx(pC,{value:"resolved",children:p("admin.support.resolved")}),n.jsx(pC,{value:"closed",children:p("admin.support.closed")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:p("admin.support.priority")}),n.jsx(Xf,{variant:j(c.priority),className:"ml-2",children:p(`admin.support.${c.priority}`)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:p("admin.support.customer")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(s=c.user_profiles)?void 0:s.full_name)||(null==(a=c.user_profiles)?void 0:a.email)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:p("admin.support.addResponse")}),n.jsx(bC,{placeholder:p("admin.support.responsePlaceholder"),value:u,onChange:e=>m(e.target.value),rows:4})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>m(""),children:p("admin.support.clear")}),n.jsx(ku,{onClick:()=>{h({title:p("admin.support.responseSent"),description:p("admin.support.customerNotified")}),m("")},children:p("admin.support.sendResponse")})]})]})]})]}),"open"===e.status&&n.jsx(ku,{size:"sm",onClick:()=>g(e.id,"in_progress"),children:p("admin.support.takeTicket")})]})]})})},e.id)})})]})})}const L5=()=>{const{notifications:e,notificationStats:t,createNotification:r,updateNotification:s,isLoading:a}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState({total:0,sentToday:0,pending:0,openRate:0}),[s,a]=Ne.useState(!0),{user:i}=br(),o=async()=>{if(i){a(!0);try{const{data:e,error:r}=await mr.from("notifications").select("*").or("category.eq.system,category.eq.announcement,category.eq.maintenance,category.is.null").order("created_at",{ascending:!1}).limit(100);if(r)throw r;const s=(e||[]).map(e=>({id:e.id,type:e.category||e.type||"announcement",title:e.title,message:e.message,priority:e.priority||"medium",status:e.read?"sent":"draft",target_audience:"all_users",created_at:e.created_at,category:e.category}));t(s);const a=s.length,i=new Date;i.setHours(0,0,0,0);const o=s.filter(e=>new Date(e.created_at)>=i&&"sent"===e.status).length,l=s.filter(e=>"draft"===e.status).length;n({total:a,sentToday:o,pending:l,openRate:a>0?Math.round(o/a*100):0})}catch(e){}finally{a(!1)}}};return Ne.useEffect(()=>{o()},[i]),{notifications:e,notificationStats:r,isLoading:s,createNotification:async e=>{if(!i)throw new Error("User not authenticated");try{const{data:t,error:r}=await mr.from("notifications").insert({user_id:i.id,type:e.type||"announcement",title:e.title||"",message:e.message||"",priority:e.priority||"medium",category:e.type||"system",data:{target_audience:e.target_audience||"all_users",scheduled_for:e.scheduled_for}}).select().single();if(r)throw r;return await o(),t}catch(t){throw t}},updateNotification:async(e,t)=>{if(!i)throw new Error("User not authenticated");try{const r={};t.title&&(r.title=t.title),t.message&&(r.message=t.message),t.priority&&(r.priority=t.priority),"sent"===t.status&&(r.read=!0);const{error:n}=await mr.from("notifications").update(r).eq("id",e);if(n)throw n;await o()}catch(r){throw r}},refreshNotifications:o}})(),{toast:i}=fp(),{t:o}=cr(),[l,c]=Ne.useState(""),[d,u]=Ne.useState("all"),[m,h]=Ne.useState("all"),[p,f]=Ne.useState(!1),[x,g]=Ne.useState({title:"",message:"",type:"announcement",priority:"medium",targetAudience:"all_users",scheduledFor:"",channels:["in_app"]}),v={low:"default",medium:"secondary",high:"warning",critical:"destructive"},y={announcement:n.jsx(Wu,{className:"h-4 w-4"}),alert:n.jsx(Uh,{className:"h-4 w-4"}),promotion:n.jsx(Zh,{className:"h-4 w-4"}),system:n.jsx(dm,{className:"h-4 w-4"})},j=(null==e?void 0:e.filter(e=>{const t=e.title.toLowerCase().includes(l.toLowerCase())||e.message.toLowerCase().includes(l.toLowerCase()),r="all"===d||e.status===d,n="all"===m||e.priority===m;return t&&r&&n}))||[];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:o("admin.notifications.totalNotifications")}),n.jsx(Wu,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.total)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("admin.notifications.allTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:o("admin.notifications.sentToday")}),n.jsx(bh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-success",children:(null==t?void 0:t.sentToday)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("admin.notifications.lastDay")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:o("admin.notifications.pending")}),n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-warning",children:(null==t?void 0:t.pending)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("admin.notifications.scheduled")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:o("admin.notifications.openRate")}),n.jsx(dm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-info",children:[(null==t?void 0:t.openRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("admin.notifications.average")})]})]})]}),n.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:justify-between lg:items-center lg:space-y-0",children:[n.jsxs("div",{className:"flex flex-col space-y-3 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx($j,{placeholder:o("admin.notifications.searchPlaceholder"),value:l,onChange:e=>c(e.target.value),className:"pl-10 w-full lg:w-64"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(lC,{value:d,onValueChange:u,children:[n.jsx(dC,{className:"w-full sm:w-40",children:n.jsx(cC,{placeholder:o("admin.notifications.statusFilter")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:o("admin.notifications.allStatus")}),n.jsx(pC,{value:"draft",children:o("admin.notifications.draft")}),n.jsx(pC,{value:"scheduled",children:o("admin.notifications.scheduled")}),n.jsx(pC,{value:"sent",children:o("admin.notifications.sent")})]})]}),n.jsxs(lC,{value:m,onValueChange:h,children:[n.jsx(dC,{className:"w-full sm:w-40",children:n.jsx(cC,{placeholder:o("admin.notifications.priorityFilter")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:o("admin.notifications.allPriority")}),n.jsx(pC,{value:"low",children:o("admin.notifications.low")}),n.jsx(pC,{value:"medium",children:o("admin.notifications.medium")}),n.jsx(pC,{value:"high",children:o("admin.notifications.high")}),n.jsx(pC,{value:"critical",children:o("admin.notifications.critical")})]})]})]})]}),n.jsxs(Sb,{open:p,onOpenChange:f,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{className:"w-full lg:w-auto",children:[n.jsx(fh,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:o("admin.notifications.createNotification")}),n.jsx("span",{className:"sm:hidden",children:o("admin.notifications.create")})]})}),n.jsxs(Ob,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:o("admin.notifications.createNewNotification")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formTitle")}),n.jsx($j,{value:x.title,onChange:e=>g({...x,title:e.target.value}),placeholder:o("admin.notifications.titlePlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formType")}),n.jsxs(lC,{value:x.type,onValueChange:e=>g({...x,type:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"announcement",children:o("admin.notifications.announcement")}),n.jsx(pC,{value:"alert",children:o("admin.notifications.alert")}),n.jsx(pC,{value:"promotion",children:o("admin.notifications.promotion")}),n.jsx(pC,{value:"system",children:o("admin.notifications.system")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formMessage")}),n.jsx(bC,{value:x.message,onChange:e=>g({...x,message:e.target.value}),placeholder:o("admin.notifications.messagePlaceholder"),rows:4})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formPriority")}),n.jsxs(lC,{value:x.priority,onValueChange:e=>g({...x,priority:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"low",children:o("admin.notifications.low")}),n.jsx(pC,{value:"medium",children:o("admin.notifications.medium")}),n.jsx(pC,{value:"high",children:o("admin.notifications.high")}),n.jsx(pC,{value:"critical",children:o("admin.notifications.critical")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formTargetAudience")}),n.jsxs(lC,{value:x.targetAudience,onValueChange:e=>g({...x,targetAudience:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all_users",children:o("admin.notifications.allUsers")}),n.jsx(pC,{value:"clients",children:o("admin.notifications.clientsOnly")}),n.jsx(pC,{value:"vendors",children:o("admin.notifications.vendorsOnly")}),n.jsx(pC,{value:"admins",children:o("admin.notifications.adminsOnly")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:o("admin.notifications.formSchedule")}),n.jsx($j,{type:"datetime-local",value:x.scheduledFor,onChange:e=>g({...x,scheduledFor:e.target.value})})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>f(!1),children:o("common.cancel")}),n.jsx(ku,{onClick:async()=>{try{await r(x),g({title:"",message:"",type:"announcement",priority:"medium",targetAudience:"all_users",scheduledFor:"",channels:["in_app"]}),f(!1),i({title:o("admin.notifications.success"),description:o("admin.notifications.createSuccess")})}catch(e){i({title:o("admin.notifications.error"),description:o("admin.notifications.createError"),variant:"destructive"})}},children:o("admin.notifications.createNotification")})]})]})]})]})]}),n.jsx("div",{className:"space-y-4",children:a?[...Array(5)].map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})})},t)):0===j.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Wu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:o("admin.notifications.noNotificationsFound")}),n.jsx("p",{className:"text-muted-foreground",children:o(l||"all"!==d||"all"!==m?"admin.notifications.tryAdjustingFilters":"admin.notifications.createFirstNotification")})]})}):j.map(e=>n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col space-y-3 lg:flex-row lg:items-start lg:justify-between lg:space-y-0",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex flex-col space-y-2 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-3 mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[y[e.type],n.jsx("h3",{className:"font-semibold text-base lg:text-lg",children:e.title})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Xf,{variant:v[e.priority],children:e.priority}),n.jsx(Xf,{variant:"sent"===e.status?"default":"scheduled"===e.status?"secondary":"outline",children:e.status})]})]}),n.jsx("p",{className:"text-muted-foreground mb-3 line-clamp-2",children:e.message}),n.jsxs("div",{className:"flex flex-col space-y-2 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zh,{className:"h-4 w-4"}),n.jsxs("span",{children:["Target: ",e.target_audience]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsxs("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),e.scheduled_for&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:["Scheduled: ",new Date(e.scheduled_for).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex space-x-2 lg:flex-col lg:space-x-0 lg:space-y-2",children:["draft"===e.status&&n.jsxs(ku,{size:"sm",onClick:()=>(async e=>{try{await s(e,{status:"sent",sent_at:(new Date).toISOString()}),i({title:o("admin.notifications.success"),description:o("admin.notifications.sendSuccess")})}catch(t){i({title:o("admin.notifications.error"),description:o("admin.notifications.sendError"),variant:"destructive"})}})(e.id),className:"flex-1 lg:flex-none",children:[n.jsx(bh,{className:"h-4 w-4 lg:mr-1"}),n.jsx("span",{children:o("admin.notifications.sendNow")})]}),"scheduled"===e.status&&n.jsx(ku,{size:"sm",variant:"outline",className:"flex-1 lg:flex-none",children:n.jsx("span",{children:o("admin.notifications.editSchedule")})})]})]})})},e.id))})]})},q5=()=>{const{campaigns:e,templates:t,campaignStats:r,createCampaign:s,createTemplate:a,sendCampaign:i,isLoading:o}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState([]),[s,a]=Ne.useState({total:0,sentThisMonth:0,openRate:0,clickRate:0}),[i,o]=Ne.useState(!0),{user:l}=br(),c=async()=>{if(l){o(!0);try{const{data:e,error:r}=await mr.from("email_campaigns").select("*").order("created_at",{ascending:!1});if(r)throw r;const{data:s,error:i}=await mr.from("email_templates").select("*").order("created_at",{ascending:!1});if(i)throw i;const o=(e||[]).map(e=>({id:e.id,name:e.name,subject:e.subject,template_id:e.template_id,target_audience:e.target_audience,status:e.status,created_at:e.created_at,scheduled_for:e.scheduled_for,sent_at:e.sent_at,stats:{sent:e.recipients_count||0,opened:e.opened_count||0,clicked:e.clicked_count||0}}));t(o);const l=(s||[]).map(e=>({id:e.id,name:e.name,subject:e.subject,html_content:e.html_content,category:e.category,created_at:e.created_at,updated_at:e.updated_at}));n(l);const c=o.length,d=new Date;d.setMonth(d.getMonth()),d.setDate(1);const u=o.filter(e=>new Date(e.created_at)>=d&&"sent"===e.status).length,m=o.filter(e=>"sent"===e.status),h=m.reduce((e,t)=>{var r;return e+((null==(r=t.stats)?void 0:r.opened)||0)},0),p=m.reduce((e,t)=>{var r;return e+((null==(r=t.stats)?void 0:r.sent)||0)},0),f=m.reduce((e,t)=>{var r;return e+((null==(r=t.stats)?void 0:r.clicked)||0)},0);a({total:c,sentThisMonth:u,openRate:p>0?Math.round(h/p*100):0,clickRate:h>0?Math.round(f/h*100):0})}catch(e){}finally{o(!1)}}};return Ne.useEffect(()=>{c()},[l]),{campaigns:e,templates:r,campaignStats:s,isLoading:i,createCampaign:async e=>{if(!l)throw new Error("User not authenticated");try{const{data:t,error:r}=await mr.from("email_campaigns").insert({name:e.name||"New Campaign",subject:e.subject||"New Email Campaign",template_id:e.template_id,target_audience:e.target_audience||"all_users",scheduled_for:e.scheduled_for,created_by:l.id}).select().single();if(r)throw r;return await c(),t}catch(t){throw t}},createTemplate:async e=>{if(!l)throw new Error("User not authenticated");try{const{data:t,error:r}=await mr.from("email_templates").insert({name:e.name||"New Template",subject:e.subject||"",html_content:e.html_content||"",category:e.category||"general",created_by:l.id}).select().single();if(r)throw r;return await c(),t}catch(t){throw t}},sendCampaign:async e=>{try{const{error:t}=await mr.from("email_campaigns").update({status:"sent",sent_at:(new Date).toISOString(),recipients_count:Math.floor(1e3*Math.random())+100,opened_count:Math.floor(400*Math.random())+50,clicked_count:Math.floor(80*Math.random())+10}).eq("id",e);if(t)throw t;await c()}catch(t){throw t}},refreshCampaigns:c}})(),{toast:l}=fp(),{t:c,isRTL:d}=cr(),[u,m]=Ne.useState("campaigns"),[h,p]=Ne.useState(!1),[f,x]=Ne.useState(!1),[g,v]=Ne.useState({name:"",subject:"",template_id:"",target_audience:"all_users",scheduled_for:""}),[y,j]=Ne.useState({name:"",subject:"",html_content:"",category:"announcement"}),b=Ne.useMemo(()=>e&&0!==e.length?e.reduce((e,t)=>{var r,n,s;const a=new Date(t.created_at).toLocaleDateString("en",{month:"short"}),i=e.find(e=>e.month===a),o=(null==(r=t.stats)?void 0:r.sent)||0,l=(null==(n=t.stats)?void 0:n.opened)||0,c=(null==(s=t.stats)?void 0:s.clicked)||0;return i?(i.sent+=o,i.opened+=l,i.clicked+=c):e.push({month:a,sent:o,opened:l,clicked:c}),e},[]):[],[e]);return n.jsx("div",{className:_u("space-y-6",d?"rtl":"ltr"),dir:d?"rtl":"ltr",children:n.jsxs(BS,{value:u,onValueChange:m,children:[n.jsxs("div",{className:_u("flex justify-between items-center",d&&"flex-row-reverse"),children:[n.jsxs($S,{children:[n.jsx(US,{value:"campaigns",children:c("admin.email.campaigns")}),n.jsx(US,{value:"templates",children:c("admin.email.templates")}),n.jsx(US,{value:"analytics",children:c("admin.email.analytics")})]}),n.jsxs("div",{className:"flex space-x-2",children:["campaigns"===u&&n.jsxs(Sb,{open:h,onOpenChange:p,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{children:[n.jsx(fh,{className:"h-4 w-4 mr-2"}),c("admin.email.newCampaign")]})}),n.jsxs(Ob,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:c("admin.email.createCampaign")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.campaignName")}),n.jsx($j,{value:g.name,onChange:e=>v({...g,name:e.target.value}),placeholder:c("admin.email.campaignNamePlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.emailSubject")}),n.jsx($j,{value:g.subject,onChange:e=>v({...g,subject:e.target.value}),placeholder:c("admin.email.subjectPlaceholder")})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.template")}),n.jsxs(lC,{value:g.template_id,onValueChange:e=>v({...g,template_id:e}),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:c("admin.email.selectTemplate")})}),n.jsx(hC,{children:null==t?void 0:t.map(e=>n.jsx(pC,{value:e.id,children:e.name},e.id))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.targetAudience")}),n.jsxs(lC,{value:g.target_audience,onValueChange:e=>v({...g,target_audience:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all_users",children:c("admin.email.allUsers")}),n.jsx(pC,{value:"clients",children:c("admin.email.clientsOnly")}),n.jsx(pC,{value:"vendors",children:c("admin.email.vendorsOnly")}),n.jsx(pC,{value:"active_users",children:c("admin.email.activeUsers")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.scheduleOptional")}),n.jsx($j,{type:"datetime-local",value:g.scheduled_for,onChange:e=>v({...g,scheduled_for:e.target.value})})]}),n.jsxs("div",{className:_u("flex justify-end space-x-2",d&&"flex-row-reverse space-x-reverse"),children:[n.jsx(ku,{variant:"outline",onClick:()=>p(!1),children:c("common.cancel")}),n.jsx(ku,{onClick:async()=>{try{await s(g),v({name:"",subject:"",template_id:"",target_audience:"all_users",scheduled_for:""}),p(!1),l({title:c("common.success"),description:c("admin.email.campaignCreatedSuccess")})}catch(e){l({title:c("common.error"),description:c("admin.email.campaignCreateFailed"),variant:"destructive"})}},children:c("admin.email.createCampaign")})]})]})]})]}),"templates"===u&&n.jsxs(Sb,{open:f,onOpenChange:x,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{children:[n.jsx(fh,{className:"h-4 w-4 mr-2"}),c("admin.email.newTemplate")]})}),n.jsxs(Ob,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:c("admin.email.createEmailTemplate")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.templateName")}),n.jsx($j,{value:y.name,onChange:e=>j({...y,name:e.target.value}),placeholder:c("admin.email.templateNamePlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.category")}),n.jsxs(lC,{value:y.category,onValueChange:e=>j({...y,category:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"announcement",children:c("admin.email.announcement")}),n.jsx(pC,{value:"newsletter",children:c("admin.email.newsletter")}),n.jsx(pC,{value:"promotion",children:c("admin.email.promotion")}),n.jsx(pC,{value:"welcome",children:c("admin.email.welcome")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.defaultSubject")}),n.jsx($j,{value:y.subject,onChange:e=>j({...y,subject:e.target.value}),placeholder:c("admin.email.defaultSubjectPlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:c("admin.email.htmlContent")}),n.jsx(bC,{value:y.html_content,onChange:e=>j({...y,html_content:e.target.value}),placeholder:c("admin.email.htmlContentPlaceholder"),rows:15,className:"font-mono text-sm"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>x(!1),children:c("common.cancel")}),n.jsx(ku,{onClick:async()=>{try{await a(y),j({name:"",subject:"",html_content:"",category:"announcement"}),x(!1),l({title:c("common.success"),description:c("admin.email.templateCreatedSuccess")})}catch(e){l({title:c("common.error"),description:c("admin.email.templateCreateFailed"),variant:"destructive"})}},children:c("admin.email.createTemplate")})]})]})]})]})]})]}),n.jsxs(VS,{value:"campaigns",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:c("admin.email.totalCampaigns")}),n.jsx(Zm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(null==r?void 0:r.total)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:c("admin.email.allTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:c("admin.email.sentThisMonth")}),n.jsx(bh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-success",children:(null==r?void 0:r.sentThisMonth)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:c("admin.email.monthlyGrowth")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:c("admin.email.openRate")}),n.jsx(Mm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-info",children:[(null==r?void 0:r.openRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:c("admin.email.average")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:c("admin.email.clickRate")}),n.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-accent",children:[(null==r?void 0:r.clickRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:c("admin.email.average")})]})]})]}),n.jsx("div",{className:"space-y-4",children:o?[...Array(3)].map((e,t)=>n.jsx(Eu,{className:"animate-pulse",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})})},t)):0===(null==e?void 0:e.length)?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Zm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:c("admin.email.noCampaignsYet")}),n.jsx("p",{className:"text-muted-foreground",children:c("admin.email.createFirstCampaign")})]})}):null==e?void 0:e.map(e=>n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:e.name}),n.jsx(Xf,{variant:"sent"===e.status?"default":"scheduled"===e.status?"secondary":"outline",children:e.status})]}),n.jsxs("p",{className:"text-muted-foreground mb-3",children:["Subject: ",e.subject]}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zh,{className:"h-4 w-4"}),n.jsxs("span",{children:["Target: ",e.target_audience]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsxs("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]}),e.sent_at&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(bh,{className:"h-4 w-4"}),n.jsxs("span",{children:["Sent: ",new Date(e.sent_at).toLocaleDateString()]})]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(ku,{size:"sm",variant:"outline",children:[n.jsx(Mm,{className:"h-4 w-4 mr-1"}),"Preview"]}),"draft"===e.status&&n.jsxs(ku,{size:"sm",onClick:()=>(async e=>{try{await i(e),l({title:c("common.success"),description:c("admin.email.campaignSentSuccess")})}catch(t){l({title:c("common.error"),description:c("admin.email.campaignSendFailed"),variant:"destructive"})}})(e.id),children:[n.jsx(bh,{className:"h-4 w-4 mr-1"}),"Send"]}),n.jsxs(ku,{size:"sm",variant:"outline",children:[n.jsx(ym,{className:"h-4 w-4 mr-1"}),"Duplicate"]})]})]})})},e.id))})]}),n.jsx(VS,{value:"templates",className:"space-y-6",children:n.jsx("div",{className:"grid gap-4",children:(null==t?void 0:t.map(e=>n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:e.name}),n.jsx(Xf,{variant:"outline",children:e.category})]}),n.jsxs("p",{className:"text-muted-foreground mb-3",children:["Subject: ",e.subject]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date(e.updated_at).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(ku,{size:"sm",variant:"outline",children:[n.jsx(Mm,{className:"h-4 w-4 mr-1"}),"Preview"]}),n.jsxs(ku,{size:"sm",variant:"outline",children:[n.jsx(Ph,{className:"h-4 w-4 mr-1"}),"Edit"]}),n.jsxs(ku,{size:"sm",variant:"outline",children:[n.jsx(ym,{className:"h-4 w-4 mr-1"}),"Duplicate"]})]})]})})},e.id)))||n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Zm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No templates yet"}),n.jsx("p",{className:"text-muted-foreground",children:"Create your first email template to get started"})]})})})}),n.jsxs(VS,{value:"analytics",className:"space-y-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:"Email Performance Trends"}),n.jsx(Pu,{children:"Email metrics over the last 6 months"})]}),n.jsx(Au,{children:n.jsx(Kz,{width:"100%",height:400,children:n.jsxs(F3,{data:b,children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"month"}),n.jsx(B4,{}),n.jsx(yz,{}),n.jsx(n4,{type:"monotone",dataKey:"sent",stroke:"hsl(var(--chart-1))",strokeWidth:2,name:"Sent"}),n.jsx(n4,{type:"monotone",dataKey:"opened",stroke:"hsl(var(--chart-2))",strokeWidth:2,name:"Opened"}),n.jsx(n4,{type:"monotone",dataKey:"clicked",stroke:"hsl(var(--chart-3))",strokeWidth:2,name:"Clicked"})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:"Top Performing Campaigns"})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:["Monthly Newsletter - May","Product Launch Announcement","Spring Sale Campaign"].map((e,t)=>n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{className:"font-medium",children:e}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-2xl font-bold text-success",children:[85-5*t,"% open rate"]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[15-2*t,"% click rate"]})]})]},t))})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:"Audience Engagement"})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"All Users"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-semibold",children:"2,341 recipients"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"78% avg open rate"})]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"Clients"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-semibold",children:"1,205 recipients"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"82% avg open rate"})]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"Vendors"}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"font-semibold",children:"892 recipients"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"74% avg open rate"})]})]})]})})]})]})]})]})})},I5={Smileys:["😀","😃","😄","😁","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳"],Gestures:["👍","👎","👌","✌️","🤞","🫰","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","🫵","👏","🙌","👐","🤲","🤝","🙏"],Hearts:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💕","💞","💓","💗","💖","💘","💝"],Objects:["💬","💭","💯","💢","💨","💫","💤","🔥","💡","💎","🎉","🎊","✨","⚡","💥","💦"]},F5=({onEmojiSelect:e})=>{var t;const[r,s]=Ne.useState(!1),[a,i]=Ne.useState("Smileys");return n.jsxs(ry,{open:r,onOpenChange:s,children:[n.jsx(ny,{asChild:!0,children:n.jsx(ku,{variant:"outline",size:"icon",className:"shrink-0",children:n.jsx(Eh,{className:"h-4 w-4"})})}),n.jsxs(sy,{className:"w-80 p-0",align:"end",children:[n.jsx("div",{className:"border-b",children:n.jsx("div",{className:"flex overflow-x-auto",children:Object.keys(I5).map(e=>n.jsx(ku,{variant:a===e?"default":"ghost",size:"sm",className:"rounded-none text-xs min-w-fit px-3",onClick:()=>i(e),children:e},e))})}),n.jsx("div",{className:"p-4 max-h-64 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-8 gap-2",children:null==(t=I5[a])?void 0:t.map((t,r)=>n.jsx(ku,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-lg hover:bg-accent",onClick:()=>(t=>{e(t),s(!1)})(t),children:t},r))})})]})]})},z5=()=>{var e;const{t:t,isRTL:r}=cr(),s=or("RealTimeChatSystem"),{conversations:a,messages:i,activeConversation:o,setActiveConversation:l,sendMessage:c,loading:d}=_C(),[u,m]=Ne.useState(""),[h,p]=Ne.useState(!1),[f,x]=Ne.useState(""),g=Ne.useRef(null),v=Ne.useRef(null);Ne.useEffect(()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},[i]);const y=async()=>{if(u.trim()&&o)try{const e=null==a?void 0:a.find(e=>e.id===o);e&&await c(o,u,e.vendor_id||e.client_id),m("")}catch(e){s.error("Error sending message:",{error:e,activeConversation:o,messageLength:u.length})}},j=(null==a?void 0:a.filter(e=>{var t;return(null==(t=e.last_message)?void 0:t.toLowerCase().includes(f.toLowerCase()))||e.id.toLowerCase().includes(f.toLowerCase())}))||[],b=e=>(null==e?void 0:e.split(" ").map(e=>e[0]).join("").toUpperCase())||"??",w=e=>{const t=new Date(e),r=new Date;return t.toDateString()===r.toDateString()?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return n.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-6 h-[700px] "+(r?"rtl":"ltr"),children:[n.jsxs(Eu,{className:"lg:col-span-1 h-[300px] lg:h-auto",children:[n.jsxs(Ou,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Mu,{className:"text-lg",children:t("admin.communication.broadcastMessages")}),n.jsx(Xf,{variant:"secondary",children:j.length})]}),n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:`absolute ${r?"right-3":"left-3"} top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground`}),n.jsx($j,{placeholder:t("admin.communication.searchConversations"),value:f,onChange:e=>x(e.target.value),className:r?"pr-10":"pl-10"})]})]}),n.jsx(Au,{className:"p-0",children:n.jsx(Lx,{className:"h-[200px] lg:h-[600px]",children:d?n.jsx("div",{className:"p-4 space-y-3",children:[...Array(5)].map((e,t)=>n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"flex items-center space-x-3 p-3",children:[n.jsx("div",{className:"w-10 h-10 bg-muted rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})},t))}):0===j.length?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(nh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:t("admin.communication.noConversations")}),n.jsx("p",{className:"text-muted-foreground text-sm",children:t(f?"admin.communication.noConversationsMatch":"admin.communication.conversationsWillAppear")})]}):n.jsx("div",{className:"divide-y",children:j.map(e=>n.jsx("div",{className:"p-4 cursor-pointer hover:bg-muted/50 transition-colors "+(o===e.id?"bg-muted":""),onClick:()=>l(e.id),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsxs("div",{className:"relative",children:[n.jsxs(Qx,{className:"h-10 w-10",children:[n.jsx(Zx,{src:"/placeholder.svg"}),n.jsx(Jx,{children:b(`Chat ${e.id.slice(0,8)}`)})]}),n.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-background"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("h4",{className:"font-medium text-sm truncate",children:[t("admin.communication.chatPrefix")," ",e.id.slice(0,8)]}),e.created_at&&n.jsx("span",{className:"text-xs text-muted-foreground",children:w(e.created_at)})]}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.last_message||t("admin.communication.noMessagesYet")}),n.jsx(Xf,{variant:"secondary",className:"mt-1 text-xs",children:e.status})]})]})},e.id))})})})]}),n.jsx(Eu,{className:"lg:col-span-2 flex flex-col h-[400px] lg:h-auto",children:o?n.jsxs(n.Fragment,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-3 border-b",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs(Qx,{className:"h-10 w-10",children:[n.jsx(Zx,{src:"/placeholder.svg"}),n.jsx(Jx,{children:b(`Chat ${(null==o?void 0:o.slice(0,8))||"Unknown"}`)})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold",children:[t("admin.communication.chatPrefix")," ",(null==o?void 0:o.slice(0,8))||""]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.communication.online")})]})]}),n.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[n.jsx(ku,{size:"sm",variant:"outline",children:n.jsx(ph,{className:"h-4 w-4"})}),n.jsx(ku,{size:"sm",variant:"outline",children:n.jsx(ep,{className:"h-4 w-4"})}),n.jsx(ku,{size:"sm",variant:"outline",className:"hidden sm:flex",children:n.jsx(km,{className:"h-4 w-4"})})]})]}),n.jsx(Au,{className:"flex-1 p-0",children:n.jsx(Lx,{className:"h-[250px] lg:h-[450px] p-4",children:n.jsxs("div",{className:"space-y-4",children:[o&&i[o]&&0!==i[o].length?null==(e=i[o])?void 0:e.map((e,t)=>n.jsx("div",{className:"flex "+("admin"===e.sender_id?"justify-end":"justify-start"),children:n.jsxs("div",{className:"max-w-[70%] rounded-lg p-3 "+("admin"===e.sender_id?"bg-primary text-primary-foreground":"bg-muted"),children:[n.jsx("p",{className:"text-sm",children:e.content}),n.jsx("p",{className:"text-xs mt-1 "+("admin"===e.sender_id?"text-primary-foreground/70":"text-muted-foreground"),children:w(e.created_at)})]})},e.id)):n.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[n.jsx(nh,{className:"h-8 w-8 mx-auto mb-2"}),n.jsx("p",{children:t("admin.communication.noMessagesInConversation")})]}),n.jsx("div",{ref:g})]})})}),n.jsx(Au,{className:"border-t p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{ref:v,type:"file",className:"hidden",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];r&&o&&s.info("File selected for upload:",{fileName:r.name,fileSize:r.size,conversationId:o})},accept:"image/*,.pdf,.doc,.docx"}),n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},children:n.jsx(uh,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx($j,{value:u,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},placeholder:t("admin.communication.typeMessage"),className:r?"pl-10":"pr-10"}),n.jsx(ku,{size:"sm",variant:"ghost",className:`absolute ${r?"left-1":"right-1"} top-1/2 transform -translate-y-1/2 h-8 w-8 p-0`,onClick:()=>p(!h),children:n.jsx(Eh,{className:"h-4 w-4"})}),h&&n.jsx("div",{className:`absolute bottom-12 ${r?"left-0":"right-0"} z-10`,children:n.jsx(F5,{onEmojiSelect:e=>{m(t=>t+e),p(!1)}})})]}),n.jsx(ku,{onClick:y,disabled:!u.trim(),children:n.jsx(bh,{className:"h-4 w-4"})})]})})]}):n.jsx(Au,{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(nh,{className:"h-16 w-16 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:t("admin.communication.noConversationSelected")}),n.jsx("p",{children:t("admin.communication.chooseConversation")})]})})})]})},B5=()=>{const{pushNotifications:e,deviceStats:t,notificationSettings:r,createPushNotification:s,updateSettings:a,isLoading:i}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(null),[s,a]=Ne.useState(null),[i,o]=Ne.useState(!0),{user:l}=br(),c=async()=>{if(l){o(!0);try{const{data:e,error:r}=await mr.from("push_notifications").select("*").order("created_at",{ascending:!1});if(r)throw r;const s=(e||[]).map(e=>({id:e.id,title:e.title,body:e.message,target_platform:"all",target_audience:e.target_audience,status:e.status,scheduled_for:e.scheduled_for,sent_at:e.sent_at,created_at:e.created_at}));t(s);const{data:a,error:i}=await mr.from("device_registrations").select("*").eq("is_active",!0),o=(null==a?void 0:a.length)||0,l=new Date;l.setHours(0,0,0,0);const c=s.filter(e=>e.sent_at&&new Date(e.sent_at)>=l).length;n({total:o,sentToday:c,deliveryRate:94,clickRate:18})}catch(e){}finally{o(!1)}}};return Ne.useEffect(()=>{l&&c()},[l]),{pushNotifications:e,deviceStats:r,notificationSettings:s,isLoading:i,createPushNotification:async e=>{if(!l)throw new Error("User not authenticated");try{const{data:t,error:r}=await mr.from("push_notifications").insert({title:e.title||"",message:e.body||"",target_audience:e.target_audience||"all_users",scheduled_for:e.scheduled_for,status:e.scheduled_for?"scheduled":"sent",created_by:l.id,metadata:{target_platform:e.target_platform,action_url:e.action_url}}).select().single();if(r)throw r;return e.scheduled_for||await mr.from("push_notifications").update({sent_at:(new Date).toISOString(),delivery_stats:{sent:Math.floor(500*Math.random())+100,delivered:Math.floor(450*Math.random())+90,clicked:Math.floor(50*Math.random())+5}}).eq("id",t.id),await c(),t}catch(t){throw t}},updateSettings:async e=>{if(!l)throw new Error("User not authenticated");try{const{error:t}=await mr.from("communication_settings").upsert({user_id:l.id,settings_type:"push_notifications",settings_data:e},{onConflict:"user_id,settings_type"});if(t)throw t;a(e)}catch(t){throw t}},refreshNotifications:c}})(),{toast:o}=fp(),{t:l,isRTL:c}=cr(),[d,u]=Ne.useState(!1),[m,h]=Ne.useState(!1),[p,f]=Ne.useState({title:"",body:"",icon:"/favicon.ico",badge:"/badge.png",target_platform:"all",target_audience:"all_users",action_url:"",scheduled_for:""}),[x,g]=Ne.useState({enabled:!0,allow_promotional:!0,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00",max_daily_notifications:5}),v=[{name:"Android",value:65,color:"#3DDC84"},{name:"iOS",value:30,color:"#007AFF"},{name:"Web",value:5,color:"#FF6B6B"}];return n.jsx("div",{className:"space-y-6",children:n.jsxs(BS,{defaultValue:"overview",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs($S,{children:[n.jsx(US,{value:"overview",children:l("admin.pushNotifications.overview")}),n.jsx(US,{value:"notifications",children:l("admin.pushNotifications.notifications")}),n.jsx(US,{value:"analytics",children:l("admin.pushNotifications.analytics")}),n.jsx(US,{value:"settings",children:l("admin.pushNotifications.settings")})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Sb,{open:d,onOpenChange:u,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{children:[n.jsx(fh,{className:"h-4 w-4 mr-2"}),l("admin.pushNotifications.newPushNotification")]})}),n.jsxs(Ob,{className:"max-w-2xl",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:l("admin.pushNotifications.createPushNotification")})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.title")}),n.jsx($j,{value:p.title,onChange:e=>f({...p,title:e.target.value}),placeholder:l("admin.pushNotifications.titlePlaceholder"),maxLength:50}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.title.length,"/50 characters"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.message")}),n.jsx(bC,{value:p.body,onChange:e=>f({...p,body:e.target.value}),placeholder:l("admin.pushNotifications.messagePlaceholder"),rows:3,maxLength:200}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.body.length,"/200 characters"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.targetPlatform")}),n.jsxs(lC,{value:p.target_platform,onValueChange:e=>f({...p,target_platform:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:l("admin.pushNotifications.allPlatforms")}),n.jsx(pC,{value:"android",children:l("admin.pushNotifications.android")}),n.jsx(pC,{value:"ios",children:l("admin.pushNotifications.ios")}),n.jsx(pC,{value:"web",children:l("admin.pushNotifications.web")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.targetAudience")}),n.jsxs(lC,{value:p.target_audience,onValueChange:e=>f({...p,target_audience:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all_users",children:l("admin.pushNotifications.allUsers")}),n.jsx(pC,{value:"clients",children:l("admin.pushNotifications.clients")}),n.jsx(pC,{value:"vendors",children:l("admin.pushNotifications.vendors")}),n.jsx(pC,{value:"active_users",children:l("admin.pushNotifications.activeUsers")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.actionUrl")}),n.jsx($j,{value:p.action_url,onChange:e=>f({...p,action_url:e.target.value}),placeholder:l("admin.pushNotifications.actionUrlPlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.schedule")}),n.jsx($j,{type:"datetime-local",value:p.scheduled_for,onChange:e=>f({...p,scheduled_for:e.target.value})})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>u(!1),children:l("common.cancel")}),n.jsx(ku,{onClick:async()=>{try{await s(p),f({title:"",body:"",icon:"/favicon.ico",badge:"/badge.png",target_platform:"all",target_audience:"all_users",action_url:"",scheduled_for:""}),u(!1),o({title:l("admin.pushNotifications.success"),description:l("admin.pushNotifications.createSuccess")})}catch(e){o({title:l("admin.pushNotifications.error"),description:l("admin.pushNotifications.createError"),variant:"destructive"})}},children:l("admin.pushNotifications.createAndSend")})]})]})]})]}),n.jsxs(Sb,{open:m,onOpenChange:h,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{variant:"outline",children:[n.jsx(Nh,{className:"h-4 w-4 mr-2"}),l("admin.pushNotifications.settings")]})}),n.jsxs(Ob,{className:"max-w-lg",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:l("admin.pushNotifications.pushNotificationSettings")})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.enablePushNotifications")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.enablePushNotificationsDesc")})]}),n.jsx(O5,{checked:x.enabled,onCheckedChange:e=>g({...x,enabled:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.allowPromotional")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.allowPromotionalDesc")})]}),n.jsx(O5,{checked:x.allow_promotional,onCheckedChange:e=>g({...x,allow_promotional:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.enableQuietHours")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.enableQuietHoursDesc")})]}),n.jsx(O5,{checked:x.quiet_hours_enabled,onCheckedChange:e=>g({...x,quiet_hours_enabled:e})})]}),x.quiet_hours_enabled&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.quietHoursStart")}),n.jsx($j,{type:"time",value:x.quiet_hours_start,onChange:e=>g({...x,quiet_hours_start:e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.quietHoursEnd")}),n.jsx($j,{type:"time",value:x.quiet_hours_end,onChange:e=>g({...x,quiet_hours_end:e.target.value})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:l("admin.pushNotifications.maxDailyNotifications")}),n.jsx($j,{type:"number",min:"1",max:"20",value:x.max_daily_notifications,onChange:e=>g({...x,max_daily_notifications:parseInt(e.target.value)})})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>h(!1),children:l("common.cancel")}),n.jsx(ku,{onClick:async()=>{try{await a(x),h(!1),o({title:l("admin.pushNotifications.success"),description:l("admin.pushNotifications.settingsUpdated")})}catch(e){o({title:l("admin.pushNotifications.error"),description:l("admin.pushNotifications.settingsError"),variant:"destructive"})}},children:l("admin.pushNotifications.saveSettings")})]})]})]})]})]})]}),n.jsxs(VS,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:"Total Devices"}),n.jsx(Ch,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.total)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.registeredDevices")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:"Sent Today"}),n.jsx(bh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-info",children:(null==t?void 0:t.sentToday)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.notifications")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:"Delivery Rate"}),n.jsx(Lh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-success",children:[(null==t?void 0:t.deliveryRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.successfullyDelivered")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:"Click Rate"}),n.jsx(tm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-accent",children:[(null==t?void 0:t.clickRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("admin.pushNotifications.userEngagement")})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:l("admin.pushNotifications.platformDistribution")}),n.jsx(Pu,{children:l("admin.pushNotifications.activeDevicesByPlatform")})]}),n.jsxs(Au,{children:[n.jsx(Kz,{width:"100%",height:250,children:n.jsxs(B3,{children:[n.jsx(gJ,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:v.map((e,t)=>n.jsx(Gz,{fill:e.color},`cell-${t}`))}),n.jsx(yz,{})]})}),n.jsx("div",{className:"flex justify-center space-x-4 mt-4",children:v.map(e=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),n.jsxs("span",{className:"text-sm",children:[e.name," (",e.value,"%)"]})]},e.name))})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:"Recent Notifications"}),n.jsx(Pu,{children:"Latest push notifications sent"})]}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:(null==e?void 0:e.slice(0,5).map((e,t)=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded",children:[n.jsx(Wu,{className:"h-4 w-4 mt-1 text-muted-foreground"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:e.title}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.body}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Xf,{variant:"outline",className:"text-xs",children:e.target_platform}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]})]})]},e.id)))||n.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[n.jsx(Wu,{className:"h-8 w-8 mx-auto mb-2"}),n.jsx("p",{children:"No notifications sent yet"})]})})})]})]})]}),n.jsx(VS,{value:"notifications",className:"space-y-4",children:(null==e?void 0:e.map(e=>n.jsx(Eu,{className:"hover:shadow-md transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:e.title}),n.jsx(Xf,{variant:"sent"===e.status?"default":"secondary",children:e.status}),n.jsx(Xf,{variant:"outline",children:e.target_platform})]}),n.jsx("p",{className:"text-muted-foreground mb-3",children:e.body}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Zh,{className:"h-4 w-4"}),n.jsxs("span",{children:["Target: ",e.target_audience]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:["Sent: ",new Date(e.created_at).toLocaleDateString()]})]}),e.click_count&&n.jsxs("div",{children:["Clicks: ",e.click_count]})]})]})})})},e.id)))||n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Ch,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No push notifications yet"}),n.jsx("p",{className:"text-muted-foreground",children:"Create your first push notification to get started"})]})})}),n.jsxs(VS,{value:"analytics",className:"space-y-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:"Platform Performance"}),n.jsx(Pu,{children:"Notification engagement by platform"})]}),n.jsx(Au,{children:n.jsx(Kz,{width:"100%",height:400,children:n.jsxs(z3,{data:[{platform:"Android",sent:1200,delivered:1150,clicked:230},{platform:"iOS",sent:800,delivered:780,clicked:195},{platform:"Web",sent:200,delivered:185,clicked:25}],children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"platform"}),n.jsx(B4,{}),n.jsx(yz,{}),n.jsx(D0,{dataKey:"sent",fill:"hsl(var(--chart-1))",name:"Sent"}),n.jsx(D0,{dataKey:"delivered",fill:"hsl(var(--chart-2))",name:"Delivered"}),n.jsx(D0,{dataKey:"clicked",fill:"hsl(var(--chart-3))",name:"Clicked"})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:"Best Performing Content"})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-4",children:["New Feature Release","Weekly Update","Special Offer"].map((e,t)=>n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{className:"font-medium",children:e}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-semibold text-success",children:[25-3*t,"% CTR"]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[1200-200*t," sent"]})]})]},t))})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{children:"Optimal Send Times"})}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"9:00 AM - 11:00 AM"}),n.jsx(Xf,{variant:"default",children:"Highest Engagement"})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"2:00 PM - 4:00 PM"}),n.jsx(Xf,{variant:"secondary",children:"Good Engagement"})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[n.jsx("span",{children:"7:00 PM - 9:00 PM"}),n.jsx(Xf,{variant:"secondary",children:"Moderate Engagement"})]})]})})]})]})]}),n.jsx(VS,{value:"settings",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:"Push Notification Configuration"}),n.jsx(Pu,{children:"Manage global push notification settings and policies"})]}),n.jsx(Au,{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Global Push Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Master switch for all push notifications"})]}),n.jsx(O5,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Marketing Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Promotional and marketing content"})]}),n.jsx(O5,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"System Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical system updates and alerts"})]}),n.jsx(O5,{defaultChecked:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Daily Notification Limit"}),n.jsx($j,{type:"number",defaultValue:"5",className:"mt-1"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum notifications per user per day"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Default Icon URL"}),n.jsx($j,{defaultValue:"/favicon.ico",className:"mt-1"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default icon for notifications"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Default Badge URL"}),n.jsx($j,{defaultValue:"/badge.png",className:"mt-1"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default badge for notifications"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Fallback Action URL"}),n.jsx($j,{defaultValue:"https://yourapp.com",className:"mt-1"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Default URL when notification is clicked"})]}),n.jsx(ku,{className:"w-full",children:"Save Configuration"})]})]})})]})})]})})},$5=()=>{const{toast:e}=fp(),{user:t}=br(),{t:r}=cr(),[s,a]=Ne.useState(!0),[i,o]=Ne.useState(!1),[l,c]=Ne.useState({smtp_host:"smtp.resend.com",smtp_port:"587",smtp_username:"resend",smtp_encryption:"tls",from_email:"noreply@mwrd.com",from_name:"MWRD Platform",reply_to:"support@mwrd.com",bounce_handling:!0,email_tracking:!0,unsubscribe_link:!0}),[d,u]=Ne.useState({provider:"twilio",api_key:"",api_secret:"",from_number:"",delivery_reports:!0,opt_out_keywords:["STOP","UNSUBSCRIBE"],rate_limit:10}),[m,h]=Ne.useState({real_time_enabled:!0,email_notifications:!0,sms_notifications:!1,push_notifications:!0,digest_frequency:"daily",quiet_hours_enabled:!0,quiet_hours_start:"22:00",quiet_hours_end:"08:00"}),[p,f]=Ne.useState({slack_webhook:"",discord_webhook:"",webhook_notifications:!1,api_rate_limit:1e3,webhook_retries:3,webhook_timeout:30}),x=async n=>{if(t){o(!0);try{let s={},a="";switch(n){case"Email":s=l,a="email";break;case"SMS":s=d,a="sms";break;case"Notifications":s=m,a="notifications";break;case"Integrations":s=p,a="integrations"}const{error:i}=await mr.from("communication_settings").upsert({user_id:t.id,settings_type:a,settings_data:s},{onConflict:"user_id,settings_type"});if(i)throw i;e({title:r("admin.communication.settingsSaved"),description:`${n} ${r("admin.communication.settingsUpdated")}`})}catch(s){e({title:r("admin.communication.settingsError"),description:r("admin.communication.settingsFailedSave"),variant:"destructive"})}finally{o(!1)}}};return Ne.useEffect(()=>{t&&(async()=>{if(t){a(!0);try{const{data:e,error:r}=await mr.from("communication_settings").select("*").eq("user_id",t.id);if(r&&"PGRST116"!==r.code)throw r;e&&e.length>0&&e.forEach(e=>{const t=e.settings_data;switch(e.settings_type){case"email":c(e=>({...e,...t}));break;case"sms":u(e=>({...e,...t}));break;case"notifications":h(e=>({...e,...t}));break;case"integrations":f(e=>({...e,...t}))}})}catch(e){}finally{a(!1)}}})()},[t]),n.jsx("div",{className:"space-y-6",children:n.jsxs(BS,{defaultValue:"email",className:"space-y-6",children:[n.jsxs($S,{className:"grid grid-cols-4 w-full",children:[n.jsxs(US,{value:"email",className:"flex items-center gap-2",children:[n.jsx(Zm,{className:"h-4 w-4"}),r("admin.communication.emailTab")]}),n.jsxs(US,{value:"sms",className:"flex items-center gap-2",children:[n.jsx(Ch,{className:"h-4 w-4"}),r("admin.communication.smsTab")]}),n.jsxs(US,{value:"notifications",className:"flex items-center gap-2",children:[n.jsx(Wu,{className:"h-4 w-4"}),r("admin.communication.notificationsTab")]}),n.jsxs(US,{value:"integrations",className:"flex items-center gap-2",children:[n.jsx(Im,{className:"h-4 w-4"}),r("admin.communication.integrationsTab")]})]}),n.jsx(VS,{value:"email",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Zm,{className:"h-5 w-5"}),r("admin.communication.emailConfiguration")]}),n.jsx(Pu,{children:r("admin.communication.emailConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.smtpHost")}),n.jsx($j,{value:l.smtp_host,onChange:e=>c({...l,smtp_host:e.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.smtpPort")}),n.jsx($j,{value:l.smtp_port,onChange:e=>c({...l,smtp_port:e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.encryption")}),n.jsxs(lC,{value:l.smtp_encryption,onValueChange:e=>c({...l,smtp_encryption:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"tls",children:"TLS"}),n.jsx(pC,{value:"ssl",children:"SSL"}),n.jsx(pC,{value:"none",children:"None"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.smtpUsername")}),n.jsx($j,{value:l.smtp_username,onChange:e=>c({...l,smtp_username:e.target.value})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.fromEmail")}),n.jsx($j,{type:"email",value:l.from_email,onChange:e=>c({...l,from_email:e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.fromName")}),n.jsx($j,{value:l.from_name,onChange:e=>c({...l,from_name:e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.replyToEmail")}),n.jsx($j,{type:"email",value:l.reply_to,onChange:e=>c({...l,reply_to:e.target.value})})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h4",{className:"font-medium mb-4",children:r("admin.communication.emailFeatures")}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.bounceHandling")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.bounceHandlingDesc")})]}),n.jsx(O5,{checked:l.bounce_handling,onCheckedChange:e=>c({...l,bounce_handling:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.emailTracking")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.emailTrackingDesc")})]}),n.jsx(O5,{checked:l.email_tracking,onCheckedChange:e=>c({...l,email_tracking:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.unsubscribeLink")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.unsubscribeLinkDesc")})]}),n.jsx(O5,{checked:l.unsubscribe_link,onCheckedChange:e=>c({...l,unsubscribe_link:e})})]})]})]}),n.jsxs(ku,{onClick:()=>x("Email"),className:"w-full",disabled:i,children:[i?n.jsx(lb,{size:"sm",className:"mr-2"}):n.jsx(yh,{className:"h-4 w-4 mr-2"}),r("admin.communication.saveEmailSettings")]})]})]})}),n.jsx(VS,{value:"sms",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Ch,{className:"h-5 w-5"}),r("admin.communication.smsConfiguration")]}),n.jsx(Pu,{children:r("admin.communication.smsConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.smsProvider")}),n.jsxs(lC,{value:d.provider,onValueChange:e=>u({...d,provider:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"twilio",children:"Twilio"}),n.jsx(pC,{value:"aws_sns",children:"AWS SNS"}),n.jsx(pC,{value:"nexmo",children:"Nexmo"}),n.jsx(pC,{value:"messagebird",children:"MessageBird"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.apiKey")}),n.jsx($j,{type:"password",value:d.api_key,onChange:e=>u({...d,api_key:e.target.value}),placeholder:r("admin.communication.apiKeyPlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.apiSecret")}),n.jsx($j,{type:"password",value:d.api_secret,onChange:e=>u({...d,api_secret:e.target.value}),placeholder:r("admin.communication.apiSecretPlaceholder")})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.fromNumber")}),n.jsx($j,{value:d.from_number,onChange:e=>u({...d,from_number:e.target.value}),placeholder:r("admin.communication.fromNumberPlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.rateLimitPerMinute")}),n.jsx($j,{type:"number",value:d.rate_limit,onChange:e=>u({...d,rate_limit:parseInt(e.target.value)})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.deliveryReports")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.deliveryReportsDesc")})]}),n.jsx(O5,{checked:d.delivery_reports,onCheckedChange:e=>u({...d,delivery_reports:e})})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h4",{className:"font-medium mb-4",children:r("admin.communication.optOutKeywords")}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.opt_out_keywords.map((e,t)=>n.jsx(Xf,{variant:"outline",children:e},t))}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r("admin.communication.optOutKeywordsDesc")})]}),n.jsxs(ku,{onClick:()=>x("SMS"),className:"w-full",disabled:i,children:[i?n.jsx(lb,{size:"sm",className:"mr-2"}):n.jsx(yh,{className:"h-4 w-4 mr-2"}),r("admin.communication.saveSmsSettings")]})]})]})}),n.jsx(VS,{value:"notifications",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Wu,{className:"h-5 w-5"}),r("admin.communication.notificationPreferences")]}),n.jsx(Pu,{children:r("admin.communication.notificationConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.realTimeNotifications")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.realTimeNotificationsDesc")})]}),n.jsx(O5,{checked:m.real_time_enabled,onCheckedChange:e=>h({...m,real_time_enabled:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.emailNotifications")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.emailNotificationsDesc")})]}),n.jsx(O5,{checked:m.email_notifications,onCheckedChange:e=>h({...m,email_notifications:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.smsNotifications")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.smsNotificationsDesc")})]}),n.jsx(O5,{checked:m.sms_notifications,onCheckedChange:e=>h({...m,sms_notifications:e})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.pushNotificationsLabel")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.pushNotificationsDesc")})]}),n.jsx(O5,{checked:m.push_notifications,onCheckedChange:e=>h({...m,push_notifications:e})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.digestFrequency")}),n.jsxs(lC,{value:m.digest_frequency,onValueChange:e=>h({...m,digest_frequency:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"real-time",children:r("admin.communication.realTime")}),n.jsx(pC,{value:"hourly",children:r("admin.communication.hourly")}),n.jsx(pC,{value:"daily",children:r("admin.communication.daily")}),n.jsx(pC,{value:"weekly",children:r("admin.communication.weekly")}),n.jsx(pC,{value:"never",children:r("admin.communication.never")})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.quietHours")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.quietHoursDesc")})]}),n.jsx(O5,{checked:m.quiet_hours_enabled,onCheckedChange:e=>h({...m,quiet_hours_enabled:e})})]}),m.quiet_hours_enabled&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.startTime")}),n.jsx($j,{type:"time",value:m.quiet_hours_start,onChange:e=>h({...m,quiet_hours_start:e.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.endTime")}),n.jsx($j,{type:"time",value:m.quiet_hours_end,onChange:e=>h({...m,quiet_hours_end:e.target.value})})]})]})]})]}),n.jsxs(ku,{onClick:()=>x("Notifications"),className:"w-full",disabled:i,children:[i?n.jsx(lb,{size:"sm",className:"mr-2"}):n.jsx(yh,{className:"h-4 w-4 mr-2"}),r("admin.communication.saveNotificationSettings")]})]})]})}),n.jsx(VS,{value:"integrations",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Im,{className:"h-5 w-5"}),r("admin.communication.thirdPartyIntegrations")]}),n.jsx(Pu,{children:r("admin.communication.integrationsConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.slackWebhookUrl")}),n.jsx($j,{value:p.slack_webhook,onChange:e=>f({...p,slack_webhook:e.target.value}),placeholder:r("admin.communication.slackWebhookPlaceholder")})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.discordWebhookUrl")}),n.jsx($j,{value:p.discord_webhook,onChange:e=>f({...p,discord_webhook:e.target.value}),placeholder:r("admin.communication.discordWebhookPlaceholder")})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.enableWebhookNotifications")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.communication.enableWebhookNotificationsDesc")})]}),n.jsx(O5,{checked:p.webhook_notifications,onCheckedChange:e=>f({...p,webhook_notifications:e})})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h4",{className:"font-medium mb-4",children:r("admin.communication.apiConfiguration")}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.apiRateLimit")}),n.jsx($j,{type:"number",value:p.api_rate_limit,onChange:e=>f({...p,api_rate_limit:parseInt(e.target.value)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.webhookRetries")}),n.jsx($j,{type:"number",value:p.webhook_retries,onChange:e=>f({...p,webhook_retries:parseInt(e.target.value)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:r("admin.communication.timeoutSeconds")}),n.jsx($j,{type:"number",value:p.webhook_timeout,onChange:e=>f({...p,webhook_timeout:parseInt(e.target.value)})})]})]})]}),n.jsxs(ku,{onClick:()=>x("Integrations"),className:"w-full",disabled:i,children:[i?n.jsx(lb,{size:"sm",className:"mr-2"}):n.jsx(yh,{className:"h-4 w-4 mr-2"}),r("admin.communication.saveIntegrationSettings")]})]})]})})]})})},U5=()=>{const{conversations:e,loading:t}=_C(),{notifications:r,loading:s}=Ub(),{user:a}=br(),{t:i}=cr(),o=St(),[l,c]=Ne.useState({totalMessages:0,totalNotifications:0,activeConversations:0,unreadMessages:0,notificationsSentToday:0,averageResponseTime:0}),[d,u]=Ne.useState([]),[m,h]=Ne.useState([]),[p,f]=Ne.useState(!0);return Ne.useEffect(()=>{(async()=>{var t;if(a)try{f(!0);const[n,s]=await Promise.all([mr.from("messages").select("*").order("created_at",{ascending:!1}).limit(1e3),mr.from("notifications").select("*").order("created_at",{ascending:!1}).limit(1e3)]),a=n.data||[],o={count:(null==(t=s.data)?void 0:t.length)||0},l=[];for(let e=0;e<24;e+=4){const t=new Date;t.setHours(e,0,0,0);const n=new Date;n.setHours(e+4,0,0,0);const s=(null==a?void 0:a.filter(e=>{const r=new Date(e.created_at);return r>=t&&r<n}).length)||0,i=(null==r?void 0:r.filter(e=>{const r=new Date(e.created_at);return r>=t&&r<n}).length)||0;l.push({time:`${e.toString().padStart(2,"0")}:00`,messages:s,notifications:i})}const d=(null==r?void 0:r.filter(e=>"email"===e.type).length)||0,m=(null==r?void 0:r.filter(e=>"push_notification"===e.type).length)||0,p=(null==a?void 0:a.filter(e=>"text"===e.message_type).length)||0,x=(null==r?void 0:r.filter(e=>"sms"===e.type).length)||0,g=[{channel:i("admin.communication.inAppChat"),count:p,color:"#8B5CF6"},{channel:i("admin.communication.email"),count:d,color:"#06B6D4"},{channel:i("admin.communication.pushNotifications"),count:m,color:"#10B981"},{channel:i("admin.communication.sms"),count:x,color:"#F59E0B"}];u(l),h(g);const v=new Date;v.setDate(v.getDate()-7);const y=(null==e?void 0:e.filter(e=>new Date(e.last_message_at||e.created_at)>=v).length)||0,j=(null==r?void 0:r.filter(e=>!e.read).length)||0,b=new Date;b.setHours(0,0,0,0);const w=(null==r?void 0:r.filter(e=>new Date(e.created_at)>=b).length)||0,N=(null==e?void 0:e.filter(e=>e.last_message_at&&e.created_at))||[],_=N.length>0?Math.round(N.reduce((e,t)=>e+(new Date(t.last_message_at).getTime()-new Date(t.created_at).getTime())/6e4,0)/N.length):0;c({totalMessages:(null==a?void 0:a.length)||0,totalNotifications:(null==o?void 0:o.count)||0,activeConversations:y,unreadMessages:j,notificationsSentToday:w,averageResponseTime:_})}catch(n){}finally{f(!1)}})()},[a,e,r]),p||t||s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(lb,{label:i("admin.communication.loadingOverview")})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:i("admin.communication.overview")}),n.jsx("p",{className:"text-muted-foreground",children:i("admin.communication.overviewDescription")})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(Xf,{variant:"outline",className:"flex items-center space-x-1",children:[n.jsx(Fu,{className:"h-3 w-3"}),n.jsx("span",{children:i("admin.communication.liveData")})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("admin.communication.totalMessages")}),n.jsx(nh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-primary",children:l.totalMessages.toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.communication.allTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("admin.communication.activeConversations")}),n.jsx(Zh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-success",children:l.activeConversations}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.communication.lastSevenDays")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("admin.communication.notificationsToday")}),n.jsx(Wu,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-info",children:l.notificationsSentToday}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.communication.todaysTotal")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("admin.communication.avgResponseTime")}),n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold text-warning",children:[l.averageResponseTime,"m"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("admin.communication.averageResponse")})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center space-x-2",children:[n.jsx($h,{className:"h-5 w-5"}),n.jsx("span",{children:i("admin.communication.messageActivity")})]}),n.jsx(Pu,{children:i("admin.communication.messageActivityDesc")})]}),n.jsx(Au,{children:n.jsx(Kz,{width:"100%",height:250,children:n.jsxs(F3,{data:d,children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"time"}),n.jsx(B4,{}),n.jsx(yz,{}),n.jsx(n4,{type:"monotone",dataKey:"messages",stroke:"hsl(var(--primary))",strokeWidth:2}),n.jsx(n4,{type:"monotone",dataKey:"notifications",stroke:"hsl(var(--secondary))",strokeWidth:2})]})})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center space-x-2",children:[n.jsx(nh,{className:"h-5 w-5"}),n.jsx("span",{children:i("admin.communication.communicationChannels")})]}),n.jsx(Pu,{children:i("admin.communication.usageByMethod")})]}),n.jsx(Au,{children:n.jsx(Kz,{width:"100%",height:250,children:n.jsxs(z3,{data:m,children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"channel"}),n.jsx(B4,{}),n.jsx(yz,{}),n.jsx(D0,{dataKey:"count",fill:"hsl(var(--primary))"})]})})})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center space-x-2",children:[n.jsx(Fu,{className:"h-5 w-5"}),n.jsx("span",{children:i("admin.communication.recentActivity")})]}),n.jsx(Pu,{children:i("admin.communication.latestEvents")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-4",children:[null==e?void 0:e.slice(0,4).map((e,t)=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border bg-card/50",children:[n.jsx("div",{className:"p-2 rounded-full bg-primary/10 text-primary",children:n.jsx(nh,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"font-medium",children:[i("admin.communication.conversation")," ","support"===e.conversation_type?i("admin.communication.support"):i("admin.communication.business")]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.last_message?e.last_message.slice(0,60)+"...":i("admin.communication.noRecentMessage")})]}),n.jsxs("div",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[n.jsx(Zu,{className:"h-3 w-3"}),n.jsx("span",{children:e.last_message_at?new Date(e.last_message_at).toLocaleString():i("admin.communication.noActivity")})]})]},e.id)),(!e||0===e.length)&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(nh,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:i("admin.communication.noRecentActivity")})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 lg:flex lg:flex-wrap gap-3",children:[n.jsxs(ku,{variant:"default",className:"w-full lg:w-auto",onClick:async()=>{try{const{error:e}=await mr.from("push_notifications").insert({title:i("admin.communication.announcement"),message:i("admin.communication.announcementMessage"),target_audience:"all_users",created_by:null==a?void 0:a.id,status:"sent",sent_at:(new Date).toISOString()});if(e)throw e;Ib.success(i("admin.communication.announcementSent"))}catch(e){Ib.error(i("admin.communication.announcementError"))}},children:[n.jsx(Wu,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:i("admin.communication.sendAnnouncement")}),n.jsx("span",{className:"sm:hidden",children:i("admin.communication.announce")})]}),n.jsxs(ku,{variant:"outline",className:"w-full lg:w-auto",onClick:()=>{o("/admin/communications?tab=email&action=create")},children:[n.jsx(Zm,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:i("admin.communication.createEmailCampaign")}),n.jsx("span",{className:"sm:hidden",children:i("admin.communication.email")})]}),n.jsxs(ku,{variant:"outline",className:"w-full lg:w-auto",onClick:()=>{o("/admin/communications?tab=chat")},children:[n.jsx(nh,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:i("admin.communication.viewAllChats")}),n.jsx("span",{className:"sm:hidden",children:i("admin.communication.chats")})]}),n.jsxs(ku,{variant:"outline",className:"w-full lg:w-auto",onClick:async()=>{try{const e={totalUsers:l.activeConversations,totalMessages:l.totalMessages,avgResponseTime:l.averageResponseTime,generatedAt:(new Date).toISOString()},t=`${i("admin.communication.userEngagementReportTitle")}\n${i("admin.communication.generated")}: ${(new Date).toLocaleString()}\n${i("admin.communication.totalActiveUsers")}: ${e.totalUsers}\n${i("admin.communication.totalMessagesLabel")}: ${e.totalMessages}\n${i("admin.communication.averageResponseTimeLabel")}: ${e.avgResponseTime} ${i("admin.communication.minutes")}`,r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=`engagement_report_${(new Date).toISOString().split("T")[0]}.csv`,s.click(),window.URL.revokeObjectURL(n),Ib.success(i("admin.communication.reportGenerated"))}catch(e){Ib.error(i("admin.communication.reportError"))}},children:[n.jsx(Zh,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:i("admin.communication.userEngagementReport")}),n.jsx("span",{className:"sm:hidden",children:i("admin.communication.report")})]})]})]})},V5=()=>{const{t:e,isRTL:t}=cr();return n.jsx(c5,{children:n.jsxs("div",{className:_u("space-y-6",t?"rtl":"ltr"),dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:_u(t?"text-right":"text-left"),children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(nh,{className:"h-8 w-8 text-primary"}),e("admin.communicationCenter")]}),n.jsx("p",{className:"text-muted-foreground",children:e("admin.communicationCenterDescription")})]}),n.jsxs(BS,{defaultValue:"overview",className:"space-y-6",children:[n.jsxs($S,{className:"grid grid-cols-2 md:grid-cols-6 w-full",children:[n.jsxs(US,{value:"overview",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(nh,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("common.overview")})]}),n.jsxs(US,{value:"notifications",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(Wu,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("admin.notifications.title")})]}),n.jsxs(US,{value:"chat",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(nh,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("common.liveChat")})]}),n.jsxs(US,{value:"email",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(Zm,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("common.email")})]}),n.jsxs(US,{value:"push",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(Ch,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("common.push")})]}),n.jsxs(US,{value:"settings",className:"flex items-center gap-1 md:gap-2",children:[n.jsx(Nh,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:e("common.settings")})]})]}),n.jsx(VS,{value:"overview",children:n.jsx(U5,{})}),n.jsx(VS,{value:"notifications",children:n.jsx(L5,{})}),n.jsx(VS,{value:"chat",children:n.jsx(z5,{})}),n.jsx(VS,{value:"email",children:n.jsx(q5,{})}),n.jsx(VS,{value:"push",children:n.jsx(B5,{})}),n.jsx(VS,{value:"settings",children:n.jsx($5,{})})]})]})})},W5=or("CategoryManagement"),H5=()=>{const{categories:e,loading:t,createCategory:r,updateCategory:s,deleteCategory:a,refetch:i}=gC(!0),{toast:o}=fp(),{t:l,isRTL:c}=cr(),{userProfile:d}=br(),[u,m]=Ne.useState(null),[h,p]=Ne.useState(!1),[f,x]=Ne.useState("tree"),[g,v]=Ne.useState(""),[y,j]=Ne.useState("all"),[b,w]=Ne.useState([]),[N,_]=Ne.useState([]),[S,k]=Ne.useState({name_en:"",name_ar:"",slug:"",parent_id:"",is_active:!0,sort_order:0});Ne.useEffect(()=>{i()},[]);const C="admin"===(null==d?void 0:d.role),E=Ne.useMemo(()=>{if(!e)return null;const t=e.reduce((e,t)=>(e.push(t),t.children&&e.push(...t.children),e),[]);return{total:t.length,active:t.filter(e=>e.is_active).length,inactive:t.filter(e=>!e.is_active).length,parentCategories:e.length,subcategories:t.length-e.length}},[e]),O=Ne.useMemo(()=>{if(!e)return[];const t=e=>{var r;const n=""===g||e.name_en.toLowerCase().includes(g.toLowerCase())||e.name_ar.toLowerCase().includes(g.toLowerCase())||e.slug.toLowerCase().includes(g.toLowerCase()),s="all"===y||"active"===y&&e.is_active||"inactive"===y&&!e.is_active,a=(null==(r=e.children)?void 0:r.map(t).filter(Boolean))||[];return n&&s||a.length>0?{...e,children:a}:null};return e.map(t).filter(Boolean)},[e,g,y]),M=Ne.useMemo(()=>{if(!O)return[];const e=(t,r=0)=>t.reduce((t,n)=>(t.push({...n,level:r}),n.children&&t.push(...e(n.children,r+1)),t),[]);return e(O)},[O]),P=async e=>{if(C){if(window.confirm(l("admin.categoryManagement.deleteCategoryConfirm")))try{await a(e),o({title:l("common.success"),description:l("admin.categoryManagement.categoryDeleted")}),i()}catch(t){}}else o({title:l("admin.categoryManagement.accessDenied"),description:l("admin.categoryManagement.needAdminPrivilegesDelete"),variant:"destructive"})},A=()=>{k({name_en:"",name_ar:"",slug:"",parent_id:"",is_active:!0,sort_order:0}),m(null)},T=e=>{C?(m(e),k({name_en:e.name_en,name_ar:e.name_ar,slug:e.slug,parent_id:e.parent_id||"",is_active:e.is_active,sort_order:e.sort_order}),p(!0)):o({title:l("admin.categoryManagement.accessDenied"),description:l("admin.categoryManagement.needAdminPrivilegesEdit"),variant:"destructive"})},D=async e=>{if(C&&0!==b.length)try{const t=b.map(t=>"delete"===e?a(t):s(t,{is_active:"activate"===e}));await Promise.all(t),o({title:l("common.success"),description:`${b.length} ${l("admin.categoryManagement.bulkActionSuccess").replace("{action}",e)}`}),w([]),i()}catch(t){}},R=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},L=(e,t=0)=>e.map((r,s)=>{var a;const i=r.children&&r.children.length>0,o=N.includes(r.id),d=(null==(a=r.children)?void 0:a.length)||0,u=s===e.length-1;return n.jsxs("div",{className:"relative",children:[t>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"absolute left-6 -top-4 w-px h-4 bg-border"}),n.jsx("div",{className:"absolute left-6 top-6 w-4 h-px bg-border"}),!u&&n.jsx("div",{className:"absolute left-6 top-6 w-px h-full bg-border"})]}),n.jsx("div",{className:_u("relative mb-3",t>0&&"ml-10"),children:n.jsx(Eu,{className:_u("group transition-all duration-200 border-l-4",i&&"cursor-pointer hover:shadow-md",r.is_active?"border-l-green-500 bg-green-50/30 dark:bg-green-950/20":"border-l-gray-400 bg-gray-50/30 dark:bg-gray-950/20",o&&i&&"shadow-md"),children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:_u("flex items-start justify-between gap-4",c&&"flex-row-reverse"),onClick:i?()=>R(r.id):void 0,children:[n.jsxs("div",{className:_u("flex items-start gap-3 flex-1",c&&"flex-row-reverse"),children:[n.jsx("div",{className:"pt-1",children:n.jsx(CE,{checked:b.includes(r.id),onCheckedChange:e=>{w(e?[...b,r.id]:b.filter(e=>e!==r.id))},onClick:e=>e.stopPropagation(),className:"transition-colors"})}),n.jsx("div",{className:"pt-1",children:i?n.jsx(ku,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted transition-colors",onClick:e=>{e.stopPropagation(),R(r.id)},children:o?n.jsx(am,{className:"h-4 w-4 transition-transform duration-200"}):n.jsx(om,{className:_u("h-4 w-4 transition-transform duration-200",c&&"transform rotate-180")})}):n.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-muted"})})}),n.jsx("div",{className:"pt-1",children:t>0?n.jsx(Lm,{className:"h-5 w-5 text-muted-foreground"}):i?o?n.jsx(Rm,{className:"h-5 w-5 text-primary"}):n.jsx(Lm,{className:"h-5 w-5 text-primary"}):n.jsx(Lm,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:_u("flex-1 min-w-0",c?"text-right":"text-left"),children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsx("h4",{className:"font-semibold text-foreground truncate",children:r.name_en}),n.jsx(Xf,{variant:r.is_active?"default":"secondary",className:"text-xs shrink-0",children:r.is_active?l("admin.categoryManagement.active"):l("admin.categoryManagement.inactive")}),i&&n.jsxs(Xf,{variant:"outline",className:"text-xs shrink-0",children:[d," ",l(1!==d?"admin.categoryManagement.labels.childrenPlural":"admin.categoryManagement.labels.children")]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:r.name_ar}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded font-mono",children:r.slug}),t>0&&n.jsx("span",{className:"text-xs text-muted-foreground",children:l("admin.categoryManagement.subcategory")})]})]})]})]}),n.jsxs("div",{className:_u("flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 shrink-0",c&&"flex-row-reverse"),children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),T(r)},disabled:!C,className:"h-8 w-8 p-0",children:n.jsx(Ph,{className:"h-4 w-4"})}),n.jsx(ku,{variant:"destructive",size:"sm",onClick:e=>{e.stopPropagation(),P(r.id)},disabled:!C,className:"h-8 w-8 p-0",children:n.jsx(zh,{className:"h-4 w-4"})})]})]})})})}),i&&o&&n.jsx("div",{className:"animate-accordion-down overflow-hidden",children:n.jsx("div",{className:"pt-2",children:L(r.children,t+1)})})]},r.id)});return t?n.jsx("div",{className:"flex items-center justify-center p-8",children:l("admin.categoryManagement.loadingCategories")}):C?n.jsxs(c5,{title:l("admin.categoryManagement.title"),description:l("admin.categoryManagement.description"),headerActions:n.jsxs(Sb,{open:h,onOpenChange:p,children:[n.jsx(kb,{asChild:!0,children:n.jsxs(ku,{onClick:A,children:[n.jsx(fh,{className:"h-4 w-4 mr-2"}),l("admin.categoryManagement.addCategory")]})}),n.jsxs(Ob,{className:"max-w-2xl",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:l(u?"admin.categoryManagement.editCategoryTitle":"admin.categoryManagement.createCategoryTitle")}),n.jsx(Tb,{children:l(u?"admin.categoryManagement.updateCategoryDescription":"admin.categoryManagement.addCategoryDescription")})]}),n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),C)try{W5.debug("Submitting category form",{formData:S,editingCategory:null==u?void 0:u.id}),u?(await s(u.id,S),o({title:l("common.success"),description:l("admin.categoryManagement.categoryUpdated")})):(await r(S),o({title:l("common.success"),description:l("admin.categoryManagement.categoryCreated")})),p(!1),A(),i()}catch(t){}else o({title:l("admin.categoryManagement.accessDenied"),description:l("admin.categoryManagement.needAdminPrivileges"),variant:"destructive"})},className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"name_en",children:l("admin.categoryManagement.englishName")}),n.jsx($j,{id:"name_en",value:S.name_en,onChange:e=>k(t=>({...t,name_en:e.target.value})),placeholder:l("admin.categoryManagement.enterEnglishName"),required:!0})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"name_ar",children:l("admin.categoryManagement.arabicName")}),n.jsx($j,{id:"name_ar",value:S.name_ar,onChange:e=>k(t=>({...t,name_ar:e.target.value})),placeholder:l("admin.categoryManagement.enterArabicName"),dir:"rtl",required:!0})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"slug",children:"URL Slug"}),n.jsx($j,{id:"slug",value:S.slug,onChange:e=>k(t=>({...t,slug:e.target.value.toLowerCase().replace(/\s+/g,"-")})),placeholder:"category-slug",required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"URL-friendly identifier (lowercase, hyphens allowed)"})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"parent_id",children:l("admin.categoryManagement.form.parentCategory")}),n.jsxs(lC,{value:S.parent_id,onValueChange:e=>k(t=>({...t,parent_id:e})),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:l("admin.categoryManagement.form.selectParent")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"",children:l("admin.categoryManagement.form.noParent")}),null==e?void 0:e.filter(e=>e.id!==(null==u?void 0:u.id)).map(e=>n.jsx(pC,{value:e.id,children:e.name_en},e.id))]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(O5,{id:"is_active",checked:S.is_active,onCheckedChange:e=>k(t=>({...t,is_active:e}))}),n.jsx(j_,{htmlFor:"is_active",children:l("admin.categoryManagement.form.activeStatus")})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx(ku,{type:"button",variant:"outline",onClick:()=>p(!1),children:l("admin.categoryManagement.form.cancel")}),n.jsx(ku,{type:"submit",children:l(u?"admin.categoryManagement.form.updateCategory":"admin.categoryManagement.form.createCategory")})]})]})]})]}),children:[E&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsx(Pu,{children:l("admin.categoryManagement.totalCategories")}),n.jsx(Mu,{className:"text-2xl",children:E.total})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsx(Pu,{children:l("admin.categoryManagement.parentCategories")}),n.jsx(Mu,{className:"text-2xl",children:E.parentCategories})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsx(Pu,{children:l("admin.categoryManagement.subcategories")}),n.jsx(Mu,{className:"text-2xl",children:E.subcategories})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsx(Pu,{children:l("admin.categoryManagement.active")}),n.jsx(Mu,{className:"text-2xl text-green-600",children:E.active})]})}),n.jsx(Eu,{children:n.jsxs(Ou,{className:"pb-2",children:[n.jsx(Pu,{children:l("admin.categoryManagement.inactive")}),n.jsx(Mu,{className:"text-2xl text-red-600",children:E.inactive})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx($j,{placeholder:l("admin.categoryManagement.search.placeholder"),value:g,onChange:e=>v(e.target.value),className:"pl-10"})]}),n.jsxs(lC,{value:y,onValueChange:e=>j(e),children:[n.jsx(dC,{className:"w-40",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:l("admin.categoryManagement.search.allStatus")}),n.jsx(pC,{value:"active",children:l("admin.categoryManagement.search.activeOnly")}),n.jsx(pC,{value:"inactive",children:l("admin.categoryManagement.search.inactiveOnly")})]})]}),n.jsxs("div",{className:"flex gap-2",children:["tree"===f&&n.jsxs(n.Fragment,{children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const t=(null==e?void 0:e.filter(e=>e.children&&e.children.length>0).map(e=>e.id))||[];_(t)},disabled:N.length===((null==e?void 0:e.filter(e=>e.children&&e.children.length>0).length)||0),children:[n.jsx(Cm,{className:"h-4 w-4 mr-2"}),l("admin.categoryManagement.expandAll")]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{_([])},disabled:0===N.length,children:[n.jsx(oh,{className:"h-4 w-4 mr-2"}),l("admin.categoryManagement.collapseAll")]})]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>x("tree"===f?"table":"tree"),children:["tree"===f?n.jsx(Gm,{className:"h-4 w-4"}):n.jsx(Fm,{className:"h-4 w-4"}),l("tree"===f?"admin.categoryManagement.tableView":"admin.categoryManagement.treeView")]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const e=[[l("admin.categoryManagement.csvHeaders.id"),l("admin.categoryManagement.csvHeaders.englishName"),l("admin.categoryManagement.csvHeaders.arabicName"),l("admin.categoryManagement.csvHeaders.slug"),l("admin.categoryManagement.csvHeaders.status"),l("admin.categoryManagement.csvHeaders.level")],...M.map(e=>[e.id,e.name_en,e.name_ar,e.slug,e.is_active?l("admin.categoryManagement.active"):l("admin.categoryManagement.inactive"),0===e.level?l("admin.categoryManagement.parent"):l("admin.categoryManagement.subcategory")])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="categories.csv",n.click(),URL.revokeObjectURL(r)},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),l("admin.categoryManagement.export")]})]})]}),b.length>0&&n.jsx(Eu,{className:"mb-6",children:n.jsx(Au,{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm font-medium",children:[b.length," categories selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>D("activate"),children:l("admin.categoryManagement.bulkActions.activate")}),n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>D("deactivate"),children:l("admin.categoryManagement.bulkActions.deactivate")}),n.jsx(ku,{size:"sm",variant:"destructive",onClick:()=>D("delete"),children:l("admin.categoryManagement.bulkActions.delete")})]})]})})}),t?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:l("admin.categoryManagement.emptyStates.loading")})]})}):0===O.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx(Lm,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:l("admin.categoryManagement.emptyStates.noCategoriesFound")}),n.jsx("p",{className:"text-muted-foreground mb-4",children:l(g||"all"!==y?"admin.categoryManagement.emptyStates.noMatchingFilters":"admin.categoryManagement.emptyStates.createFirst")}),g||"all"!==y?n.jsx(ku,{variant:"outline",onClick:()=>{v(""),j("all")},children:l("admin.categoryManagement.emptyStates.clearFilters")}):null]})}):n.jsx("div",{className:"space-y-2",children:"tree"===f?n.jsx("div",{className:"space-y-4",children:L(O)}):n.jsxs(Eu,{className:"overflow-hidden",children:[n.jsx(Ou,{className:"bg-muted/30",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Gm,{className:"h-5 w-5"}),l("admin.categoryManagement.categoriesTable")]}),n.jsx(Pu,{children:l("admin.categoryManagement.comprehensiveView")})]}),n.jsxs(Xf,{variant:"outline",className:"font-mono",children:[M.length," ",l("admin.categoryManagement.total")]})]})}),n.jsxs(Au,{className:"p-0",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(H3,{children:[n.jsx(Y3,{children:n.jsxs(G3,{className:"bg-muted/20",children:[n.jsx(X3,{className:"w-12 pl-6",children:n.jsx(CE,{checked:b.length===M.length&&M.length>0,onCheckedChange:e=>{w(e?M.map(e=>e.id):[])},className:"transition-colors"})}),n.jsx(X3,{className:"font-semibold",children:l("admin.categoryManagement.categoryHierarchy")}),n.jsx(X3,{className:"font-semibold",children:l("admin.categoryManagement.arabicName")}),n.jsx(X3,{className:"font-semibold",children:l("admin.categoryManagement.slug")}),n.jsx(X3,{className:"font-semibold text-center",children:l("admin.categoryManagement.type")}),n.jsx(X3,{className:"font-semibold text-center",children:l("admin.categoryManagement.status")}),n.jsx(X3,{className:"font-semibold text-center",children:l("admin.categoryManagement.actions")})]})}),n.jsx(K3,{children:M.map((e,t)=>{var r,s;const a=e.is_active,i=0===e.level,o=e.children&&e.children.length>0;return n.jsxs(G3,{className:_u("group transition-colors hover:bg-muted/30",t%2==0?"bg-background":"bg-muted/10",!a&&"opacity-75"),children:[n.jsx(Q3,{className:"pl-6",children:n.jsx(CE,{checked:b.includes(e.id),onCheckedChange:t=>{w(t?[...b,e.id]:b.filter(t=>t!==e.id))},className:"transition-colors"})}),n.jsx(Q3,{className:"py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[e.level>0&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex items-center text-muted-foreground",children:[Array.from({length:e.level}).map((e,t)=>n.jsx("div",{className:"w-4 h-px bg-border mx-1"},t)),n.jsx(om,{className:"h-3 w-3"})]})}),i?o?n.jsx(Rm,{className:"h-4 w-4 text-primary"}):n.jsx(Lm,{className:"h-4 w-4 text-primary"}):n.jsx(Lm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium text-foreground truncate",children:e.name_en}),o&&n.jsxs(Xf,{variant:"outline",className:"text-xs shrink-0",children:[null==(r=e.children)?void 0:r.length," sub",1!==((null==(s=e.children)?void 0:s.length)||0)?"s":""]})]}),e.level>0&&n.jsx("div",{className:"text-xs text-muted-foreground",children:"Subcategory of parent"})]})]})}),n.jsx(Q3,{className:"py-4",children:n.jsx("div",{className:"font-medium text-right",dir:"rtl",children:e.name_ar})}),n.jsx(Q3,{className:"py-4",children:n.jsx("code",{className:_u("inline-flex items-center px-2.5 py-1 rounded-md text-xs font-mono","bg-muted border transition-colors","hover:bg-muted/80"),children:e.slug})}),n.jsx(Q3,{className:"py-4 text-center",children:n.jsx(Xf,{variant:i?"default":"secondary",className:"font-medium",children:l(i?"admin.categoryManagement.parent":"admin.categoryManagement.subcategory")})}),n.jsx(Q3,{className:"py-4 text-center",children:n.jsxs(Xf,{variant:a?"default":"secondary",className:_u("font-medium transition-colors",a?"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-100":"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-300"),children:[n.jsx("div",{className:_u("w-2 h-2 rounded-full mr-1.5",a?"bg-green-500":"bg-gray-400")}),l(a?"admin.categoryManagement.active":"admin.categoryManagement.inactive")]})}),n.jsx(Q3,{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>T(e),disabled:!C,className:"h-7 w-7 p-0 hover:bg-blue-50 hover:border-blue-200 dark:hover:bg-blue-950",children:n.jsx(Ph,{className:"h-3.5 w-3.5"})}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>P(e.id),disabled:!C,className:"h-7 w-7 p-0 hover:bg-red-50 hover:border-red-200 dark:hover:bg-red-950 text-red-600 hover:text-red-700",children:n.jsx(zh,{className:"h-3.5 w-3.5"})})]})})]},e.id)})})]})}),0===M.length&&n.jsxs("div",{className:"p-12 text-center border-t",children:[n.jsx(Gm,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:l("admin.categoryManagement.noCategoriesInTable")}),n.jsx("p",{className:"text-muted-foreground",children:l("admin.categoryManagement.switchToTreeView")})]})]}),M.length>0&&n.jsx("div",{className:"border-t bg-muted/20 px-6 py-3",children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{children:[l("admin.categoryManagement.showingCategories")," ",M.length," ",l("admin.categoryManagement.categoriesSelected").split(" ")[0]]}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[(null==E?void 0:E.parentCategories)||0," ",l("admin.categoryManagement.parentCategories").toLowerCase()]}),n.jsx("span",{children:"•"}),n.jsxs("span",{children:[(null==E?void 0:E.subcategories)||0," ",l("admin.categoryManagement.subcategories").toLowerCase()]})]}),b.length>0&&n.jsxs("span",{className:"font-medium text-primary",children:[b.length," ",l("admin.categoryManagement.selected")]})]})})]})})]}):n.jsx(c5,{title:l("admin.categoryManagement.title"),description:l("admin.common.accessRestricted"),children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Uh,{className:"h-16 w-16 text-warning mb-6"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),n.jsxs("p",{className:"text-muted-foreground text-center max-w-md",children:["You need admin privileges to access category management.",d?` Your current role is: ${d.role}`:" Please ensure you are logged in with an admin account."]})]})})},Y5=()=>n.jsx(H5,{}),K5=()=>{const{t:e,isRTL:t,formatDate:r}=cr(),s=t=>{const r=(null==t?void 0:t.toLowerCase())||"pending";return e(`admin.expertConsultations.${r}`)},{showSuccess:a,showError:i}=dy(),[o,l]=Ne.useState([]),[c,d]=Ne.useState(!0),[u,m]=Ne.useState(""),[h,p]=Ne.useState("all"),[f,x]=Ne.useState("all"),[g,v]=Ne.useState("created_at"),[y,j]=Ne.useState("desc"),[b,w]=Ne.useState([]),[N,_]=Ne.useState("table"),[S,k]=Ne.useState(null),[C,E]=Ne.useState([]),[O,M]=Ne.useState({totalConsultations:0,pendingConsultations:0,scheduledConsultations:0,completedConsultations:0,avgResponseTime:0,conversionRate:0});Ne.useEffect(()=>{A(),P()},[]),Ne.useEffect(()=>{(()=>{const e=o.length,t=o.filter(e=>"pending"===e.status).length,r=o.filter(e=>"scheduled"===e.status).length,n=o.filter(e=>"completed"===e.status).length,s=o.length>0?o.reduce((e,t)=>{const r=new Date(t.created_at);return e+(new Date(t.updated_at).getTime()-r.getTime())},0)/o.length/36e5:0,a=e>0?Math.round(n/e*100):0;M({totalConsultations:e,pendingConsultations:t,scheduledConsultations:r,completedConsultations:n,avgResponseTime:Math.round(10*s)/10,conversionRate:a})})()},[o]);const P=async()=>{try{const{data:e,error:t}=await mr.from("user_profiles").select("id, user_id, full_name, email, avatar_url").eq("role","admin").eq("status","approved");!t&&e&&E(e)}catch(e){}},A=async()=>{try{d(!0);const{data:t,error:r}=await mr.from("expert_consultations").select("\n          *,\n          user_profiles!expert_consultations_user_id_fkey (\n            full_name,\n            email,\n            company_name,\n            avatar_url\n          )\n        ").order("created_at",{ascending:!1});if(r)return void i(e("error.general"));l(t||[])}catch(t){i(e("error.general"))}finally{d(!1)}},T=async(t,r,n)=>{try{const n={status:r,updated_at:(new Date).toISOString()},{error:s}=await mr.from("expert_consultations").update(n).eq("id",t);if(s)return void i(e("error.general"));a(e("success.updated")),await A()}catch(s){i(e("error.general"))}},D=async t=>{if(0!==b.length)try{await Promise.all(b.map(e=>mr.from("expert_consultations").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e))),a(e("admin.expertConsultations.bulkUpdateSuccess").replace("{count}",b.length.toString())),w([]),await A()}catch(r){i(e("admin.expertConsultations.bulkUpdateFailed"))}},R=async()=>{if(0!==b.length)try{const{error:t}=await mr.from("expert_consultations").delete().in("id",b);if(t)throw t;a(e("admin.expertConsultations.bulkDeleteSuccess").replace("{count}",b.length.toString())),w([]),await A()}catch(t){i(e("admin.expertConsultations.bulkDeleteFailed"))}},L=o.filter(e=>{var t;const r=""===u||e.full_name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())||(null==(t=e.company)?void 0:t.toLowerCase().includes(u.toLowerCase()))||e.event_type.toLowerCase().includes(u.toLowerCase())||e.message.toLowerCase().includes(u.toLowerCase()),n="all"===h||e.status===h,s="all"===f||e.event_type===f;return r&&n&&s}).sort((e,t)=>{const r="created_at"===g?new Date(e.created_at).getTime():"full_name"===g?e.full_name:"status"===g?e.status:"event_type"===g?e.event_type:e.full_name,n="created_at"===g?new Date(t.created_at).getTime():"full_name"===g?t.full_name:"status"===g?t.status:"event_type"===g?t.event_type:t.full_name;return"asc"===y?r>n?1:-1:r<n?1:-1}),q=L.filter(e=>"pending"===e.status),I=L.filter(e=>"scheduled"===e.status),F=L.filter(e=>"completed"===e.status),z=L.filter(e=>"cancelled"===e.status),B=e=>{switch(e){case"completed":return"default";case"scheduled":return"secondary";case"cancelled":return"destructive";default:return"outline"}},$=e=>{switch(e){case"pending":default:return n.jsx(gm,{className:"h-4 w-4"});case"scheduled":return n.jsx(Zu,{className:"h-4 w-4"});case"completed":return n.jsx(dm,{className:"h-4 w-4"});case"cancelled":return n.jsx(cm,{className:"h-4 w-4"})}},U=e=>{switch(e){case"pending":return"text-warning";case"scheduled":return"text-blue-500";case"completed":return"text-success";case"cancelled":return"text-destructive";default:return"text-muted-foreground"}},V=e=>bj(new Date(e),"MMM dd, yyyy HH:mm");return c?n.jsx(lb,{size:"lg"}):n.jsx(c5,{children:n.jsxs("div",{className:_u("space-y-6",t?"rtl":"ltr"),dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:_u("flex items-start justify-between",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(t?"text-right":"text-left"),children:[n.jsx("h1",{className:"text-3xl font-bold",children:e("admin.expertConsultations.title")}),n.jsx("p",{className:"text-muted-foreground mt-2",children:e("admin.expertConsultations.description")})]}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"table"===N?"default":"outline",size:"sm",onClick:()=>_("table"),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(Tm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.table")]}),n.jsxs(ku,{variant:"cards"===N?"default":"outline",size:"sm",onClick:()=>_("cards"),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(Hu,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.cards")]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.expertConsultations.totalConsultations")}),n.jsx(nh,{className:"h-4 w-4 text-primary"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:O.totalConsultations}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.allTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("common.pending")}),n.jsx(gm,{className:"h-4 w-4 text-warning"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-warning",children:O.pendingConsultations}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.awaitingResponse")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("common.scheduled")}),n.jsx(Zu,{className:"h-4 w-4 text-blue-500"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-500",children:O.scheduledConsultations}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.activeBookings")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("common.completed")}),n.jsx(dm,{className:"h-4 w-4 text-success"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold text-success",children:O.completedConsultations}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.successfullyFinished")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.expertConsultations.avgResponseTime")}),n.jsx(Fh,{className:"h-4 w-4 text-orange-500"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[O.avgResponseTime,e("admin.expertConsultations.hoursUnit")]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.responseTime")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:e("admin.expertConsultations.conversionRate")}),n.jsx(Lh,{className:"h-4 w-4 text-green-500"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[O.conversionRate,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("admin.expertConsultations.completionRate")})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs("div",{className:_u("flex items-center justify-between",t&&"flex-row-reverse"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Fu,{className:"h-5 w-5"}),e("admin.expertConsultations.consultationManagement")]}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const t=[[e("admin.expertConsultations.csvName"),e("admin.expertConsultations.csvEmail"),e("admin.expertConsultations.csvCompany"),e("admin.expertConsultations.csvEventType"),e("admin.expertConsultations.csvStatus"),e("admin.expertConsultations.csvCreatedDate"),e("admin.expertConsultations.csvMessage")],...L.map(e=>[e.full_name,e.email,e.company||"",e.event_type,e.status,bj(new Date(e.created_at),"yyyy-MM-dd HH:mm"),e.message.replace(/,/g,";")])].map(e=>e.join(",")).join("\n"),r=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=`expert-consultations-${bj(new Date,"yyyy-MM-dd")}.csv`,s.click(),window.URL.revokeObjectURL(n)},className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Sm,{className:"h-4 w-4"}),e("admin.expertConsultations.export")]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(gh,{className:"h-4 w-4"}),e("admin.expertConsultations.refresh")]})]})]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-3 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("admin.expertConsultations.searchPlaceholder"),value:u,onChange:e=>m(e.target.value),className:_u(t?"pr-10 text-right":"pl-10 text-left"),dir:t?"rtl":"ltr"})]}),n.jsxs(lC,{value:h,onValueChange:p,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.expertConsultations.status")})}),n.jsxs(hC,{align:t?"start":"end",children:[n.jsx(pC,{value:"all",children:e("admin.expertConsultations.allStatus")}),n.jsx(pC,{value:"pending",children:e("admin.expertConsultations.pending")}),n.jsx(pC,{value:"scheduled",children:e("admin.expertConsultations.scheduled")}),n.jsx(pC,{value:"completed",children:e("admin.expertConsultations.completed")}),n.jsx(pC,{value:"cancelled",children:e("admin.expertConsultations.cancelled")})]})]}),n.jsxs(lC,{value:f,onValueChange:x,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.expertConsultations.eventType")})}),n.jsxs(hC,{align:t?"start":"end",children:[n.jsx(pC,{value:"all",children:e("admin.expertConsultations.allEvents")}),n.jsx(pC,{value:"consultation",children:e("admin.expertConsultations.consultation")}),n.jsx(pC,{value:"meeting",children:e("admin.expertConsultations.meeting")}),n.jsx(pC,{value:"presentation",children:e("admin.expertConsultations.presentation")}),n.jsx(pC,{value:"workshop",children:e("admin.expertConsultations.workshop")})]})]}),n.jsxs(lC,{value:g,onValueChange:v,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("admin.expertConsultations.sortBy")})}),n.jsxs(hC,{align:t?"start":"end",children:[n.jsx(pC,{value:"created_at",children:e("admin.expertConsultations.dateCreated")}),n.jsx(pC,{value:"full_name",children:e("admin.expertConsultations.name")}),n.jsx(pC,{value:"status",children:e("admin.expertConsultations.status")}),n.jsx(pC,{value:"event_type",children:e("admin.expertConsultations.eventType")})]})]}),n.jsxs(ku,{variant:"outline",onClick:()=>j("asc"===y?"desc":"asc"),className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx($u,{className:"h-4 w-4"}),e("asc"===y?"admin.expertConsultations.asc":"admin.expertConsultations.desc")]})]}),b.length>0&&n.jsxs("div",{className:_u("flex items-center gap-2 mb-4 p-3 bg-muted rounded-lg",t&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-sm font-medium",children:[b.length," ",b.length>1?e("admin.expertConsultations.consultationsSelected"):e("admin.expertConsultations.consultationSelected")]}),n.jsxs("div",{className:_u("flex gap-2",t?"mr-auto":"ml-auto",t&&"flex-row-reverse"),children:[n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsxs(ku,{variant:"outline",size:"sm",className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(dm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.changeStatus")]})}),n.jsxs(Rj,{align:t?"start":"end",children:[n.jsx(Lj,{onClick:()=>D("pending"),children:e("admin.expertConsultations.pending")}),n.jsx(Lj,{onClick:()=>D("scheduled"),children:e("admin.expertConsultations.scheduled")}),n.jsx(Lj,{onClick:()=>D("completed"),children:e("admin.expertConsultations.completed")}),n.jsx(Lj,{onClick:()=>D("cancelled"),children:e("admin.expertConsultations.cancelled")})]})]}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(ku,{variant:"destructive",size:"sm",className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(zh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.delete")]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:e("admin.expertConsultations.deleteConsultations")}),n.jsxs(lE,{children:[e("admin.expertConsultations.deleteConsultationConfirm")," ",b.length," ",b.length>1?e("admin.expertConsultations.consultationsSelected"):e("admin.expertConsultations.consultationSelected"),"?",e("admin.expertConsultations.cannotUndo")]})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:e("admin.expertConsultations.cancel")}),n.jsx(cE,{onClick:R,children:e("admin.expertConsultations.delete")})]})]})]})]})]})]})]}),"table"===N?n.jsx(Eu,{children:n.jsxs(Au,{className:"p-0",children:[n.jsxs(H3,{children:[n.jsx(Y3,{children:n.jsxs(G3,{children:[n.jsx(X3,{className:"w-12",children:n.jsx(CE,{checked:b.length===L.length&&L.length>0,onCheckedChange:()=>{w(b.length===L.length?[]:L.map(e=>e.id))}})}),n.jsx(X3,{children:e("admin.expertConsultations.fullName")}),n.jsx(X3,{children:e("admin.expertConsultations.eventType")}),n.jsx(X3,{children:e("admin.expertConsultations.status")}),n.jsx(X3,{children:e("admin.expertConsultations.company")}),n.jsx(X3,{children:e("common.contact")}),n.jsx(X3,{children:e("common.scheduledDate")}),n.jsx(X3,{children:e("admin.expertConsultations.createdAt")}),n.jsx(X3,{className:"w-12",children:e("admin.expertConsultations.actions")})]})}),n.jsx(K3,{children:L.map(r=>{var a;return n.jsxs(G3,{children:[n.jsx(Q3,{children:n.jsx(CE,{checked:b.includes(r.id),onCheckedChange:()=>{return e=r.id,void w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e}})}),n.jsx(Q3,{children:n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-8 w-8",children:[n.jsx(Zx,{src:null==(a=r.user_profiles)?void 0:a.avatar_url}),n.jsx(Jx,{children:r.full_name[0]||r.email[0]})]}),n.jsxs("div",{className:_u("min-w-0",t?"text-right":"text-left"),children:[n.jsx("div",{className:"font-medium truncate",children:r.full_name}),n.jsx("div",{className:"text-sm text-muted-foreground truncate",children:r.email})]})]})}),n.jsx(Q3,{children:n.jsx(Xf,{variant:"outline",children:r.event_type})}),n.jsx(Q3,{children:n.jsxs("div",{className:_u("flex items-center gap-1",U(r.status),t&&"flex-row-reverse"),children:[$(r.status),n.jsx("span",{className:"capitalize text-sm",children:s(r.status)})]})}),n.jsx(Q3,{children:n.jsx("span",{className:"text-sm",children:r.company||e("admin.expertConsultations.notProvided")})}),n.jsx(Q3,{children:n.jsx("div",{className:"text-sm",children:r.phone?n.jsxs("div",{className:_u("flex items-center gap-1",t&&"flex-row-reverse"),children:[n.jsx(ph,{className:"h-3 w-3"}),r.phone]}):n.jsxs("div",{className:_u("flex items-center gap-1",t&&"flex-row-reverse"),children:[n.jsx(Zm,{className:"h-3 w-3"}),e("common.emailOnly")]})})}),n.jsx(Q3,{children:n.jsx("div",{className:"text-sm",children:r.scheduled_date?V(r.scheduled_date):e("common.notScheduled")})}),n.jsx(Q3,{children:n.jsx("div",{className:"text-sm",children:V(r.created_at)})}),n.jsx(Q3,{children:n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",children:n.jsx(km,{className:"h-4 w-4"})})}),n.jsxs(Rj,{align:t?"start":"end",children:[n.jsx(qj,{children:e("admin.expertConsultations.actions")}),n.jsxs(Lj,{onClick:()=>k(r),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(Mm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.viewDetails")]}),n.jsx(Ij,{}),n.jsxs(Lj,{onClick:()=>T(r.id,"scheduled"),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.schedule")]}),n.jsxs(Lj,{onClick:()=>T(r.id,"completed"),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(dm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.complete")]}),n.jsxs(Lj,{onClick:()=>T(r.id,"cancelled"),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(cm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.cancel")]}),n.jsx(Ij,{}),n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(Lj,{onSelect:e=>e.preventDefault(),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(zh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("admin.expertConsultations.delete")]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:e("admin.expertConsultations.deleteConsultationTitle")}),n.jsx(lE,{children:e("admin.expertConsultations.deleteConsultationMessage")})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:e("admin.expertConsultations.cancel")}),n.jsx(cE,{onClick:()=>R(),children:e("admin.expertConsultations.delete")})]})]})]})]})]})})]},r.id)})})]}),0===L.length&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(nh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:e("admin.expertConsultations.noConsultationsFoundMessage")})]})]})}):n.jsxs(BS,{defaultValue:"all",className:"space-y-4",children:[n.jsxs($S,{children:[n.jsxs(US,{value:"all",children:[e("admin.expertConsultations.allTab")," (",L.length,")"]}),n.jsxs(US,{value:"pending",children:[e("admin.expertConsultations.pending")," (",q.length,")"]}),n.jsxs(US,{value:"scheduled",children:[e("admin.expertConsultations.scheduled")," (",I.length,")"]}),n.jsxs(US,{value:"completed",children:[e("admin.expertConsultations.completed")," (",F.length,")"]}),n.jsxs(US,{value:"cancelled",children:[e("admin.expertConsultations.cancelled")," (",z.length,")"]})]}),n.jsx(VS,{value:"all",className:"space-y-4",children:0===L.length?n.jsx(Eu,{children:n.jsxs(Au,{className:"py-8 text-center",children:[n.jsx(nh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:e("admin.expertConsultations.noConsultationsFoundCard")})]})}):n.jsx("div",{className:"grid gap-4",children:L.map(e=>n.jsx(W,{consultation:e},e.id))})}),n.jsx(VS,{value:"pending",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:q.map(e=>n.jsx(W,{consultation:e},e.id))})}),n.jsx(VS,{value:"scheduled",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:I.map(e=>n.jsx(W,{consultation:e},e.id))})}),n.jsx(VS,{value:"completed",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:F.map(e=>n.jsx(W,{consultation:e},e.id))})}),n.jsx(VS,{value:"cancelled",className:"space-y-4",children:n.jsx("div",{className:"grid gap-4",children:z.map(e=>n.jsx(W,{consultation:e},e.id))})})]}),n.jsx(Sb,{open:!!S,onOpenChange:()=>k(null),children:n.jsxs(Ob,{className:"max-w-2xl",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:e("expertConsultations.consultationDetailsTitle")}),n.jsx(Tb,{children:e("expertConsultations.consultationDetailsDescription")})]}),S&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.clientName")}),n.jsx("p",{className:"text-sm font-medium",children:S.full_name})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.email")}),n.jsx("p",{className:"text-sm",children:S.email})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.clientPhone")}),n.jsx("p",{className:"text-sm",children:S.phone||e("expertConsultations.notProvided")})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.clientCompany")}),n.jsx("p",{className:"text-sm",children:S.company||e("expertConsultations.notProvided")})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.eventType")}),n.jsx(Xf,{variant:"outline",children:S.event_type})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.status")}),n.jsx(Xf,{variant:B(S.status),children:s(S.status)})]})]}),S.event_description&&n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.eventDescription")}),n.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:S.event_description})]}),n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.consultationMessage")}),n.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:S.message})]}),S.notes&&n.jsxs("div",{children:[n.jsx(j_,{children:e("expertConsultations.modalAdminNotes")}),n.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:S.notes})]}),n.jsxs("div",{className:_u("flex gap-2 pt-4",t&&"flex-row-reverse"),children:[n.jsx(ku,{onClick:()=>T(S.id,"scheduled"),children:e("expertConsultations.schedule")}),n.jsx(ku,{variant:"outline",onClick:()=>T(S.id,"completed"),children:e("expertConsultations.complete")}),n.jsx(ku,{variant:"destructive",onClick:()=>T(S.id,"cancelled"),children:e("expertConsultations.cancel")})]})]})]})})]})});function W({consultation:r}){var a;return n.jsxs(Eu,{className:"hover:shadow-md transition-shadow",children:[n.jsx(Ou,{children:n.jsxs("div",{className:_u("flex justify-between items-start gap-4",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",t&&"flex-row-reverse"),children:[n.jsxs(Qx,{className:"h-10 w-10",children:[n.jsx(Zx,{src:null==(a=r.user_profiles)?void 0:a.avatar_url}),n.jsx(Jx,{children:r.full_name[0]||r.email[0]})]}),n.jsxs("div",{className:_u(t?"text-right":"text-left"),children:[n.jsx(Mu,{className:"text-lg",children:r.full_name}),n.jsx(Pu,{children:r.email})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Xf,{variant:B(r.status),children:s(r.status)}),n.jsx(Xf,{variant:"outline",children:r.event_type})]})]})}),n.jsxs(Au,{children:[n.jsxs("div",{className:"space-y-3",children:[r.company&&n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Xu,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:r.company})]}),r.phone&&n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(ph,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:r.phone})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[e("expertConsultations.created")," ",V(r.created_at)]})]}),r.scheduled_date&&n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[e("expertConsultations.scheduledCard")," ",V(r.scheduled_date)]})]}),n.jsxs("div",{className:"bg-muted p-2 rounded text-sm",children:[n.jsx("strong",{children:e("expertConsultations.messageLabel")})," ",r.message]}),r.notes&&n.jsxs("div",{className:"bg-blue-50 p-2 rounded text-sm",children:[n.jsx("strong",{children:e("expertConsultations.adminNotesLabel")})," ",r.notes]})]}),n.jsxs("div",{className:_u("flex gap-2 mt-4",t&&"flex-row-reverse"),children:[n.jsxs(ku,{size:"sm",onClick:()=>k(r),className:_u("flex items-center",t&&"flex-row-reverse"),children:[n.jsx(Mm,{className:_u("h-4 w-4",t?"ml-1":"mr-1")}),e("expertConsultations.view")]}),"pending"===r.status&&n.jsxs(n.Fragment,{children:[n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>T(r.id,"scheduled"),children:e("expertConsultations.schedule")}),n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>T(r.id,"cancelled"),children:e("expertConsultations.cancel")})]}),"scheduled"===r.status&&n.jsx(ku,{size:"sm",variant:"outline",onClick:()=>T(r.id,"completed"),children:e("expertConsultations.complete")})]})]})]})}},G5=()=>{const{toast:e}=fp(),{user:t}=br(),{t:r,isRTL:s}=cr(),[a,i]=Ne.useState(!0),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(!1),[u,m]=Ne.useState({}),[h,p]=Ne.useState(!1),f=async(n=!1)=>{if(t){i(!0),n&&d(!0);try{const{data:t,error:s}=await mr.from("platform_settings").select("*");if(s)return void e({title:r("common.error"),description:r("admin.platformSettings.loadSettingsError"),variant:"destructive"});const a={};null==t||t.forEach(e=>{var t;a[e.setting_key]=(null==(t=e.setting_value)?void 0:t.value)??e.setting_value}),m(a),p(!1),n&&e({title:r("admin.platformSettings.settingsRefreshed"),description:r("admin.platformSettings.settingsRefreshedDesc")})}catch(s){e({title:r("common.error"),description:r("admin.platformSettings.loadSettingsError"),variant:"destructive"})}finally{i(!1),d(!1)}}},x=async(n,s)=>{if(!t)return!1;try{const{error:t}=await mr.from("platform_settings").update({setting_value:{value:s},updated_at:(new Date).toISOString()}).eq("setting_key",n);return!t||(e({title:r("common.error"),description:r("admin.platformSettings.updateSettingsError").replace("{settingKey}",n),variant:"destructive"}),!1)}catch(a){return!1}},g=async t=>{l(!0);let n=!0;for(const e of t)if(void 0!==u[e]){await x(e,u[e])||(n=!1)}n&&(p(!1),e({title:r("admin.platformSettings.settingsSaved"),description:r("admin.platformSettings.settingsSavedDesc")}),await f()),l(!1)},v=(e,t)=>{m(r=>({...r,[e]:t})),p(!0)};if(Ne.useEffect(()=>{t&&f()},[t]),a)return n.jsx(c5,{children:n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(lb,{size:"lg"})})});const y=n.jsxs("div",{className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[h&&n.jsx(Xf,{variant:"outline",className:"text-amber-600 border-amber-600",children:r("admin.platformSettings.unsavedChanges")}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>f(!0),disabled:c,children:[c?n.jsx(lb,{size:"sm",className:""+(s?"ml-2":"mr-2")}):n.jsx(gh,{className:"h-4 w-4 "+(s?"ml-2":"mr-2")}),r("admin.platformSettings.refresh")]})]});return n.jsx(c5,{title:r("admin.platformSettings.title"),description:r("admin.platformSettings.description"),headerActions:y,children:n.jsx("div",{dir:s?"rtl":"ltr",className:s?"text-right":"text-left",children:n.jsxs(BS,{defaultValue:"general",className:"space-y-6",children:[n.jsxs($S,{className:"grid grid-cols-5 w-full",children:[n.jsxs(US,{value:"general",className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Im,{className:"h-4 w-4"}),r("admin.platformSettings.general")]}),n.jsxs(US,{value:"security",className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Sh,{className:"h-4 w-4"}),r("admin.platformSettings.security")]}),n.jsxs(US,{value:"system",className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(wh,{className:"h-4 w-4"}),r("admin.platformSettings.system")]}),n.jsxs(US,{value:"communication",className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Zm,{className:"h-4 w-4"}),r("admin.platformSettings.communication")]}),n.jsxs(US,{value:"advanced",className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Nm,{className:"h-4 w-4"}),r("admin.platformSettings.advanced")]})]}),n.jsx(VS,{value:"general",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Im,{className:"h-5 w-5"}),r("admin.platformSettings.platformInformation")]}),n.jsx(Pu,{children:r("admin.platformSettings.platformInfoDescription")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"siteName",children:r("admin.platformSettings.platformName")}),n.jsx($j,{id:"siteName",dir:s?"rtl":"ltr",value:u.site_name||"",onChange:e=>v("site_name",e.target.value),placeholder:"MWRD Platform"})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"defaultCurrency",children:r("admin.platformSettings.defaultCurrency")}),n.jsxs(lC,{value:u.default_currency||"SAR",onValueChange:e=>v("default_currency",e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{align:s?"end":"start",children:[n.jsx(pC,{value:"SAR",children:r("admin.platformSettings.currencySAR")}),n.jsx(pC,{value:"USD",children:r("admin.platformSettings.currencyUSD")}),n.jsx(pC,{value:"EUR",children:r("admin.platformSettings.currencyEUR")}),n.jsx(pC,{value:"AED",children:r("admin.platformSettings.currencyAED")})]})]})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"siteDescription",children:r("admin.platformSettings.platformDescription")}),n.jsx(bC,{id:"siteDescription",dir:s?"rtl":"ltr",value:u.site_description||"",onChange:e=>v("site_description",e.target.value),placeholder:"Professional procurement and vendor management platform",rows:3})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"defaultTimezone",children:r("admin.platformSettings.defaultTimezone")}),n.jsxs(lC,{value:u.default_timezone||"Asia/Riyadh",onValueChange:e=>v("default_timezone",e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{align:s?"end":"start",children:[n.jsx(pC,{value:"Asia/Riyadh",children:r("admin.platformSettings.timezoneRiyadh")}),n.jsx(pC,{value:"UTC",children:r("admin.platformSettings.timezoneUTC")}),n.jsx(pC,{value:"America/New_York",children:r("admin.platformSettings.timezoneNewYork")}),n.jsx(pC,{value:"Europe/London",children:r("admin.platformSettings.timezoneLondon")}),n.jsx(pC,{value:"Asia/Dubai",children:r("admin.platformSettings.timezoneDubai")})]})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"defaultUserRole",children:r("admin.platformSettings.defaultUserRole")}),n.jsxs(lC,{value:u.default_user_role||"client",onValueChange:e=>v("default_user_role",e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{align:s?"end":"start",children:[n.jsx(pC,{value:"client",children:r("admin.platformSettings.roleClient")}),n.jsx(pC,{value:"vendor",children:r("admin.platformSettings.roleVendor")})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(j_,{children:r("admin.platformSettings.userRegistration")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("admin.platformSettings.userRegistrationDesc")})]}),n.jsx(O5,{checked:u.registration_open||!1,onCheckedChange:e=>v("registration_open",e)})]}),n.jsx("div",{className:"flex items-center gap-2 pt-4 border-t "+(s?"flex-row-reverse":""),children:n.jsxs(ku,{onClick:()=>g(["site_name","site_description","default_currency","default_timezone","default_user_role","registration_open"]),disabled:o,className:"flex-1",children:[o?n.jsx(lb,{size:"sm",className:""+(s?"ml-2":"mr-2")}):n.jsx(yh,{className:"h-4 w-4 "+(s?"ml-2":"mr-2")}),r("admin.platformSettings.saveGeneralSettings")]})})]})]})}),n.jsx(VS,{value:"security",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Sh,{className:"h-5 w-5"}),r("admin.platformSettings.securityConfiguration")]}),n.jsx(Pu,{children:r("admin.platformSettings.securityConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"sessionTimeout",children:r("admin.platformSettings.sessionTimeout")}),n.jsx($j,{id:"sessionTimeout",dir:s?"rtl":"ltr",type:"number",value:u.session_timeout||480,onChange:e=>v("session_timeout",parseInt(e.target.value)||480),min:"30",max:"1440"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("admin.platformSettings.sessionTimeoutDesc")})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"maxLoginAttempts",children:r("admin.platformSettings.maxLoginAttempts")}),n.jsx($j,{id:"maxLoginAttempts",dir:s?"rtl":"ltr",type:"number",value:u.max_login_attempts||5,onChange:e=>v("max_login_attempts",parseInt(e.target.value)||5),min:"3",max:"10"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("admin.platformSettings.maxLoginAttemptsDesc")})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"passwordMinLength",children:r("admin.platformSettings.passwordMinLength")}),n.jsx($j,{id:"passwordMinLength",dir:s?"rtl":"ltr",type:"number",value:u.password_min_length||8,onChange:e=>v("password_min_length",parseInt(e.target.value)||8),min:"6",max:"128"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(j_,{children:r("admin.platformSettings.requirePasswordSymbols")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.platformSettings.requirePasswordSymbolsDesc")})]}),n.jsx(O5,{checked:u.require_password_symbols||!1,onCheckedChange:e=>v("require_password_symbols",e)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(j_,{children:r("admin.platformSettings.emailVerificationRequired")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.platformSettings.emailVerificationDesc")})]}),n.jsx(O5,{checked:u.email_verification_required||!1,onCheckedChange:e=>v("email_verification_required",e)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(j_,{children:r("admin.platformSettings.twoFactorAuth")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("admin.platformSettings.twoFactorAuthDesc")})]}),n.jsx(O5,{checked:u.enable_two_factor||!1,onCheckedChange:e=>v("enable_two_factor",e)})]})]}),n.jsx("div",{className:"flex items-center gap-2 pt-4 border-t "+(s?"flex-row-reverse":""),children:n.jsxs(ku,{onClick:()=>g(["session_timeout","max_login_attempts","password_min_length","require_password_symbols","email_verification_required","enable_two_factor"]),disabled:o,className:"flex-1",children:[o?n.jsx(lb,{size:"sm",className:""+(s?"ml-2":"mr-2")}):n.jsx(yh,{className:"h-4 w-4 "+(s?"ml-2":"mr-2")}),r("admin.platformSettings.saveSecuritySettings")]})})]})]})}),n.jsx(VS,{value:"system",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(wh,{className:"h-5 w-5"}),r("admin.platformSettings.systemConfiguration")]}),n.jsx(Pu,{children:r("admin.platformSettings.systemConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"apiRateLimit",children:r("admin.platformSettings.apiRateLimit")}),n.jsx($j,{id:"apiRateLimit",dir:s?"rtl":"ltr",type:"number",value:u.api_rate_limit||1e3,onChange:e=>v("api_rate_limit",parseInt(e.target.value)||1e3),min:"100",max:"10000"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("admin.platformSettings.apiRateLimitDesc")})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"fileUploadMaxSize",children:r("admin.platformSettings.fileUploadMaxSize")}),n.jsx($j,{id:"fileUploadMaxSize",dir:s?"rtl":"ltr",type:"number",value:u.file_upload_max_size||10,onChange:e=>v("file_upload_max_size",parseInt(e.target.value)||10),min:"1",max:"100"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("admin.platformSettings.fileUploadMaxSizeDesc")})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex items-center gap-3 "+(s?"flex-row-reverse":""),children:[n.jsx(Uh,{className:"h-5 w-5 text-amber-500"}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-base",children:r("admin.platformSettings.maintenanceMode")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("admin.platformSettings.maintenanceModeDesc")})]})]}),n.jsx(O5,{checked:u.maintenance_mode||!1,onCheckedChange:e=>v("maintenance_mode",e)})]}),u.maintenance_mode&&n.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50 dark:bg-amber-950/20",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Vm,{className:"h-4 w-4 text-amber-600"}),n.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:r("admin.platformSettings.maintenanceModeActive")})]}),n.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:r("admin.platformSettings.maintenanceModeActiveDesc")})]}),n.jsx("div",{className:"flex items-center gap-2 pt-4 border-t "+(s?"flex-row-reverse":""),children:n.jsxs(ku,{onClick:()=>g(["api_rate_limit","file_upload_max_size","maintenance_mode"]),disabled:o,className:"flex-1",children:[o?n.jsx(lb,{size:"sm",className:""+(s?"ml-2":"mr-2")}):n.jsx(yh,{className:"h-4 w-4 "+(s?"ml-2":"mr-2")}),r("admin.platformSettings.saveSystemSettings")]})})]})]})}),n.jsx(VS,{value:"communication",className:"space-y-6",children:n.jsx($5,{})}),n.jsx(VS,{value:"advanced",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(s?"flex-row-reverse":""),children:[n.jsx(Nm,{className:"h-5 w-5"}),r("admin.platformSettings.advancedConfiguration")]}),n.jsx(Pu,{children:r("admin.platformSettings.advancedConfigDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 "+(s?"flex-row-reverse":""),children:[n.jsx(Hm,{className:"h-5 w-5 text-blue-500"}),n.jsx("h4",{className:"font-medium",children:r("admin.platformSettings.apiKeyManagement")})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r("admin.platformSettings.apiKeyManagementDesc")}),n.jsx(ku,{variant:"outline",size:"sm",disabled:!0,children:r("admin.platformSettings.manageApiKeys")})]}),n.jsxs(Eu,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3 "+(s?"flex-row-reverse":""),children:[n.jsx(Nm,{className:"h-5 w-5 text-green-500"}),n.jsx("h4",{className:"font-medium",children:r("admin.platformSettings.databaseTools")})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r("admin.platformSettings.databaseToolsDesc")}),n.jsx(ku,{variant:"outline",size:"sm",disabled:!0,children:r("admin.platformSettings.manageDatabaseTools")})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h4",{className:"font-medium mb-4 text-destructive",children:r("admin.platformSettings.dangerZone")}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border border-destructive/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-destructive",children:r("admin.platformSettings.resetPlatformSettings")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("admin.platformSettings.resetPlatformSettingsDesc")})]}),n.jsx(ku,{variant:"destructive",size:"sm",onClick:async()=>{m({site_name:"MWRD Platform",site_description:"Professional procurement and vendor management platform",registration_open:!0,email_verification_required:!1,default_user_role:"client",session_timeout:480,max_login_attempts:5,password_min_length:8,require_password_symbols:!0,enable_two_factor:!1,api_rate_limit:1e3,file_upload_max_size:10,maintenance_mode:!1,default_timezone:"Asia/Riyadh",default_currency:"SAR"}),p(!0),e({title:r("admin.platformSettings.settingsReset"),description:r("admin.platformSettings.settingsResetDesc")})},children:r("admin.platformSettings.resetSettings")})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border border-destructive/20 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"font-medium text-destructive",children:r("admin.platformSettings.exportPlatformData")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("admin.platformSettings.exportDataDesc")})]}),n.jsx(ku,{variant:"outline",size:"sm",disabled:!0,children:r("admin.platformSettings.exportData")})]})]})]})]})]})})]})})})},X5=({userId:e})=>{const[t,r]=Ne.useState([]),[s,a]=Ne.useState(!0);Ne.useEffect(()=>{(async()=>{if(e)try{a(!0);const{data:e,error:t}=await mr.from("audit_log").select("\n            id,\n            action,\n            entity_type,\n            entity_id,\n            user_id,\n            created_at\n          ").order("created_at",{ascending:!1}).limit(10);if(t)return void r([]);const n=[...new Set(null==e?void 0:e.map(e=>e.user_id).filter(Boolean))],{data:s}=await mr.from("user_profiles").select("user_id, full_name, company_name").in("user_id",n),i=(null==s?void 0:s.reduce((e,t)=>(e[t.user_id]=t,e),{}))||{},o=(e||[]).map(e=>({id:e.id,action:e.action,entity_type:e.entity_type,entity_id:e.entity_id,created_at:e.created_at,user_profiles:e.user_id?i[e.user_id]||{full_name:"Unknown User",company_name:"N/A"}:{full_name:"System",company_name:"Automated"}}));r(o)}catch(t){}finally{a(!1)}})()},[e]);const i=e=>{const t=new Date(e),r=new Date,n=Math.floor((r.getTime()-t.getTime())/6e4);if(n<60)return`${n} minutes ago`;if(n<1440){const e=Math.floor(n/60);return`${e} hour${e>1?"s":""} ago`}{const e=Math.floor(n/1440);return`${e} day${e>1?"s":""} ago`}};return s?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(lb,{size:"sm"})}):0===t.length?n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:n.jsx("p",{children:"No recent admin activity found."})}):n.jsx("div",{className:"space-y-4",children:t.map(e=>{return n.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(t=e.action,r=e.entity_type,`${{INSERT:"Created",UPDATE:"Updated",DELETE:"Deleted",SELECT:"Viewed"}[t]||t} ${{user_profiles:"user profile",requests:"request",offers:"offer",orders:"order",verification_requests:"verification request"}[r]||r}`)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.entity_id.slice(0,8),"..."]})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i(e.created_at)})]},e.id);var t,r})})},Q5=()=>{var e,t;const{userProfile:r,updateProfile:s,user:a}=br(),{t:i,isRTL:o}=cr(),[l,c]=Ne.useState(!1),[d,u]=Ne.useState(!0),{showSuccess:m,showError:h}=dy(),[p,f]=Ne.useState({full_name:(null==r?void 0:r.full_name)||"",company_name:(null==r?void 0:r.company_name)||"",phone:(null==r?void 0:r.phone)||"",address:(null==r?void 0:r.address)||"",bio:(null==r?void 0:r.bio)||""}),[x,g]=Ne.useState({two_factor_enabled:!1,email_notifications:!0,security_alerts:!0,admin_dashboard_theme:"system",session_timeout:480,audit_log_retention:90}),[v,y]=Ne.useState({total_logins:0,last_login:(new Date).toISOString(),failed_attempts:0,sessions_active:1,permissions_granted:["users:read","users:write","analytics:read","system:admin"]}),[j,b]=Ne.useState(!1);Ne.useEffect(()=>{r&&(f({full_name:r.full_name||"",company_name:r.company_name||"",phone:r.phone||"",address:r.address||"",bio:r.bio||""}),w())},[r]);const w=async()=>{try{u(!0);const{data:e,error:t}=await mr.from("admin_settings").select("*").eq("user_id",null==a?void 0:a.id).maybeSingle();if(t&&"PGRST116"!==t.code||e&&g({two_factor_enabled:e.two_factor_enabled,email_notifications:e.email_notifications,security_alerts:e.security_alerts,admin_dashboard_theme:e.admin_dashboard_theme,session_timeout:e.session_timeout,audit_log_retention:e.audit_log_retention}),null==a?void 0:a.id){const{data:e,error:t}=await mr.rpc("get_admin_statistics",{admin_user_id:a.id});if(t);else if(e){const t=e;y({total_logins:t.total_logins||0,last_login:t.last_login||(new Date).toISOString(),failed_attempts:t.failed_attempts||0,sessions_active:t.sessions_active||1,permissions_granted:t.permissions_granted||[]})}}}catch(e){}finally{u(!1)}},N=async()=>{if(null==a?void 0:a.id)try{const{error:e}=await mr.from("admin_settings").upsert({user_id:a.id,two_factor_enabled:x.two_factor_enabled,email_notifications:x.email_notifications,security_alerts:x.security_alerts,admin_dashboard_theme:x.admin_dashboard_theme,session_timeout:x.session_timeout,audit_log_retention:x.audit_log_retention});if(e)throw e;m(i("admin.platformSettings.settingsSaved"))}catch(e){h(i("common.error"))}};return r&&"admin"===r.role?n.jsx(c5,{children:n.jsxs("div",{className:"space-y-6",dir:o?"rtl":"ltr",children:[n.jsxs("div",{className:"flex items-center justify-between "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:i("settings.adminProfile")}),n.jsx("p",{className:"text-muted-foreground",children:i("settings.adminProfileDescription")})]}),n.jsx("div",{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:n.jsxs(Xf,{variant:"default",className:"flex items-center gap-1 "+(o?"flex-row-reverse":""),children:[n.jsx(Sh,{className:"h-3 w-3"}),i("settings.administrator")]})})]}),n.jsxs(BS,{defaultValue:"profile",className:"space-y-6",children:[n.jsxs($S,{className:"grid w-full grid-cols-5",children:[n.jsxs(US,{value:"profile",className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Xh,{className:"h-4 w-4"}),i("settings.profile")]}),n.jsxs(US,{value:"security",className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Sh,{className:"h-4 w-4"}),i("settings.security")]}),n.jsxs(US,{value:"settings",className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Nh,{className:"h-4 w-4"}),i("common.settings")]}),n.jsxs(US,{value:"activity",className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Fu,{className:"h-4 w-4"}),i("common.activity")]}),n.jsxs(US,{value:"permissions",className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Hm,{className:"h-4 w-4"}),i("common.permissions")]})]}),n.jsx(VS,{value:"profile",children:n.jsx("div",{className:"grid gap-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Xh,{className:"h-5 w-5"}),i("settings.personalInformation")]}),n.jsx(Pu,{children:i("settings.personalInfoDescription")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"full_name",children:i("settings.fullName")}),n.jsx($j,{id:"full_name",value:p.full_name,onChange:e=>f(t=>({...t,full_name:e.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"email",children:i("settings.email")}),n.jsx($j,{id:"email",value:r.email,disabled:!0,className:"bg-muted"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"phone",children:i("settings.phone")}),n.jsx($j,{id:"phone",value:p.phone,onChange:e=>f(t=>({...t,phone:e.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"role",children:i("common.role")}),n.jsx($j,{id:"role",value:i("settings.administrator"),disabled:!0,className:"bg-muted"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"bio",children:i("settings.bio")}),n.jsx(bC,{id:"bio",value:p.bio,onChange:e=>f(t=>({...t,bio:e.target.value})),placeholder:i("settings.bioPlaceholder"),rows:4})]}),n.jsx("div",{className:"flex "+(o?"justify-start":"justify-end"),children:n.jsxs(ku,{onClick:async()=>{c(!0);try{await s(p)?m(i("settings.profileUpdated")):h(i("common.error"))}finally{c(!1)}},disabled:l,children:[l?n.jsx(lb,{size:"sm",className:""+(o?"ml-2":"mr-2")}):n.jsx(yh,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),i("common.saveProfile")]})})]})]})})}),n.jsx(VS,{value:"security",children:n.jsx("div",{className:"grid gap-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Sh,{className:"h-5 w-5"}),i("common.security")]}),n.jsx(Pu,{children:i("common.securityDescription")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{children:[n.jsx(j_,{children:i("common.twoFactorAuth")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("common.twoFactorDescription")})]}),n.jsx(O5,{checked:x.two_factor_enabled,onCheckedChange:e=>g(t=>({...t,two_factor_enabled:e}))})]}),n.jsxs("div",{className:"flex items-center justify-between "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{children:[n.jsx(j_,{children:i("common.securityAlerts")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("common.securityAlertsDescription")})]}),n.jsx(O5,{checked:x.security_alerts,onCheckedChange:e=>g(t=>({...t,security_alerts:e}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:i("common.sessionTimeout")}),n.jsx($j,{type:"number",value:x.session_timeout,onChange:e=>g(t=>({...t,session_timeout:parseInt(e.target.value)||480})),min:"30",max:"1440",className:o?"text-right":""}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("common.sessionTimeoutDescription")})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs(ku,{onClick:async()=>{if(null==a?void 0:a.email)try{const{error:e}=await mr.auth.resetPasswordForEmail(a.email,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;m(i("common.success"))}catch(e){h(i("common.error"))}},variant:"outline",children:[n.jsx(Hm,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),i("common.resetPassword")]})}),n.jsx("div",{className:"flex "+(o?"justify-start":"justify-end"),children:n.jsxs(ku,{onClick:N,children:[n.jsx(yh,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),i("common.saveSecuritySettings")]})})]})]})})}),n.jsx(VS,{value:"settings",children:n.jsx("div",{className:"grid gap-6",children:n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Nh,{className:"h-5 w-5"}),i("common.adminSettings")]}),n.jsx(Pu,{children:i("common.adminSettingsDescription")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{children:[n.jsx(j_,{children:i("common.emailNotifications")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("common.emailNotificationsDescription")})]}),n.jsx(O5,{checked:x.email_notifications,onCheckedChange:e=>g(t=>({...t,email_notifications:e}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:i("common.auditLogRetention")}),n.jsx($j,{type:"number",value:x.audit_log_retention,onChange:e=>g(t=>({...t,audit_log_retention:parseInt(e.target.value)||90})),min:"30",max:"365",className:o?"text-right":""}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("common.auditLogRetentionDescription")})]}),n.jsx("div",{className:"flex "+(o?"justify-start":"justify-end"),children:n.jsxs(ku,{onClick:N,children:[n.jsx(yh,{className:"h-4 w-4 "+(o?"ml-2":"mr-2")}),i("settings.saveChanges")]})})]})]})})}),n.jsx(VS,{value:"activity",children:n.jsx("div",{className:"grid gap-6",children:d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(lb,{label:i("common.loading")})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("settings.totalLogins")}),n.jsx(Zh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold",children:v.total_logins})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("settings.activeSessions")}),n.jsx(Fu,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold",children:v.sessions_active})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("settings.failedAttempts")}),n.jsx(Sh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(Au,{children:n.jsx("div",{className:"text-2xl font-bold text-destructive",children:v.failed_attempts})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Mu,{className:"text-sm font-medium",children:i("settings.lastLogin")}),n.jsx(Nm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-sm font-bold",children:new Date(v.last_login).toLocaleDateString()}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(v.last_login).toLocaleTimeString()})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Fu,{className:"h-5 w-5"}),i("settings.recentAdminActivity")]})}),n.jsx(Au,{children:n.jsx(X5,{userId:null==a?void 0:a.id})})]})]})})}),n.jsx(VS,{value:"permissions",children:n.jsxs("div",{className:"grid gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Hm,{className:"h-5 w-5"}),i("settings.adminPermissions")]}),n.jsx(Pu,{children:i("settings.adminPermissionsDescription")})]}),n.jsx(Au,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.permissions_granted.map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{className:"flex items-center gap-2 "+(o?"flex-row-reverse":""),children:[n.jsx(Hm,{className:"h-4 w-4 text-success"}),n.jsx("span",{className:"text-sm font-medium",children:e})]}),n.jsx(Xf,{variant:"success",size:"sm",children:i("settings.granted")})]},t))})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsx(Mu,{children:i("settings.apiAccess")}),n.jsx(Pu,{children:i("settings.apiAccessDescription")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between "+(o?"flex-row-reverse":""),children:[n.jsxs("div",{children:[n.jsx(j_,{children:i("settings.apiKey")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("settings.apiKeyDescription")})]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>b(!j),children:j?n.jsx(Om,{className:"h-4 w-4"}):n.jsx(Mm,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"p-3 bg-muted rounded-md font-mono text-sm "+(o?"text-right":"text-left"),children:j?"admin_key_"+(null==(e=null==a?void 0:a.id)?void 0:e.slice(0,8))+"..."+(null==(t=null==a?void 0:a.id)?void 0:t.slice(-8)):"••••••••••••••••••••••••••••••••"}),n.jsx(ku,{variant:"outline",size:"sm",children:i("settings.generateNewKey")})]})]})]})})]})]})}):n.jsx(c5,{children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("p",{className:"text-muted-foreground",children:i("common.accessDenied")})})})},Z5=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s}=br(),{toast:a}=fp(),i=Ne.useRef(null),o=or("RealTimeRequests"),l=async()=>{if(s)try{n(!0);const{data:e,error:r}=await mr.from("requests").select("\n          *,\n          offers (*)\n        ").eq("client_id",s.id).order("created_at",{ascending:!1});if(r)throw r;const a=(e||[]).map(e=>({...e,user_id:e.client_id}));t(a)}catch(e){o.error("Error fetching requests",{error:e,userId:null==s?void 0:s.id}),a({title:"Error",description:"Failed to load requests",variant:"destructive"})}finally{n(!1)}};Ne.useEffect(()=>{if(s)return l(),i.current=mr.channel("requests-changes").on("postgres_changes",{event:"*",schema:"public",table:"requests",filter:`client_id=eq.${s.id}`},e=>{if(o.debug("Real-time request update",{payload:e}),"INSERT"===e.eventType){const r={...e.new,user_id:e.new.client_id,offers:[]};t(e=>[r,...e]),a({title:"New Request Created",description:`Request "${r.title}" has been created`})}else if("UPDATE"===e.eventType){const r={...e.new,user_id:e.new.client_id};t(e=>e.map(e=>e.id===r.id?{...e,...r}:e)),a({title:"Request Updated",description:`Request "${r.title}" has been updated`})}else"DELETE"===e.eventType&&(t(t=>t.filter(t=>t.id!==e.old.id)),a({title:"Request Deleted",description:"Request has been deleted"}))}).on("postgres_changes",{event:"*",schema:"public",table:"offers"},e=>{if(o.debug("Real-time offer update",{payload:e}),"INSERT"===e.eventType||"UPDATE"===e.eventType){const r=e.new;t(t=>t.map(t=>(t.id===r.request_id&&(c(t.id),"INSERT"===e.eventType&&a({title:"New Offer Received",description:`New offer received for "${t.title}"`})),t)))}}).subscribe(),()=>{i.current&&i.current.unsubscribe()}},[s]);const c=async e=>{try{const{data:r,error:n}=await mr.from("offers").select("*").eq("request_id",e);if(n)throw n;t(t=>t.map(t=>t.id===e?{...t,offers:r||[]}:t))}catch(r){o.error("Error fetching offers",{error:r,requestId:e})}};return{requests:e,loading:r,refetch:l,formatBudget:e=>e.budget_min||e.budget_max?e.budget_min&&e.budget_max?`${e.budget_min.toLocaleString()} - ${e.budget_max.toLocaleString()}`:e.budget_min?`From ${e.budget_min.toLocaleString()}`:e.budget_max?`Up to ${e.budget_max.toLocaleString()}`:"Budget not specified":"Budget not specified",getOffersCount:e=>{var t;return(null==(t=e.offers)?void 0:t.length)||0},createRequest:async e=>{if(!s)throw new Error("User not authenticated");try{if(o.debug("Creating request with data:",{requestData:e,userId:s.id}),!e.title||!e.description||!e.category)throw new Error("Missing required fields: title, description, or category");const r=e.location&&""!==e.location.trim()?e.location.trim():null,n=e.budget_min&&!isNaN(e.budget_min)?e.budget_min:null,a=e.budget_max&&!isNaN(e.budget_max)?e.budget_max:null,i={client_id:s.id,title:e.title.trim(),description:e.description.trim(),category:e.category,budget_min:n,budget_max:a,currency:e.currency||"SAR",location:r,deadline:e.deadline||null,urgency:e.urgency,requirements:e.requirements||null};o.debug("Processed insert data:",i);const{data:l,error:c}=await mr.from("requests").insert([i]).select().single();if(c)throw o.error("Supabase error creating request:",{error:c,insertData:i}),c;o.info("Request created successfully:",{requestId:l.id,title:l.title});try{await mr.from("activity_feed").insert({user_id:s.id,activity_type:"request_created",description:`Created request: ${e.title}`,title:`New ${e.category} request`,metadata:{category:e.category,budget_range:`${n||0} - ${a||0}`,urgency:e.urgency}})}catch(t){o.warn("Failed to log activity:",t)}return l}catch(r){throw o.error("Error creating request:",{error:r.message,stack:r.stack,requestData:e,userId:null==s?void 0:s.id}),r}},updateRequest:async(e,t)=>{if(!s)throw new Error("User not authenticated");try{const{data:r,error:n}=await mr.from("requests").update(t).eq("id",e).eq("client_id",s.id).select().single();if(n)throw n;return await mr.from("activity_feed").insert({user_id:s.id,activity_type:"request_updated",description:`Updated request: ${t.title||"Request"}`,title:"Request updated",metadata:{request_id:e,updated_fields:Object.keys(t)}}),r}catch(r){throw o.error("Error updating request",{error:r,requestId:e,requestData:t}),r}},deleteRequest:async e=>{if(!s)throw new Error("User not authenticated");try{const{error:t}=await mr.from("requests").delete().eq("id",e).eq("client_id",s.id);if(t)throw t;await mr.from("activity_feed").insert({user_id:s.id,activity_type:"request_deleted",description:"Deleted request",title:"Request deleted",metadata:{request_id:e}})}catch(t){throw o.error("Error deleting request",{error:t,requestId:e}),t}}}};var J5=function(){return J5=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},J5.apply(this,arguments)};function e6(e,t,r){for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function t6(e){return"multiple"===e.mode}function r6(e){return"range"===e.mode}function n6(e){return"single"===e.mode}"function"==typeof SuppressedError&&SuppressedError;var s6={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var a6=Object.freeze({__proto__:null,formatCaption:function(e,t){return bj(e,"LLLL y",t)},formatDay:function(e,t){return bj(e,"d",t)},formatMonthCaption:function(e,t){return bj(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return bj(e,"cccccc",t)},formatYearCaption:function(e,t){return bj(e,"yyyy",t)}}),i6=Object.freeze({__proto__:null,labelDay:function(e,t,r){return bj(e,"do MMMM (EEEE)",r)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return bj(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});var o6=Ne.createContext(void 0);function l6(e){var t,r,s=e.initialProps,a={captionLayout:"buttons",classNames:s6,formatters:a6,labels:i6,locale:Ky,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:new Date,mode:"default"},i=function(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,s=e.toMonth,a=e.fromDate,i=e.toDate;return n?a=Ry(n):t&&(a=new Date(t,0,1)),s?i=Ay(s):r&&(i=new Date(r,11,31)),{fromDate:a?Ny(a):void 0,toDate:i?Ny(i):void 0}}(s),o=i.fromDate,l=i.toDate,c=null!==(t=s.captionLayout)&&void 0!==t?t:a.captionLayout;"buttons"===c||o&&l||(c="buttons"),(n6(s)||t6(s)||r6(s))&&(r=s.onSelect);var d=J5(J5(J5({},a),s),{captionLayout:c,classNames:J5(J5({},a.classNames),s.classNames),components:J5({},s.components),formatters:J5(J5({},a.formatters),s.formatters),fromDate:o,labels:J5(J5({},a.labels),s.labels),mode:s.mode||a.mode,modifiers:J5(J5({},a.modifiers),s.modifiers),modifiersClassNames:J5(J5({},a.modifiersClassNames),s.modifiersClassNames),onSelect:r,styles:J5(J5({},a.styles),s.styles),toDate:l});return n.jsx(o6.Provider,{value:d,children:e.children})}function c6(){var e=Ne.useContext(o6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function d6(e){var t=c6(),r=t.locale,s=t.classNames,a=t.styles,i=t.formatters.formatCaption;return n.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function u6(e){return n.jsx("svg",J5({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function m6(e){var t,r,s=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=c6(),u=null!==(r=null===(t=d.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==r?r:u6;return n.jsxs("div",{className:l,style:c,children:[n.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),n.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:i}),n.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,n.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function h6(e){var t,r=c6(),s=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!s)return n.jsx(n.Fragment,{});if(!a)return n.jsx(n.Fragment,{});var m=[];if(function(e,t){const r=my(e),n=my(t);return r.getFullYear()===n.getFullYear()}(s,a))for(var h=Ry(s),p=s.getMonth();p<=a.getMonth();p++)m.push(Mj(h,p));else for(h=Ry(new Date),p=0;p<=11;p++)m.push(Mj(h,p));var f=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:m6;return n.jsx(f,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:function(t){var r=Number(t.target.value),n=Mj(Ry(e.displayMonth),r);e.onChange(n)},value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:m.map(function(e){return n.jsx("option",{value:e.getMonth(),children:l(e,{locale:o})},e.getMonth())})})}function p6(e){var t,r=e.displayMonth,s=c6(),a=s.fromDate,i=s.toDate,o=s.locale,l=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,m=s.labels.labelYearDropdown,h=[];if(!a)return n.jsx(n.Fragment,{});if(!i)return n.jsx(n.Fragment,{});for(var p=a.getFullYear(),f=i.getFullYear(),x=p;x<=f;x++)h.push(Pj(Ly(new Date),x));var g=null!==(t=null==d?void 0:d.Dropdown)&&void 0!==t?t:m6;return n.jsx(g,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:function(t){var n=Pj(Ry(r),Number(t.target.value));e.onChange(n)},value:r.getFullYear(),caption:u(r,{locale:o}),children:h.map(function(e){return n.jsx("option",{value:e.getFullYear(),children:u(e,{locale:o})},e.getFullYear())})})}function f6(){var e=c6(),t=function(e){var t=e.month,r=e.defaultMonth,n=e.today,s=t||r||n||new Date,a=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return a&&Py(a,s)<0&&(s=fy(a,-1*(l-1))),i&&Py(s,i)<0&&(s=i),Ry(s)}(e),r=function(e,t){var r=Ne.useState(e),n=r[0];return[void 0===t?n:t,r[1]]}(t,e.month),n=r[0],s=r[1];return[n,function(t){var r;if(!e.disableNavigation){var n=Ry(t);s(n),null===(r=e.onMonthChange)||void 0===r||r.call(e,n)}}]}var x6=Ne.createContext(void 0);function g6(e){var t=c6(),r=f6(),s=r[0],a=r[1],i=function(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,s=Ry(e),a=Py(Ry(fy(s,n)),s),i=[],o=0;o<a;o++){var l=fy(s,o);i.push(l)}return r&&(i=i.reverse()),i}(s,t),o=function(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,s=t.numberOfMonths,a=void 0===s?1:s,i=n?a:1,o=Ry(e);if(!r)return fy(o,i);if(!(Py(r,e)<a))return fy(o,i)}}(s,t),l=function(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,s=t.numberOfMonths,a=n?void 0===s?1:s:1,i=Ry(e);if(!r)return fy(i,-a);if(!(Py(i,r)<=0))return fy(i,-a)}}(s,t),c=function(e){return i.some(function(t){return Ej(e,t)})},d={currentMonth:s,displayMonths:i,goToMonth:a,goToDate:function(e,r){c(e)||(r&&Cj(e,r)?a(fy(e,1+-1*t.numberOfMonths)):a(e))},previousMonth:l,nextMonth:o,isDateDisplayed:c};return n.jsx(x6.Provider,{value:d,children:e.children})}function v6(){var e=Ne.useContext(x6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function y6(e){var t,r=c6(),s=r.classNames,a=r.styles,i=r.components,o=v6().goToMonth,l=function(t){o(fy(t,e.displayIndex?-e.displayIndex:0))},c=null!==(t=null==i?void 0:i.CaptionLabel)&&void 0!==t?t:d6,d=n.jsx(c,{id:e.id,displayMonth:e.displayMonth});return n.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[n.jsx("div",{className:s.vhidden,children:d}),n.jsx(h6,{onChange:l,displayMonth:e.displayMonth}),n.jsx(p6,{onChange:l,displayMonth:e.displayMonth})]})}function j6(e){return n.jsx("svg",J5({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function b6(e){return n.jsx("svg",J5({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var w6=Ne.forwardRef(function(e,t){var r=c6(),s=r.classNames,a=r.styles,i=[s.button_reset,s.button];e.className&&i.push(e.className);var o=i.join(" "),l=J5(J5({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),n.jsx("button",J5({},e,{ref:t,type:"button",className:o,style:l}))});function N6(e){var t,r,s=c6(),a=s.dir,i=s.locale,o=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,m=s.components;if(!e.nextMonth&&!e.previousMonth)return n.jsx(n.Fragment,{});var h=d(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),f=u(e.nextMonth,{locale:i}),x=[o.nav_button,o.nav_button_next].join(" "),g=null!==(t=null==m?void 0:m.IconRight)&&void 0!==t?t:b6,v=null!==(r=null==m?void 0:m.IconLeft)&&void 0!==r?r:j6;return n.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&n.jsx(w6,{name:"previous-month","aria-label":h,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===a?n.jsx(g,{className:o.nav_icon,style:l.nav_icon}):n.jsx(v,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&n.jsx(w6,{name:"next-month","aria-label":f,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===a?n.jsx(v,{className:o.nav_icon,style:l.nav_icon}):n.jsx(g,{className:o.nav_icon,style:l.nav_icon})})]})}function _6(e){var t=c6().numberOfMonths,r=v6(),s=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(t){return Ej(e.displayMonth,t)}),c=0===l,d=l===o.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c);return n.jsx(N6,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:s,onPreviousClick:function(){s&&i(s)},onNextClick:function(){a&&i(a)}})}function S6(e){var t,r,s=c6(),a=s.classNames,i=s.disableNavigation,o=s.styles,l=s.captionLayout,c=s.components,d=null!==(t=null==c?void 0:c.CaptionLabel)&&void 0!==t?t:d6;return r=i?n.jsx(d,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===l?n.jsx(y6,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===l?n.jsxs(n.Fragment,{children:[n.jsx(y6,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),n.jsx(_6,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):n.jsxs(n.Fragment,{children:[n.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(_6,{displayMonth:e.displayMonth,id:e.id})]}),n.jsx("div",{className:a.caption,style:o.caption,children:r})}function k6(e){var t=c6(),r=t.footer,s=t.styles,a=t.classNames.tfoot;return r?n.jsx("tfoot",{className:a,style:s.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:r})})}):n.jsx(n.Fragment,{})}function C6(){var e=c6(),t=e.classNames,r=e.styles,s=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=function(e,t,r){for(var n=r?by(new Date):jy(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=py(n,a);s.push(i)}return s}(a,i,o);return n.jsxs("tr",{style:r.head_row,className:t.head_row,children:[s&&n.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(e,s){return n.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(e,{locale:a}),children:l(e,{locale:a})},s)})]})}function E6(){var e,t=c6(),r=t.classNames,s=t.styles,a=t.components,i=null!==(e=null==a?void 0:a.HeadRow)&&void 0!==e?e:C6;return n.jsx("thead",{style:s.head,className:r.head,children:n.jsx(i,{})})}function O6(e){var t=c6(),r=t.locale,s=t.formatters.formatDay;return n.jsx(n.Fragment,{children:s(e.date,{locale:r})})}var M6=Ne.createContext(void 0);function P6(e){if(!t6(e.initialProps)){return n.jsx(M6.Provider,{value:{selected:void 0,modifiers:{disabled:[]}},children:e.children})}return n.jsx(A6,{initialProps:e.initialProps,children:e.children})}function A6(e){var t=e.initialProps,r=e.children,s=t.selected,a=t.min,i=t.max,o={disabled:[]};s&&o.disabled.push(function(e){var t=i&&s.length>i-1,r=s.some(function(t){return Oy(t,e)});return Boolean(t&&!r)});var l={selected:s,onDayClick:function(e,r,n){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,r,n),!Boolean(r.selected&&a&&(null==s?void 0:s.length)===a))&&!Boolean(!r.selected&&i&&(null==s?void 0:s.length)===i)){var c=s?e6([],s):[];if(r.selected){var d=c.findIndex(function(t){return Oy(e,t)});c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,r,n)}},modifiers:o};return n.jsx(M6.Provider,{value:l,children:r})}function T6(){var e=Ne.useContext(M6);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var D6,R6,L6=Ne.createContext(void 0);function q6(e){if(!r6(e.initialProps)){return n.jsx(L6.Provider,{value:{selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}},children:e.children})}return n.jsx(I6,{initialProps:e.initialProps,children:e.children})}function I6(e){var t=e.initialProps,r=e.children,s=t.selected,a=s||{},i=a.from,o=a.to,l=t.min,c=t.max,d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],Oy(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:Oj(i,l-1),before:py(i,l-1)}),i&&o&&d.disabled.push({after:i,before:py(i,l-1)}),!i&&o&&d.disabled.push({after:Oj(o,l-1),before:py(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:py(i,1-c)}),d.disabled.push({after:py(i,c-1)})),i&&o){var u=c-(Sy(o,i)+1);d.disabled.push({before:Oj(i,u)}),d.disabled.push({after:py(o,u)})}!i&&o&&(d.disabled.push({before:py(o,1-c)}),d.disabled.push({after:py(o,c-1)}))}return n.jsx(L6.Provider,{value:{selected:s,onDayClick:function(e,r,n){var a,i;null===(a=t.onDayClick)||void 0===a||a.call(t,e,r,n);var o=function(e,t){var r=t||{},n=r.from,s=r.to;if(n&&s){if(Oy(s,e)&&Oy(n,e))return;if(Oy(s,e))return{from:s,to:void 0};if(Oy(n,e))return;return kj(n,e)?{from:e,to:s}:{from:n,to:e}}return s?kj(e,s)?{from:s,to:e}:{from:e,to:s}:n?Cj(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}(e,s);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,r,n)},modifiers:d},children:r})}function F6(){var e=Ne.useContext(L6);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function z6(e){return Array.isArray(e)?e6([],e):void 0!==e?[e]:[]}(R6=D6||(D6={})).Outside="outside",R6.Disabled="disabled",R6.Selected="selected",R6.Hidden="hidden",R6.Today="today",R6.RangeStart="range_start",R6.RangeEnd="range_end",R6.RangeMiddle="range_middle";var B6=D6.Selected,$6=D6.Disabled,U6=D6.Hidden,V6=D6.Today,W6=D6.RangeEnd,H6=D6.RangeMiddle,Y6=D6.RangeStart,K6=D6.Outside;var G6=Ne.createContext(void 0);function X6(e){var t=c6(),r=function(e,t,r){var n,s=((n={})[B6]=z6(e.selected),n[$6]=z6(e.disabled),n[U6]=z6(e.hidden),n[V6]=[e.today],n[W6]=[],n[H6]=[],n[Y6]=[],n[K6]=[],n);return e.fromDate&&s[$6].push({before:e.fromDate}),e.toDate&&s[$6].push({after:e.toDate}),t6(e)?s[$6]=s[$6].concat(t.modifiers[$6]):r6(e)&&(s[$6]=s[$6].concat(r.modifiers[$6]),s[Y6]=r.modifiers[Y6],s[H6]=r.modifiers[H6],s[W6]=r.modifiers[W6]),s}(t,T6(),F6()),s=function(e){var t={};return Object.entries(e).forEach(function(e){var r=e[0],n=e[1];t[r]=z6(n)}),t}(t.modifiers),a=J5(J5({},r),s);return n.jsx(G6.Provider,{value:a,children:e.children})}function Q6(){var e=Ne.useContext(G6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Z6(e,t){return t.some(function(t){if("boolean"==typeof t)return t;if(My(t))return Oy(e,t);var r,n,s,a,i;if(function(e){return Array.isArray(e)&&e.every(My)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"==typeof e&&"from"in e)}(t))return r=e,a=(n=t).from,i=n.to,a&&i?(Sy(i,a)<0&&(a=(s=[i,a])[0],i=s[1]),Sy(r,a)>=0&&Sy(i,r)>=0):i?Oy(i,r):!!a&&Oy(a,r);if(function(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}(t)){var o=Sy(t.before,e)>0,l=Sy(t.after,e)<0;return kj(t.before,t.after)?l&&o:o||l}return function(e){return Boolean(e&&"object"==typeof e&&"after"in e)}(t)?Sy(e,t.after)>0:function(e){return Boolean(e&&"object"==typeof e&&"before"in e)}(t)?Sy(t.before,e)>0:"function"==typeof t&&t(e)})}function J6(e,t,r){var n=Object.keys(t).reduce(function(r,n){var s=t[n];return Z6(e,s)&&r.push(n),r},[]),s={};return n.forEach(function(e){return s[e]=!0}),r&&!Ej(e,r)&&(s.outside=!0),s}function e8(e,t){var r=t.moveBy,n=t.direction,s=t.context,a=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=s.weekStartsOn,c=s.fromDate,d=s.toDate,u=s.locale,m={day:py,week:ky,month:fy,year:Cy,startOfWeek:function(e){return s.ISOWeek?by(e):jy(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return s.ISOWeek?Iy(e):qy(e,{locale:u,weekStartsOn:l})}}[r](e,"after"===n?1:-1);"before"===n&&c?m=function(e){let t;return e.forEach(function(e){const r=my(e);(void 0===t||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}([c,m]):"after"===n&&d&&(m=function(e){let t;return e.forEach(e=>{const r=my(e);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}([d,m]));var h=!0;if(a){var p=J6(m,a);h=!p.disabled&&!p.hidden}return h?m:o.count>365?o.lastFocused:e8(m,{moveBy:r,direction:n,context:s,modifiers:a,retry:J5(J5({},o),{count:o.count+1})})}var t8=Ne.createContext(void 0);function r8(e){var t=v6(),r=Q6(),s=Ne.useState(),a=s[0],i=s[1],o=Ne.useState(),l=o[0],c=o[1],d=function(e,t){for(var r,n,s=Ry(e[0]),a=Ay(e[e.length-1]),i=s;i<=a;){var o=J6(i,t);if(o.disabled||o.hidden)i=py(i,1);else{if(o.selected)return i;o.today&&!n&&(n=i),r||(r=i),i=py(i,1)}}return n||r}(t.displayMonths,r),u=(null!=a?a:l&&t.isDateDisplayed(l))?l:d,m=function(e){i(e)},h=c6(),p=function(e,n){if(a){var s=e8(a,{moveBy:e,direction:n,context:h,modifiers:r});Oy(a,s)||(t.goToDate(s,a),m(s))}},f={focusedDay:a,focusTarget:u,blur:function(){c(a),i(void 0)},focus:m,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return n.jsx(t8.Provider,{value:f,children:e.children})}function n8(){var e=Ne.useContext(t8);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var s8=Ne.createContext(void 0);function a8(e){if(!n6(e.initialProps)){return n.jsx(s8.Provider,{value:{selected:void 0},children:e.children})}return n.jsx(i8,{initialProps:e.initialProps,children:e.children})}function i8(e){var t=e.initialProps,r=e.children,s={selected:t.selected,onDayClick:function(e,r,n){var s,a,i;null===(s=t.onDayClick)||void 0===s||s.call(t,e,r,n),!r.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,r,n):null===(a=t.onSelect)||void 0===a||a.call(t,void 0,e,r,n)}};return n.jsx(s8.Provider,{value:s,children:r})}function o8(){var e=Ne.useContext(s8);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function l8(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(t){var n=e.modifiersClassNames[t];if(n)r.push(n);else if(function(e){return Object.values(D6).includes(e)}(t)){var s=e.classNames["day_".concat(t)];s&&r.push(s)}}),r}function c8(e,t,r){var s,a,i,o=c6(),l=n8(),c=function(e,t){return J6(e,Q6(),t)}(e,t),d=function(e,t){var r=c6(),n=o8(),s=T6(),a=F6(),i=n8(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,m=i.focus,h=i.focusMonthBefore,p=i.focusMonthAfter,f=i.focusYearBefore,x=i.focusYearAfter,g=i.focusStartOfWeek,v=i.focusEndOfWeek;return{onClick:function(i){var o,l,c,d;n6(r)?null===(o=n.onDayClick)||void 0===o||o.call(n,e,t,i):t6(r)?null===(l=s.onDayClick)||void 0===l||l.call(s,e,t,i):r6(r)?null===(c=a.onDayClick)||void 0===c||c.call(a,e,t,i):null===(d=r.onDayClick)||void 0===d||d.call(r,e,t,i)},onFocus:function(n){var s;m(e),null===(s=r.onDayFocus)||void 0===s||s.call(r,e,t,n)},onBlur:function(n){var s;u(),null===(s=r.onDayBlur)||void 0===s||s.call(r,e,t,n)},onKeyDown:function(n){var s;switch(n.key){case"ArrowLeft":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?o():l();break;case"ArrowRight":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?l():o();break;case"ArrowDown":n.preventDefault(),n.stopPropagation(),c();break;case"ArrowUp":n.preventDefault(),n.stopPropagation(),d();break;case"PageUp":n.preventDefault(),n.stopPropagation(),n.shiftKey?f():h();break;case"PageDown":n.preventDefault(),n.stopPropagation(),n.shiftKey?x():p();break;case"Home":n.preventDefault(),n.stopPropagation(),g();break;case"End":n.preventDefault(),n.stopPropagation(),v()}null===(s=r.onDayKeyDown)||void 0===s||s.call(r,e,t,n)},onKeyUp:function(n){var s;null===(s=r.onDayKeyUp)||void 0===s||s.call(r,e,t,n)},onMouseEnter:function(n){var s;null===(s=r.onDayMouseEnter)||void 0===s||s.call(r,e,t,n)},onMouseLeave:function(n){var s;null===(s=r.onDayMouseLeave)||void 0===s||s.call(r,e,t,n)},onPointerEnter:function(n){var s;null===(s=r.onDayPointerEnter)||void 0===s||s.call(r,e,t,n)},onPointerLeave:function(n){var s;null===(s=r.onDayPointerLeave)||void 0===s||s.call(r,e,t,n)},onTouchCancel:function(n){var s;null===(s=r.onDayTouchCancel)||void 0===s||s.call(r,e,t,n)},onTouchEnd:function(n){var s;null===(s=r.onDayTouchEnd)||void 0===s||s.call(r,e,t,n)},onTouchMove:function(n){var s;null===(s=r.onDayTouchMove)||void 0===s||s.call(r,e,t,n)},onTouchStart:function(n){var s;null===(s=r.onDayTouchStart)||void 0===s||s.call(r,e,t,n)}}}(e,c),u=function(){var e=c6(),t=o8(),r=T6(),n=F6();return n6(e)?t.selected:t6(e)?r.selected:r6(e)?n.selected:void 0}(),m=Boolean(o.onDayClick||"default"!==o.mode);Ne.useEffect(function(){var t;c.outside||l.focusedDay&&m&&Oy(l.focusedDay,e)&&(null===(t=r.current)||void 0===t||t.focus())},[l.focusedDay,e,r,m,c.outside]);var h=l8(o,c).join(" "),p=function(e,t){var r=J5({},e.styles.day);return Object.keys(t).forEach(function(t){var n;r=J5(J5({},r),null===(n=e.modifiersStyles)||void 0===n?void 0:n[t])}),r}(o,c),f=Boolean(c.outside&&!o.showOutsideDays||c.hidden),x=null!==(i=null===(a=o.components)||void 0===a?void 0:a.DayContent)&&void 0!==i?i:O6,g={style:p,className:h,children:n.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),role:"gridcell"},v=l.focusTarget&&Oy(l.focusTarget,e)&&!c.outside,y=l.focusedDay&&Oy(l.focusedDay,e),j=J5(J5(J5({},g),((s={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,s.tabIndex=y||v?0:-1,s)),d);return{isButton:m,isHidden:f,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:g}}function d8(e){var t=Ne.useRef(null),r=c8(e.date,e.displayMonth,t);return r.isHidden?n.jsx("div",{role:"gridcell"}):r.isButton?n.jsx(w6,J5({name:"day",ref:t},r.buttonProps)):n.jsx("div",J5({},r.divProps))}function u8(e){var t=e.number,r=e.dates,s=c6(),a=s.onWeekNumberClick,i=s.styles,o=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=(0,s.formatters.formatWeekNumber)(Number(t),{locale:l});if(!a)return n.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var u=c(Number(t),{locale:l});return n.jsx(w6,{name:"week-number","aria-label":u,className:o.weeknumber,style:i.weeknumber,onClick:function(e){a(t,r,e)},children:d})}function m8(e){var t,r,s,a=c6(),i=a.styles,o=a.classNames,l=a.showWeekNumber,c=a.components,d=null!==(t=null==c?void 0:c.Day)&&void 0!==t?t:d8,u=null!==(r=null==c?void 0:c.WeekNumber)&&void 0!==r?r:u8;return l&&(s=n.jsx("td",{className:o.cell,style:i.cell,children:n.jsx(u,{number:e.weekNumber,dates:e.dates})})),n.jsxs("tr",{className:o.row,style:i.row,children:[s,e.dates.map(function(t){return n.jsx("td",{className:o.cell,style:i.cell,role:"presentation",children:n.jsx(d,{displayMonth:e.displayMonth,date:t})},function(e){return Math.trunc(+my(e)/1e3)}(t))})]})}function h8(e,t,r){for(var n=(null==r?void 0:r.ISOWeek)?Iy(t):qy(t,r),s=(null==r?void 0:r.ISOWeek)?by(e):jy(e,r),a=Sy(n,s),i=[],o=0;o<=a;o++)i.push(py(s,o));return i.reduce(function(e,t){var n=(null==r?void 0:r.ISOWeek)?Gy(t):Qy(t,r),s=e.find(function(e){return e.weekNumber===n});return s?(s.dates.push(t),e):(e.push({weekNumber:n,dates:[t]}),e)},[])}function p8(e){var t,r,s,a=c6(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,p=a.ISOWeek,f=function(e,t){var r=h8(Ry(e),Ay(e),t);if(null==t?void 0:t.useFixedWeeks){var n=Sj(e,t);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],i=ky(a,6-n),o=h8(ky(a,1),i,t);r.push.apply(r,o)}}return r}(e.displayMonth,{useFixedWeeks:Boolean(d),ISOWeek:p,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),x=null!==(t=null==u?void 0:u.Head)&&void 0!==t?t:E6,g=null!==(r=null==u?void 0:u.Row)&&void 0!==r?r:m8,v=null!==(s=null==u?void 0:u.Footer)&&void 0!==s?s:k6;return n.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&n.jsx(x,{}),n.jsx("tbody",{className:o.tbody,style:l.tbody,children:f.map(function(t){return n.jsx(g,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)})}),n.jsx(v,{displayMonth:e.displayMonth})]})}var f8="undefined"!=typeof window&&window.document&&window.document.createElement?Ne.useLayoutEffect:Ne.useEffect,x8=!1,g8=0;function v8(){return"react-day-picker-".concat(++g8)}function y8(e){var t,r,s=c6(),a=s.dir,i=s.classNames,o=s.styles,l=s.components,c=v6().displayMonths,d=function(e){var t,r=null!=e?e:x8?v8():null,n=Ne.useState(r),s=n[0],a=n[1];return f8(function(){null===s&&a(v8())},[]),Ne.useEffect(function(){!1===x8&&(x8=!0)},[]),null!==(t=null!=e?e:s)&&void 0!==t?t:void 0}(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],h=o.month,p=0===e.displayIndex,f=e.displayIndex===c.length-1,x=!p&&!f;"rtl"===a&&(f=(t=[p,f])[0],p=t[1]),p&&(m.push(i.caption_start),h=J5(J5({},h),o.caption_start)),f&&(m.push(i.caption_end),h=J5(J5({},h),o.caption_end)),x&&(m.push(i.caption_between),h=J5(J5({},h),o.caption_between));var g=null!==(r=null==l?void 0:l.Caption)&&void 0!==r?r:S6;return n.jsxs("div",{className:m.join(" "),style:h,children:[n.jsx(g,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(p8,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function j8(e){var t=c6(),r=t.classNames,s=t.styles;return n.jsx("div",{className:r.months,style:s.months,children:e.children})}function b8(e){var t,r,s=e.initialProps,a=c6(),i=n8(),o=v6(),l=Ne.useState(!1),c=l[0],d=l[1];Ne.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=J5(J5({},a.styles.root),a.style),h=Object.keys(s).filter(function(e){return e.startsWith("data-")}).reduce(function(e,t){var r;return J5(J5({},e),((r={})[t]=s[t],r))},{}),p=null!==(r=null===(t=s.components)||void 0===t?void 0:t.Months)&&void 0!==r?r:j8;return n.jsx("div",J5({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},h,{children:n.jsx(p,{children:o.displayMonths.map(function(e,t){return n.jsx(y8,{displayIndex:t,displayMonth:e},t)})})}))}function w8(e){var t=e.children,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["children"]);return n.jsx(l6,{initialProps:r,children:n.jsx(g6,{children:n.jsx(a8,{initialProps:r,children:n.jsx(P6,{initialProps:r,children:n.jsx(q6,{initialProps:r,children:n.jsx(X6,{children:n.jsx(r8,{children:t})})})})})})})}function N8(e){return n.jsx(w8,J5({},e,{children:n.jsx(b8,{initialProps:e})}))}function _8({className:e,classNames:t,showOutsideDays:r=!0,...s}){return n.jsx(N8,{showOutsideDays:r,className:_u("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:_u(Su({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:_u(Su({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>n.jsx(im,{className:"h-4 w-4"}),IconRight:({...e})=>n.jsx(om,{className:"h-4 w-4"})},...s})}_8.displayName="Calendar";const S8=["Construction Materials","IT Equipment","Office Supplies","Industrial Equipment","Medical Equipment","Transportation","Catering Services","Maintenance Services","Consulting Services","Security Services"],k8=({request:e,children:t})=>{var r,s;const{updateRequest:a,deleteRequest:i}=Z5(),{toast:o}=fp(),[l,c]=Ne.useState(!1),[d,u]=Ne.useState(!1),[m,h]=Ne.useState({title:e.title||"",description:e.description||"",category:e.category||"",budget_min:(null==(r=e.budget_min)?void 0:r.toString())||"",budget_max:(null==(s=e.budget_max)?void 0:s.toString())||"",location:e.location||"",deadline:e.deadline?new Date(e.deadline):void 0,urgency:e.urgency||"medium"});return n.jsxs(Sb,{open:l,onOpenChange:c,children:[n.jsx(kb,{asChild:!0,children:t}),n.jsxs(Ob,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsx(Ab,{children:"Edit Request"})}),n.jsxs("form",{onSubmit:async t=>{var r;if(t.preventDefault(),m.title&&m.description&&m.category){u(!0);try{await a(e.id,{title:m.title,description:m.description,category:m.category,budget_min:m.budget_min?parseFloat(m.budget_min):void 0,budget_max:m.budget_max?parseFloat(m.budget_max):void 0,location:m.location||void 0,deadline:(null==(r=m.deadline)?void 0:r.toISOString().split("T")[0])||void 0,urgency:m.urgency}),o({title:"Success",description:"Request updated successfully!"}),c(!1)}catch(n){o({title:"Error",description:"Failed to update request. Please try again.",variant:"destructive"})}finally{u(!1)}}else o({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"title",children:"Title *"}),n.jsx($j,{id:"title",value:m.title,onChange:e=>h({...m,title:e.target.value}),placeholder:"Enter request title",required:!0})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"description",children:"Description *"}),n.jsx(bC,{id:"description",value:m.description,onChange:e=>h({...m,description:e.target.value}),placeholder:"Detailed description of what you need",className:"min-h-32",required:!0})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"category",children:"Category *"}),n.jsxs(lC,{value:m.category,onValueChange:e=>h({...m,category:e}),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:"Select a category"})}),n.jsx(hC,{children:S8.map(e=>n.jsx(pC,{value:e,children:e},e))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"budget_min",children:"Minimum Budget"}),n.jsx($j,{id:"budget_min",type:"number",value:m.budget_min,onChange:e=>h({...m,budget_min:e.target.value}),placeholder:"0",min:"0"})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"budget_max",children:"Maximum Budget"}),n.jsx($j,{id:"budget_max",type:"number",value:m.budget_max,onChange:e=>h({...m,budget_max:e.target.value}),placeholder:"0",min:"0"})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"location",children:"Location"}),n.jsx($j,{id:"location",value:m.location,onChange:e=>h({...m,location:e.target.value}),placeholder:"Project location (optional)"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{children:"Deadline"}),n.jsxs(ry,{children:[n.jsx(ny,{asChild:!0,children:n.jsxs(ku,{type:"button",variant:"outline",className:_u("w-full justify-start text-left font-normal",!m.deadline&&"text-muted-foreground"),children:[n.jsx(Zu,{className:"mr-2 h-4 w-4"}),m.deadline?bj(m.deadline,"PPP"):"Pick a date"]})}),n.jsx(sy,{className:"w-auto p-0",children:n.jsx(_8,{mode:"single",selected:m.deadline,onSelect:e=>h({...m,deadline:e}),initialFocus:!0})})]})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"urgency",children:"Urgency"}),n.jsxs(lC,{value:m.urgency,onValueChange:e=>h({...m,urgency:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"low",children:"Low"}),n.jsx(pC,{value:"medium",children:"Medium"}),n.jsx(pC,{value:"high",children:"High"}),n.jsx(pC,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs(eE,{children:[n.jsx(tE,{asChild:!0,children:n.jsxs(ku,{type:"button",variant:"destructive",disabled:d,className:"gap-2",children:[n.jsx(zh,{className:"h-4 w-4"}),"Delete"]})}),n.jsxs(sE,{children:[n.jsxs(aE,{children:[n.jsx(oE,{children:"Are you sure?"}),n.jsx(lE,{children:"This action cannot be undone. This will permanently delete the request and all associated offers."})]}),n.jsxs(iE,{children:[n.jsx(dE,{children:"Cancel"}),n.jsx(cE,{onClick:async()=>{u(!0);try{await i(e.id),o({title:"Success",description:"Request deleted successfully!"}),c(!1)}catch(t){o({title:"Error",description:"Failed to delete request. Please try again.",variant:"destructive"})}finally{u(!1)}},className:"bg-destructive text-destructive-foreground",children:"Delete Request"})]})]})]}),n.jsxs("div",{className:"flex-1 flex gap-2",children:[n.jsx(ku,{type:"button",variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Cancel"}),n.jsxs(ku,{type:"submit",disabled:d,className:"flex-1 gap-2",children:[n.jsx(Ph,{className:"h-4 w-4"}),d?"Updating...":"Update Request"]})]})]})]})]})]})},C8=()=>{const{t:e,isRTL:t}=cr(),{requests:r,loading:s}=Z5(),a=St(),[i,o]=Ne.useState(""),[l,c]=Ne.useState("all"),d=Ne.useMemo(()=>r?{total:r.length,active:r.filter(e=>"in_progress"===e.status).length,completed:r.filter(e=>"completed"===e.status).length,pending:r.filter(e=>"new"===e.status).length}:{total:0,active:0,completed:0,pending:0},[r]),u=Ne.useMemo(()=>r?r.filter(e=>{var t,r;const n=(null==(t=e.title)?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null==(r=e.description)?void 0:r.toLowerCase().includes(i.toLowerCase())),s="all"===l||e.status===l;return n&&s}):[],[r,i,l]);return s?n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):n.jsxs("div",{className:"p-6 space-y-6",dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:_u("flex flex-col gap-4 md:flex-row md:justify-between md:items-start mb-8",t&&"md:flex-row-reverse text-right"),children:[n.jsxs("div",{className:_u(t?"md:order-2 text-right":"md:order-1 text-left"),children:[n.jsx("h1",{className:_u("text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",t&&"text-right"),children:e("nav.requests")}),n.jsx("p",{className:_u("text-foreground opacity-75 text-sm sm:text-base max-w-2xl",t&&"text-right"),children:e("browseRequests.subtitle")})]}),n.jsxs("div",{className:_u("flex flex-col sm:flex-row gap-2",t?"md:order-1":"md:order-2"),children:[n.jsxs(ku,{size:"lg",className:"w-full sm:w-auto gap-2",onClick:()=>a("/client/create-rfq"),children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("common.create")," ",e("nav.requests")]}),n.jsxs(ku,{variant:"outline",size:"lg",className:"w-full sm:w-auto gap-2",onClick:()=>a("/client/create-multiple-rfqs"),children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("rfq.createMultipleRequests")]}),n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsx(ku,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:n.jsx(km,{className:"h-4 w-4"})})}),n.jsxs(Rj,{align:t?"start":"end",children:[n.jsxs(Lj,{onClick:()=>a("/client/rfq-management"),children:[n.jsx(Tm,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("rfq.management")]}),n.jsxs(Lj,{onClick:()=>a("/client/create-rfq"),children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),e("rfq.createNewRFQ")]})]})]})]})]}),n.jsxs("div",{className:_u("grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",t&&"text-right"),children:[n.jsx(eS,{title:e("browseRequests.totalRequests"),value:d.total,icon:Tm,trend:{value:15,label:e("projects.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:e("browseRequests.totalRequests"),value:d.active,icon:$h,trend:{value:5,label:e("projects.thisWeek"),isPositive:!0},variant:"success"}),n.jsx(eS,{title:e("browseRequests.totalRequests"),value:d.completed,icon:dm,variant:"success"}),n.jsx(eS,{title:e("browseRequests.totalRequests"),value:d.pending,icon:cm,variant:"warning"})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{className:_u(t&&"text-right"),children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("browseRequests.searchAndFilter")]})}),n.jsxs(Au,{className:_u("space-y-4",t&&"text-right"),children:[n.jsxs("div",{className:_u("flex flex-col space-y-4 md:flex-row md:space-y-0",t?"md:space-x-reverse md:space-x-4":"md:space-x-4"),children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("browseRequests.searchPlaceholder"),value:i,onChange:e=>o(e.target.value),className:_u(t?"pr-10 text-right":"pl-10"),dir:t?"rtl":"ltr"})]})}),n.jsxs(lC,{value:l,onValueChange:c,children:[n.jsx(dC,{className:"w-full md:w-48",children:n.jsx(cC,{placeholder:e("browseRequests.filterByCategory")})}),n.jsxs(hC,{align:t?"end":"start",children:[n.jsx(pC,{value:"all",children:e("browseRequests.allCategories")}),n.jsx(pC,{value:"new",children:"New"}),n.jsx(pC,{value:"in_progress",children:"In Progress"}),n.jsx(pC,{value:"completed",children:"Completed"}),n.jsx(pC,{value:"cancelled",children:"Cancelled"})]})]})]}),(i||"all"!==l)&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse text-right"),children:[n.jsxs("span",{children:["Showing ",u.length," of ",d.total," requests"]}),(i||"all"!==l)&&n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>{o(""),c("all")},children:"Clear filters"})]})]})]}),u.length>0?n.jsx("div",{className:_u("grid gap-6 md:grid-cols-2 lg:grid-cols-3",t&&"text-right"),children:u.map(e=>n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(Ou,{className:_u(t&&"text-right"),children:[n.jsxs("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:[n.jsx(Mu,{className:_u("text-lg",t&&"text-right"),children:e.title}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Xf,{variant:"new"===e.status?"default":"in_progress"===e.status?"secondary":"completed"===e.status?"outline":"destructive",children:"new"===e.status?"New":"in_progress"===e.status?"In Progress":"completed"===e.status?"Completed":"Cancelled"}),n.jsxs(Tj,{children:[n.jsx(Dj,{asChild:!0,children:n.jsx(ku,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:n.jsx(km,{className:"h-4 w-4"})})}),n.jsxs(Rj,{align:t?"start":"end",children:[n.jsx(OE,{request:e,userRole:"client",children:n.jsx(Lj,{onSelect:e=>e.preventDefault(),children:"View Details"})}),n.jsx(k8,{request:e,children:n.jsxs(Lj,{onSelect:e=>e.preventDefault(),children:[n.jsx(Ph,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),"Edit Request"]})})]})]})]})]}),n.jsx(Pu,{className:_u("line-clamp-2",t&&"text-right"),children:e.description})]}),n.jsx(OE,{request:e,userRole:"client",children:n.jsx(Au,{className:_u("cursor-pointer",t&&"text-right"),children:n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(dh,{className:"h-4 w-4"}),n.jsx("span",{children:e.category})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Jm,{className:"h-4 w-4"}),n.jsx("span",{children:e.location||"Not specified"})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsx("span",{children:e.deadline?bj(new Date(e.deadline),"MMM dd, yyyy"):"No deadline"})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsx("span",{children:bj(new Date(e.created_at),"MMM dd, yyyy")})]})]})})})]},e.id))}):n.jsx(Eu,{className:"border-dashed",children:n.jsxs(Au,{className:_u("p-12 text-center",t&&"text-right"),children:[n.jsx("div",{className:"mx-auto w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:n.jsx(Tm,{className:"h-12 w-12 text-primary"})}),n.jsx("h3",{className:_u("text-xl font-semibold text-foreground mb-2",t&&"text-center"),children:e(i||"all"!==l?"browseRequests.noResults":"browseRequests.title")}),n.jsx("p",{className:_u("text-muted-foreground mb-6 max-w-md mx-auto",t&&"text-center"),children:e(i||"all"!==l?"browseRequests.noResultsDesc":"browseRequests.subtitle")}),!i&&"all"===l&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm max-w-2xl mx-auto mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("browseRequests.totalRequests")})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("browseRequests.totalRequests")})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("browseRequests.totalRequests")})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(ku,{onClick:()=>a("/client/create-rfq"),className:"w-full sm:w-auto gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),e("common.create")," ",e("nav.requests")]}),n.jsxs(ku,{variant:"outline",onClick:()=>a("/client/create-multiple-rfqs"),className:"w-full sm:w-auto gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),e("rfq.createMultipleRequests")]})]})]}),(i||"all"!==l)&&n.jsxs(ku,{variant:"outline",onClick:()=>{o(""),c("all")},className:"gap-2",children:[n.jsx(dh,{className:"h-4 w-4"}),"Clear Filters"]})]})})]})},E8=({className:e,...t})=>n.jsx("nav",{role:"navigation","aria-label":"pagination",className:_u("mx-auto flex w-full justify-center",e),...t});E8.displayName="Pagination";const O8=Ne.forwardRef(({className:e,...t},r)=>n.jsx("ul",{ref:r,className:_u("flex flex-row items-center gap-1",e),...t}));O8.displayName="PaginationContent";const M8=Ne.forwardRef(({className:e,...t},r)=>n.jsx("li",{ref:r,className:_u("",e),...t}));M8.displayName="PaginationItem";const P8=({className:e,isActive:t,size:r="icon",...s})=>n.jsx("a",{"aria-current":t?"page":void 0,className:_u(Su({variant:t?"outline":"ghost",size:r}),e),...s});P8.displayName="PaginationLink";const A8=({className:e,...t})=>n.jsxs(P8,{"aria-label":"Go to previous page",size:"default",className:_u("gap-1 pl-2.5",e),...t,children:[n.jsx(im,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]});A8.displayName="PaginationPrevious";const T8=({className:e,...t})=>n.jsxs(P8,{"aria-label":"Go to next page",size:"default",className:_u("gap-1 pr-2.5",e),...t,children:[n.jsx("span",{children:"Next"}),n.jsx(om,{className:"h-4 w-4"})]});T8.displayName="PaginationNext";const D8=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!1),[s,a]=Ne.useState(0),{user:i}=br(),o=(e,t,r)=>{if(!e)return 100;const n=e.toLowerCase(),s=t.toLowerCase(),a=r.toLowerCase();let i=0;s.includes(n)&&(i+=60,s===n&&(i+=20)),a.includes(n)&&(i+=20);return n.split(" ").forEach(e=>{s.includes(e)&&(i+=10),a.includes(e)&&(i+=5)}),Math.min(100,Math.max(0,i))};return{results:e,loading:r,totalCount:s,search:Ne.useCallback(async(e,r=1,s=20)=>{try{n(!0);let l=[],c=0;if("all"===e.entityType||"requests"===e.entityType){const t=await(async(e,t=1,r=20)=>{let n=mr.from("requests").select("\n        id, title, description, category, budget_min, budget_max, \n        currency, location, deadline, urgency, status, created_at, \n        updated_at, admin_approval_status,\n        user_profiles!requests_client_id_fkey(full_name, company_name)\n      ",{count:"exact"});if(e.query&&(n=n.or(`title.ilike.%${e.query}%,description.ilike.%${e.query}%,category.ilike.%${e.query}%`)),e.category&&"All Categories"!==e.category&&(n=n.eq("category",e.category)),e.location&&(n=n.ilike("location",`%${e.location}%`)),e.urgency&&"Any Urgency"!==e.urgency&&(n=n.eq("urgency",e.urgency.toLowerCase())),(e.budgetRange[0]>0||e.budgetRange[1]<1e4)&&(n=n.gte("budget_max",e.budgetRange[0]).lte("budget_min",e.budgetRange[1])),i){const{data:e}=await mr.from("user_profiles").select("role").eq("user_id",i.id).single();"vendor"===(null==e?void 0:e.role)&&(n=n.eq("admin_approval_status","approved"))}n=n.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);const{data:s,error:a,count:l}=await n;if(a)throw a;return{data:(s||[]).map(t=>{var r,n;return{id:t.id,type:"request",title:t.title,description:t.description,location:t.location,price:t.budget_max,currency:t.currency,status:t.status,created_at:t.created_at,updated_at:t.updated_at,metadata:{category:t.category,budget_min:t.budget_min,budget_max:t.budget_max,urgency:t.urgency,deadline:t.deadline,client:(null==(r=t.user_profiles)?void 0:r.full_name)||(null==(n=t.user_profiles)?void 0:n.company_name)},relevance:o(e.query,t.title,t.description)}}),count:l||0}})(e,r,s);l=[...l,...t.data],c+=t.count}if("all"===e.entityType||"offers"===e.entityType){const t=await(async(e,t=1,r=20)=>{let n=mr.from("offers").select("\n        id, title, description, price, currency, delivery_time_days,\n        status, created_at, updated_at, client_approval_status,\n        requests!inner(title, category, location),\n        user_profiles!offers_vendor_id_fkey(full_name, company_name)\n      ",{count:"exact"});e.query&&(n=n.or(`title.ilike.%${e.query}%,description.ilike.%${e.query}%`)),e.category&&"All Categories"!==e.category&&(n=n.eq("requests.category",e.category)),(e.budgetRange[0]>0||e.budgetRange[1]<1e4)&&(n=n.gte("price",e.budgetRange[0]).lte("price",e.budgetRange[1])),n=n.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);const{data:s,error:a,count:i}=await n;if(a)throw a;return{data:(s||[]).map(t=>{var r,n,s,a,i;return{id:t.id,type:"offer",title:t.title,description:t.description,location:null==(r=t.requests)?void 0:r.location,price:t.price,currency:t.currency,status:t.client_approval_status||t.status,created_at:t.created_at,updated_at:t.updated_at,metadata:{delivery_time_days:t.delivery_time_days,request_title:null==(n=t.requests)?void 0:n.title,category:null==(s=t.requests)?void 0:s.category,vendor:(null==(a=t.user_profiles)?void 0:a.full_name)||(null==(i=t.user_profiles)?void 0:i.company_name)},relevance:o(e.query,t.title,t.description)}}),count:i||0}})(e,r,s);l=[...l,...t.data],c+=t.count}if("all"===e.entityType||"vendors"===e.entityType){const t=await(async(e,t=1,r=20)=>{let n=mr.from("user_profiles").select("\n        id, full_name, company_name, bio, avatar_url, address,\n        verification_status, status, created_at, updated_at, categories\n      ",{count:"exact"}).eq("role","vendor").eq("status","approved");e.query&&(n=n.or(`full_name.ilike.%${e.query}%,company_name.ilike.%${e.query}%,bio.ilike.%${e.query}%`)),e.location&&(n=n.ilike("address",`%${e.location}%`)),e.category&&"All Categories"!==e.category&&(n=n.contains("categories",[e.category])),n=n.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);const{data:s,error:a,count:i}=await n;if(a)throw a;return{data:(s||[]).map(t=>({id:t.id,type:"vendor",title:t.full_name||t.company_name||"Unnamed Vendor",description:t.bio||"No description available",location:t.address,status:t.verification_status,created_at:t.created_at,updated_at:t.updated_at,metadata:{company_name:t.company_name,categories:t.categories,avatar_url:t.avatar_url,verification_status:t.verification_status},relevance:o(e.query,t.full_name||t.company_name||"",t.bio||"")})),count:i||0}})(e,r,s);l=[...l,...t.data],c+=t.count}l.sort((e,t)=>e.relevance!==t.relevance?t.relevance-e.relevance:new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),t(l),a(c)}catch(l){t([]),a(0)}finally{n(!1)}},[i]),clearResults:()=>{t([]),a(0)}}};var R8=["PageUp","PageDown"],L8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q8={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},I8="Slider",[F8,z8,B8]=i(I8),[$8,U8]=o(I8,[B8]),[V8,W8]=$8(I8),H8=Ne.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:m,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:x=!1,form:g,...v}=e,y=Ne.useRef(new Set),j=Ne.useRef(0),b="horizontal"===o?G8:X8,[w=[],N]=d({prop:m,defaultProp:u,onChange:e=>{var t;null==(t=[...y.current][j.current])||t.focus(),p(e)}}),_=Ne.useRef(w);function S(e,t,{commit:r}={commit:!1}){const n=function(e){return(String(e).split(".")[1]||"").length}(i),o=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-s)/i)*i+s,n),l=Qf(o,[s,a]);N((e=[])=>{const n=function(e=[],t,r){const n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}(e);return Math.min(...r)>=t}return!0}(n,c*i)){j.current=n.indexOf(l);const t=String(n)!==String(e);return t&&r&&f(n),t?n:e}return e})}return n.jsx(V8,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:a,valueIndexToChangeRef:j,thumbs:y.current,values:w,orientation:o,form:g,children:n.jsx(F8.Provider,{scope:e.__scopeSlider,children:n.jsx(F8.Slot,{scope:e.__scopeSlider,children:n.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:h(v.onPointerDown,()=>{l||(_.current=w)}),min:s,max:a,inverted:x,onSlideStart:l?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(w,e);S(e,t)},onSlideMove:l?void 0:function(e){S(e,j.current)},onSlideEnd:l?void 0:function(){const e=_.current[j.current];w[j.current]!==e&&f(w)},onHomeKeyDown:()=>!l&&S(s,0,{commit:!0}),onEndKeyDown:()=>!l&&S(a,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!l){const r=R8.includes(e.key)||e.shiftKey&&L8.includes(e.key)?10:1,n=j.current;S(w[n]+i*r*t,n,{commit:!0})}}})})})})});H8.displayName=I8;var[Y8,K8]=$8(I8,{startEdge:"left",endEdge:"right",size:"width",direction:1}),G8=Ne.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...m}=e,[h,p]=Ne.useState(null),f=l(t,e=>p(e)),x=Ne.useRef(),g=v(a),y="ltr"===g,j=y&&!i||!y&&i;function b(e){const t=x.current||h.getBoundingClientRect(),n=o9([0,t.width],j?[r,s]:[s,r]);return x.current=t,n(e-t.left)}return n.jsx(Y8,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:n.jsx(Q8,{dir:g,"data-orientation":"horizontal",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=b(e.clientX);null==o||o(t)},onSlideMove:e=>{const t=b(e.clientX);null==c||c(t)},onSlideEnd:()=>{x.current=void 0,null==d||d()},onStepKeyDown:e=>{const t=q8[j?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}})})}),X8=Ne.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,m=Ne.useRef(null),h=l(t,m),p=Ne.useRef(),f=!a;function x(e){const t=p.current||m.current.getBoundingClientRect(),n=o9([0,t.height],f?[s,r]:[r,s]);return p.current=t,n(e-t.top)}return n.jsx(Y8,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:n.jsx(Q8,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=x(e.clientY);null==i||i(t)},onSlideMove:e=>{const t=x(e.clientY);null==o||o(t)},onSlideEnd:()=>{p.current=void 0,null==c||c()},onStepKeyDown:e=>{const t=q8[f?"from-bottom":"from-top"].includes(e.key);null==d||d({event:e,direction:t?-1:1})}})})}),Q8=Ne.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=e,m=W8(I8,r);return n.jsx(a.span,{...u,ref:t,onKeyDown:h(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):R8.concat(L8).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:h(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():s(e)}),onPointerMove:h(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:h(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})})}),Z8="SliderTrack",J8=Ne.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,i=W8(Z8,r);return n.jsx(a.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});J8.displayName=Z8;var e9="SliderRange",t9=Ne.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,i=W8(e9,r),o=K8(e9,r),c=Ne.useRef(null),d=l(t,c),u=i.values.length,m=i.values.map(e=>i9(e,i.min,i.max)),h=u>1?Math.min(...m):0,p=100-Math.max(...m);return n.jsx(a.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:d,style:{...e.style,[o.startEdge]:h+"%",[o.endEdge]:p+"%"}})});t9.displayName=e9;var r9="SliderThumb",n9=Ne.forwardRef((e,t)=>{const r=z8(e.__scopeSlider),[s,a]=Ne.useState(null),i=l(t,e=>a(e)),o=Ne.useMemo(()=>s?r().findIndex(e=>e.ref.current===s):-1,[r,s]);return n.jsx(s9,{...e,ref:i,index:o})}),s9=Ne.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:i,...o}=e,c=W8(r9,r),d=K8(r9,r),[u,m]=Ne.useState(null),p=l(t,e=>m(e)),f=!u||(c.form||!!u.closest("form")),x=be(u),g=c.values[s],v=void 0===g?0:i9(g,c.min,c.max),y=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(s,c.values.length),j=null==x?void 0:x[d.size],b=j?function(e,t,r){const n=e/2,s=o9([0,50],[0,n]);return(n-s(t)*r)*r}(j,v,d.direction):0;return Ne.useEffect(()=>{if(u)return c.thumbs.add(u),()=>{c.thumbs.delete(u)}},[u,c.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${v}% + ${b}px)`},children:[n.jsx(F8.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(a.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":c.min,"aria-valuenow":g,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:p,style:void 0===g?{display:"none"}:e.style,onFocus:h(e.onFocus,()=>{c.valueIndexToChangeRef.current=s})})}),f&&n.jsx(a9,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:g},s)]})});n9.displayName=r9;var a9=e=>{const{value:t,...r}=e,s=Ne.useRef(null),a=YS(t);return Ne.useEffect(()=>{const e=s.current,r=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(a!==t&&n){const r=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[a,t]),n.jsx("input",{style:{display:"none"},...r,ref:s,defaultValue:t})};function i9(e,t,r){return Qf(100/(r-t)*(e-t),[0,100])}function o9(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var l9=H8,c9=J8,d9=t9,u9=n9;const m9=Ne.forwardRef(({className:e,...t},r)=>n.jsxs(l9,{ref:r,className:_u("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(c9,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(d9,{className:"absolute h-full bg-primary"})}),n.jsx(u9,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));m9.displayName=l9.displayName;const h9=["All Categories","Manufacturing","Technology","Logistics","Marketing","Consulting","Design","Legal"],p9=["Any Urgency","Low","Medium","High","Urgent"],f9=({onSearch:e,onClear:t})=>{const[r,s]=Ne.useState({query:"",category:"",location:"",budgetRange:[0,1e4],rating:0,availability:!1,urgency:"",tags:[]}),[a,i]=Ne.useState(!1),[o,l]=Ne.useState(""),c=()=>{e(r)},d=()=>{o.trim()&&!r.tags.includes(o.trim())&&(s(e=>({...e,tags:[...e.tags,o.trim()]})),l(""))},u=r.query||r.category||r.location||r.budgetRange[0]>0||r.budgetRange[1]<1e4||r.rating>0||r.availability||r.urgency||r.tags.length>0;return n.jsxs(Eu,{className:"w-full",children:[n.jsx(Ou,{className:"pb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(jh,{className:"h-5 w-5"}),"Advanced Search"]}),n.jsxs(ku,{variant:"ghost",size:"sm",onClick:()=>i(!a),children:[n.jsx(qm,{className:"h-4 w-4 mr-2"}),a?"Simple":"Advanced"]})]})}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx($j,{placeholder:"Search suppliers, services, or keywords...",value:r.query,onChange:e=>s(t=>({...t,query:e.target.value})),className:"flex-1"}),n.jsxs(ku,{onClick:c,className:"rtl-button-gap",children:[n.jsx(jh,{className:"h-4 w-4"}),"Search"]})]}),a&&n.jsxs("div",{className:"space-y-6 border-t pt-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{className:"flex items-center gap-2",children:[n.jsx(qm,{className:"h-4 w-4"}),"Category"]}),n.jsxs(lC,{value:r.category,onValueChange:e=>s(t=>({...t,category:e})),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:"Select category"})}),n.jsx(hC,{children:h9.map(e=>n.jsx(pC,{value:e,children:e},e))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{className:"flex items-center gap-2",children:[n.jsx(Jm,{className:"h-4 w-4"}),"Location"]}),n.jsx($j,{placeholder:"City, Country",value:r.location,onChange:e=>s(t=>({...t,location:e.target.value}))})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(j_,{className:"flex items-center gap-2",children:[n.jsx(_m,{className:"h-4 w-4"}),"Budget Range: $",r.budgetRange[0]," - $",r.budgetRange[1]]}),n.jsx(m9,{value:r.budgetRange,onValueChange:e=>s(t=>({...t,budgetRange:e})),max:1e4,min:0,step:100,className:"w-full"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{className:"flex items-center gap-2",children:[n.jsx(Th,{className:"h-4 w-4"}),"Minimum Rating"]}),n.jsxs(lC,{value:r.rating.toString(),onValueChange:e=>s(t=>({...t,rating:parseInt(e)})),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:"Any rating"})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"0",children:"Any Rating"}),n.jsx(pC,{value:"3",children:"3+ Stars"}),n.jsx(pC,{value:"4",children:"4+ Stars"}),n.jsx(pC,{value:"5",children:"5 Stars Only"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{className:"flex items-center gap-2",children:[n.jsx(Zu,{className:"h-4 w-4"}),"Urgency"]}),n.jsxs(lC,{value:r.urgency,onValueChange:e=>s(t=>({...t,urgency:e})),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:"Any urgency"})}),n.jsx(hC,{children:p9.map(e=>n.jsx(pC,{value:e,children:e},e))})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(O5,{id:"availability",checked:r.availability,onCheckedChange:e=>s(t=>({...t,availability:e}))}),n.jsx(j_,{htmlFor:"availability",children:"Available Now Only"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(j_,{children:"Tags"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx($j,{placeholder:"Add tag...",value:o,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&d()}),n.jsx(ku,{onClick:d,variant:"outline",size:"sm",children:"Add"})]}),r.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(e=>n.jsxs(Xf,{variant:"secondary",className:"gap-1",children:[e,n.jsx(sp,{className:"h-3 w-3 cursor-pointer",onClick:()=>(e=>{s(t=>({...t,tags:t.tags.filter(t=>t!==e)}))})(e)})]},e))})]})]}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx(ku,{variant:"outline",onClick:()=>{s({query:"",category:"",location:"",budgetRange:[0,1e4],rating:0,availability:!1,urgency:"",tags:[]}),t()},disabled:!u,children:"Clear All"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ku,{variant:"outline",onClick:c,children:"Search"}),n.jsx(ku,{onClick:c,children:"Apply Filters"})]})]}),u&&n.jsx("div",{className:"pt-4 border-t",children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.query&&n.jsxs(Xf,{variant:"outline",children:["Query: ",r.query]}),r.category&&n.jsxs(Xf,{variant:"outline",children:["Category: ",r.category]}),r.location&&n.jsxs(Xf,{variant:"outline",children:["Location: ",r.location]}),(r.budgetRange[0]>0||r.budgetRange[1]<1e4)&&n.jsxs(Xf,{variant:"outline",children:["Budget: $",r.budgetRange[0]," - $",r.budgetRange[1]]}),r.rating>0&&n.jsxs(Xf,{variant:"outline",children:["Rating: ",r.rating,"+ Stars"]}),r.availability&&n.jsx(Xf,{variant:"outline",children:"Available Now"}),r.urgency&&n.jsxs(Xf,{variant:"outline",children:["Urgency: ",r.urgency]})]})})]})]})},x9=({result:e,onClick:t,showActions:r=!0})=>n.jsxs(Eu,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:t,children:[n.jsx("div",{className:"flex items-start justify-between mb-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Xf,{className:(e=>{switch(e){case"request":return"bg-blue-100 text-blue-800";case"offer":return"bg-green-100 text-green-800";case"vendor":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.type),children:e.type.toUpperCase()}),n.jsx(Xf,{variant:(e=>{switch(e.toLowerCase()){case"active":case"approved":return"default";case"pending":default:return"secondary";case"completed":return"outline"}})(e.status),children:e.status})]}),n.jsx("h3",{className:"font-medium text-lg",children:e.title}),n.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-1",children:e.description})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jm,{className:"h-3 w-3"}),n.jsx("span",{children:e.location})]}),e.price&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_m,{className:"h-3 w-3"}),n.jsxs("span",{children:[e.currency||"SAR"," ",e.price.toLocaleString()]})]}),e.rating&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Th,{className:"h-3 w-3 fill-current text-yellow-500"}),n.jsxs("span",{children:[e.rating,"/5"]})]})]}),r&&n.jsx(ku,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),t()},children:"View Details"})]})]}),g9=({results:e,loading:t,onResultClick:r,showActions:s=!0})=>t?n.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(e=>n.jsx(Eu,{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"h-5 bg-muted rounded w-16"}),n.jsx("div",{className:"h-5 bg-muted rounded w-20"})]}),n.jsx("div",{className:"h-6 bg-muted rounded w-2/3"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-muted rounded"}),n.jsx("div",{className:"h-4 bg-muted rounded w-4/5"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-20"}),n.jsx("div",{className:"h-4 bg-muted rounded w-24"})]}),n.jsx("div",{className:"h-8 bg-muted rounded w-20"})]})]})},e))}):0===e.length?n.jsxs(Eu,{className:"p-8 text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:n.jsx(Xu,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Results Found"}),n.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria or browse all available items."})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("h2",{className:"text-lg font-semibold",children:[e.length," Result",1!==e.length?"s":""," Found"]})}),e.map(e=>n.jsx(x9,{result:e,onClick:()=>r(e),showActions:s},e.id))]}),v9=({initialQuery:e="",initialFilters:t={}})=>{const[r]=sr(),s=r.get("q")||e,[a,i]=Ne.useState(1),[o,l]=Ne.useState({query:s,category:"",location:"",budgetRange:[0,1e4],rating:0,availability:!1,urgency:"",tags:[],entityType:"all",...t}),{t:c,isRTL:d}=cr(),{results:u,loading:m,totalCount:h,search:p,clearResults:f}=D8(),x=10,g=Math.ceil(h/x);Ne.useEffect(()=>{if(s){const e={...o,query:s};l(e),p(e,1,x)}},[s]);const v=e=>{i(e),p(o,e,x)},y=o.query||o.category||o.location||o.budgetRange[0]>0||o.budgetRange[1]<1e4||o.rating>0||o.availability||o.urgency||o.tags.length>0||"all"!==o.entityType;return n.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[n.jsx(Eu,{children:n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between "+(d?"flex-row-reverse":""),children:[n.jsxs(Mu,{className:"flex items-center gap-2 "+(d?"flex-row-reverse":""),children:[n.jsx(jh,{className:"h-5 w-5"}),d?"البحث المتقدم":"Advanced Search"]}),n.jsxs("div",{className:"flex items-center gap-2 "+(d?"flex-row-reverse":""),children:[n.jsxs(Xf,{variant:"outline",children:[h," ",d?"نتيجة":"results"]}),u.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const e=u.map(e=>({Type:e.type,Title:e.title,Description:e.description,Location:e.location,Price:e.price,Status:e.status,"Created At":e.created_at,Relevance:`${e.relevance}%`})),t=Object.keys(e[0]||{}),r=[t.join(","),...e.map(e=>t.map(t=>`"${e[t]||""}"`).join(","))].join("\n"),n=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`search_results_${(new Date).toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(s)},children:[n.jsx(Sm,{className:"h-4 w-4 mr-2"}),d?"تصدير":"Export"]}),n.jsxs(ku,{variant:"outline",size:"sm",children:[n.jsx(_h,{className:"h-4 w-4 mr-2"}),d?"مشاركة":"Share"]})]})]})]})})}),n.jsx(f9,{onSearch:e=>{l(e),i(1),p(e,1,x)},onClear:()=>{l({query:"",category:"",location:"",budgetRange:[0,1e4],rating:0,availability:!1,urgency:"",tags:[],entityType:"all"}),i(1),f()}}),y&&n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 "+(d?"flex-row-reverse":""),children:[n.jsx(qm,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:d?"المرشحات النشطة:":"Active Filters:"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 "+(d?"flex-row-reverse":""),children:[o.query&&n.jsxs(Xf,{variant:"secondary",children:[d?"البحث:":"Query:"," ",o.query]}),o.category&&n.jsxs(Xf,{variant:"secondary",children:[d?"التصنيف:":"Category:"," ",o.category]}),o.location&&n.jsxs(Xf,{variant:"secondary",children:[d?"الموقع:":"Location:"," ",o.location]}),"all"!==o.entityType&&n.jsxs(Xf,{variant:"secondary",children:[d?"النوع:":"Type:"," ",o.entityType]}),(o.budgetRange[0]>0||o.budgetRange[1]<1e4)&&n.jsxs(Xf,{variant:"secondary",children:[d?"الميزانية:":"Budget:"," $",o.budgetRange[0]," - $",o.budgetRange[1]]}),o.rating>0&&n.jsxs(Xf,{variant:"secondary",children:[d?"التقييم:":"Rating:"," ",o.rating,"+ ⭐"]})]})]})}),n.jsxs("div",{className:"space-y-6",children:[(y||u.length>0)&&n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between "+(d?"flex-row-reverse":""),children:[n.jsxs("div",{className:d?"text-right":"text-left",children:[n.jsx("h2",{className:"text-lg font-semibold",children:d?"نتائج البحث":"Search Results"}),n.jsx("p",{className:"text-muted-foreground",children:h>0?`${d?"عرض":"Showing"} ${(a-1)*x+1}-${Math.min(a*x,h)} ${d?"من":"of"} ${h}`:d?"لا توجد نتائج":"No results found"})]}),a>1&&g>1&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:[d?"الصفحة":"Page"," ",a," ",d?"من":"of"," ",g]})]})})}),n.jsx(g9,{results:u,loading:m,onResultClick:e=>{}}),g>1&&n.jsx("div",{className:"flex justify-center",children:n.jsx(E8,{children:n.jsxs(O8,{children:[a>1&&n.jsx(M8,{children:n.jsx(A8,{onClick:()=>v(a-1)})}),Array.from({length:Math.min(5,g)},(e,t)=>{const r=Math.max(1,a-2)+t;return r>g?null:n.jsx(M8,{children:n.jsx(P8,{onClick:()=>v(r),isActive:r===a,children:r})},r)}),a<g&&n.jsx(M8,{children:n.jsx(T8,{onClick:()=>v(a+1)})})]})})})]})]})},y9=({children:e,className:t,title:r,description:s,headerActions:a,maxWidth:i="full",spacing:o="md"})=>{const{isRTL:l}=cr(),c=l5();return n.jsx("div",{className:_u("min-h-full relative",l?"rtl":"ltr"),dir:l?"rtl":"ltr",children:n.jsxs("div",{className:_u("mx-auto",{sm:"px-4 py-4 sm:px-6 sm:py-6",md:"px-4 sm:px-6 lg:px-8 py-6 sm:py-8",lg:"px-6 sm:px-8 lg:px-12 py-8 sm:py-12"}[o],{sm:"max-w-3xl",md:"max-w-4xl",lg:"max-w-6xl",xl:"max-w-7xl","2xl":"max-w-full",full:"max-w-none"}[i],t),children:[(r||s||a)&&n.jsxs("div",{className:_u("mb-6 sm:mb-8",a&&"flex flex-col gap-4",a&&c.sm&&"sm:flex-row sm:justify-between sm:items-start"),children:[n.jsxs("div",{className:_u(l?"text-right":"text-left"),children:[r&&n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:r}),s&&n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:s})]}),a&&n.jsx("div",{className:_u("flex items-center gap-2 flex-shrink-0",l&&"flex-row-reverse"),children:a})]}),n.jsx("div",{className:{sm:"space-y-4",md:"space-y-6",lg:"space-y-8"}[o],children:e})]})})},j9=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))"],b9=()=>{br();const{language:e,t:t,isRTL:r,formatNumber:s,formatCurrency:a}=cr(),{toast:i}=fp(),[o,l]=Ne.useState("30"),[c,d]=Ne.useState(!1),{analytics:u,loading:m,error:h,fetchAnalytics:p}=(()=>{const{user:e}=br(),[t,r]=Ne.useState(null),[n,s]=Ne.useState(!1),[a,i]=Ne.useState(null),o=async()=>{if(e){s(!0),i(null);try{const{data:t}=await mr.from("requests").select("*").eq("client_id",e.id),{data:n}=await mr.from("orders").select("*").eq("client_id",e.id),{data:s}=await mr.from("offers").select("*, requests!inner(*)").eq("requests.client_id",e.id),{data:a}=await mr.from("financial_transactions").select("*").eq("user_id",e.id),i=(null==t?void 0:t.length)||0,o=(null==t?void 0:t.filter(e=>"new"===e.status||"in_progress"===e.status).length)||0,l=(null==t?void 0:t.filter(e=>"completed"===e.status).length)||0,c=(null==a?void 0:a.filter(e=>"completed"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0))||0,d=(null==n?void 0:n.filter(e=>"pending"===e.status||"in_progress"===e.status).length)||0,u=(null==n?void 0:n.filter(e=>"completed"===e.status).length)||0,m=(null==s?void 0:s.filter(e=>"pending"===e.client_approval_status).length)||0,h=(null==s?void 0:s.filter(e=>"approved"===e.client_approval_status).length)||0,p=u>0?c/u:0,f=new Set((null==n?void 0:n.map(e=>e.vendor_id))||[]).size,x=new Date;x.setDate(x.getDate()-30);const g=new Date;g.setDate(g.getDate()-60);const v=(null==t?void 0:t.filter(e=>new Date(e.created_at)>=x).length)||0,y=(null==t?void 0:t.filter(e=>new Date(e.created_at)>=g&&new Date(e.created_at)<x).length)||0,j=y>0?Math.round((v-y)/y*100):0,b=(null==a?void 0:a.filter(e=>"completed"===e.status&&new Date(e.created_at)>=x).reduce((e,t)=>e+(Number(t.amount)||0),0))||0,w=(null==a?void 0:a.filter(e=>"completed"===e.status&&new Date(e.created_at)>=g&&new Date(e.created_at)<x).reduce((e,t)=>e+(Number(t.amount)||0),0))||0,N=w>0?Math.round((b-w)/w*100):0,_=i>0?Math.round(l/i*100):0,S=[];for(let e=5;e>=0;e--){const t=new Date;t.setMonth(t.getMonth()-e);const r=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0),s=(null==a?void 0:a.filter(e=>"completed"===e.status&&new Date(e.created_at)>=r&&new Date(e.created_at)<=n).reduce((e,t)=>e+(Number(t.amount)||0),0))||0;S.push({month:t.toLocaleDateString("en-US",{month:"short",year:"numeric"}),amount:s})}const k={};null==t||t.forEach(e=>{k[e.category]=(k[e.category]||0)+1});const C=Object.entries(k).map(([e,t])=>({category:e,count:t})),E=[];for(let e=29;e>=0;e--){const t=new Date;t.setDate(t.getDate()-e);const r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),i=(null==n?void 0:n.filter(e=>new Date(e.created_at)>=r&&new Date(e.created_at)<s).length)||0,o=(null==a?void 0:a.filter(e=>"completed"===e.status&&new Date(e.created_at)>=r&&new Date(e.created_at)<s).reduce((e,t)=>e+(Number(t.amount)||0),0))||0;E.push({date:t.toISOString().split("T")[0],orders:i,spending:o})}r({totalRequests:i,activeRequests:o,completedRequests:l,totalSpent:c,activeOrders:d,completedOrders:u,pendingOffers:m,acceptedOffers:h,averageOrderValue:p,totalVendorsWorkedWith:f,requestGrowth:j,spendingGrowth:N,completionRate:_,averageResponseTime:2.3,monthlySpending:S,requestsByCategory:C,orderTimeline:E})}catch(t){i(t.message)}finally{s(!1)}}};return Ne.useEffect(()=>{o()},[e]),{analytics:t,loading:n,error:a,fetchAnalytics:o}})();return m?n.jsx(y9,{title:t("analytics.title"),description:t("analytics.description"),children:n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx(lb,{})})}):h?n.jsx(y9,{title:t("analytics.title"),description:t("analytics.description"),children:n.jsx("div",{className:"text-center text-destructive py-8",children:n.jsx("p",{children:h})})}):n.jsx("div",{dir:r?"rtl":"ltr",children:n.jsxs(y9,{title:t("analytics.title"),description:t("analytics.description"),headerActions:n.jsxs("div",{className:_u("flex gap-2",r&&"flex-row-reverse"),children:[n.jsxs(lC,{value:o,onValueChange:l,children:[n.jsx(dC,{className:"w-32",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"7",children:t("analytics.last7Days")}),n.jsx(pC,{value:"30",children:t("analytics.last30Days")}),n.jsx(pC,{value:"90",children:t("analytics.last90Days")}),n.jsx(pC,{value:"365",children:t("analytics.lastYear")})]})]}),n.jsxs(ku,{variant:"outline",onClick:async()=>{try{await p(),i({title:t("analytics.dataRefreshed"),description:t("analytics.dataRefreshedDesc")})}catch(e){i({title:t("analytics.refreshError"),description:t("analytics.refreshErrorDesc"),variant:"destructive"})}},disabled:m,children:[n.jsx(gh,{className:_u("h-4 w-4",r?"ml-2":"mr-2")}),t("common.refresh")]}),n.jsxs(ku,{variant:"outline",onClick:async()=>{d(!0);try{await new Promise(e=>setTimeout(e,1e3)),i({title:t("analytics.exportAnalyticsTitle"),description:t("analytics.exportAnalyticsDesc")})}catch(e){i({title:t("analytics.exportError"),description:t("analytics.exportErrorDesc"),variant:"destructive"})}finally{d(!1)}},disabled:c,children:[c?n.jsx(lb,{size:"sm",className:_u(r?"ml-2":"mr-2")}):n.jsx(Sm,{className:_u("h-4 w-4",r?"ml-2":"mr-2")}),t("analytics.export")]})]}),children:[n.jsxs("div",{className:_u("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",r&&"text-right"),children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.myRequests")}),n.jsx(Tm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==u?void 0:u.totalRequests)||0)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==u?void 0:u.requestGrowth)&&u.requestGrowth>0?"+":"",(null==u?void 0:u.requestGrowth)||0,"% ",t("analytics.fromLastMonth")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.activeOrders")}),n.jsx(Fu,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==u?void 0:u.activeOrders)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("analytics.currentlyInProgress")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.totalSpending")}),n.jsx(_m,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a((null==u?void 0:u.totalSpent)||0)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(null==u?void 0:u.spendingGrowth)&&u.spendingGrowth>0?"+":"",(null==u?void 0:u.spendingGrowth)||0,"% ",t("analytics.fromLastMonth")]})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.completionRate")}),n.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[(null==u?void 0:u.completionRate)||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("analytics.ofTotalRequests")})]})]})]}),n.jsxs("div",{className:_u("grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",r&&"text-right"),children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.pendingOffers")}),n.jsx(gm,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==u?void 0:u.pendingOffers)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("analytics.awaitingReview")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.avgOrderValue")}),n.jsx(kh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:a((null==u?void 0:u.averageOrderValue)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("analytics.perCompletedOrder")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u("flex flex-row items-center justify-between space-y-0 pb-2",r&&"flex-row-reverse"),children:[n.jsx(Mu,{className:"text-sm font-medium",children:t("analytics.vendorsWorkedWith")}),n.jsx(Zh,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(Au,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s((null==u?void 0:u.totalVendorsWorkedWith)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("analytics.uniqueVendors")})]})]})]}),n.jsxs(BS,{defaultValue:"overview",className:"space-y-4",children:[n.jsx("div",{className:_u("flex w-full",r?"justify-end":"justify-start"),children:n.jsxs($S,{className:_u(r&&"flex-row-reverse"),children:[n.jsxs(US,{value:"overview",className:_u("flex items-center gap-2",r&&"flex-row-reverse text-right"),children:[n.jsx(Ju,{className:"h-4 w-4"}),t("analytics.overview")]}),n.jsxs(US,{value:"spending",className:_u("flex items-center gap-2",r&&"flex-row-reverse text-right"),children:[n.jsx(_m,{className:"h-4 w-4"}),t("analytics.spending")]}),n.jsxs(US,{value:"requests",className:_u("flex items-center gap-2",r&&"flex-row-reverse text-right"),children:[n.jsx(Tm,{className:"h-4 w-4"}),t("analytics.requests")]}),n.jsxs(US,{value:"performance",className:_u("flex items-center gap-2",r&&"flex-row-reverse text-right"),children:[n.jsx($h,{className:"h-4 w-4"}),t("analytics.performance")]})]})}),n.jsx(VS,{value:"overview",className:_u("space-y-4",r&&"text-right"),children:n.jsxs("div",{className:_u("flex flex-wrap gap-4",r?"flex-row-reverse":"flex-row"),dir:r?"rtl":"ltr",children:[n.jsxs(Eu,{className:"flex-1 min-w-0 lg:min-w-[45%]",children:[n.jsxs(Ou,{className:_u(r&&"text-right"),children:[n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.monthlySpending")}),n.jsx(Pu,{className:_u(r&&"text-right"),children:t("analytics.spendingTrend")})]}),n.jsx(Au,{className:_u(r&&"text-right"),children:n.jsx(Kz,{width:"100%",height:300,children:n.jsxs($3,{data:(null==u?void 0:u.monthlySpending)||[],children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"month"}),n.jsx(B4,{}),n.jsx(yz,{formatter:e=>[a(Number(e)),t("analytics.spending")]}),n.jsx(y4,{type:"monotone",dataKey:"amount",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3})]})})})]}),n.jsxs(Eu,{className:"flex-1 min-w-0 lg:min-w-[45%]",children:[n.jsxs(Ou,{className:_u(r&&"text-right"),children:[n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.requestsByCategory")}),n.jsx(Pu,{className:_u(r&&"text-right"),children:t("analytics.categoryDistribution")})]}),n.jsx(Au,{className:_u(r&&"text-right"),children:n.jsx(Kz,{width:"100%",height:300,children:n.jsxs(B3,{children:[n.jsx(yz,{}),n.jsx(gJ,{data:(null==u?void 0:u.requestsByCategory)||[],cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,dataKey:"count",children:((null==u?void 0:u.requestsByCategory)||[]).map((e,t)=>n.jsx(Gz,{fill:j9[t%j9.length]},`cell-${t}`))})]})})})]})]})}),n.jsx(VS,{value:"spending",className:_u("space-y-4",r&&"text-right"),children:n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(r&&"text-right"),children:[n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.ordersSpendingActivity")}),n.jsx(Pu,{className:_u(r&&"text-right"),children:t("analytics.dailyActivity")})]}),n.jsx(Au,{className:_u(r&&"text-right"),children:n.jsx(Kz,{width:"100%",height:400,children:n.jsxs(F3,{data:(null==u?void 0:u.orderTimeline)||[],children:[n.jsx(z2,{strokeDasharray:"3 3"}),n.jsx(M4,{dataKey:"date"}),n.jsx(B4,{yAxisId:"left"}),n.jsx(B4,{yAxisId:"right",orientation:"right"}),n.jsx(yz,{formatter:(e,t)=>["spending"===t?a(Number(e)):s(Number(e)),"spending"===t?r?"الإنفاق":"Spending":r?"الطلبات":"Orders"]}),n.jsx(n4,{yAxisId:"left",type:"monotone",dataKey:"orders",stroke:"hsl(var(--primary))",strokeWidth:2}),n.jsx(n4,{yAxisId:"right",type:"monotone",dataKey:"spending",stroke:"hsl(var(--secondary))",strokeWidth:2})]})})})]})}),n.jsx(VS,{value:"requests",className:_u("space-y-4",r&&"text-right"),children:n.jsxs("div",{className:_u("flex flex-wrap gap-4",r?"flex-row-reverse":"flex-row"),dir:r?"rtl":"ltr",children:[n.jsxs(Eu,{className:"flex-1 min-w-0 md:min-w-[300px] lg:min-w-[250px]",children:[n.jsx(Ou,{className:_u(r&&"text-right"),children:n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.requestsSummary")})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.totalRequests")}),n.jsx(Xf,{variant:"secondary",children:(null==u?void 0:u.totalRequests)||0})]}),n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.activeRequests")}),n.jsx(Xf,{variant:"secondary",children:(null==u?void 0:u.activeRequests)||0})]}),n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.completedRequests")}),n.jsx(Xf,{variant:"secondary",children:(null==u?void 0:u.completedRequests)||0})]})]})]}),n.jsxs(Eu,{className:"flex-1 min-w-0 md:min-w-[300px] lg:min-w-[250px]",children:[n.jsx(Ou,{className:_u(r&&"text-right"),children:n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.offersSummary")})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.pendingOffers")}),n.jsx(Xf,{variant:"secondary",children:(null==u?void 0:u.pendingOffers)||0})]}),n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.acceptedOffers")}),n.jsx(Xf,{variant:"secondary",children:(null==u?void 0:u.acceptedOffers)||0})]})]})]})]})}),n.jsx(VS,{value:"performance",className:_u("space-y-4",r&&"text-right"),children:n.jsx("div",{className:_u("flex flex-wrap gap-4",r?"flex-row-reverse":"flex-row"),dir:r?"rtl":"ltr",children:n.jsxs(Eu,{className:"flex-1 min-w-0 md:min-w-[300px] lg:min-w-[250px]",children:[n.jsx(Ou,{className:_u(r&&"text-right"),children:n.jsx(Mu,{className:_u(r&&"text-right"),children:t("analytics.performanceMetrics")})}),n.jsxs(Au,{className:_u("space-y-4",r&&"text-right"),children:[n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.completionRate")}),n.jsxs(Xf,{variant:"secondary",children:[(null==u?void 0:u.completionRate)||0,"%"]})]}),n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.avgResponseTime")}),n.jsxs(Xf,{variant:"secondary",children:[(null==u?void 0:u.averageResponseTime)||0,"h"]})]}),n.jsxs("div",{className:_u("flex justify-between",r&&"flex-row-reverse"),children:[n.jsx("span",{className:_u("text-sm text-muted-foreground",r&&"text-right"),children:t("analytics.avgOrderValue")}),n.jsx(Xf,{variant:"secondary",children:a((null==u?void 0:u.averageOrderValue)||0)})]})]})]})})})]})]})})},w9=Ne.memo(()=>{const{t:e,language:t,isRTL:r}=cr(),{matchedRequests:s,loading:a}=vC(),{categories:i,loading:o}=gC(),[l,c]=Ne.useState(""),[d,u]=Ne.useState("all"),m=Ne.useMemo(()=>{if(!s||0===s.length)return{total:0,urgent:0,highBudget:0,thisWeek:0};const e=new Date((new Date).getTime()-6048e5);return{total:s.length,urgent:s.filter(e=>"urgent"===e.urgency||"high"===e.urgency).length,highBudget:s.filter(e=>e.budget_max&&e.budget_max>5e4).length,thisWeek:s.filter(t=>new Date(t.created_at)>e).length}},[s]);if(a||o)return n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:r?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]})});const h=s.filter(e=>{const t=l.toLowerCase(),r=""===l||e.title.toLowerCase().includes(t)||e.category.toLowerCase().includes(t),n="all"===d||e.category===d;return r&&n}),p=t=>t.budget_min||t.budget_max?t.budget_min&&t.budget_max?`${t.budget_min.toLocaleString()} - ${t.budget_max.toLocaleString()}`:e("browseRequests.budgetNegotiable"):e("browseRequests.budgetNotSpecified"),f=e=>{switch(e.toLowerCase()){case"urgent":case"high":return"destructive";case"medium":default:return"default";case"low":return"secondary"}};return n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:r?"rtl":"ltr",children:[n.jsx("div",{className:_u("flex flex-col gap-4 md:flex-row md:justify-between md:items-start mb-8",r&&"md:flex-row-reverse"),children:n.jsxs("div",{className:_u(r&&"text-right"),children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:e("browseRequests.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:e("browseRequests.subtitle")})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:e("browseRequests.totalRequests"),value:m.total,icon:Tm,trend:{value:15,label:e("projects.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:e("browseRequests.urgentHighPriority"),value:m.urgent,icon:cm,variant:"warning"}),n.jsx(eS,{title:e("browseRequests.highBudget"),value:m.highBudget,icon:_m,variant:"success"}),n.jsx(eS,{title:e("browseRequests.newThisWeek"),value:m.thisWeek,icon:$h,trend:{value:8,label:e("projects.thisWeek"),isPositive:!0}})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",r&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("browseRequests.searchAndFilter")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",r?"right-3":"left-3")}),n.jsx($j,{placeholder:e("browseRequests.searchPlaceholder"),className:_u(r?"pr-10 text-right":"pl-10"),value:l,onChange:e=>c(e.target.value),dir:r?"rtl":"ltr"})]}),n.jsxs(lC,{value:d,onValueChange:u,children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:e("browseRequests.filterByCategory")})}),n.jsxs(hC,{align:r?"end":"start",children:[n.jsx(pC,{value:"all",children:e("browseRequests.allCategories")}),(()=>{const e=[];return i.forEach(t=>{e.push(t),t.children&&t.children.length>0&&e.push(...t.children)}),e})().map(e=>n.jsx(pC,{value:e.slug,children:"ar"===t?e.name_ar:e.name_en},e.id))]})]})]})]}),0===h.length?n.jsx(jC,{icon:jh,title:e("browseRequests.noResults"),description:e("browseRequests.noResultsDesc")}):n.jsx("div",{className:"space-y-4",children:h.map(t=>n.jsx(Eu,{className:"hover:shadow-lg transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",r&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",r&&"flex-row-reverse"),children:[n.jsx("h3",{className:_u("text-lg font-semibold",r&&"text-right"),children:t.title}),n.jsx(Xf,{variant:f(t.urgency),children:t.urgency})]}),n.jsx("p",{className:_u("text-muted-foreground mb-2",r&&"text-right"),children:t.description}),n.jsxs("div",{className:_u("flex items-center gap-4 mb-2",r&&"flex-row-reverse"),children:[n.jsx("span",{className:"text-sm text-primary font-medium",children:t.category}),t.location&&n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",r&&"flex-row-reverse"),children:[n.jsx(Jm,{className:"h-3 w-3"}),n.jsx("span",{children:t.location})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",r&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("div",{className:_u(r&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("browseRequests.budget")}),n.jsxs("p",{className:"font-semibold text-sm",children:[p(t)," ",t.currency||"USD"]})]})]}),t.deadline&&n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",r&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4 text-blue-500"}),n.jsxs("div",{className:_u(r&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("browseRequests.deadline")}),n.jsx("p",{className:"font-semibold text-sm",children:new Date(t.deadline).toLocaleDateString()})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2 p-3 bg-muted/50 rounded-lg",r&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4 text-orange-500"}),n.jsxs("div",{className:_u(r&&"text-right"),children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("browseRequests.posted")}),n.jsx("p",{className:"font-semibold text-sm",children:new Date(t.created_at).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(wC,{requestId:t.id,children:n.jsxs(ku,{className:"flex-1",children:[n.jsx(fh,{className:_u("h-4 w-4",r?"ml-2":"mr-2")}),e("browseRequests.submitOffer")]})}),n.jsx(OE,{request:{...t,status:"new",user_id:t.client},userRole:"vendor",children:n.jsxs(ku,{variant:"outline",children:[n.jsx(Mm,{className:_u("h-4 w-4",r?"ml-2":"mr-2")}),e("browseRequests.viewDetails")]})})]})]})})},t.id))})]})})});w9.displayName="BrowseRequestsPage";const N9={title:"",description:"",category:"",budget_min:0,budget_max:0,currency:"SAR",timeline_days:30,location:"",urgency:"medium",technical_specs:[],evaluation_criteria:[],attachments:[],is_public:!0,invited_vendors:[],submission_deadline:"",terms_conditions:"",auto_award:!1,auto_award_threshold:0},_9=()=>{const e=St(),{t:t,isRTL:r}=cr(),{userProfile:s}=br(),{toast:a}=fp(),[i,o]=Ne.useState(0),[l,c]=Ne.useState(N9),[d,u]=Ne.useState(!1),[m,h]=Ne.useState([]),p=(e=>[{id:"basic",title:e("rfq.basicInformation"),description:e("rfq.basicInformationDescription")},{id:"specs",title:e("rfq.technicalSpecifications"),description:e("rfq.technicalSpecificationsDescription")},{id:"evaluation",title:e("rfq.evaluationCriteria"),description:e("rfq.evaluationCriteriaDescription")},{id:"documents",title:e("rfq.documentsAttachments"),description:e("rfq.documentsAttachmentsDescription")},{id:"settings",title:e("rfq.publicationSettings"),description:e("rfq.publicationSettingsDescription")}])(t);Ne.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await mr.from("categories").select("*").eq("is_active",!0).order("name_en");if(t)throw t;h(e||[])}catch(e){}})()},[]);const f=e=>{c(t=>({...t,...e}))},x=()=>{f({technical_specs:[...l.technical_specs,{key:"",value:"",required:!0}]})},g=(e,t,r)=>{const n=[...l.technical_specs];n[e]={...n[e],[t]:r},f({technical_specs:n})},v=()=>{f({evaluation_criteria:[...l.evaluation_criteria,{criterion:"",weight:0,description:""}]})},y=(e,t,r)=>{const n=[...l.evaluation_criteria];n[e]={...n[e],[t]:r},f({evaluation_criteria:n})},j=e=>{const t=Array.from(e.target.files||[]);f({attachments:[...l.attachments,...t]})},b=e=>{switch(e){case 0:return!!(l.title&&l.description&&l.category&&l.budget_min&&l.budget_max&&l.location);case 1:return l.technical_specs.length>0&&l.technical_specs.every(e=>e.key&&e.value);case 2:return l.evaluation_criteria.length>0&&l.evaluation_criteria.every(e=>e.criterion&&e.weight>0);case 3:default:return!0;case 4:return!(!l.submission_deadline||!l.terms_conditions)}};return n.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",dir:r?"rtl":"ltr",children:[n.jsx("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:n.jsxs("div",{className:_u("flex items-center gap-4",r&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>e("/client/rfq-management"),className:"gap-2",children:[n.jsx(zu,{className:_u("h-4 w-4",r&&"rotate-180")}),t("common.back")]}),n.jsxs("div",{className:_u(r&&"text-right"),children:[n.jsx("h1",{className:_u("text-2xl font-bold",r&&"text-right"),children:t("rfq.createNewRFQ")}),n.jsx("p",{className:_u("text-muted-foreground",r&&"text-right"),children:t("rfq.createNewRFQDescription")})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex items-center justify-between text-sm",r&&"flex-row-reverse"),children:[n.jsxs("span",{className:_u(r&&"text-right"),children:[t("rfq.step")," ",i+1," ",t("common.of")," ",p.length]}),n.jsxs("span",{className:_u(r&&"text-right"),children:[Math.round((i+1)/p.length*100),"%"]})]}),n.jsx(G_,{value:(i+1)/p.length*100,className:"h-2"})]}),n.jsx("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:p.map((e,t)=>n.jsxs("div",{className:_u("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",r&&"flex-row-reverse",t===i?"bg-primary text-primary-foreground":t<i?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:[n.jsx("div",{className:_u("w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium",t===i?"bg-primary-foreground text-primary":t<i?"bg-primary text-primary-foreground":"bg-muted-foreground text-muted"),children:t<i?n.jsx(dm,{className:"h-3 w-3"}):t+1}),n.jsxs("div",{className:_u("hidden md:block",r&&"text-right"),children:[n.jsx("div",{className:_u("font-medium",r&&"text-right"),children:e.title}),n.jsx("div",{className:_u("text-xs opacity-75",r&&"text-right"),children:e.description})]})]},e.id))}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",r&&"flex-row-reverse text-right"),children:[0===i&&n.jsx(Tm,{className:"h-5 w-5"}),1===i&&n.jsx(Nh,{className:"h-5 w-5"}),2===i&&n.jsx(dm,{className:"h-5 w-5"}),3===i&&n.jsx(Hh,{className:"h-5 w-5"}),4===i&&n.jsx(Mm,{className:"h-5 w-5"}),n.jsx("span",{className:_u(r&&"text-right"),children:p[i].title})]})}),n.jsx(Au,{children:(()=>{switch(i){case 0:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"title",children:[t("rfq.projectTitle")," *"]}),n.jsx($j,{id:"title",value:l.title,onChange:e=>f({title:e.target.value}),placeholder:t("rfq.enterProjectTitle")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"category",children:[t("rfq.category")," *"]}),n.jsxs(lC,{value:l.category,onValueChange:e=>f({category:e}),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:t("rfq.selectCategory")})}),n.jsx(hC,{children:m.map(e=>n.jsx(pC,{value:e.id,children:r?e.name_ar:e.name_en},e.id))})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"description",children:[t("rfq.projectDescription")," *"]}),n.jsx(bC,{id:"description",value:l.description,onChange:e=>f({description:e.target.value}),placeholder:t("rfq.enterProjectDescription"),rows:4})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"budget_min",children:[t("rfq.minBudget")," *"]}),n.jsx($j,{id:"budget_min",type:"number",value:l.budget_min,onChange:e=>f({budget_min:Number(e.target.value)}),placeholder:"0"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"budget_max",children:[t("rfq.maxBudget")," *"]}),n.jsx($j,{id:"budget_max",type:"number",value:l.budget_max,onChange:e=>f({budget_max:Number(e.target.value)}),placeholder:"0"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"currency",children:t("rfq.currency")}),n.jsxs(lC,{value:l.currency,onValueChange:e=>f({currency:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"SAR",children:"SAR"}),n.jsx(pC,{value:"USD",children:"USD"}),n.jsx(pC,{value:"EUR",children:"EUR"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"timeline",children:t("rfq.timelineDays")}),n.jsx($j,{id:"timeline",type:"number",value:l.timeline_days,onChange:e=>f({timeline_days:Number(e.target.value)}),placeholder:"30"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"location",children:[t("rfq.location")," *"]}),n.jsx($j,{id:"location",value:l.location,onChange:e=>f({location:e.target.value}),placeholder:t("rfq.enterLocation")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"urgency",children:t("rfq.urgency")}),n.jsxs(lC,{value:l.urgency,onValueChange:e=>f({urgency:e}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"low",children:t("rfq.low")}),n.jsx(pC,{value:"medium",children:t("rfq.medium")}),n.jsx(pC,{value:"high",children:t("rfq.high")})]})]})]})]})]});case 1:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t("rfq.technicalSpecifications")}),n.jsxs(ku,{onClick:x,size:"sm",className:"gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),t("rfq.addSpecification")]})]}),n.jsx("div",{className:"space-y-4",children:l.technical_specs.map((e,r)=>n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:t("rfq.specificationName")}),n.jsx($j,{value:e.key,onChange:e=>g(r,"key",e.target.value),placeholder:t("rfq.enterSpecName")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:t("rfq.specificationValue")}),n.jsx($j,{value:e.value,onChange:e=>g(r,"value",e.target.value),placeholder:t("rfq.enterSpecValue")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(CE,{id:`required-${r}`,checked:e.required,onCheckedChange:e=>g(r,"required",e)}),n.jsx(j_,{htmlFor:`required-${r}`,className:"text-sm",children:t("rfq.required")})]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>(e=>{f({technical_specs:l.technical_specs.filter((t,r)=>r!==e)})})(r),children:n.jsx(sp,{className:"h-4 w-4"})})]})]})})},r))}),0===l.technical_specs.length&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Tm,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:t("rfq.noTechnicalSpecs")}),n.jsx("p",{className:"text-sm",children:t("rfq.addTechnicalSpecsToHelp")})]})]});case 2:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:t("rfq.evaluationCriteria")}),n.jsxs(ku,{onClick:v,size:"sm",className:"gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),t("rfq.addCriterion")]})]}),n.jsx("div",{className:"space-y-4",children:l.evaluation_criteria.map((e,r)=>n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:t("rfq.criterionName")}),n.jsx($j,{value:e.criterion,onChange:e=>y(r,"criterion",e.target.value),placeholder:t("rfq.enterCriterionName")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{children:[t("rfq.weight")," (%)"]}),n.jsx($j,{type:"number",min:"0",max:"100",value:e.weight,onChange:e=>y(r,"weight",Number(e.target.value)),placeholder:"0"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:t("rfq.description")}),n.jsx(bC,{value:e.description,onChange:e=>y(r,"description",e.target.value),placeholder:t("rfq.enterCriterionDescription"),rows:2})]})]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>(e=>{f({evaluation_criteria:l.evaluation_criteria.filter((t,r)=>r!==e)})})(r),children:n.jsx(sp,{className:"h-4 w-4"})})]})})},r))}),0===l.evaluation_criteria.length&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(dm,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:t("rfq.noEvaluationCriteria")}),n.jsx("p",{className:"text-sm",children:t("rfq.addEvaluationCriteriaToHelp")})]}),l.evaluation_criteria.length>0&&n.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-2",children:t("rfq.totalWeight")}),n.jsxs("p",{className:"text-2xl font-bold",children:[l.evaluation_criteria.reduce((e,t)=>e+t.weight,0),"%"]}),100!==l.evaluation_criteria.reduce((e,t)=>e+t.weight,0)&&n.jsx("p",{className:"text-sm text-amber-600 mt-1",children:t("rfq.totalWeightShouldBe100")})]})]});case 3:return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"attachments",children:t("rfq.attachments")}),n.jsx($j,{id:"attachments",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:j,className:"cursor-pointer"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[t("rfq.supportedFormats"),": PDF, DOC, DOCX, XLS, XLSX, JPG, PNG"]})]}),l.attachments.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:t("rfq.uploadedFiles")}),n.jsx("div",{className:"space-y-2",children:l.attachments.map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tm,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:e.name}),n.jsxs(Xf,{variant:"secondary",className:"text-xs",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>(e=>{f({attachments:l.attachments.filter((t,r)=>r!==e)})})(t),children:n.jsx(sp,{className:"h-4 w-4"})})]},t))})]})]})});case 4:return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(j_,{children:t("rfq.publicRFQ")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t("rfq.publicRFQDescription")})]}),n.jsx(O5,{checked:l.is_public,onCheckedChange:e=>f({is_public:e})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"submission_deadline",children:[t("rfq.submissionDeadline")," *"]}),n.jsx($j,{id:"submission_deadline",type:"datetime-local",value:l.submission_deadline,onChange:e=>f({submission_deadline:e.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"terms_conditions",children:[t("rfq.termsAndConditions")," *"]}),n.jsx(bC,{id:"terms_conditions",value:l.terms_conditions,onChange:e=>f({terms_conditions:e.target.value}),placeholder:t("rfq.enterTermsAndConditions"),rows:4})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(j_,{children:t("rfq.autoAward")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t("rfq.autoAwardDescription")})]}),n.jsx(O5,{checked:l.auto_award,onCheckedChange:e=>f({auto_award:e})})]}),l.auto_award&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"auto_award_threshold",children:t("rfq.autoAwardThreshold")}),n.jsx($j,{id:"auto_award_threshold",type:"number",min:"0",max:"100",value:l.auto_award_threshold,onChange:e=>f({auto_award_threshold:Number(e.target.value)}),placeholder:"85"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t("rfq.autoAwardThresholdDescription")})]})]})});default:return null}})()})]}),n.jsxs("div",{className:_u("flex items-center justify-between",r&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",onClick:()=>{o(e=>Math.max(e-1,0))},disabled:0===i,className:_u("gap-2",r&&"flex-row-reverse"),children:[n.jsx(zu,{className:_u("h-4 w-4",r&&"rotate-180")}),t("common.previous")]}),n.jsx("div",{className:"flex items-center gap-2",children:i===p.length-1?n.jsx(ku,{onClick:async()=>{if(b(i)){u(!0);try{const r=[];for(const e of l.attachments){const t=e.name.split(".").pop(),n=`rfq-attachments/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${t}`}`,{error:s}=await mr.storage.from("documents").upload(n,e);if(s)throw s;r.push(n)}const{data:n,error:i}=await mr.from("rfqs").insert({title:l.title,description:l.description,category:l.category,budget_min:l.budget_min,budget_max:l.budget_max,currency:l.currency,timeline_days:l.timeline_days,location:l.location,urgency:l.urgency,technical_specifications:l.technical_specs,evaluation_criteria:l.evaluation_criteria,attachments:r,is_public:l.is_public,invited_vendors:l.invited_vendors,submission_deadline:l.submission_deadline,terms_conditions:l.terms_conditions,auto_award:l.auto_award,auto_award_threshold:l.auto_award_threshold,client_id:null==s?void 0:s.user_id,status:"draft"}).select().single();if(i)throw i;a({title:t("rfq.rfqCreated"),description:t("rfq.rfqCreatedSuccessfully")}),e("/client/rfq-management")}catch(r){a({title:t("common.error"),description:r.message||t("rfq.failedToCreateRFQ"),variant:"destructive"})}finally{u(!1)}}else a({title:t("common.error"),description:t("rfq.pleaseCompleteRequiredFields"),variant:"destructive"})},disabled:d,className:"gap-2",children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t("rfq.creating")]}):n.jsxs(n.Fragment,{children:[n.jsx(dm,{className:"h-4 w-4"}),t("rfq.createRFQ")]})}):n.jsxs(ku,{onClick:()=>{b(i)?o(e=>Math.min(e+1,p.length-1)):a({title:t("common.error"),description:t("rfq.pleaseCompleteRequiredFields"),variant:"destructive"})},disabled:!b(i),className:_u("gap-2",r&&"flex-row-reverse"),children:[t("common.next"),n.jsx(Bu,{className:_u("h-4 w-4",r&&"rotate-180")})]})})]})]})};function S9(){return n.jsx(_9,{})}const k9={id:"",title:"",description:"",category:"",budget_min:0,budget_max:0,currency:"SAR",timeline_days:30,location:"",urgency:"medium",is_public:!0,submission_deadline:"",terms_conditions:"",status:"draft",errors:[]},C9=()=>{const e=St(),{t:t,isRTL:r}=cr(),{userProfile:s}=br(),{toast:a}=fp(),[i,o]=Ne.useState([{...k9,id:"1"}]),[l,c]=Ne.useState([]);Ne.useState(!1);const[d,u]=Ne.useState(!1),[m,h]=Ne.useState(new Set);Ne.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:e,error:t}=await mr.from("categories").select("*").eq("is_active",!0).order("name_en");if(t)throw t;c(e||[])}catch(e){}},f=(e,t)=>{o(r=>r.map(r=>r.id===e?{...r,...t,status:"draft",errors:[]}:r))},x=e=>{switch(e){case"ready":return n.jsx(dm,{className:"h-4 w-4 text-green-500"});case"error":return n.jsx(cm,{className:"h-4 w-4 text-red-500"});default:return n.jsx(Tm,{className:"h-4 w-4 text-gray-500"})}},g=e=>{switch(e){case"ready":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=i.filter(e=>"ready"===e.status).length,y=i.filter(e=>m.has(e.id)&&"ready"===e.status).length;return n.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>e("/client/rfq-management"),className:"gap-2",children:[n.jsx(zu,{className:"h-4 w-4"}),t("common.back")]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:t("rfq.createMultipleRequests")}),n.jsx("p",{className:"text-muted-foreground",children:t("rfq.createMultipleRequestsDescription")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ku,{variant:"outline",onClick:async()=>{u(!0);try{const r=i.filter(e=>"ready"===e.status);if(0===r.length)return void a({title:t("rfq.noValidTemplates"),description:t("rfq.pleaseFixErrors"),variant:"destructive"});const n=r.map(e=>mr.from("rfqs").insert({title:e.title,description:e.description,category:e.category,budget_min:e.budget_min,budget_max:e.budget_max,currency:e.currency,timeline_days:e.timeline_days,location:e.location,urgency:e.urgency,is_public:e.is_public,submission_deadline:e.submission_deadline,terms_conditions:e.terms_conditions,client_id:null==s?void 0:s.user_id,status:"draft"}).select().single()),o=await Promise.all(n),l=o.filter(e=>!e.error),c=o.filter(e=>e.error);l.length>0&&a({title:t("rfq.draftsSaved"),description:t("rfq.draftsSavedSuccessfully",{count:l.length})}),c.length>0&&a({title:t("rfq.someDraftsFailed"),description:t("rfq.someDraftsFailedDescription"),variant:"destructive"}),e("/client/rfq-management")}catch(r){a({title:t("common.error"),description:r.message||t("rfq.failedToSaveDrafts"),variant:"destructive"})}finally{u(!1)}},disabled:d||0===v,className:"gap-2",children:[n.jsx(yh,{className:"h-4 w-4"}),t("rfq.saveAsDraft")]}),n.jsxs(ku,{onClick:async()=>{const r=i.filter(e=>m.has(e.id)).filter(e=>"ready"===e.status);if(0!==r.length){u(!0);try{const n=r.map(e=>mr.from("rfqs").insert({title:e.title,description:e.description,category:e.category,budget_min:e.budget_min,budget_max:e.budget_max,currency:e.currency,timeline_days:e.timeline_days,location:e.location,urgency:e.urgency,is_public:e.is_public,submission_deadline:e.submission_deadline,terms_conditions:e.terms_conditions,client_id:null==s?void 0:s.user_id,status:"published"}).select().single()),i=await Promise.all(n),o=i.filter(e=>!e.error),l=i.filter(e=>e.error);o.length>0&&a({title:t("rfq.rfqsPublished"),description:t("rfq.rfqsPublishedSuccessfully",{count:o.length})}),l.length>0&&a({title:t("rfq.someRfqsFailed"),description:t("rfq.someRfqsFailedDescription"),variant:"destructive"}),e("/client/rfq-management")}catch(n){a({title:t("common.error"),description:n.message||t("rfq.failedToPublishRfqs"),variant:"destructive"})}finally{u(!1)}}else a({title:t("rfq.noValidTemplatesSelected"),description:t("rfq.pleaseSelectValidTemplates"),variant:"destructive"})},disabled:d||0===y,className:"gap-2",children:[n.jsx(Hh,{className:"h-4 w-4"}),t("rfq.publishSelected")," (",y,")"]})]})]}),n.jsx(Eu,{children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:t("rfq.progress")}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[v," / ",i.length," ",t("rfq.ready")]})]}),n.jsx(G_,{value:v/i.length*100,className:"h-2"})]})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>{const e=i.filter(e=>"ready"===e.status).map(e=>e.id);h(new Set(e))},disabled:0===v,children:t("rfq.selectAllValid")}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>{h(new Set)},disabled:0===m.size,children:t("rfq.clearSelection")}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.size," ",t("rfq.selected")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{const e=(i.length+1).toString();o(t=>[...t,{...k9,id:e}])},className:"gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),t("rfq.addTemplate")]}),n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>{o(e=>e.map(e=>{const r=(e=>{const r=[];return e.title.trim()||r.push(t("rfq.titleRequired")),e.description.trim()||r.push(t("rfq.descriptionRequired")),e.category||r.push(t("rfq.categoryRequired")),(!e.budget_min||e.budget_min<=0)&&r.push(t("rfq.minBudgetRequired")),(!e.budget_max||e.budget_max<=0)&&r.push(t("rfq.maxBudgetRequired")),e.budget_min>=e.budget_max&&r.push(t("rfq.budgetRangeInvalid")),e.location.trim()||r.push(t("rfq.locationRequired")),e.submission_deadline||r.push(t("rfq.deadlineRequired")),e.terms_conditions.trim()||r.push(t("rfq.termsRequired")),r})(e);return{...e,status:0===r.length?"ready":"error",errors:r}}))},className:"gap-2",children:[n.jsx(dm,{className:"h-4 w-4"}),t("rfq.validateAll")]})]})]})})}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map((e,s)=>n.jsxs(Eu,{className:_u("transition-all duration-200",m.has(e.id)&&"ring-2 ring-primary"),children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(CE,{checked:m.has(e.id),onCheckedChange:()=>{return t=e.id,void h(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},disabled:"ready"!==e.status}),n.jsxs("div",{children:[n.jsxs(Mu,{className:"text-lg flex items-center gap-2",children:[x(e.status),e.title||`${t("rfq.request")} ${s+1}`]}),n.jsx(Xf,{variant:"outline",className:g(e.status),children:t(`rfq.${e.status}`)})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>(e=>{const t=i.find(t=>t.id===e);if(t){const e=(i.length+1).toString(),r={...t,id:e,title:`${t.title} (Copy)`,status:"draft",errors:[]};o(e=>[...e,r])}})(e.id),children:n.jsx(ym,{className:"h-4 w-4"})}),i.length>1&&n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void(i.length>1&&(o(e=>e.filter(e=>e.id!==t)),h(e=>{const r=new Set(e);return r.delete(t),r})));var t},children:n.jsx(zh,{className:"h-4 w-4"})})]})]})}),n.jsxs(Au,{className:"space-y-4",children:[e.errors.length>0&&n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(cm,{className:"h-4 w-4 text-red-500"}),n.jsx("span",{className:"text-sm font-medium text-red-800",children:t("rfq.errors")})]}),n.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:e.errors.map((e,t)=>n.jsxs("li",{children:["• ",e]},t))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`title-${e.id}`,children:[t("rfq.projectTitle")," *"]}),n.jsx($j,{id:`title-${e.id}`,value:e.title,onChange:t=>f(e.id,{title:t.target.value}),placeholder:t("rfq.enterProjectTitle")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`description-${e.id}`,children:[t("rfq.projectDescription")," *"]}),n.jsx(bC,{id:`description-${e.id}`,value:e.description,onChange:t=>f(e.id,{description:t.target.value}),placeholder:t("rfq.enterProjectDescription"),rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`category-${e.id}`,children:[t("rfq.category")," *"]}),n.jsxs(lC,{value:e.category,onValueChange:t=>f(e.id,{category:t}),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:t("rfq.selectCategory")})}),n.jsx(hC,{children:l.map(e=>n.jsx(pC,{value:e.id,children:r?e.name_ar:e.name_en},e.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:`urgency-${e.id}`,children:t("rfq.urgency")}),n.jsxs(lC,{value:e.urgency,onValueChange:t=>f(e.id,{urgency:t}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"low",children:t("rfq.low")}),n.jsx(pC,{value:"medium",children:t("rfq.medium")}),n.jsx(pC,{value:"high",children:t("rfq.high")})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`budget_min-${e.id}`,children:[t("rfq.minBudget")," *"]}),n.jsx($j,{id:`budget_min-${e.id}`,type:"number",value:e.budget_min,onChange:t=>f(e.id,{budget_min:Number(t.target.value)}),placeholder:"0"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`budget_max-${e.id}`,children:[t("rfq.maxBudget")," *"]}),n.jsx($j,{id:`budget_max-${e.id}`,type:"number",value:e.budget_max,onChange:t=>f(e.id,{budget_max:Number(t.target.value)}),placeholder:"0"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:`currency-${e.id}`,children:t("rfq.currency")}),n.jsxs(lC,{value:e.currency,onValueChange:t=>f(e.id,{currency:t}),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"SAR",children:"SAR"}),n.jsx(pC,{value:"USD",children:"USD"}),n.jsx(pC,{value:"EUR",children:"EUR"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`location-${e.id}`,children:[t("rfq.location")," *"]}),n.jsx($j,{id:`location-${e.id}`,value:e.location,onChange:t=>f(e.id,{location:t.target.value}),placeholder:t("rfq.enterLocation")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:`timeline-${e.id}`,children:t("rfq.timelineDays")}),n.jsx($j,{id:`timeline-${e.id}`,type:"number",value:e.timeline_days,onChange:t=>f(e.id,{timeline_days:Number(t.target.value)}),placeholder:"30"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`deadline-${e.id}`,children:[t("rfq.submissionDeadline")," *"]}),n.jsx($j,{id:`deadline-${e.id}`,type:"datetime-local",value:e.submission_deadline,onChange:t=>f(e.id,{submission_deadline:t.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:`terms-${e.id}`,children:[t("rfq.termsAndConditions")," *"]}),n.jsx(bC,{id:`terms-${e.id}`,value:e.terms_conditions,onChange:t=>f(e.id,{terms_conditions:t.target.value}),placeholder:t("rfq.enterTermsAndConditions"),rows:2})]})]})]})]},e.id))})]})};function E9(){return n.jsx(C9,{})}const O9=({children:e})=>{const[t,r]=Ne.useState(!1),{toast:s}=fp(),{user:a}=br(),{language:i}=cr(),o="ar"===i,[l,c]=Ne.useState(!1),[d,u]=Ne.useState({fullName:"",email:"",companyName:"",estimatedUsers:"",requirements:"",message:""}),m=e=>{const{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))};return n.jsxs(Sb,{open:t,onOpenChange:r,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"sm:max-w-[600px]",children:[n.jsxs(Mb,{children:[n.jsx(Ab,{children:o?"استشارة المؤسسات":"Enterprise Consultation"}),n.jsx(Tb,{children:o?"احصل على استشارة مخصصة لاحتياجات مؤسستك":"Get a personalized consultation for your enterprise needs"})]}),n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c(!0),!(null==a?void 0:a.id))return s({title:"Error",description:"Please sign in to submit a consultation request.",variant:"destructive"}),void c(!1);try{Date.now().toString(),a.id,d.fullName,d.email,d.companyName,d.estimatedUsers,d.message,d.requirements&&d.requirements;s({title:o?"تم إرسال طلبك بنجاح":"Request Submitted Successfully",description:o?"سنتواصل معك خلال 24 ساعة":"We'll contact you within 24 hours"}),u({fullName:"",email:"",companyName:"",estimatedUsers:"",requirements:"",message:""}),r(!1)}catch(t){s({title:o?"خطأ في الإرسال":"Submission Error",description:o?"حدث خطأ أثناء إرسال طلبك":"There was an error submitting your request",variant:"destructive"})}finally{c(!1)}},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"fullName",children:o?"الاسم الكامل":"Full Name"}),n.jsx($j,{id:"fullName",name:"fullName",value:d.fullName,onChange:m,placeholder:o?"أدخل اسمك الكامل":"Enter your full name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"email",children:o?"البريد الإلكتروني":"Email"}),n.jsx($j,{id:"email",name:"email",type:"email",value:d.email,onChange:m,placeholder:o?"أدخل بريدك الإلكتروني":"Enter your email",required:!0})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"companyName",children:o?"اسم الشركة":"Company Name"}),n.jsx($j,{id:"companyName",name:"companyName",value:d.companyName,onChange:m,placeholder:o?"أدخل اسم شركتك":"Enter your company name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"estimatedUsers",children:o?"العدد المتوقع للمستخدمين":"Estimated Number of Users"}),n.jsxs(lC,{onValueChange:e=>((e,t)=>{u(r=>({...r,[e]:t}))})("estimatedUsers",e),children:[n.jsx(dC,{children:n.jsx(cC,{placeholder:o?"اختر عدد المستخدمين":"Select number of users"})}),n.jsxs(hC,{children:[n.jsxs(pC,{value:"50-100",children:["50-100 ",o?"مستخدم":"users"]}),n.jsxs(pC,{value:"100-500",children:["100-500 ",o?"مستخدم":"users"]}),n.jsxs(pC,{value:"500-1000",children:["500-1000 ",o?"مستخدم":"users"]}),n.jsxs(pC,{value:"1000+",children:["1000+ ",o?"مستخدم":"users"]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"requirements",children:o?"المتطلبات الخاصة":"Specific Requirements"}),n.jsx(bC,{id:"requirements",name:"requirements",value:d.requirements,onChange:m,placeholder:o?"أخبرنا عن متطلباتك الخاصة":"Tell us about your specific requirements",className:"min-h-[100px]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"message",children:o?"تفاصيل إضافية":"Additional Details"}),n.jsx(bC,{id:"message",name:"message",value:d.message,onChange:m,placeholder:o?"أي تفاصيل إضافية تود مشاركتها":"Any additional details you would like to share",className:"min-h-[120px]",required:!0})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(ku,{type:"submit",disabled:l,className:"flex-1",children:l?o?"جاري الإرسال...":"Submitting...":o?"إرسال الطلب":"Submit Request"}),n.jsx(ku,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:o?"إلغاء":"Cancel"})]})]})]})]})};var M9,P9="colors",A9="sizes",T9="space",D9={gap:T9,gridGap:T9,columnGap:T9,gridColumnGap:T9,rowGap:T9,gridRowGap:T9,inset:T9,insetBlock:T9,insetBlockEnd:T9,insetBlockStart:T9,insetInline:T9,insetInlineEnd:T9,insetInlineStart:T9,margin:T9,marginTop:T9,marginRight:T9,marginBottom:T9,marginLeft:T9,marginBlock:T9,marginBlockEnd:T9,marginBlockStart:T9,marginInline:T9,marginInlineEnd:T9,marginInlineStart:T9,padding:T9,paddingTop:T9,paddingRight:T9,paddingBottom:T9,paddingLeft:T9,paddingBlock:T9,paddingBlockEnd:T9,paddingBlockStart:T9,paddingInline:T9,paddingInlineEnd:T9,paddingInlineStart:T9,top:T9,right:T9,bottom:T9,left:T9,scrollMargin:T9,scrollMarginTop:T9,scrollMarginRight:T9,scrollMarginBottom:T9,scrollMarginLeft:T9,scrollMarginX:T9,scrollMarginY:T9,scrollMarginBlock:T9,scrollMarginBlockEnd:T9,scrollMarginBlockStart:T9,scrollMarginInline:T9,scrollMarginInlineEnd:T9,scrollMarginInlineStart:T9,scrollPadding:T9,scrollPaddingTop:T9,scrollPaddingRight:T9,scrollPaddingBottom:T9,scrollPaddingLeft:T9,scrollPaddingX:T9,scrollPaddingY:T9,scrollPaddingBlock:T9,scrollPaddingBlockEnd:T9,scrollPaddingBlockStart:T9,scrollPaddingInline:T9,scrollPaddingInlineEnd:T9,scrollPaddingInlineStart:T9,fontSize:"fontSizes",background:P9,backgroundColor:P9,backgroundImage:P9,borderImage:P9,border:P9,borderBlock:P9,borderBlockEnd:P9,borderBlockStart:P9,borderBottom:P9,borderBottomColor:P9,borderColor:P9,borderInline:P9,borderInlineEnd:P9,borderInlineStart:P9,borderLeft:P9,borderLeftColor:P9,borderRight:P9,borderRightColor:P9,borderTop:P9,borderTopColor:P9,caretColor:P9,color:P9,columnRuleColor:P9,fill:P9,outline:P9,outlineColor:P9,stroke:P9,textDecorationColor:P9,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:A9,minBlockSize:A9,maxBlockSize:A9,inlineSize:A9,minInlineSize:A9,maxInlineSize:A9,width:A9,minWidth:A9,maxWidth:A9,height:A9,minHeight:A9,maxHeight:A9,flexBasis:A9,gridTemplateColumns:A9,gridTemplateRows:A9,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},R9=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,L9=()=>{const e=Object.create(null);return(t,r,...n)=>{const s=(a=t,JSON.stringify(a,R9));var a;return s in e?e[s]:e[s]=r(t,...n)}},q9=Symbol.for("sxs.internal"),I9=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),F9=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:z9}=Object.prototype,B9=e=>e.includes("-")?e:e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$9=/\s+(?![^()]*\))/,U9=e=>t=>e(..."string"==typeof t?String(t).split($9):[t]),V9={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:U9((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:U9((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:U9((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:U9((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:U9((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:U9((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},W9=/([\d.]+)([^]*)/,H9=(e,t)=>e.length?e.reduce((e,r)=>(e.push(...t.map(e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(e)?`:is(${r})`:r):r+" "+e)),e),[]):t,Y9=(e,t)=>e in K9&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,n,s)=>r+("stretch"===n?`-moz-available${s};${B9(e)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${B9(e)}:${r}fit-content`)+s):String(t),K9={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},G9=e=>e?e+"-":"",X9=(e,t,r)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(e,n,s,a,i)=>"$"==a==!!s?e:(n||"--"==a?"calc(":"")+"var(--"+("$"===a?G9(t)+(i.includes("$")?"":G9(r))+i.replace(/\$/g,"-"):i)+")"+(n||"--"==a?"*"+(n||"")+(s||"1")+")":"")),Q9=/\s*,\s*(?![^()]*\))/,Z9=Object.prototype.toString,J9=(e,t,r,n,s)=>{let a,i,o;const l=(e,t,r)=>{let c,d;const u=e=>{for(c in e){const p=64===c.charCodeAt(0),f=p&&Array.isArray(e[c])?e[c]:[e[c]];for(d of f){const e=/[A-Z]/.test(h=c)?h:h.replace(/-[^]/g,e=>e[1].toUpperCase()),f="object"==typeof d&&d&&d.toString===Z9&&(!n.utils[e]||!t.length);if(e in n.utils&&!f){const t=n.utils[e];if(t!==i){i=t,u(t(d)),i=null;continue}}else if(e in V9){const t=V9[e];if(t!==o){o=t,u(t(d)),o=null;continue}}if(p&&(m=c.slice(1)in n.media?"@media "+n.media[c.slice(1)]:c,c=m.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(e,t,r,n,s,a)=>{const i=W9.test(t),o=.0625*(i?-1:1),[l,c]=i?[n,t]:[t,n];return"("+("="===r[0]?"":">"===r[0]===i?"max-":"min-")+l+":"+("="!==r[0]&&1===r.length?c.replace(W9,(e,t,n)=>Number(t)+o*(">"===r?1:-1)+n):c)+(s?") and ("+(">"===s[0]?"min-":"max-")+l+":"+(1===s.length?a.replace(W9,(e,t,r)=>Number(t)+o*(">"===s?-1:1)+r):a):"")+")"})),f){const e=p?r.concat(c):[...r],n=p?[...t]:H9(t,c.split(Q9));void 0!==a&&s(e7(...a)),a=void 0,l(d,n,e)}else void 0===a&&(a=[[],t,r]),c=p||36!==c.charCodeAt(0)?c:`--${G9(n.prefix)}${c.slice(1).replace(/\$/g,"-")}`,d=f?d:"number"==typeof d?d&&e in t7?String(d)+"px":String(d):X9(Y9(e,null==d?"":d),n.prefix,n.themeMap[e]),a[0].push(`${p?`${c} `:`${B9(c)}:`}${d}`)}}var m,h};u(e),void 0!==a&&s(e7(...a)),a=void 0};l(e,t,r)},e7=(e,t,r)=>`${r.map(e=>`${e}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(r.length?r.length+1:0).join("}")}`,t7={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},r7=e=>String.fromCharCode(e+(e>25?39:97)),n7=e=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=r7(t%52)+r;return r7(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(e))>>>0),s7=["themed","global","styled","onevar","resonevar","allvar","inline"],a7=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(t){return!1}},i7=e=>{let t;const r=()=>{const{cssRules:e}=t.sheet;return[].map.call(e,(r,n)=>{const{cssText:s}=r;let a="";if(s.startsWith("--sxs"))return"";if(e[n-1]&&(a=e[n-1].cssText).startsWith("--sxs")){if(!r.cssRules.length)return"";for(const e in t.rules)if(t.rules[e].group===r)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${s}`;return r.cssRules.length?`${a}${s}`:""}return s}).join("")},n=()=>{if(t){const{rules:e,sheet:r}=t;if(!r.deleteRule){for(;3===Object(Object(r.cssRules)[0]).type;)r.cssRules.splice(0,1);r.cssRules=[]}for(const t in e)delete e[t]}const s=Object(e).styleSheets||[];for(const e of s)if(a7(e)){for(let s=0,a=e.cssRules;a[s];++s){const i=Object(a[s]);if(1!==i.type)continue;const o=Object(a[s+1]);if(4!==o.type)continue;++s;const{cssText:l}=i;if(!l.startsWith("--sxs"))continue;const c=l.slice(14,-3).trim().split(/\s+/),d=s7[c[0]];d&&(t||(t={sheet:e,reset:n,rules:{},toString:r}),t.rules[d]={group:o,index:s,cache:new Set(c)})}if(t)break}if(!t){const s=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,s(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,e=>e.cssText).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:s("","text/css"),rules:{},reset:n,toString:r}}const{sheet:a,rules:i}=t;for(let e=s7.length-1;e>=0;--e){const t=s7[e];if(!i[t]){const r=s7[e+1],n=i[r]?i[r].index:a.cssRules.length;a.insertRule("@media{}",n),a.insertRule(`--sxs{--sxs:${e}}`,n),i[t]={group:a.cssRules[n+1],index:n,cache:new Set([e])}}o7(i[t])}};return n(),t},o7=e=>{const t=e.group;let r=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,r),++r}catch(n){}}},l7=Symbol(),c7=L9(),d7=(e,t)=>c7(e,()=>(...r)=>{let n={type:null,composers:new Set};for(const t of r)if(null!=t)if(t[q9]){null==n.type&&(n.type=t[q9].type);for(const e of t[q9].composers)n.composers.add(e)}else t.constructor!==Object||t.$$typeof?null==n.type&&(n.type=t):n.composers.add(u7(t,e));return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),m7(e,n,t)}),u7=({variants:e,compoundVariants:t,defaultVariants:r,...n},s)=>{const a=`${G9(s.prefix)}c-${n7(n)}`,i=[],o=[],l=Object.create(null),c=[];for(const m in r)l[m]=String(r[m]);if("object"==typeof e&&e)for(const m in e){d=l,u=m,z9.call(d,u)||(l[m]="undefined");const t=e[m];for(const e in t){const r={[m]:String(e)};"undefined"===String(e)&&c.push(m);const n=t[e],s=[r,n,!F9(n)];i.push(s)}}var d,u;if("object"==typeof t&&t)for(const m of t){let{css:e,...t}=m;e="object"==typeof e&&e||{};for(const n in t)t[n]=String(t[n]);const r=[t,e,!F9(e)];o.push(r)}return[a,n,i,o,l,c]},m7=(e,t,r)=>{const[n,s,a,i]=h7(t.composers),o="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let r=0;r<t[l7].length;r++){const[n,s]=t[l7][r];e.rules[n].apply(s)}return t[l7]=[],null}return t[l7]=[],t.rules={},s7.forEach(e=>t.rules[e]={apply:r=>t[l7].push([e,r])}),t})(r):null,l=(o||r).rules,c=`.${n}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,d=d=>{d="object"==typeof d&&d||f7;const{css:u,...m}=d,h={};for(const e in a)if(delete m[e],e in d){let t=d[e];"object"==typeof t&&t?h[e]={"@initial":a[e],...t}:(t=String(t),h[e]="undefined"!==t||i.has(e)?t:a[e])}else h[e]=a[e];const p=new Set([...s]);for(const[n,s,a,i]of t.composers){r.rules.styled.cache.has(n)||(r.rules.styled.cache.add(n),J9(s,[`.${n}`],[],e,e=>{l.styled.apply(e)}));const t=p7(a,h,e.media),o=p7(i,h,e.media,!0);for(const s of t)if(void 0!==s)for(const[t,a,i]of s){const s=`${n}-${n7(a)}-${t}`;p.add(s);const o=(i?r.rules.resonevar:r.rules.onevar).cache,c=i?l.resonevar:l.onevar;o.has(s)||(o.add(s),J9(a,[`.${s}`],[],e,e=>{c.apply(e)}))}for(const s of o)if(void 0!==s)for(const[t,a]of s){const s=`${n}-${n7(a)}-${t}`;p.add(s),r.rules.allvar.cache.has(s)||(r.rules.allvar.cache.add(s),J9(a,[`.${s}`],[],e,e=>{l.allvar.apply(e)}))}}if("object"==typeof u&&u){const t=`${n}-i${n7(u)}-css`;p.add(t),r.rules.inline.cache.has(t)||(r.rules.inline.cache.add(t),J9(u,[`.${t}`],[],e,e=>{l.inline.apply(e)}))}for(const e of String(d.className||"").trim().split(/\s+/))e&&p.add(e);const f=m.className=[...p].join(" ");return{type:t.type,className:f,selector:c,props:m,toString:()=>f,deferredInjector:o}};return I9(d,{className:n,selector:c,[q9]:t,toString:()=>(r.rules.styled.cache.has(n)||d(),n)})},h7=e=>{let t="";const r=[],n={},s=[];for(const[a,,,,i,o]of e){""===t&&(t=a),r.push(a),s.push(...o);for(const e in i){const t=i[e];(void 0===n[e]||"undefined"!==t||o.includes(t))&&(n[e]=t)}}return[t,r,n,new Set(s)]},p7=(e,t,r,n)=>{const s=[];e:for(let[a,i,o]of e){if(o)continue;let e,l=0,c=!1;for(e in a){const n=a[e];let s=t[e];if(s!==n){if("object"!=typeof s||!s)continue e;{let e,t,a=0;for(const i in s){if(n===String(s[i])){if("@initial"!==i){const e=i.slice(1);(t=t||[]).push(e in r?r[e]:i.replace(/^@media ?/,"")),c=!0}l+=a,e=!0}++a}if(t&&t.length&&(i={["@media "+t.join(", ")]:i}),!e)continue e}}}(s[l]=s[l]||[]).push([n?"cv":`${e}-${a[e]}`,i,c])}return s},f7={},x7=L9(),g7=(e,t)=>x7(e,()=>(...r)=>{const n=()=>{for(let n of r){n="object"==typeof n&&n||{};let r=n7(n);if(!t.rules.global.cache.has(r)){if(t.rules.global.cache.add(r),"@import"in n){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let r of[].concat(n["@import"]))r=r.includes('"')||r.includes("'")?r:`"${r}"`,t.sheet.insertRule(`@import ${r};`,e++);delete n["@import"]}J9(n,[],[],e,e=>{t.rules.global.apply(e)})}}return""};return I9(n,{toString:n})}),v7=L9(),y7=(e,t)=>v7(e,()=>r=>{const n=`${G9(e.prefix)}k-${n7(r)}`,s=()=>{if(!t.rules.global.cache.has(n)){t.rules.global.cache.add(n);const s=[];J9(r,[],[],e,e=>s.push(e));const a=`@keyframes ${n}{${s.join("")}}`;t.rules.global.apply(a)}return n};return I9(s,{get name(){return s()},toString:s})}),j7=class{constructor(e,t,r,n){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==r?"":String(r),this.prefix=null==n?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+G9(this.prefix)+G9(this.scale)+this.token}toString(){return this.computedValue}},b7=L9(),w7=(e,t)=>b7(e,()=>(r,n)=>{n="object"==typeof r&&r||Object(n);const s=`.${r=(r="string"==typeof r?r:"")||`${G9(e.prefix)}t-${n7(n)}`}`,a={},i=[];for(const t in n){a[t]={};for(const r in n[t]){const s=`--${G9(e.prefix)}${t}-${r}`,o=X9(String(n[t][r]),e.prefix,t);a[t][r]=new j7(r,o,t,e.prefix),i.push(`${s}:${o}`)}}const o=()=>{if(i.length&&!t.rules.themed.cache.has(r)){t.rules.themed.cache.add(r);const s=`${n===e.theme?":root,":""}.${r}{${i.join(";")}}`;t.rules.themed.apply(s)}return r};return{...a,get className(){return o()},selector:s,toString:o}}),N7=L9(),_7=e=>{let t=!1;const r=N7(e,e=>{t=!0;const r="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",n="object"==typeof e.media&&e.media||{},s="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},i={prefix:r,media:n,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...D9},utils:"object"==typeof e.utils&&e.utils||{}},o=i7(s),l={css:d7(i,o),globalCss:g7(i,o),keyframes:y7(i,o),createTheme:w7(i,o),reset(){o.reset(),l.theme.toString()},theme:{},sheet:o,config:i,prefix:r,getCssText:o.toString,toString:o.toString};return String(l.theme=l.createTheme(a)),l});return t||r.reset(),r},S7=()=>M9||(M9=_7()),k7=(...e)=>S7().createTheme(...e),C7=(...e)=>S7().css(...e),E7={default:{colors:{brand:"hsl(153 60.0% 53.0%)",brandAccent:"hsl(154 54.8% 45.1%)",brandButtonText:"white",defaultButtonBackground:"white",defaultButtonBackgroundHover:"#eaeaea",defaultButtonBorder:"lightgray",defaultButtonText:"gray",dividerBackground:"#eaeaea",inputBackground:"transparent",inputBorder:"lightgray",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"black",inputLabelText:"gray",inputPlaceholder:"darkgray",messageText:"#2b805a",messageBackground:"#e7fcf1",messageBorder:"#d0f3e1",messageTextDanger:"#ff6369",messageBackgroundDanger:"#fff8f8",messageBorderDanger:"#822025",anchorTextColor:"gray",anchorTextHoverColor:"darkgray"},space:{spaceSmall:"4px",spaceMedium:"8px",spaceLarge:"16px",labelBottomMargin:"8px",anchorBottomMargin:"4px",emailInputSpacing:"4px",socialAuthSpacing:"4px",buttonPadding:"10px 15px",inputPadding:"10px 15px"},fontSizes:{baseBodySize:"13px",baseInputSize:"14px",baseLabelSize:"14px",baseButtonSize:"14px"},fonts:{bodyFontFamily:"ui-sans-serif, sans-serif",buttonFontFamily:"ui-sans-serif, sans-serif",inputFontFamily:"ui-sans-serif, sans-serif",labelFontFamily:"ui-sans-serif, sans-serif"},borderWidths:{buttonBorderWidth:"1px",inputBorderWidth:"1px"},radii:{borderRadiusButton:"4px",buttonBorderRadius:"4px",inputBorderRadius:"4px"}},dark:{colors:{brandButtonText:"white",defaultButtonBackground:"#2e2e2e",defaultButtonBackgroundHover:"#3e3e3e",defaultButtonBorder:"#3e3e3e",defaultButtonText:"white",dividerBackground:"#2e2e2e",inputBackground:"#1e1e1e",inputBorder:"#3e3e3e",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"white",inputPlaceholder:"darkgray",messageText:"#85e0b7",messageBackground:"#072719",messageBorder:"#2b805a",messageBackgroundDanger:"#1f1315"}}},O7="sign_in",M7="sign_up",P7="forgotten_password",A7="magic_link",T7="update_password",D7="verify_otp",R7={ROOT:"root",SIGN_IN:O7,SIGN_UP:M7,FORGOTTEN_PASSWORD:P7,MAGIC_LINK:A7,UPDATE_PASSWORD:T7,anchor:"ui-anchor",button:"ui-button",container:"ui-container",divider:"ui-divider",input:"ui-input",label:"ui-label",loader:"ui-loader",message:"ui-message"};function L7(e,t,r){var n,s;const a=[],i=R7[e];return a.push((null==r?void 0:r.prependedClassName)?(null==r?void 0:r.prependedClassName)+"_"+i:"supabase-auth-ui_"+i),(null==(n=null==r?void 0:r.className)?void 0:n[e])&&a.push(null==(s=null==r?void 0:r.className)?void 0:s[e]),void 0!==(null==r?void 0:r.extend)&&!0!==(null==r?void 0:r.extend)||a.push(t),a}function q7(e,t){let r;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)e[r]=q7(e[r],t[r]);else for(r in t)e[r]=q7(e[r],t[r]);return e}return t}function I7(e,...t){let r=t.length;for(let n=0;n<r;n++)e=q7(e,t[n]);return e}var F7={sign_up:{email_label:"Email address",password_label:"Create a Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign up",loading_button_label:"Signing up ...",social_provider_text:"Sign in with {{provider}}",link_text:"Don't have an account? Sign up",confirmation_text:"Check your email for the confirmation link"},sign_in:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign in",loading_button_label:"Signing in ...",social_provider_text:"Sign in with {{provider}}",link_text:"Already have an account? Sign in"},magic_link:{email_input_label:"Email address",email_input_placeholder:"Your email address",button_label:"Send Magic Link",loading_button_label:"Sending Magic Link ...",link_text:"Send a magic link email",confirmation_text:"Check your email for the magic link"},forgotten_password:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",button_label:"Send reset password instructions",loading_button_label:"Sending reset instructions ...",link_text:"Forgot your password?",confirmation_text:"Check your email for the password reset link"},update_password:{password_label:"New password",password_input_placeholder:"Your new password",button_label:"Update password",loading_button_label:"Updating password ...",confirmation_text:"Your password has been updated"},verify_otp:{email_input_label:"Email address",email_input_placeholder:"Your email address",phone_input_label:"Phone number",phone_input_placeholder:"Your phone number",token_input_label:"Token",token_input_placeholder:"Your Otp token",button_label:"Verify token",loading_button_label:"Signing in ..."}};const z7=C7({fontFamily:"$bodyFontFamily",fontSize:"$baseBodySize",marginBottom:"$anchorBottomMargin",color:"$anchorTextColor",display:"block",textAlign:"center",textDecoration:"underline","&:hover":{color:"$anchorTextHoverColor"}}),B7=({children:e,appearance:t,...r})=>{var n;const s=L7("anchor",z7(),t);return ke.createElement("a",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.anchor,className:s.join(" ")},e)},$7=C7({fontFamily:"$buttonFontFamily",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"$borderRadiusButton",fontSize:"$baseButtonSize",padding:"$buttonPadding",cursor:"pointer",borderWidth:"$buttonBorderWidth",borderStyle:"solid",width:"100%",transitionProperty:"background-color",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms","&:disabled":{opacity:.7,cursor:"unset"},variants:{color:{default:{backgroundColor:"$defaultButtonBackground",color:"$defaultButtonText",borderColor:"$defaultButtonBorder","&:hover:not(:disabled)":{backgroundColor:"$defaultButtonBackgroundHover"}},primary:{backgroundColor:"$brand",color:"$brandButtonText",borderColor:"$brandAccent","&:hover:not(:disabled)":{backgroundColor:"$brandAccent"}}}}}),U7=({children:e,color:t="default",appearance:r,icon:n,loading:s=!1,...a})=>{var i;const o=L7("button",$7({color:t}),r);return ke.createElement("button",{...a,style:null==(i=null==r?void 0:r.style)?void 0:i.button,className:o.join(" "),disabled:s},n,e)},V7=C7({display:"flex",gap:"4px",variants:{direction:{horizontal:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(48px, 1fr))"},vertical:{flexDirection:"column",margin:"8px 0"}},gap:{small:{gap:"4px"},medium:{gap:"8px"},large:{gap:"16px"}}}}),W7=({children:e,appearance:t,...r})=>{var n;const s=L7("container",V7({direction:r.direction,gap:r.gap}),t);return ke.createElement("div",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.container,className:s.join(" ")},e)},H7=C7({background:"$dividerBackground",display:"block",margin:"16px 0",height:"1px",width:"100%"}),Y7=({children:e,appearance:t,...r})=>{var n;const s=L7("divider",H7(),t);return ke.createElement("div",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.divider,className:s.join(" ")})},K7=C7({fontFamily:"$inputFontFamily",background:"$inputBackground",borderRadius:"$inputBorderRadius",padding:"$inputPadding",cursor:"text",borderWidth:"$inputBorderWidth",borderColor:"$inputBorder",borderStyle:"solid",fontSize:"$baseInputSize",width:"100%",color:"$inputText",boxSizing:"border-box","&:hover":{borderColor:"$inputBorderHover",outline:"none"},"&:focus":{borderColor:"$inputBorderFocus",outline:"none"},"&::placeholder":{color:"$inputPlaceholder",letterSpacing:"initial"},transitionProperty:"background-color, border",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms",variants:{type:{default:{letterSpacing:"0px"},password:{letterSpacing:"0px"}}}}),G7=({children:e,appearance:t,...r})=>{var n;const s=L7("input",K7({type:"password"===r.type?"password":"default"}),t);return ke.createElement("input",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.input,className:s.join(" ")},e)},X7=C7({fontFamily:"$labelFontFamily",fontSize:"$baseLabelSize",marginBottom:"$labelBottomMargin",color:"$inputLabelText",display:"block"}),Q7=({children:e,appearance:t,...r})=>{var n;const s=L7("label",X7(),t);return ke.createElement("label",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.label,className:s.join(" ")},e)},Z7=C7({fontFamily:"$bodyFontFamily",fontSize:"$baseInputSize",marginBottom:"$labelBottomMargin",display:"block",textAlign:"center",borderRadius:"0.375rem",padding:"1.5rem 1rem",lineHeight:"1rem",color:"$messageText",backgroundColor:"$messageBackground",border:"1px solid $messageBorder",variants:{color:{danger:{color:"$messageTextDanger",backgroundColor:"$messageBackgroundDanger",border:"1px solid $messageBorderDanger"}}}}),J7=({children:e,appearance:t,...r})=>{var n;const s=L7("message",Z7({color:r.color}),t);return ke.createElement("span",{...r,style:null==(n=null==t?void 0:t.style)?void 0:n.message,className:s.join(" ")},e)};function eee({setAuthView:e=()=>{},supabaseClient:t,redirectTo:r,i18n:n,appearance:s,showLinks:a=!1}){var i;const[o,l]=Ne.useState(""),[c,d]=Ne.useState(""),[u,m]=Ne.useState(""),[h,p]=Ne.useState(!1),f=null==n?void 0:n.magic_link;return ke.createElement("form",{id:"auth-magic-link",onSubmit:async e=>{var s,a;if(e.preventDefault(),d(""),m(""),p(!0),0===o.length)return d(null==(s=null==n?void 0:n.magic_link)?void 0:s.empty_email_address),void p(!1);const{error:i}=await t.auth.signInWithOtp({email:o,options:{emailRedirectTo:r}});i?d(i.message):m(null==(a=null==n?void 0:n.magic_link)?void 0:a.confirmation_text),p(!1)}},ke.createElement(W7,{gap:"large",direction:"vertical",appearance:s},ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"email",appearance:s},null==f?void 0:f.email_input_label),ke.createElement(G7,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:null==f?void 0:f.email_input_placeholder,onChange:e=>{d&&d(""),l(e.target.value)},appearance:s})),ke.createElement(U7,{color:"primary",type:"submit",loading:h,appearance:s},h?null==f?void 0:f.loading_button_label:null==f?void 0:f.button_label),a&&ke.createElement(B7,{href:"#auth-sign-in",onClick:t=>{t.preventDefault(),e(O7)},appearance:s},null==(i=null==n?void 0:n.sign_in)?void 0:i.link_text),u&&ke.createElement(J7,{appearance:s},u),c&&ke.createElement(J7,{color:"danger",appearance:s},c)))}const tee=C7({width:"21px",height:"21px"}),ree=({provider:e})=>"google"==e?nee():"facebook"==e?see():"twitter"==e?aee():"apple"==e?iee():"github"==e?oee():"gitlab"==e?lee():"bitbucket"==e?cee():"discord"==e?dee():"azure"==e?uee():"keycloak"==e?mee():"linkedin"==e?hee():"notion"==e?pee():"slack"==e?fee():"spotify"==e?xee():"twitch"==e?gee():"workos"==e?vee():"kakao"==e?yee():null,nee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),ke.createElement("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),ke.createElement("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),ke.createElement("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),see=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#039be5",d:"M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"}),ke.createElement("path",{fill:"#fff",d:"M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"})),aee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#03A9F4",d:"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"})),iee=()=>ke.createElement("svg",{className:tee(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"21px",height:"21px"}," ",ke.createElement("path",{d:"M 15.904297 1.078125 C 15.843359 1.06875 15.774219 1.0746094 15.699219 1.0996094 C 14.699219 1.2996094 13.600391 1.8996094 12.900391 2.5996094 C 12.300391 3.1996094 11.800781 4.1996094 11.800781 5.0996094 C 11.800781 5.2996094 11.999219 5.5 12.199219 5.5 C 13.299219 5.4 14.399609 4.7996094 15.099609 4.0996094 C 15.699609 3.2996094 16.199219 2.4 16.199219 1.5 C 16.199219 1.275 16.087109 1.10625 15.904297 1.078125 z M 16.199219 5.4003906 C 14.399219 5.4003906 13.600391 6.5 12.400391 6.5 C 11.100391 6.5 9.9003906 5.5 8.4003906 5.5 C 6.3003906 5.5 3.0996094 7.4996094 3.0996094 12.099609 C 2.9996094 16.299609 6.8 21 9 21 C 10.3 21 10.600391 20.199219 12.400391 20.199219 C 14.200391 20.199219 14.600391 21 15.900391 21 C 17.400391 21 18.500391 19.399609 19.400391 18.099609 C 19.800391 17.399609 20.100391 17.000391 20.400391 16.400391 C 20.600391 16.000391 20.4 15.600391 20 15.400391 C 17.4 14.100391 16.900781 9.9003906 19.800781 8.4003906 C 20.300781 8.1003906 20.4 7.4992188 20 7.1992188 C 18.9 6.1992187 17.299219 5.4003906 16.199219 5.4003906 z"})),oee=()=>ke.createElement("svg",{className:tee(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"21px",height:"21px"}," ",ke.createElement("path",{d:"M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"})),lee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#e53935",d:"M24 43L16 20 32 20z"}),ke.createElement("path",{fill:"#ff7043",d:"M24 43L42 20 32 20z"}),ke.createElement("path",{fill:"#e53935",d:"M37 5L42 20 32 20z"}),ke.createElement("path",{fill:"#ffa726",d:"M24 43L42 20 45 28z"}),ke.createElement("path",{fill:"#ff7043",d:"M24 43L6 20 16 20z"}),ke.createElement("path",{fill:"#e53935",d:"M11 5L6 20 16 20z"}),ke.createElement("path",{fill:"#ffa726",d:"M24 43L6 20 3 28z"})),cee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 62.42 62.42"},ke.createElement("defs",null,ke.createElement("linearGradient",{id:"New_Gradient_Swatch_1",x1:"64.01",y1:"30.27",x2:"32.99",y2:"54.48",gradientUnits:"userSpaceOnUse"},ke.createElement("stop",{offset:"0.18",stopColor:"#0052cc"}),ke.createElement("stop",{offset:"1",stopColor:"#2684ff"}))),ke.createElement("title",null,"Bitbucket-blue"),ke.createElement("g",{id:"Layer_2","data-name":"Layer 2"},ke.createElement("g",{id:"Blue",transform:"translate(0 -3.13)"},ke.createElement("path",{d:"M2,6.26A2,2,0,0,0,0,8.58L8.49,60.12a2.72,2.72,0,0,0,2.66,2.27H51.88a2,2,0,0,0,2-1.68L62.37,8.59a2,2,0,0,0-2-2.32ZM37.75,43.51h-13L21.23,25.12H40.9Z",fill:"#2684ff"}),ke.createElement("path",{d:"M59.67,25.12H40.9L37.75,43.51h-13L9.4,61.73a2.71,2.71,0,0,0,1.75.66H51.89a2,2,0,0,0,2-1.68Z",fill:"url(#New_Gradient_Swatch_1)"})))),dee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#536dfe",d:"M39.248,10.177c-2.804-1.287-5.812-2.235-8.956-2.778c-0.057-0.01-0.114,0.016-0.144,0.068\tc-0.387,0.688-0.815,1.585-1.115,2.291c-3.382-0.506-6.747-0.506-10.059,0c-0.3-0.721-0.744-1.603-1.133-2.291\tc-0.03-0.051-0.087-0.077-0.144-0.068c-3.143,0.541-6.15,1.489-8.956,2.778c-0.024,0.01-0.045,0.028-0.059,0.051\tc-5.704,8.522-7.267,16.835-6.5,25.044c0.003,0.04,0.026,0.079,0.057,0.103c3.763,2.764,7.409,4.442,10.987,5.554\tc0.057,0.017,0.118-0.003,0.154-0.051c0.846-1.156,1.601-2.374,2.248-3.656c0.038-0.075,0.002-0.164-0.076-0.194\tc-1.197-0.454-2.336-1.007-3.432-1.636c-0.087-0.051-0.094-0.175-0.014-0.234c0.231-0.173,0.461-0.353,0.682-0.534\tc0.04-0.033,0.095-0.04,0.142-0.019c7.201,3.288,14.997,3.288,22.113,0c0.047-0.023,0.102-0.016,0.144,0.017\tc0.22,0.182,0.451,0.363,0.683,0.536c0.08,0.059,0.075,0.183-0.012,0.234c-1.096,0.641-2.236,1.182-3.434,1.634\tc-0.078,0.03-0.113,0.12-0.075,0.196c0.661,1.28,1.415,2.498,2.246,3.654c0.035,0.049,0.097,0.07,0.154,0.052\tc3.595-1.112,7.241-2.79,11.004-5.554c0.033-0.024,0.054-0.061,0.057-0.101c0.917-9.491-1.537-17.735-6.505-25.044\tC39.293,10.205,39.272,10.187,39.248,10.177z M16.703,30.273c-2.168,0-3.954-1.99-3.954-4.435s1.752-4.435,3.954-4.435\tc2.22,0,3.989,2.008,3.954,4.435C20.658,28.282,18.906,30.273,16.703,30.273z M31.324,30.273c-2.168,0-3.954-1.99-3.954-4.435\ts1.752-4.435,3.954-4.435c2.22,0,3.989,2.008,3.954,4.435C35.278,28.282,33.544,30.273,31.324,30.273z"})),uee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6a",x1:"-1254.397",x2:"-1261.911",y1:"877.268",y2:"899.466",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},ke.createElement("stop",{offset:"0",stopColor:"#114a8b"}),ke.createElement("stop",{offset:"1",stopColor:"#0669bc"})),ke.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6a)",d:"M17.634,6h11.305L17.203,40.773c-0.247,0.733-0.934,1.226-1.708,1.226H6.697 c-0.994,0-1.8-0.806-1.8-1.8c0-0.196,0.032-0.39,0.094-0.576L15.926,7.227C16.173,6.494,16.86,6,17.634,6L17.634,6z"}),ke.createElement("path",{fill:"#0078d4",d:"M34.062,29.324H16.135c-0.458-0.001-0.83,0.371-0.831,0.829c0,0.231,0.095,0.451,0.264,0.608 l11.52,10.752C27.423,41.826,27.865,42,28.324,42h10.151L34.062,29.324z"}),ke.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6b",x1:"-1252.05",x2:"-1253.788",y1:"887.612",y2:"888.2",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},ke.createElement("stop",{offset:"0",stopOpacity:".3"}),ke.createElement("stop",{offset:".071",stopOpacity:".2"}),ke.createElement("stop",{offset:".321",stopOpacity:".1"}),ke.createElement("stop",{offset:".623",stopOpacity:".05"}),ke.createElement("stop",{offset:"1",stopOpacity:"0"})),ke.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6b)",d:"M17.634,6c-0.783-0.003-1.476,0.504-1.712,1.25L5.005,39.595 c-0.335,0.934,0.151,1.964,1.085,2.299C6.286,41.964,6.493,42,6.702,42h9.026c0.684-0.122,1.25-0.603,1.481-1.259l2.177-6.416 l7.776,7.253c0.326,0.27,0.735,0.419,1.158,0.422h10.114l-4.436-12.676l-12.931,0.003L28.98,6H17.634z"}),ke.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6c",x1:"-1252.952",x2:"-1244.704",y1:"876.6",y2:"898.575",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},ke.createElement("stop",{offset:"0",stopColor:"#3ccbf4"}),ke.createElement("stop",{offset:"1",stopColor:"#2892df"})),ke.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6c)",d:"M32.074,7.225C31.827,6.493,31.141,6,30.368,6h-12.6c0.772,0,1.459,0.493,1.705,1.224 l10.935,32.399c0.318,0.942-0.188,1.963-1.13,2.281C29.093,41.968,28.899,42,28.703,42h12.6c0.994,0,1.8-0.806,1.8-1.801 c0-0.196-0.032-0.39-0.095-0.575L32.074,7.225z"})),mee=()=>ke.createElement("svg",{className:tee(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke.createElement("path",{d:"M472.136 163.959H408.584C407.401 163.959 406.218 163.327 405.666 162.3L354.651 73.6591C354.02 72.632 352.916 72 351.654 72H143.492C142.309 72 141.126 72.632 140.574 73.6591L87.5084 165.618L36.414 254.259C35.862 255.286 35.862 256.55 36.414 257.656L87.5084 346.297L140.495 438.335C141.047 439.362 142.23 440.073 143.413 439.994H351.654C352.837 439.994 354.02 439.362 354.651 438.335L405.745 349.694C406.297 348.667 407.48 347.956 408.663 348.035H472.215C474.344 348.035 476 346.297 476 344.243V167.83C475.921 165.697 474.186 163.959 472.136 163.959ZM228.728 349.694L212.721 377.345C212.485 377.74 212.091 378.135 211.696 378.372C211.223 378.609 210.75 378.767 210.198 378.767H178.422C177.318 378.767 176.293 378.214 175.82 377.187L128.431 294.787L123.779 286.65L106.748 257.498C106.511 257.103 106.353 256.629 106.432 256.076C106.432 255.602 106.59 255.049 106.827 254.654L123.937 224.949L175.899 134.886C176.451 133.938 177.476 133.306 178.501 133.306H210.198C210.75 133.306 211.302 133.464 211.854 133.701C212.248 133.938 212.643 134.254 212.879 134.728L228.886 162.537C229.359 163.485 229.28 164.67 228.728 165.539L177.397 254.654C177.16 255.049 177.081 255.523 177.081 255.918C177.081 256.392 177.239 256.787 177.397 257.182L228.728 346.218C229.438 347.403 229.359 348.667 228.728 349.694V349.694ZM388.083 257.498L371.051 286.65L366.399 294.787L319.011 377.187C318.459 378.135 317.512 378.767 316.409 378.767H284.632C284.08 378.767 283.607 378.609 283.134 378.372C282.74 378.135 282.346 377.819 282.109 377.345L266.103 349.694C265.393 348.667 265.393 347.403 266.024 346.376L317.355 257.34C317.591 256.945 317.67 256.471 317.67 256.076C317.67 255.602 317.513 255.207 317.355 254.812L266.024 165.697C265.472 164.749 265.393 163.643 265.866 162.695L281.873 134.886C282.109 134.491 282.503 134.096 282.898 133.859C283.371 133.543 283.923 133.464 284.553 133.464H316.409C317.512 133.464 318.538 134.017 319.011 135.044L370.972 225.107L388.083 254.812C388.319 255.286 388.477 255.76 388.477 256.234C388.477 256.55 388.319 257.024 388.083 257.498V257.498Z",fill:"#008AAA"})),hee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#0288D1",d:"M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"}),ke.createElement("path",{fill:"#FFF",d:"M12 19H17V36H12zM14.485 17h-.028C12.965 17 12 15.888 12 14.499 12 13.08 12.995 12 14.514 12c1.521 0 2.458 1.08 2.486 2.499C17 15.887 16.035 17 14.485 17zM36 36h-5v-9.099c0-2.198-1.225-3.698-3.192-3.698-1.501 0-2.313 1.012-2.707 1.99C24.957 25.543 25 26.511 25 27v9h-5V19h5v2.616C25.721 20.5 26.85 19 29.738 19c3.578 0 6.261 2.25 6.261 7.274L36 36 36 36z"})),pee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px",fillRule:"evenodd",clipRule:"evenodd"},ke.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z",clipRule:"evenodd"}),ke.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619 l23.971-1.387c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463 C13.171,14.718,12.862,15.181,12.862,16.182L12.862,16.182z",clipRule:"evenodd"}),ke.createElement("path",{fill:"#424242",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619l23.971-1.387 c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463C13.171,14.718,12.862,15.181,12.862,16.182 L12.862,16.182z M36.526,17.413c0.154,0.694,0,1.387-0.695,1.465l-1.155,0.23v16.943c-1.003,0.539-1.928,0.847-2.698,0.847 c-1.234,0-1.543-0.385-2.467-1.54l-7.555-11.86v11.475l2.391,0.539c0,0,0,1.386-1.929,1.386l-5.317,0.308 c-0.154-0.308,0-1.078,0.539-1.232l1.388-0.385V20.418l-1.927-0.154c-0.155-0.694,0.23-1.694,1.31-1.772l5.704-0.385l7.862,12.015 V19.493l-2.005-0.23c-0.154-0.848,0.462-1.464,1.233-1.54L36.526,17.413z M7.389,5.862l21.968-1.618 c2.698-0.231,3.392-0.076,5.087,1.155l7.013,4.929C42.614,11.176,43,11.407,43,12.33v27.032c0,1.694-0.617,2.696-2.775,2.849 l-25.512,1.541c-1.62,0.077-2.391-0.154-3.239-1.232l-5.164-6.7C5.385,34.587,5,33.664,5,32.585V8.556 C5,7.171,5.617,6.015,7.389,5.862z",clipRule:"evenodd"})),fee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},ke.createElement("path",{fill:"#33d375",d:"M33,8c0-2.209-1.791-4-4-4s-4,1.791-4,4c0,1.254,0,9.741,0,11c0,2.209,1.791,4,4,4s4-1.791,4-4\tC33,17.741,33,9.254,33,8z"}),ke.createElement("path",{fill:"#33d375",d:"M43,19c0,2.209-1.791,4-4,4c-1.195,0-4,0-4,0s0-2.986,0-4c0-2.209,1.791-4,4-4S43,16.791,43,19z"}),ke.createElement("path",{fill:"#40c4ff",d:"M8,14c-2.209,0-4,1.791-4,4s1.791,4,4,4c1.254,0,9.741,0,11,0c2.209,0,4-1.791,4-4s-1.791-4-4-4\tC17.741,14,9.254,14,8,14z"}),ke.createElement("path",{fill:"#40c4ff",d:"M19,4c2.209,0,4,1.791,4,4c0,1.195,0,4,0,4s-2.986,0-4,0c-2.209,0-4-1.791-4-4S16.791,4,19,4z"}),ke.createElement("path",{fill:"#e91e63",d:"M14,39.006C14,41.212,15.791,43,18,43s4-1.788,4-3.994c0-1.252,0-9.727,0-10.984\tc0-2.206-1.791-3.994-4-3.994s-4,1.788-4,3.994C14,29.279,14,37.754,14,39.006z"}),ke.createElement("path",{fill:"#e91e63",d:"M4,28.022c0-2.206,1.791-3.994,4-3.994c1.195,0,4,0,4,0s0,2.981,0,3.994c0,2.206-1.791,3.994-4,3.994\tS4,30.228,4,28.022z"}),ke.createElement("path",{fill:"#ffc107",d:"M39,33c2.209,0,4-1.791,4-4s-1.791-4-4-4c-1.254,0-9.741,0-11,0c-2.209,0-4,1.791-4,4s1.791,4,4,4\tC29.258,33,37.746,33,39,33z"}),ke.createElement("path",{fill:"#ffc107",d:"M28,43c-2.209,0-4-1.791-4-4c0-1.195,0-4,0-4s2.986,0,4,0c2.209,0,4,1.791,4,4S30.209,43,28,43z"})),xee=()=>ke.createElement("svg",{className:tee(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke.createElement("path",{d:"M255.498 31.0034C131.513 31.0034 31 131.515 31 255.502C31 379.492 131.513 480 255.498 480C379.497 480 480 379.495 480 255.502C480 131.522 379.497 31.0135 255.495 31.0135L255.498 31V31.0034ZM358.453 354.798C354.432 361.391 345.801 363.486 339.204 359.435C286.496 327.237 220.139 319.947 141.993 337.801C134.463 339.516 126.957 334.798 125.24 327.264C123.516 319.731 128.217 312.225 135.767 310.511C221.284 290.972 294.639 299.384 353.816 335.549C360.413 339.596 362.504 348.2 358.453 354.798ZM385.932 293.67C380.864 301.903 370.088 304.503 361.858 299.438C301.512 262.345 209.528 251.602 138.151 273.272C128.893 276.067 119.118 270.851 116.309 261.61C113.521 252.353 118.74 242.597 127.981 239.782C209.512 215.044 310.87 227.026 380.17 269.612C388.4 274.68 391 285.456 385.935 293.676V293.673L385.932 293.67ZM388.293 230.016C315.935 187.039 196.56 183.089 127.479 204.055C116.387 207.42 104.654 201.159 101.293 190.063C97.9326 178.964 104.189 167.241 115.289 163.87C194.59 139.796 326.418 144.446 409.723 193.902C419.722 199.826 422.995 212.71 417.068 222.675C411.168 232.653 398.247 235.943 388.303 230.016H388.293V230.016Z",fill:"#1ED760"})),gee=()=>ke.createElement("svg",{className:tee(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke.createElement("path",{d:"M416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"white"}),ke.createElement("path",{d:"M144 32L64 112V400H160V480L240 400H304L448 256V32H144ZM416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"#9146FF"}),ke.createElement("path",{d:"M368 120H336V216H368V120Z",fill:"#9146FF"}),ke.createElement("path",{d:"M280 120H248V216H280V120Z",fill:"#9146FF"})),vee=()=>ke.createElement("svg",{className:tee(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke.createElement("path",{d:"M33 256.043C33 264.556 35.3159 273.069 39.4845 280.202L117.993 415.493C126.098 429.298 138.373 440.572 153.657 445.634C183.764 455.528 214.797 442.873 229.618 417.333L248.609 384.661L173.806 256.043L252.777 119.831L271.768 87.1591C277.557 77.2654 284.968 69.4424 294 63H285.894H172.185C150.878 63 131.193 74.2742 120.54 92.6812L39.7161 231.884C35.3159 239.016 33 247.53 33 256.043Z",fill:"#6363F1"}),ke.createElement("path",{d:"M480 256.058C480 247.539 477.684 239.021 473.516 231.883L393.849 94.6596C379.028 69.3331 347.995 56.4396 317.888 66.34C302.603 71.4053 290.329 82.6871 282.224 96.5015L264.391 127.354L339.194 256.058L260.223 392.131L241.232 424.825C235.443 434.495 228.032 442.553 219 449H227.106H340.815C362.122 449 381.807 437.718 392.46 419.299L473.284 280.003C477.684 272.866 480 264.577 480 256.058Z",fill:"#6363F1"})),yee=()=>ke.createElement("svg",{className:tee(),xmlns:"http://www.w3.org/2000/svg",width:"2500",height:"2500",viewBox:"0 0 256 256"},ke.createElement("path",{fill:"#FFE812",d:"M256 236c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20V20C0 8.954 8.954 0 20 0h216c11.046 0 20 8.954 20 20v216z"}),ke.createElement("path",{d:"M128 36C70.562 36 24 72.713 24 118c0 29.279 19.466 54.97 48.748 69.477-1.593 5.494-10.237 35.344-10.581 37.689 0 0-.207 1.762.934 2.434s2.483.15 2.483.15c3.272-.457 37.943-24.811 43.944-29.04 5.995.849 12.168 1.29 18.472 1.29 57.438 0 104-36.712 104-82 0-45.287-46.562-82-104-82z"}),ke.createElement("path",{fill:"#FFE812",d:"M70.5 146.625c-3.309 0-6-2.57-6-5.73V105.25h-9.362c-3.247 0-5.888-2.636-5.888-5.875s2.642-5.875 5.888-5.875h30.724c3.247 0 5.888 2.636 5.888 5.875s-2.642 5.875-5.888 5.875H76.5v35.645c0 3.16-2.691 5.73-6 5.73zM123.112 146.547c-2.502 0-4.416-1.016-4.993-2.65l-2.971-7.778-18.296-.001-2.973 7.783c-.575 1.631-2.488 2.646-4.99 2.646a9.155 9.155 0 0 1-3.814-.828c-1.654-.763-3.244-2.861-1.422-8.52l14.352-37.776c1.011-2.873 4.082-5.833 7.99-5.922 3.919.088 6.99 3.049 8.003 5.928l14.346 37.759c1.826 5.672.236 7.771-1.418 8.532a9.176 9.176 0 0 1-3.814.827c-.001 0 0 0 0 0zm-11.119-21.056L106 108.466l-5.993 17.025h11.986zM138 145.75c-3.171 0-5.75-2.468-5.75-5.5V99.5c0-3.309 2.748-6 6.125-6s6.125 2.691 6.125 6v35.25h12.75c3.171 0 5.75 2.468 5.75 5.5s-2.579 5.5-5.75 5.5H138zM171.334 146.547c-3.309 0-6-2.691-6-6V99.5c0-3.309 2.691-6 6-6s6 2.691 6 6v12.896l16.74-16.74c.861-.861 2.044-1.335 3.328-1.335 1.498 0 3.002.646 4.129 1.772 1.051 1.05 1.678 2.401 1.764 3.804.087 1.415-.384 2.712-1.324 3.653l-13.673 13.671 14.769 19.566a5.951 5.951 0 0 1 1.152 4.445 5.956 5.956 0 0 1-2.328 3.957 5.94 5.94 0 0 1-3.609 1.211 5.953 5.953 0 0 1-4.793-2.385l-14.071-18.644-2.082 2.082v13.091a6.01 6.01 0 0 1-6.002 6.003z"}));function jee({supabaseClient:e,socialLayout:t="vertical",providers:r=["github","google","azure"],providerScopes:n,queryParams:s,redirectTo:a,onlyThirdPartyProviders:i=!0,view:o="sign_in",i18n:l,appearance:c}){const[d,u]=Ne.useState(!1),[m,h]=Ne.useState(""),p="vertical"===t,f="magic_link"===o?"sign_in":o;function x(e){const t=e.toLowerCase();return e.charAt(0).toUpperCase()+t.slice(1)}return ke.createElement(ke.Fragment,null,r&&r.length>0&&ke.createElement(ke.Fragment,null,ke.createElement(W7,{gap:"large",direction:"vertical",appearance:c},ke.createElement(W7,{direction:p?"vertical":"horizontal",gap:p?"small":"medium",appearance:c},r.map(t=>{var r,i,o;return ke.createElement(U7,{key:t,color:"default",loading:d,onClick:()=>(async t=>{u(!0);const{error:r}=await e.auth.signInWithOAuth({provider:t,options:{redirectTo:a,scopes:null==n?void 0:n[t],queryParams:s}});r&&h(r.message),u(!1)})(t),appearance:c},ke.createElement(ree,{provider:t}),p&&(i=null==(r=null==l?void 0:l[f])?void 0:r.social_provider_text,o={provider:x(t)},i.replace(/{{(\w+)}}/g,(e,t)=>o.hasOwnProperty(t)?o[t]:e)))}))),!i&&ke.createElement(Y7,{appearance:c})))}function bee({authView:e="sign_in",defaultEmail:t="",defaultPassword:r="",setAuthView:n=()=>{},setDefaultEmail:s=e=>{},setDefaultPassword:a=e=>{},supabaseClient:i,showLinks:o=!1,redirectTo:l,additionalData:c,magicLink:d,i18n:u,appearance:m,children:h}){var p,f,x,g;const v=Ne.useRef(!0),[y,j]=Ne.useState(t),[b,w]=Ne.useState(r),[N,_]=Ne.useState(""),[S,k]=Ne.useState(!1),[C,E]=Ne.useState("");Ne.useEffect(()=>(v.current=!0,j(t),w(r),()=>{v.current=!1}),[e]);const O=e=>{s(y),a(b),n(e)},M=null==u?void 0:u[e];return ke.createElement("form",{id:"sign_in"===e?"auth-sign-in":"auth-sign-up",onSubmit:async t=>{var r;switch(t.preventDefault(),_(""),k(!0),e){case"sign_in":const{error:e}=await i.auth.signInWithPassword({email:y,password:b});e&&_(e.message);break;case"sign_up":let t={emailRedirectTo:l};c&&(t.data=c);const{data:{user:n,session:s},error:a}=await i.auth.signUp({email:y,password:b,options:t});a?_(a.message):n&&!s&&E(null==(r=null==u?void 0:u.sign_up)?void 0:r.confirmation_text)}v.current&&k(!1)},autoComplete:"on",style:{width:"100%"}},ke.createElement(W7,{direction:"vertical",gap:"large",appearance:m},ke.createElement(W7,{direction:"vertical",gap:"large",appearance:m},ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"email",appearance:m},null==M?void 0:M.email_label),ke.createElement(G7,{id:"email",type:"email",name:"email",placeholder:null==M?void 0:M.email_input_placeholder,defaultValue:y,onChange:e=>j(e.target.value),autoComplete:"email",appearance:m})),ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"password",appearance:m},null==M?void 0:M.password_label),ke.createElement(G7,{id:"password",type:"password",name:"password",placeholder:null==M?void 0:M.password_input_placeholder,defaultValue:b,onChange:e=>w(e.target.value),autoComplete:"sign_in"===e?"current-password":"new-password",appearance:m})),h),ke.createElement(U7,{type:"submit",color:"primary",loading:S,appearance:m},S?null==M?void 0:M.loading_button_label:null==M?void 0:M.button_label),o&&ke.createElement(W7,{direction:"vertical",gap:"small",appearance:m},e===O7&&d&&ke.createElement(B7,{href:"#auth-magic-link",onClick:e=>{e.preventDefault(),n(A7)},appearance:m},null==(p=null==u?void 0:u.magic_link)?void 0:p.link_text),e===O7&&ke.createElement(B7,{href:"#auth-forgot-password",onClick:e=>{e.preventDefault(),n(P7)},appearance:m},null==(f=null==u?void 0:u.forgotten_password)?void 0:f.link_text),e===O7?ke.createElement(B7,{href:"#auth-sign-up",onClick:e=>{e.preventDefault(),O(M7)},appearance:m},null==(x=null==u?void 0:u.sign_up)?void 0:x.link_text):ke.createElement(B7,{href:"#auth-sign-in",onClick:e=>{e.preventDefault(),O(O7)},appearance:m},null==(g=null==u?void 0:u.sign_in)?void 0:g.link_text))),C&&ke.createElement(J7,{appearance:m},C),N&&ke.createElement(J7,{color:"danger",appearance:m},N))}function wee({setAuthView:e=()=>{},supabaseClient:t,redirectTo:r,i18n:n,appearance:s,showLinks:a=!1}){var i;const[o,l]=Ne.useState(""),[c,d]=Ne.useState(""),[u,m]=Ne.useState(""),[h,p]=Ne.useState(!1),f=null==n?void 0:n.forgotten_password;return ke.createElement("form",{id:"auth-forgot-password",onSubmit:async e=>{var s;e.preventDefault(),d(""),m(""),p(!0);const{error:a}=await t.auth.resetPasswordForEmail(o,{redirectTo:r});a?d(a.message):m(null==(s=null==n?void 0:n.forgotten_password)?void 0:s.confirmation_text),p(!1)}},ke.createElement(W7,{direction:"vertical",gap:"large",appearance:s},ke.createElement(W7,{gap:"large",direction:"vertical",appearance:s},ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"email",appearance:s},null==f?void 0:f.email_label),ke.createElement(G7,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:null==f?void 0:f.email_input_placeholder,onChange:e=>l(e.target.value),appearance:s})),ke.createElement(U7,{type:"submit",color:"primary",loading:h,appearance:s},h?null==f?void 0:f.loading_button_label:null==f?void 0:f.button_label),a&&ke.createElement(B7,{href:"#auth-sign-in",onClick:t=>{t.preventDefault(),e(O7)},appearance:s},null==(i=null==n?void 0:n.sign_in)?void 0:i.link_text),u&&ke.createElement(J7,{appearance:s},u),c&&ke.createElement(J7,{color:"danger",appearance:s},c))))}function Nee({supabaseClient:e,i18n:t,appearance:r}){const[n,s]=Ne.useState(""),[a,i]=Ne.useState(""),[o,l]=Ne.useState(""),[c,d]=Ne.useState(!1),u=null==t?void 0:t.update_password;return ke.createElement("form",{id:"auth-update-password",onSubmit:async r=>{var s;r.preventDefault(),i(""),l(""),d(!0);const{error:a}=await e.auth.updateUser({password:n});a?i(a.message):l(null==(s=null==t?void 0:t.update_password)?void 0:s.confirmation_text),d(!1)}},ke.createElement(W7,{gap:"large",direction:"vertical",appearance:r},ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"password",appearance:r},null==u?void 0:u.password_label),ke.createElement(G7,{id:"password",name:"password",placeholder:null==u?void 0:u.password_input_placeholder,type:"password",autoFocus:!0,onChange:e=>s(e.target.value),appearance:r})),ke.createElement(U7,{type:"submit",color:"primary",loading:c,appearance:r},c?null==u?void 0:u.loading_button_label:null==u?void 0:u.button_label),o&&ke.createElement(J7,{appearance:r},o),a&&ke.createElement(J7,{color:"danger",appearance:r},a)))}function _ee({setAuthView:e=()=>{},supabaseClient:t,otpType:r="email",i18n:n,appearance:s,showLinks:a=!1}){var i;const[o,l]=Ne.useState(""),[c,d]=Ne.useState(""),[u,m]=Ne.useState(""),[h,p]=Ne.useState(""),[f,x]=Ne.useState(""),[g,v]=Ne.useState(!1),y=null==n?void 0:n.verify_otp;return ke.createElement("form",{id:"auth-magic-link",onSubmit:async e=>{e.preventDefault(),p(""),x(""),v(!0);let n={email:o,token:u,type:r};["sms","phone_change"].includes(r)&&(n={phone:c,token:u,type:r});const{error:s}=await t.auth.verifyOtp(n);s&&p(s.message),v(!1)}},ke.createElement(W7,{gap:"large",direction:"vertical",appearance:s},["sms","phone_change"].includes(r)?ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"phone",appearance:s},null==y?void 0:y.phone_input_label),ke.createElement(G7,{id:"phone",name:"phone",type:"text",autoFocus:!0,placeholder:null==y?void 0:y.phone_input_placeholder,onChange:e=>d(e.target.value),appearance:s})):ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"email",appearance:s},null==y?void 0:y.email_input_label),ke.createElement(G7,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:null==y?void 0:y.email_input_placeholder,onChange:e=>l(e.target.value),appearance:s})),ke.createElement("div",null,ke.createElement(Q7,{htmlFor:"token",appearance:s},null==y?void 0:y.token_input_label),ke.createElement(G7,{id:"token",name:"token",type:"text",placeholder:null==y?void 0:y.token_input_placeholder,onChange:e=>m(e.target.value),appearance:s})),ke.createElement(U7,{color:"primary",type:"submit",loading:g,appearance:s},g?null==y?void 0:y.loading_button_label:null==y?void 0:y.button_label),a&&ke.createElement(B7,{href:"#auth-sign-in",onClick:t=>{t.preventDefault(),e(O7)},appearance:s},null==(i=null==n?void 0:n.sign_in)?void 0:i.link_text),f&&ke.createElement(J7,{appearance:s},f),h&&ke.createElement(J7,{color:"danger",appearance:s},h)))}const See=Ne.createContext({user:null,session:null});function kee({supabaseClient:e,socialLayout:t="vertical",providers:r,providerScopes:n,queryParams:s,view:a="sign_in",redirectTo:i,onlyThirdPartyProviders:o=!1,magicLink:l=!1,showLinks:c=!0,appearance:d,theme:u="default",localization:m={variables:{}},otpType:h="email",additionalData:p,children:f}){const x=I7(F7,m.variables??{}),[g,v]=Ne.useState(a),[y,j]=Ne.useState(""),[b,w]=Ne.useState(""),N="sign_in"===g||"sign_up"===g||"magic_link"===g;Ne.useEffect(()=>{var e,t;_7({theme:I7((null==(e=null==d?void 0:d.theme)?void 0:e.default)??{},(null==(t=null==d?void 0:d.variables)?void 0:t.default)??{})})},[d]);const _=({children:a})=>{var l;return ke.createElement("div",{className:"default"!==u?k7(I7(null==d?void 0:d.theme[u],(null==(l=null==d?void 0:d.variables)?void 0:l[u])??{})):""},N&&ke.createElement(jee,{appearance:d,supabaseClient:e,providers:r,providerScopes:n,queryParams:s,socialLayout:t,redirectTo:i,onlyThirdPartyProviders:o,i18n:x,view:g}),!o&&a)};Ne.useEffect(()=>{const{data:t}=e.auth.onAuthStateChange(e=>{"PASSWORD_RECOVERY"===e?v("update_password"):"USER_UPDATED"===e&&v("sign_in")});return v(a),()=>t.subscription.unsubscribe()},[a]);const S={supabaseClient:e,setAuthView:v,defaultEmail:y,defaultPassword:b,setDefaultEmail:j,setDefaultPassword:w,redirectTo:i,magicLink:l,showLinks:c,i18n:x,appearance:d};switch(g){case O7:return ke.createElement(_,null,ke.createElement(bee,{...S,authView:"sign_in"}));case M7:return ke.createElement(_,null,ke.createElement(bee,{appearance:d,supabaseClient:e,authView:"sign_up",setAuthView:v,defaultEmail:y,defaultPassword:b,setDefaultEmail:j,setDefaultPassword:w,redirectTo:i,magicLink:l,showLinks:c,i18n:x,additionalData:p,children:f}));case P7:return ke.createElement(_,null,ke.createElement(wee,{appearance:d,supabaseClient:e,setAuthView:v,redirectTo:i,showLinks:c,i18n:x}));case A7:return ke.createElement(_,null,ke.createElement(eee,{appearance:d,supabaseClient:e,setAuthView:v,redirectTo:i,showLinks:c,i18n:x}));case T7:return ke.createElement(Nee,{appearance:d,supabaseClient:e,i18n:x});case D7:return ke.createElement(_ee,{appearance:d,supabaseClient:e,otpType:h,i18n:x});default:return null}}kee.ForgottenPassword=wee,kee.UpdatePassword=Nee,kee.MagicLink=eee,kee.UserContextProvider=e=>{const{supabaseClient:t}=e,[r,n]=Ne.useState(null),[s,a]=Ne.useState((null==r?void 0:r.user)??null);Ne.useEffect(()=>{(async()=>{var e;const{data:r}=await t.auth.getSession();n(r.session),a((null==(e=r.session)?void 0:e.user)??null)})();const{data:e}=t.auth.onAuthStateChange(async(e,t)=>{n(t),a((null==t?void 0:t.user)??null)});return()=>{null==e||e.subscription.unsubscribe()}},[]);const i={session:r,user:s};return ke.createElement(See.Provider,{value:i,...e})},kee.useUser=()=>{const e=Ne.useContext(See);if(void 0===e)throw new Error("useUser must be used within a UserContextProvider.");return e},C7({borderRadius:"12px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",width:"360px",padding:"28px 32px"});const Cee=({onAuthSuccess:e})=>{const t=St(),r=w_("AuthForm"),[s,a]=Ne.useState("signin"),[i,o]=Ne.useState("details"),[l,c]=Ne.useState({email:"",password:"",full_name:"",company_name:"",role:"client"}),[d,u]=Ne.useState(!1),[m,h]=Ne.useState(null),[p,f]=Ne.useState(!1),{showSuccess:x,showError:g,showInfo:v}=dy(),{user:y,userProfile:j}=br();Ne.useEffect(()=>{y&&j&&(e?e(j):t("/dashboard"))},[y,j,e,t]);const b=()=>{f(!0),x("Commercial Registration uploaded successfully! Your account will be reviewed within 24-48 hours.")},w=()=>{v("Registration complete! You can now sign in. Your account will be activated after document verification."),a("signin"),o("details"),f(!1),h(null)},N=()=>{t("/landing")};return"signup"===s&&"verification"===i&&"client"===l.role?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#004F54] via-[#102C33] to-[#66023C] p-4",children:n.jsxs("div",{className:"w-full max-w-md space-y-6",children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{onClick:N,className:"inline-block cursor-pointer",children:n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-16 w-auto mx-auto transition-transform duration-200 hover:scale-105 drop-shadow-lg cursor-pointer"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-white",children:"Complete Your Registration"}),n.jsx("p",{className:"text-white/80",children:"Upload your Commercial Registration to activate your account"})]})]}),n.jsx(Eu,{className:"bg-white/5 border border-white/20 backdrop-blur-20",children:n.jsxs(Au,{className:"space-y-6 pt-6",children:[n.jsxs(db,{className:"bg-white/10 border-white/20",children:[n.jsx(Vm,{className:"h-4 w-4 text-white"}),n.jsxs(ub,{className:"text-white/90",children:["Your account has been created for ",n.jsx("strong",{children:l.email}),". Please upload your Commercial Registration to complete the verification process."]})]}),n.jsx(WE,{onUploadSuccess:b,isRequired:!0}),p&&n.jsxs(db,{className:"bg-green-500/20 border-green-400/30",children:[n.jsx(dm,{className:"h-4 w-4 text-green-400"}),n.jsx(ub,{className:"text-white/90",children:"Document uploaded successfully! Your account will be reviewed within 24-48 hours."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ku,{variant:"outline",onClick:()=>o("details"),className:"flex-1 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"Back"}),n.jsx(ku,{onClick:w,disabled:!p,className:"flex-1 bg-primary hover:bg-primary/90 text-white",children:"Complete Registration"})]})]})})]})}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#004F54] via-[#102C33] to-[#66023C] p-4",children:n.jsx("div",{className:"w-full max-w-md",children:n.jsx(Eu,{className:"bg-white/10 border border-white/20 backdrop-blur-lg rounded-3xl shadow-2xl",children:n.jsxs(Au,{className:"p-8",children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("div",{onClick:N,className:"inline-block cursor-pointer",children:n.jsx("img",{src:"/lovable-uploads/1dd4b232-845d-46eb-9f67-b752fce1ac3b.png",alt:"MWRD Logo",className:"h-16 w-auto mx-auto transition-transform duration-200 hover:scale-105 drop-shadow-lg cursor-pointer"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to MWRD"}),n.jsx("p",{className:"text-white/70",children:"Sign in to your account or create a new one"})]}),n.jsxs(BS,{value:s,onValueChange:e=>a(e),className:"mb-6",children:[n.jsxs($S,{className:"grid w-full grid-cols-2 bg-white/20 rounded-2xl p-1 h-12",children:[n.jsx(US,{value:"signin",className:"text-white data-[state=active]:bg-white data-[state=active]:text-gray-800 rounded-xl font-medium transition-all duration-200",children:"Login"}),n.jsx(US,{value:"signup",className:"text-white data-[state=active]:bg-white data-[state=active]:text-gray-800 rounded-xl font-medium transition-all duration-200",children:"Register"})]}),n.jsx(VS,{value:"signin",className:"mt-6",children:n.jsx(kee,{supabaseClient:mr,view:"sign_in",appearance:{theme:E7,variables:{default:{colors:{brand:"hsl(324 96% 20%)",brandAccent:"hsl(324 96% 15%)",inputBackground:"rgba(255, 255, 255, 0.1)",inputBorder:"rgba(255, 255, 255, 0.2)",inputText:"white",inputPlaceholder:"rgba(255, 255, 255, 0.6)"}}},className:{container:"auth-container",button:"w-full bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-white font-medium py-3 px-4 rounded-2xl transition-all duration-200",input:"w-full bg-white/10 border border-white/20 text-white placeholder:text-white/60 rounded-2xl px-4 py-3 focus:border-white/40 focus:ring-1 focus:ring-white/20",label:"text-white font-medium mb-2 block"}},providers:[],localization:{variables:{sign_in:{email_label:"Email",password_label:"Password",button_label:"Sign In",loading_button_label:"Signing in...",link_text:"Forgot your password?"}}},redirectTo:`${window.location.origin}/dashboard`})}),n.jsx(VS,{value:"signup",className:"mt-6",children:n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l.email&&l.password&&l.full_name){u(!0);try{const{data:e,error:t}=await mr.auth.signUp({email:l.email,password:l.password,options:{emailRedirectTo:`${window.location.origin}/dashboard`,data:{full_name:l.full_name,company_name:l.company_name,role:l.role}}});if(t)throw t;e.user&&(h(e.user.id),"client"===l.role?(v("Account created! Please upload your Commercial Registration to complete verification."),o("verification")):x("Account created successfully! Please check your email for verification."))}catch(t){r.error("Sign up error:",t),g(t.message||"Failed to create account")}finally{u(!1)}}else g("Please fill in all required fields")},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"email",className:"text-white font-medium",children:"Email"}),n.jsx($j,{id:"email",type:"email",value:l.email,onChange:e=>c(t=>({...t,email:e.target.value})),required:!0,placeholder:"Enter your email",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60 rounded-2xl px-4 py-3 h-12 focus:border-white/40"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"password",className:"text-white font-medium",children:"Password"}),n.jsx($j,{id:"password",type:"password",value:l.password,onChange:e=>c(t=>({...t,password:e.target.value})),required:!0,placeholder:"Enter your password",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60 rounded-2xl px-4 py-3 h-12 focus:border-white/40"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"full_name",className:"text-white font-medium",children:"Full Name"}),n.jsx($j,{id:"full_name",value:l.full_name,onChange:e=>c(t=>({...t,full_name:e.target.value})),required:!0,placeholder:"Enter your full name",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60 rounded-2xl px-4 py-3 h-12 focus:border-white/40"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"company_name",className:"text-white font-medium",children:"Company Name"}),n.jsx($j,{id:"company_name",value:l.company_name,onChange:e=>c(t=>({...t,company_name:e.target.value})),placeholder:"Enter your company name",className:"bg-white/10 border-white/20 text-white placeholder:text-white/60 rounded-2xl px-4 py-3 h-12 focus:border-white/40"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"role",className:"text-white font-medium",children:"Account Type"}),n.jsxs(lC,{value:l.role,onValueChange:e=>c(t=>({...t,role:e})),children:[n.jsx(dC,{className:"bg-white/10 border-white/20 text-white rounded-2xl h-12",children:n.jsx(cC,{})}),n.jsxs(hC,{className:"bg-card border-white/20 rounded-xl",children:[n.jsx(pC,{value:"client",children:"Client (Request Services)"}),n.jsx(pC,{value:"vendor",children:"Vendor (Provide Services)"})]})]})]}),"client"===l.role&&n.jsxs(db,{className:"bg-white/10 border-white/20 rounded-xl",children:[n.jsx(Vm,{className:"h-4 w-4 text-white"}),n.jsx(ub,{className:"text-white/90",children:"As a client, you'll need to upload your Commercial Registration for account verification after registration."})]}),n.jsx(ku,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-white font-medium py-3 px-4 rounded-2xl transition-all duration-200 h-12",disabled:d,children:d?"Creating Account...":"Create Account"})]})})]}),n.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:n.jsx(ku,{variant:"outline",className:"w-full bg-white/5 border-white/20 text-white/80 hover:bg-white/10 hover:text-white rounded-2xl h-12",onClick:()=>{},children:"Create Admin User (Temporary)"})})]})})})})},Eee=()=>{const{user:e,userProfile:t,loading:r}=br(),{t:s,language:a}=cr(),{toast:i}=fp();(()=>{const[e,t]=Ne.useState(!1),{user:r}=br(),{toast:n}=fp(),s=async e=>{if(!r)return n({title:"Authentication Required",description:"Please log in to make a payment",variant:"destructive"}),null;t(!0);try{const{data:t,error:r}=await mr.functions.invoke("create-checkout",{body:{amount:e.amount,currency:e.currency,description:e.description,metadata:e.metadata}});if(r)throw r;return t}catch(s){return n({title:"Payment Error",description:s.message||"Failed to create checkout session",variant:"destructive"}),null}finally{t(!1)}}})();const o="ar"===a,[l,c]=Ne.useState(o?"payment":"overview"),[d,u]=Ne.useState([]),[m,h]=Ne.useState(!1),p=Ne.useMemo(()=>t?{subscription_tier:t.subscription_plan||"free",subscription_status:t.subscription_status||"active",subscription_expires_at:t.subscription_expires_at,created_at:t.created_at,updated_at:t.updated_at}:null,[t]),f=Ne.useMemo(()=>{if(!p||!d.length)return{daysRemaining:(null==p?void 0:p.subscription_expires_at)?Math.ceil((new Date(p.subscription_expires_at).getTime()-(new Date).getTime())/864e5):0,monthlySpend:0,totalSpent:0,tierLevel:(null==p?void 0:p.subscription_tier)||"free"};const e=(new Date).getMonth(),t=(new Date).getFullYear(),r=d.filter(r=>{const n=new Date(r.created_at);return n.getMonth()===e&&n.getFullYear()===t&&"completed"===r.status});return{daysRemaining:p.subscription_expires_at?Math.ceil((new Date(p.subscription_expires_at).getTime()-(new Date).getTime())/864e5):0,monthlySpend:r.reduce((e,t)=>e+Number(t.amount),0),totalSpent:d.filter(e=>"completed"===e.status).reduce((e,t)=>e+Number(t.amount),0),tierLevel:p.subscription_tier}},[p,d]);Ne.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{const{data:t,error:r}=await mr.from("financial_transactions").select("*").eq("user_id",null==e?void 0:e.id).order("created_at",{ascending:!1});if(r)throw r;u(t||[])}catch(t){i({title:"Error",description:"Failed to load financial data",variant:"destructive"})}},g=async()=>{h(!0);try{i({title:s("subscription.openingCustomerPortal"),description:s("subscription.redirectingToManagement")});const e=`https://billing.stripe.com/p/customer_portal/${Date.now()}`;window.open(e,"_blank"),i({title:s("subscription.portalOpened"),description:s("subscription.customerPortalOpened")})}catch(e){i({title:s("common.error"),description:s("subscription.failedToOpenPortal"),variant:"destructive"})}finally{h(!1)}},v=async()=>{h(!0);try{await new Promise(e=>setTimeout(e,1e3)),i({title:s("subscription.paymentMethodUpdated"),description:s("subscription.paymentMethodUpdatedSuccess")})}catch(e){i({title:s("subscription.updateFailed"),description:e.message||s("subscription.failedToUpdatePaymentMethod"),variant:"destructive"})}finally{h(!1)}},y=e=>{},j=()=>[{name:s("subscription.businessGrowth"),price:299,features:[s("subscription.upTo8Requests"),s("subscription.prioritySmartMatching"),s("subscription.specialistSupport")],current:"basic"===(null==p?void 0:p.subscription_tier)},{name:s("subscription.professionalExcellence"),price:799,features:[s("subscription.upTo30Requests"),s("subscription.advancedAIMatching"),s("subscription.dedicatedSupport"),s("subscription.strategicConsultations")],current:"professional"===(null==p?void 0:p.subscription_tier)},{name:s("subscription.enterpriseLeadership"),price:s("subscription.custom"),features:[s("subscription.unlimitedRequests"),s("subscription.dedicatedAccountManager"),s("subscription.customIntegrations"),s("subscription.digitalTransformation")],current:"enterprise"===(null==p?void 0:p.subscription_tier)}].map((t,r)=>n.jsxs(Eu,{className:_u((t.current?"border-primary bg-primary/5":"border-muted")+" hover:shadow-lg transition-shadow",o&&"text-right"),children:[n.jsxs(Ou,{className:_u("text-center",o&&"text-right"),children:[n.jsx(Mu,{className:_u("text-lg "+(t.current?"text-primary":""),o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:t.name}),n.jsxs("div",{className:_u("text-3xl font-bold flex items-baseline justify-center gap-2",o&&"flex-row-reverse"),children:[(t.price,t.price),"number"==typeof t.price&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"/lovable-uploads/15dca457-47b5-47cc-802f-12b66c558eee.png",alt:"SAR",className:"h-6 w-6 opacity-80"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:o?"/شهر":"/month"})]})]}),t.current&&n.jsx(Xf,{variant:"default",className:"mt-2",children:s("subscription.current")})]}),n.jsxs(Au,{className:_u("space-y-3",o&&"text-right"),children:[t.features.map((e,t)=>n.jsxs("div",{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{className:"text-sm",style:o?{textAlign:"right !important"}:{},children:e})]},t)),n.jsx("div",{className:"pt-4",children:t.price===s("subscription.custom")?n.jsx(O9,{children:n.jsx(ku,{className:"w-full",style:o?{textAlign:"right !important"}:{},children:s("subscription.requestEnterpriseConsultation")})}):n.jsx(ku,{className:"w-full",variant:t.current?"outline":"default",onClick:()=>!t.current&&(async t=>{if(e){h(!0);try{const r={basic:299,professional:799,enterprise:1299},{error:n}=await mr.from("financial_transactions").insert([{user_id:e.id,type:"subscription",amount:r[t.toLowerCase()]||0,status:"completed",description:s("subscription.subscriptionUpgradeTo").replace("{plan}",t),payment_method:s("subscription.creditCard")}]);if(n)throw n;const a=new Date;a.setMonth(a.getMonth()+1);const{error:o}=await mr.from("user_profiles").update({subscription_plan:t.toLowerCase(),subscription_status:"active",subscription_expires_at:a.toISOString(),updated_at:(new Date).toISOString()}).eq("user_id",e.id);if(o)throw o;await x(),i({title:s("subscription.upgradeSuccessful"),description:s("subscription.subscriptionUpgraded").replace("{plan}",t)})}catch(r){i({title:s("subscription.upgradeFailed"),description:r.message||s("subscription.failedToProcessUpgrade"),variant:"destructive"})}finally{h(!1)}}})(0===r?"basic":"professional"),disabled:m||t.current,style:o?{textAlign:"right !important"}:{},children:m?n.jsxs(n.Fragment,{children:[n.jsx(lb,{size:"sm",className:_u(o?"ml-2":"mr-2")}),s("subscription.processing")]}):t.current?s("subscription.current"):s("subscription.upgradeToThisPlan")})})]})]},r));return r?n.jsxs(y9,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):e&&t?n.jsxs(y9,{title:s("subscription.title"),description:s("subscription.description"),children:[n.jsxs("div",{className:_u("grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",o&&"text-right"),children:[n.jsx(eS,{title:s("subscription.currentPlan"),value:"free"===f.tierLevel?s("subscription.free"):f.tierLevel,icon:Xh,description:s("subscription.yourActiveSubscriptionTier"),variant:"success"}),n.jsx(eS,{title:s("subscription.daysRemaining"),value:f.daysRemaining,icon:gm,description:s("subscription.untilNextBillingCycle"),variant:f.daysRemaining<7?"warning":"default"}),n.jsx(eS,{title:s("subscription.monthlyCost"),value:`${f.monthlySpend} SAR`,icon:_m,description:s("subscription.currentMonthlySubscription")}),n.jsx(eS,{title:s("subscription.status"),value:"active"===(null==p?void 0:p.subscription_status)?s("subscription.active"):s("subscription.cancelled"),icon:Sh,variant:"active"===(null==p?void 0:p.subscription_status)?"success":"warning"})]}),n.jsxs(BS,{value:l,onValueChange:e=>c(e),defaultValue:o?"payment":"overview",children:[n.jsx("div",{className:_u("flex w-full",o?"justify-end":"justify-start"),children:n.jsx($S,{className:_u("grid w-full grid-cols-4 lg:w-[600px]",o&&"flex-row-reverse"),children:o?n.jsxs(n.Fragment,{children:[n.jsx(US,{value:"payment",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.payment")}),n.jsx(US,{value:"billing",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.billing")}),n.jsx(US,{value:"upgrade",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.upgrade")}),n.jsx(US,{value:"overview",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.overview")})]}):n.jsxs(n.Fragment,{children:[n.jsx(US,{value:"overview",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.overview")}),n.jsx(US,{value:"upgrade",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.upgrade")}),n.jsx(US,{value:"billing",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.billing")}),n.jsx(US,{value:"payment",className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.payment")})]})})}),n.jsx(VS,{value:"overview",className:_u("space-y-6",o&&"text-right"),children:n.jsx("div",{className:_u("space-y-6",o&&"text-right"),children:n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(o&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx($h,{className:"h-6 w-6 text-primary"}),s("subscription.manageSubscription")]}),n.jsx(Pu,{className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.subscriptionDetails")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:_u("p-4 bg-primary/5 rounded-lg border border-primary/20",o&&"text-right"),children:[n.jsx("h4",{className:"font-semibold text-lg mb-3 text-primary",style:o?{textAlign:"right !important"}:{},children:s("subscription.currentSubscription")}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:_u("flex justify-between items-center",o&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-muted-foreground text-sm",style:o?{textAlign:"right !important"}:{},children:[s("subscription.plan"),":"]}),n.jsx("span",{className:"font-medium capitalize",style:o?{textAlign:"right !important"}:{},children:"free"===(null==p?void 0:p.subscription_tier)?s("subscription.free"):null==p?void 0:p.subscription_tier})]}),n.jsxs("div",{className:_u("flex justify-between items-center",o&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-muted-foreground text-sm",style:o?{textAlign:"right !important"}:{},children:[s("subscription.expires"),":"]}),n.jsx("span",{className:"font-medium",style:o?{textAlign:"right !important"}:{},children:(null==p?void 0:p.subscription_expires_at)?bj(new Date(p.subscription_expires_at),"MMM dd, yyyy"):s("subscription.noExpiration")})]}),n.jsxs("div",{className:_u("flex justify-between items-center",o&&"flex-row-reverse"),children:[n.jsxs("span",{className:"text-muted-foreground text-sm",style:o?{textAlign:"right !important"}:{},children:[s("subscription.status"),":"]}),n.jsx(Xf,{variant:"active"===(null==p?void 0:p.subscription_status)?"default":"destructive",children:"active"===(null==p?void 0:p.subscription_status)?s("subscription.active"):s("subscription.inactive")})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(ku,{className:"w-full",onClick:()=>c("upgrade"),style:o?{textAlign:"right !important"}:{},children:[n.jsx($h,{className:_u("h-4 w-4",o?"ml-2":"mr-2")}),s("subscription.upgradeSubscription")]}),n.jsxs(ku,{variant:"outline",className:"w-full",onClick:()=>c("billing"),style:o?{textAlign:"right !important"}:{},children:[n.jsx(Mm,{className:_u("h-4 w-4",o?"ml-2":"mr-2")}),s("subscription.viewBillingDetails")]}),n.jsxs(ku,{variant:"outline",className:"w-full",onClick:g,disabled:m,style:o?{textAlign:"right !important"}:{},children:[n.jsx(bm,{className:_u("h-4 w-4",o?"ml-2":"mr-2")}),s(m?"subscription.opening":"subscription.manageSubscription")]})]})]})})]})})}),n.jsx(VS,{value:"upgrade",className:_u("space-y-6",o&&"text-right"),children:n.jsx("div",{className:_u("space-y-6",o&&"text-right"),children:n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(o&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx($h,{className:"h-6 w-6 text-primary"}),s("subscription.upgradeSubscription")]}),n.jsx(Pu,{className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.chooseNewPlan")})]}),n.jsx(Au,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j()})})]})})}),n.jsx(VS,{value:"billing",className:_u("space-y-6",o&&"text-right"),children:n.jsx("div",{className:_u("space-y-6",o&&"text-right"),children:n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(o&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx(Mm,{className:"h-6 w-6 text-primary"}),s("subscription.billingDetails")]}),n.jsx(Pu,{className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.billingHistoryAndPayments")})]}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-lg",style:o?{textAlign:"right !important"}:{},children:s("subscription.transactionHistory")}),d.length>0?n.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(e=>n.jsxs("div",{className:_u("flex justify-between items-center p-3 bg-muted/50 rounded-lg",o&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(o&&"text-right"),children:[n.jsx("p",{className:"font-medium",style:o?{textAlign:"right !important"}:{},children:"Monthly subscription payment"===e.description?s("subscription.monthlySubscriptionPayment"):e.description||e.type}),n.jsx("p",{className:"text-sm text-muted-foreground",style:o?{textAlign:"right !important"}:{},children:bj(new Date(e.created_at),"MMM dd, yyyy")})]}),n.jsxs("div",{className:_u("text-right",o&&"text-left"),children:[n.jsxs("p",{className:"font-medium",style:o?{textAlign:"left !important"}:{},children:[e.amount," SAR"]}),n.jsx(Xf,{variant:"completed"===e.status?"default":"secondary",children:"completed"===e.status?s("subscription.completed"):"pending"===e.status?s("subscription.pending"):"failed"===e.status?s("subscription.failed"):e.status})]})]},e.id))}):n.jsx("p",{className:"text-muted-foreground text-center py-4",style:o?{textAlign:"right !important"}:{},children:s("subscription.noTransactionsFound")})]})})})]})})}),n.jsx(VS,{value:"payment",className:_u("space-y-6",o&&"text-right"),children:n.jsx("div",{className:_u("space-y-6",o&&"text-right"),children:n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(o&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",o&&"flex-row-reverse"),children:[n.jsx(bm,{className:"h-6 w-6 text-primary"}),s("subscription.paymentMethods")]}),n.jsx(Pu,{className:_u(o&&"text-right"),style:o?{textAlign:"right !important"}:{},children:s("subscription.manageSavedPaymentMethods")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:_u("p-4 bg-primary/5 rounded-lg border border-primary/20",o&&"text-right"),children:[n.jsxs("div",{className:_u("flex items-center justify-between mb-4",o&&"flex-row-reverse"),children:[n.jsx("h4",{className:"font-semibold text-lg text-primary",style:o?{textAlign:"right !important"}:{},children:s("subscription.primaryPaymentMethod")}),n.jsx(Xf,{variant:"default",children:s("subscription.default")})]}),n.jsxs("div",{className:_u("flex items-center gap-4",o&&"flex-row-reverse"),children:[n.jsx("div",{className:"w-12 h-8 bg-gradient-to-r from-blue-600 to-blue-800 rounded flex items-center justify-center text-white text-xs font-bold",children:"VISA"}),n.jsxs("div",{className:_u(o&&"text-right"),children:[n.jsx("p",{className:"font-medium",style:o?{textAlign:"right !important"}:{},children:"•••• •••• •••• 4242"}),n.jsx("p",{className:"text-sm text-muted-foreground",style:o?{textAlign:"right !important"}:{},children:s("subscription.expiresOn").replace("{date}","12/2027")})]})]}),n.jsx("div",{className:_u("flex gap-2 mt-4",o&&"flex-row-reverse"),children:n.jsxs(ku,{variant:"outline",size:"sm",onClick:v,disabled:m,style:o?{textAlign:"right !important"}:{},children:[m?n.jsx(lb,{size:"sm",className:_u(o?"ml-1":"mr-1")}):null,s("subscription.updatePaymentMethod")]})})]}),n.jsxs("div",{className:_u("p-4 border-2 border-dashed border-muted rounded-lg text-center",o&&"text-right"),children:[n.jsx(bm,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),n.jsx("p",{className:"text-muted-foreground mb-4",style:o?{textAlign:"right !important"}:{},children:s("subscription.addNewPaymentMethod")}),n.jsxs(ku,{variant:"outline",onClick:()=>i({title:s("subscription.addNewPaymentMethod"),description:s("subscription.redirectingToSecureForm")}),style:o?{textAlign:"right !important"}:{},children:[n.jsx(bm,{className:_u("h-4 w-4",o?"ml-2":"mr-2")}),s("subscription.addCard")]})]})]})})]})})})]})]}):n.jsx(Cee,{onAuthSuccess:y})},Oee=()=>{br();const{language:e,isRTL:t,t:r,formatDate:s,formatNumber:a}=cr(),[i,o]=Ne.useState(""),[l,c]=Ne.useState(null),[d,u]=Ne.useState(!1),{conversations:m,loading:h,getOtherParticipant:p}=_C(),[f,x]=Ne.useState({}),g=Ne.useMemo(()=>m&&0!==m.length?{total:m.length,unread:m.filter(e=>e.unread_count>0).length,business:m.filter(e=>"business"===e.conversation_type).length,support:m.filter(e=>"support"===e.conversation_type).length}:{total:0,unread:0,business:0,support:0},[m]);Ne.useEffect(()=>{(async()=>{if(!m.length)return;const e=m.map(async e=>{const t=await p(e.id);return{conversationId:e.id,participant:t}}),t=(await Promise.all(e)).reduce((e,{conversationId:t,participant:r})=>(e[t]=r,e),{});x(t)})()},[m,p]);const v=Ne.useMemo(()=>m?m.filter(e=>{var t;const r=i.toLowerCase(),n=f[e.id],s=(null==n?void 0:n.full_name)||(null==n?void 0:n.company_name)||"Unknown User";return""===i||s.toLowerCase().includes(r)||(null==(t=e.conversation_type)?void 0:t.toLowerCase().includes(r))}):[],[m,i,f]),y=e=>{switch(e){case"business":return"default";case"support":return"secondary";default:return"outline"}},j=e=>{switch(e){case"business":return r("vendor.messages.business");case"support":return r("vendor.messages.support");default:return r("vendor.messages.general")}};return h?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"})]})}),n.jsxs(Au,{children:[n.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})]})]},t))})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:_u("space-y-2",t&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r("vendor.messages.title")}),n.jsx("p",{className:"text-muted-foreground",children:r("vendor.messages.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(eS,{title:r("vendor.messages.totalConversations"),value:g.total,icon:nh,trend:{value:12,label:r("common.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:r("vendor.messages.unreadMessages"),value:g.unread,icon:cm,variant:"warning"}),n.jsx(eS,{title:r("vendor.messages.businessChats"),value:g.business,icon:Zh,variant:"success"}),n.jsx(eS,{title:r("vendor.messages.supportChats"),value:g.support,icon:ph})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(jh,{className:"h-5 w-5"}),r("vendor.messages.searchAndActions")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:r("vendor.messages.searchPlaceholder"),className:_u(t?"pr-10 text-right":"pl-10"),value:i,onChange:e=>o(e.target.value),dir:t?"rtl":"ltr"})]}),n.jsx("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:n.jsxs(ku,{onClick:()=>u(!0),children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),r("vendor.messages.startNewChat")]})})]})]}),0===v.length?n.jsx(jC,{icon:nh,title:r("vendor.messages.noConversations"),description:r("vendor.messages.noConversationsDesc")}):n.jsx("div",{className:"space-y-4",children:v.map(e=>{const a=f[e.id],i=(null==a?void 0:a.full_name)||(null==a?void 0:a.company_name)||"Unknown User",o=(null==a?void 0:a.last_seen)&&new Date(a.last_seen)>new Date(Date.now()-3e5);return n.jsx(Eu,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>c(e),children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Xh,{className:"h-5 w-5 text-primary"})}),o&&n.jsx(xm,{className:"absolute -bottom-1 -right-1 h-3 w-3 fill-green-500 text-green-500"})]}),n.jsxs("div",{className:_u(t&&"text-right"),children:[n.jsx("h3",{className:"font-semibold",children:i}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r(o?"vendor.messages.online":"vendor.messages.offline")})]})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(Xf,{variant:y(e.conversation_type),children:j(e.conversation_type)}),e.unread_count>0&&n.jsx(Xf,{variant:"destructive",children:e.unread_count})]})]}),n.jsxs("div",{className:_u("flex items-center gap-4 mb-2",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-3 w-3"}),n.jsx("span",{children:s(e.updated_at)})]}),"business"===e.conversation_type&&n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Zh,{className:"h-3 w-3"}),n.jsx("span",{children:r("vendor.messages.businessChat")})]})]})]})}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsxs(ku,{variant:"outline",className:"flex-1",onClick:t=>{t.stopPropagation(),c(e)},children:[n.jsx(nh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),r("vendor.messages.openChat")]}),n.jsxs(ku,{variant:"outline",onClick:e=>{e.stopPropagation()},children:[n.jsx(ph,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),r("vendor.messages.call")]})]})]})})},e.id)})}),n.jsx(kC,{isOpen:d,onClose:()=>u(!1),onConversationStart:e=>{c(e),u(!1)}})]})},Mee=()=>n.jsx(uS,{children:n.jsx(Oee,{})}),Pee=()=>{const{userProfile:e,updateProfile:t}=br(),{t:r,language:s,setLanguage:a,isRTL:i}=cr(),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(!0),[u,m]=Ne.useState({email:!0,push:!0,sms:!1}),{toast:h}=fp(),p=Ne.useMemo(()=>{const t=[null==e?void 0:e.full_name,null==e?void 0:e.company_name,null==e?void 0:e.phone,null==e?void 0:e.address].filter(Boolean).length;return{profileCompletion:Math.round(t/4*100),activeNotifications:Object.values(u).filter(Boolean).length,securityScore:"approved"===(null==e?void 0:e.verification_status)?85:60,lastUpdate:r("vendor.settings.lastUpdated")}},[e,u,r]);Ne.useEffect(()=>{(null==e?void 0:e.id)&&(async()=>{try{d(!0);const{data:t}=await mr.from("user_settings").select("*").eq("user_id",null==e?void 0:e.id).single();t&&m({email:t.email_notifications??!0,push:t.push_notifications??!0,sms:t.sms_notifications??!1})}catch(t){}finally{d(!1)}})()},[null==e?void 0:e.id]);return c?n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-8 w-64 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-48 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,t)=>n.jsxs(Eu,{children:[n.jsx(Ou,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"h-4 w-24 bg-muted rounded animate-pulse"}),n.jsx("div",{className:"h-5 w-5 bg-muted rounded animate-pulse"})]})}),n.jsxs(Au,{children:[n.jsx("div",{className:"h-8 w-16 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-3 w-32 bg-muted rounded animate-pulse"})]})]},t))})]}):n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:_u("space-y-2",i&&"text-right"),children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground",children:r("vendor.settings.title")}),n.jsx("p",{className:"text-muted-foreground",children:r("vendor.settings.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(eS,{title:r("vendor.settings.profileCompletion"),value:`${p.profileCompletion}%`,icon:Xh,trend:{value:5,label:r("common.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:r("vendor.settings.activeNotifications"),value:p.activeNotifications,icon:Wu,variant:"success"}),n.jsx(eS,{title:r("vendor.settings.securityScore"),value:`${p.securityScore}%`,icon:Sh,variant:"warning"}),n.jsx(eS,{title:r("vendor.settings.lastUpdate"),value:p.lastUpdate,icon:gm})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",i&&"flex-row-reverse"),children:[n.jsx(Xh,{className:"h-5 w-5"}),r("vendor.settings.profileSettings")]}),n.jsx(Pu,{children:r("vendor.settings.profileSettingsDesc")})]}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"fullName",children:r("vendor.settings.fullName")}),n.jsx($j,{id:"fullName",value:(null==e?void 0:e.full_name)||"",disabled:!0,className:_u(i&&"text-right")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"companyName",children:r("vendor.settings.companyName")}),n.jsx($j,{id:"companyName",value:(null==e?void 0:e.company_name)||"",disabled:!0,className:_u(i&&"text-right")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"email",children:r("vendor.settings.email")}),n.jsx($j,{id:"email",value:(null==e?void 0:e.email)||"",disabled:!0,className:_u(i&&"text-right")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"phone",children:r("vendor.settings.phone")}),n.jsx($j,{id:"phone",value:(null==e?void 0:e.phone)||"",disabled:!0,className:_u(i&&"text-right")})]})]}),n.jsx(ku,{variant:"outline",className:_u("w-full",i&&"text-right"),children:r("vendor.settings.editProfile")})]})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",i&&"flex-row-reverse"),children:[n.jsx(Wu,{className:"h-5 w-5"}),r("vendor.settings.notificationSettings")]}),n.jsx(Pu,{children:r("vendor.settings.notificationSettingsDesc")})]}),n.jsx(Au,{className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("space-y-0.5",i&&"text-right"),children:[n.jsx(j_,{children:r("vendor.settings.emailNotifications")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("vendor.settings.emailNotificationsDesc")})]}),n.jsx(O5,{checked:u.email,onCheckedChange:e=>m(t=>({...t,email:e}))})]}),n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("space-y-0.5",i&&"text-right"),children:[n.jsx(j_,{children:r("vendor.settings.pushNotifications")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("vendor.settings.pushNotificationsDesc")})]}),n.jsx(O5,{checked:u.push,onCheckedChange:e=>m(t=>({...t,push:e}))})]}),n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("space-y-0.5",i&&"text-right"),children:[n.jsx(j_,{children:r("vendor.settings.smsNotifications")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("vendor.settings.smsNotificationsDesc")})]}),n.jsx(O5,{checked:u.sms,onCheckedChange:e=>m(t=>({...t,sms:e}))})]})]})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",i&&"flex-row-reverse"),children:[n.jsx(Im,{className:"h-5 w-5"}),r("vendor.settings.languageSettings")]}),n.jsx(Pu,{children:r("vendor.settings.languageSettingsDesc")})]}),n.jsx(Au,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{children:r("vendor.settings.selectLanguage")}),n.jsxs(lC,{value:s,onValueChange:e=>{a(e)},children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"en",children:"English"}),n.jsx(pC,{value:"ar",children:"العربية"})]})]})]})})]}),n.jsx("div",{className:_u("flex justify-end",i&&"justify-start"),children:n.jsx(ku,{onClick:async()=>{try{l(!0);const{error:t}=await mr.from("user_settings").upsert({user_id:null==e?void 0:e.id,email_notifications:u.email,push_notifications:u.push,sms_notifications:u.sms,language:s,updated_at:(new Date).toISOString()});if(t)throw t;h({title:r("vendor.settings.settingsUpdated"),description:r("vendor.settings.settingsUpdatedDesc")})}catch(t){h({title:r("vendor.settings.updateError"),description:r("vendor.settings.updateErrorDesc"),variant:"destructive"})}finally{l(!1)}},disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx(lb,{className:_u("h-4 w-4",i?"ml-2":"mr-2")}),r("vendor.settings.saving")]}):n.jsxs(n.Fragment,{children:[n.jsx(dm,{className:_u("h-4 w-4",i?"ml-2":"mr-2")}),r("vendor.settings.saveSettings")]})})})]})},Aee=()=>n.jsx(uS,{children:n.jsx(Pee,{})}),Tee=Dr("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/80 active:scale-[0.98]",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70 active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline active:text-primary/80"},size:{default:"h-11 px-4 py-2 min-h-[44px]",sm:"h-10 rounded-md px-3 min-h-[40px]",lg:"h-12 rounded-md px-8 min-h-[48px]",icon:"h-11 w-11 min-h-[44px] min-w-[44px]",touch:"h-12 px-6 py-3 min-h-[48px]"}},defaultVariants:{variant:"default",size:"default"}}),Dee=Ne.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},o)=>{const l=a?s:"button";return n.jsx(l,{className:_u(Tee({variant:t,size:r,className:e})),ref:o,...i})});Dee.displayName="TouchOptimizedButton";const Ree=({targetId:e="main-content",className:t,children:r="Skip to main content"})=>n.jsx(Dee,{onClick:()=>{const t=document.getElementById(e);t&&(t.focus(),t.scrollIntoView({behavior:"smooth"}))},className:_u("absolute -top-40 left-6 z-50","focus:top-6 transition-all duration-200","bg-primary text-primary-foreground","px-4 py-2 text-sm font-medium","border-2 border-primary-foreground",t),tabIndex:1,children:r}),Lee=({size:e="default",className:t,label:r="Loading",description:s})=>n.jsxs("div",{role:"status","aria-live":"polite","aria-label":r,"aria-describedby":s?"loading-description":void 0,className:_u("flex items-center justiy-center",t),children:[n.jsx(Xm,{className:_u("animate-spin text-primary",{sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8"}[e]),"aria-hidden":"true"}),n.jsx("span",{className:"sr-only",children:r}),s&&n.jsx("span",{id:"loading-description",className:"sr-only",children:s})]}),qee=()=>{const{userProfile:e}=br(),{t:t}=cr(),{showError:r,showSuccess:s}=dy(),[a,i]=Ne.useState(!1),[o,l]=Ne.useState(null),[c,d]=Ne.useState(!1);return n.jsxs(n.Fragment,{children:[n.jsxs(ku,{onClick:async()=>{if(e){i(!0);try{const e=await(async()=>{try{const{data:e,error:t}=await mr.from("user_profiles").select("id, user_id, full_name, email").eq("role","admin").eq("status","approved").limit(10);return t?[]:e||[]}catch(e){return[]}})();if(0===e.length)return void r("No support agents are currently available. Please create a support ticket instead.");const t=(e=>e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null)(e);if(!t)return void r("Failed to connect to support agent. Please try again.");if(!t.user_id)return void r("Invalid admin data. Please try again.");l(t),d(!0),s("Connecting you to a support agent...")}catch(t){r("Failed to start chat. Please try again.")}finally{i(!1)}}else r("Please log in to start a chat")},disabled:a,className:"w-full flex items-center gap-2 bg-primary hover:bg-primary/90",children:[a?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(nh,{className:"h-4 w-4"}),a?"Connecting...":t("support.startLiveChat")||"Start Live Chat"]}),o&&n.jsx(kC,{open:c,onOpenChange:()=>{d(!1),l(null)},recipientId:o.user_id,recipientName:o.full_name||"Support Agent",conversationType:"support"})]})},Iee=({onCreateTicket:e,isRTL:t=!1,t:r})=>n.jsx(Eu,{className:"border-dashed border-2",children:n.jsxs(Au,{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[n.jsx("div",{className:"rounded-full bg-muted/30 p-4 mb-6",children:n.jsx(Ih,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("h3",{className:_u("text-lg font-semibold text-foreground mb-2",t&&"text-right"),children:r("support.emptyState.title")}),n.jsx("p",{className:_u("text-sm text-muted-foreground mb-6 max-w-sm",t&&"text-right"),children:r("support.emptyState.description")}),n.jsxs(ku,{onClick:e,className:_u("gap-2 min-h-[44px] px-6",t&&"flex-row-reverse"),"aria-label":r("support.emptyState.cta"),children:[n.jsx(fh,{className:"h-4 w-4"}),r("support.emptyState.cta")]})]})}),Fee=({onSubmit:e,isRTL:t=!1,t:r})=>{const[s,a]=Ne.useState(""),[i,o]=Ne.useState(""),[l,c]=Ne.useState("general"),[d,u]=Ne.useState("medium"),[m,h]=Ne.useState(!1),{toast:p}=fp();return n.jsxs(Eu,{className:"h-fit",children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("text-xl flex items-center gap-2",t&&"flex-row-reverse text-right"),children:[n.jsx(cm,{className:"h-5 w-5 text-primary"}),r("support.createTicket")]}),n.jsx(Pu,{className:t?"text-right":"",children:r("support.createTicketDescription")})]}),n.jsx(Au,{children:n.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),s.trim()&&i.trim()){h(!0);try{await e({subject:s.trim(),message:i.trim(),category:l,priority:d}),a(""),o(""),c("general"),u("medium"),p({title:r("support.success.ticketCreated"),description:"We'll get back to you soon!",variant:"default"})}catch(n){p({title:r("common.error"),description:r("support.errors.ticketFailed"),variant:"destructive"})}finally{h(!1)}}else p({title:r("common.error"),description:r("forms.required"),variant:"destructive"})},className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"subject",className:_u("text-sm font-medium",t&&"text-right block"),children:[r("support.subjectPlaceholder")," *"]}),n.jsx($j,{id:"subject",placeholder:r("support.subjectPlaceholder"),value:s,onChange:e=>a(e.target.value),required:!0,className:_u("h-11 min-h-[44px]",t&&"text-right"),"aria-describedby":"subject-error"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"category",className:_u("text-sm font-medium",t&&"text-right block"),children:r("support.category.label")}),n.jsxs(lC,{value:l,onValueChange:c,children:[n.jsx(dC,{className:"h-11 min-h-[44px]",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"general",children:r("support.category.general")}),n.jsx(pC,{value:"technical",children:r("support.category.technical")}),n.jsx(pC,{value:"billing",children:r("support.category.billing")}),n.jsx(pC,{value:"account",children:r("support.category.account")}),n.jsx(pC,{value:"feature",children:r("support.category.feature")})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"priority",className:_u("text-sm font-medium",t&&"text-right block"),children:r("support.priority.label")}),n.jsxs(lC,{value:d,onValueChange:u,children:[n.jsx(dC,{className:"h-11 min-h-[44px]",children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"low",children:r("support.priority.low")}),n.jsx(pC,{value:"medium",children:r("support.priority.medium")}),n.jsx(pC,{value:"high",children:r("support.priority.high")}),n.jsx(pC,{value:"urgent",children:r("support.priority.urgent")})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(j_,{htmlFor:"message",className:_u("text-sm font-medium",t&&"text-right block"),children:[r("support.messagePlaceholder")," *"]}),n.jsx(bC,{id:"message",placeholder:r("support.messagePlaceholder"),value:i,onChange:e=>o(e.target.value),rows:4,required:!0,className:_u("min-h-[100px] resize-y",t&&"text-right"),"aria-describedby":"message-error"})]}),n.jsx(Dee,{type:"submit",disabled:m,size:"lg",className:_u("w-full gap-2 font-semibold",t&&"flex-row-reverse"),"aria-label":r("support.submitTicket"),children:m?n.jsx(lb,{size:"sm"}):n.jsxs(n.Fragment,{children:[n.jsx(bh,{className:"h-4 w-4"}),r("support.submitTicket")]})})]})})]})},zee=ke.memo(()=>{br();const{t:e,isRTL:t,formatDate:r}=cr(),{tickets:s,loading:a,createTicket:i,ticketMetrics:o}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s,userProfile:a}=br(),{toast:i}=fp(),o=Ne.useCallback(async()=>{if(!s)return t([]),void n(!1);try{let e=mr.from("support_tickets").select("*").order("created_at",{ascending:!1});"admin"!==(null==a?void 0:a.role)&&(e=e.eq("user_id",s.id));const{data:r,error:n}=await e;if(n)return void i({title:"Error loading tickets",description:"Unable to load support tickets. Please try again.",variant:"destructive"});const o=(r||[]).map(e=>({...e,profiles:{full_name:(null==a?void 0:a.full_name)||null,email:(null==a?void 0:a.email)||null}}));t(o)}catch(e){i({title:"Error loading tickets",description:"Unable to load support tickets. Please try again.",variant:"destructive"})}finally{n(!1)}},[s,null==a?void 0:a.role,null==a?void 0:a.full_name,null==a?void 0:a.email,i]),l=Ne.useCallback(async e=>{if(!s)throw new Error("User must be authenticated to create tickets");try{const{data:r,error:n}=await mr.from("support_tickets").insert({user_id:s.id,subject:e.subject,category:e.category,priority:e.priority,status:"open"}).select().single();if(n)throw n;const{data:o,error:l}=await mr.from("conversations").insert({client_id:s.id,vendor_id:s.id,support_ticket_id:r.id,conversation_type:"support",status:"active"}).select().single();if(l)throw l;const{error:c}=await mr.from("messages").insert({conversation_id:o.id,sender_id:s.id,recipient_id:s.id,content:e.message,message_type:"text"});if(c)throw c;const d={...r,profiles:{full_name:(null==a?void 0:a.full_name)||null,email:(null==a?void 0:a.email)||null}};return t(e=>[d,...e]),i({title:"Support ticket created",description:"Your ticket has been submitted successfully."}),r}catch(r){throw i({title:"Error creating ticket",description:"Failed to create support ticket. Please try again.",variant:"destructive"}),r}},[s,a,i]),c=Ne.useMemo(()=>e.filter(e=>"open"===e.status||"pending"===e.status).length,[e]),d=Ne.useMemo(()=>({total:e.length,open:e.filter(e=>"open"===e.status).length,pending:e.filter(e=>"pending"===e.status).length,resolved:e.filter(e=>"closed"===e.status||"resolved"===e.status).length}),[e]);return Ne.useEffect(()=>{o()},[o]),Ne.useEffect(()=>{if(!s)return;let e=null,r=null;const n=()=>{try{e=mr.channel(`support_tickets_${s.id}`).on("postgres_changes",{event:"*",schema:"public",table:"support_tickets",filter:"admin"===(null==a?void 0:a.role)?void 0:`user_id=eq.${s.id}`},e=>{if("INSERT"===e.eventType){const r=e.new;t(e=>e.some(e=>e.id===r.id)?e:[{...r,profiles:{full_name:(null==a?void 0:a.full_name)||null,email:(null==a?void 0:a.email)||null}},...e])}else if("UPDATE"===e.eventType){const r=e.new;t(e=>e.map(e=>e.id===r.id?{...e,...r}:e))}else if("DELETE"===e.eventType){const r=e.old.id;t(e=>e.filter(e=>e.id!==r))}}).subscribe(e=>{"SUBSCRIBED"===e?r&&(clearTimeout(r),r=null):"CHANNEL_ERROR"===e&&(r=setTimeout(()=>{n()},5e3))})}catch(i){}};return a&&n(),()=>{if(e)try{e.unsubscribe()}catch(t){}r&&clearTimeout(r)}},[s,null==a?void 0:a.role,null==a?void 0:a.full_name,null==a?void 0:a.email]),{tickets:e,loading:r,createTicket:l,fetchTickets:o,getPendingTicketsCount:c,ticketMetrics:d}})(),{announce:l,announceLoading:c,announceSuccess:d,announceError:u}=(()=>{const e=Ne.useRef(null),t=Ne.useCallback(()=>{if(!e.current){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.id="accessibility-announcements",document.body.appendChild(t),e.current=t}return e.current},[]),r=Ne.useCallback((e,r="polite")=>{const n=t();n.setAttribute("aria-live",r),n.textContent="",setTimeout(()=>{n.textContent=e},100)},[t]),n=Ne.useCallback((e,t)=>{r(e?`Loading ${t}`:`${t} loaded`,"polite")},[r]),s=Ne.useCallback(e=>{r(`Error: ${e}`,"assertive")},[r]),a=Ne.useCallback(e=>{r(`Success: ${e}`,"polite")},[r]),i=Ne.useCallback(e=>{r(`Navigated to ${e}`,"polite")},[r]);return{announce:r,announceLoading:n,announceError:s,announceSuccess:a,announcePageChange:i}})(),[m,h]=Ne.useState(!1);Ne.useEffect(()=>{l(e("support.title"),"polite"),c(a,"support tickets")},[l,c,a,e]);const p=Ne.useMemo(()=>o,[o]),f=Ne.useCallback(async t=>{try{await i({subject:t.subject,category:t.category,priority:t.priority,message:t.message}),h(!1),d(e("support.success.ticketCreated"))}catch(r){throw u(e("support.errors.ticketFailed")),r}},[i,d,u,e]),x=Ne.useCallback(()=>{h(!0),l(e("support.createTicket"),"polite")},[l,e]);return a?n.jsx("div",{className:"flex justify-center items-center min-h-[400px]",role:"main","aria-label":e("support.title"),children:n.jsx(Lee,{size:"lg",label:e("common.loading"),description:"Loading support tickets and information"})}):n.jsxs("main",{id:"main-content",className:_u("space-y-6",t&&"rtl"),dir:t?"rtl":"ltr",role:"main","aria-label":e("support.title"),children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:_u("text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",t&&"text-right"),children:e("support.title")}),n.jsx("p",{className:_u("text-foreground opacity-75 text-sm sm:text-base max-w-2xl",t&&"text-right"),children:e("support.subtitle")})]}),s&&s.length>0&&n.jsxs("section",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8","aria-label":"Support ticket statistics",children:[n.jsx(eS,{title:e("support.totalTickets"),value:p.total,icon:Ih,"aria-label":`${p.total} ${e("support.totalTickets")}`}),n.jsx(eS,{title:e("support.openTickets"),value:p.open,icon:cm,variant:"warning","aria-label":`${p.open} ${e("support.openTickets")}`}),n.jsx(eS,{title:e("support.pending"),value:p.pending,icon:gm,variant:"warning","aria-label":`${p.pending} ${e("support.pending")}`}),n.jsx(eS,{title:e("support.resolved"),value:p.resolved,icon:dm,variant:"success","aria-label":`${p.resolved} ${e("support.resolved")}`})]}),n.jsxs("section",{className:"grid gap-6 lg:grid-cols-2","aria-label":"Support contact options and ticket creation",children:[n.jsxs(Eu,{className:"h-fit",children:[n.jsxs(Ou,{children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse text-right"),children:[n.jsx(pm,{className:"h-5 w-5"}),e("support.contactUs")]}),n.jsx(Pu,{className:t?"text-right":"",children:e("support.contactDescription")})]}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex items-center gap-3 p-4 bg-muted/30 rounded-lg transition-colors hover:bg-muted/50",t&&"flex-row-reverse"),children:[n.jsx(nh,{className:"h-5 w-5 text-info"}),n.jsxs("div",{className:_u("flex-1",t&&"text-right"),children:[n.jsx("p",{className:"font-medium",children:e("support.liveChat")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e("support.liveChatHours")})]})]}),n.jsx("div",{className:"mt-2",children:n.jsx(qee,{})}),n.jsxs("div",{className:_u("flex items-center gap-3 p-4 bg-muted/30 rounded-lg transition-colors hover:bg-muted/50",t&&"flex-row-reverse"),children:[n.jsx(ph,{className:"h-5 w-5 text-success"}),n.jsxs("div",{className:t?"text-right":"",children:[n.jsx("p",{className:"font-medium",children:e("support.phone")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"+1 (555) 123-4567"})]})]}),n.jsxs("div",{className:_u("flex items-center gap-3 p-4 bg-muted/30 rounded-lg transition-colors hover:bg-muted/50",t&&"flex-row-reverse"),children:[n.jsx(Zm,{className:"h-5 w-5 text-warning"}),n.jsxs("div",{className:t?"text-right":"",children:[n.jsx("p",{className:"font-medium",children:e("support.email")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"support@mwrd.com"})]})]})]})]}),m?n.jsx(Fee,{onSubmit:f,isRTL:t,t:e}):n.jsxs(Eu,{className:"h-fit",children:[n.jsxs(Ou,{children:[n.jsx(Mu,{className:t?"text-right":"",children:e("support.createTicket")}),n.jsx(Pu,{className:t?"text-right":"",children:e("support.createTicketDescription")})]}),n.jsx(Au,{children:n.jsxs(Dee,{onClick:x,size:"lg",className:_u("w-full gap-2 font-semibold",t&&"flex-row-reverse"),children:[n.jsx(Ih,{className:"h-4 w-4"}),e("support.createTicket")]})})]})]}),n.jsx("section",{"aria-label":"Support tickets",children:s&&s.length>0?n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{className:t?"text-right":"",children:e("support.recentTickets")})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-3",role:"list","aria-label":"Recent support tickets",children:s.slice(0,5).map((s,a)=>n.jsxs("div",{role:"listitem",tabIndex:0,className:_u("flex justify-between items-start p-4 bg-muted/30 rounded-lg border border-border/50 transition-colors hover:bg-muted/50 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",t&&"flex-row-reverse"),"aria-label":`Support ticket: ${s.subject}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||e.preventDefault()},children:[n.jsxs("div",{className:_u("flex-1",t?"text-right":""),children:[n.jsx("p",{className:"font-medium text-foreground mb-1",children:s.subject}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r(new Date(s.created_at))})]}),n.jsxs("div",{className:_u("flex flex-col gap-1 ml-4",t?"text-left ml-0 mr-4":"text-right"),children:[n.jsx("span",{className:_u("text-xs font-medium px-2 py-1 rounded-full","open"===s.status?"bg-warning/20 text-warning":"closed"===s.status?"bg-success/20 text-success":"bg-info/20 text-info"),"aria-label":`Status: ${e(`support.status.${s.status}`)}`,children:e(`support.status.${s.status}`)}),n.jsx("span",{className:"text-xs text-muted-foreground capitalize","aria-label":`Priority: ${e(`support.priority.${s.priority}`)}`,children:e(`support.priority.${s.priority}`)})]})]},s.id))})})]}):!a&&!m&&n.jsx(Iee,{onCreateTicket:x,isRTL:t,t:e})})]})});zee.displayName="SupportContent";const Bee=ke.memo(()=>n.jsxs("div",{className:"relative",children:[n.jsx(Ree,{targetId:"main-content"}),n.jsx(yS,{children:n.jsx(zee,{})})]}));Bee.displayName="Support";const $ee=()=>n.jsx(uS,{children:n.jsx(Bee,{})}),Uee=ke.memo(()=>{br();const{language:e,isRTL:t,t:r,formatDate:s,formatNumber:a}=cr(),[i,o]=Ne.useState(""),[l,c]=Ne.useState(null),[d,u]=Ne.useState(!1),{conversations:m,loading:h,getOtherParticipant:p}=_C(),[f,x]=Ne.useState({}),g=Ne.useMemo(()=>m&&0!==m.length?{total:m.length,unread:m.filter(e=>e.unread_count>0).length,business:m.filter(e=>"business"===e.conversation_type).length,support:m.filter(e=>"support"===e.conversation_type).length}:{total:0,unread:0,business:0,support:0},[m]);Ne.useEffect(()=>{(async()=>{if(!m.length)return;const e=m.map(async e=>{const t=await p(e);return{conversationId:e.id,participant:t}}),t=await Promise.all(e),r={};t.forEach(({conversationId:e,participant:t})=>{t&&(r[e]=t)}),x(r)})()},[m,p]);const v=m.filter(e=>{if(!i)return!0;const t=f[e.id],r=(null==t?void 0:t.full_name)||(null==t?void 0:t.company_name)||"",n=e.last_message||"";return r.toLowerCase().includes(i.toLowerCase())||n.toLowerCase().includes(i.toLowerCase())}),y=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),s=Math.floor(n/6e4),a=Math.floor(n/36e5),i=Math.floor(n/864e5);return s<1?r("messages.now"):s<60?r("messages.minutesAgo").replace("{minutes}",s.toString()):a<24?r("messages.hoursAgo").replace("{hours}",a.toString()):r("messages.daysAgo").replace("{days}",i.toString())};return h?n.jsx(yS,{children:n.jsxs(y9,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:_u("h-8 w-48 bg-muted rounded animate-pulse mb-2",t&&"ml-auto")}),n.jsx("div",{className:_u("h-4 w-32 bg-muted rounded animate-pulse",t&&"ml-auto")})]}),n.jsx("div",{className:_u("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",t&&"rtl-grid"),children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]})}):n.jsx(yS,{children:n.jsxs("div",{className:_u("min-h-full relative p-6 space-y-6 messages-page",t&&"rtl-text-right"),dir:t?"rtl":"ltr",style:t?{textAlign:"right !important"}:{},children:[n.jsxs("div",{className:_u("mb-6 sm:mb-8",t&&"text-right"),children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",style:t?{textAlign:"right !important"}:{},children:r("messages.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",style:t?{textAlign:"right !important"}:{},children:r("messages.subtitle")})]}),m.length>0&&n.jsxs("div",{className:_u("grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",t&&"rtl-grid"),children:[n.jsx(eS,{title:r("messages.totalConversations"),value:a(g.total),icon:nh}),n.jsx(eS,{title:r("messages.unreadMessages"),value:a(g.unread),icon:cm,variant:"warning"}),n.jsx(eS,{title:r("messages.businessChats"),value:a(g.business),icon:Zh,variant:"success"}),n.jsx(eS,{title:r("messages.supportTickets"),value:a(g.support),icon:ph})]}),n.jsxs(Eu,{className:"mb-6",children:[n.jsx(Ou,{className:_u(t&&"text-right"),style:t?{textAlign:"right !important"}:{},children:n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse justify-end w-full"),style:t?{textAlign:"right !important",justifyContent:"flex-end !important",display:"flex !important",width:"100% !important"}:{},children:[n.jsx(qm,{className:"h-5 w-5"}),n.jsx("span",{className:"font-semibold leading-none tracking-tight",style:t?{textAlign:"right !important",marginRight:"auto !important"}:{},children:r("messages.searchAndActions")})]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:_u("flex gap-4",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:r("messages.searchMessages"),className:_u(t?"pr-10 text-right":"pl-10",t&&"rtl-text-right"),value:i,onChange:e=>o(e.target.value)})]}),n.jsxs(ku,{disabled:!0,className:_u(t&&"rtl-text-right"),style:t?{textAlign:"right !important"}:{},children:[n.jsx(fh,{className:_u("h-4 w-4",t?"ml-2":"mr-2")}),r("messages.startNewChat")]})]}),i&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx("span",{style:t?{textAlign:"right !important"}:{},children:r("messages.showingResults").replace("{count}",v.length.toString()).replace("{total}",m.length.toString())}),n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>o(""),style:t?{textAlign:"right !important"}:{},children:r("messages.clearSearch")})]})]})]}),0===v.length?n.jsx(jC,{icon:nh,title:0===m.length?r("messages.noConversations"):r("messages.noResults"),description:0===m.length?r("messages.noConversationsDesc"):r("messages.noResultsDesc"),action:0===m.length?{label:r("messages.goToSupport"),onClick:()=>window.location.href="/support",variant:"default"}:void 0}):n.jsx("div",{className:"space-y-4",children:v.map(e=>{const s=f[e.id],a=(e=>e.conversation_type||"business")(e),i="support"===a;return n.jsx(Eu,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>(e=>{const t=f[e.id];t&&(c({...e,participant:t}),u(!0))})(e),children:n.jsx(Au,{className:"p-4",children:n.jsxs("div",{className:_u("flex items-center gap-4",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:_u("flex justify-between items-start mb-1",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[i&&n.jsx(Xf,{variant:"secondary",className:"text-xs",children:r("messages.support")}),n.jsx("span",{className:"text-xs text-muted-foreground",style:t?{textAlign:"right !important"}:{},children:e.last_message_at?y(e.last_message_at):r("messages.noMessages")})]}),n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx("h3",{className:"font-semibold truncate",style:t?{textAlign:"right !important"}:{},children:(null==s?void 0:s.full_name)||(null==s?void 0:s.company_name)||r("messages.unknownUser")}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",style:t?{textAlign:"right !important"}:{},children:e.last_message||r("messages.startConversation")})]})]}),n.jsx("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse justify-end"),children:n.jsx(Xf,{variant:"secondary",className:"text-xs",style:t?{textAlign:"right !important"}:{},children:r("messages.online")})})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:i?n.jsx(Zh,{className:"h-6 w-6 text-muted-foreground"}):n.jsx(Xh,{className:"h-6 w-6 text-muted-foreground"})}),n.jsx(xm,{className:_u("absolute h-4 w-4 text-green-500 fill-current",t?"-bottom-1 -right-1":"-bottom-1 -left-1")})]})]})})},e.id)})}),l&&n.jsx(kC,{open:d,onOpenChange:u,recipientId:l.participant.user_id,recipientName:l.participant.full_name||l.participant.company_name,requestId:l.request_id,offerId:l.offer_id})]})})});Uee.displayName="Messages";const Vee=()=>{br();const{t:e}=cr(),{offers:t,loading:r}=uE(),s=Ne.useMemo(()=>t?{total:t.length,pending:t.filter(e=>"pending"===e.status).length,approved:t.filter(e=>"approved"===e.client_approval_status).length,rejected:t.filter(e=>"rejected"===e.client_approval_status).length}:{total:0,pending:0,approved:0,rejected:0},[t]);if(r)return n.jsxs(y9,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]});const a=e=>{switch(e){case"pending":return"default";case"approved":case"accepted":return"outline";case"rejected":return"destructive";default:return"secondary"}},i=t=>{switch(t){case"approved":return e("myOffers.status.approved");case"rejected":return e("myOffers.status.rejected");default:return e("myOffers.status.pending")}};return n.jsxs(y9,{title:e("myOffers.title"),description:e("myOffers.subtitle"),children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:"Total Offers",value:s.total,icon:dh,trend:{value:12,label:"vs last month",isPositive:!0}}),n.jsx(eS,{title:"Pending",value:s.pending,icon:gm,variant:"warning"}),n.jsx(eS,{title:"Approved",value:s.approved,icon:dm,variant:"success"}),n.jsx(eS,{title:"Rejected",value:s.rejected,icon:cm,variant:"destructive"})]}),t&&0===t.length?n.jsx(jC,{icon:dh,title:e("myOffers.noOffers"),description:e("myOffers.noOffersDesc"),action:{label:"Browse Requests",onClick:()=>window.location.href="/browse-requests",variant:"default"}}):n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:null==t?void 0:t.map(t=>{var r,s;return n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(Ou,{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs(Mu,{className:"text-lg flex items-center gap-2",children:[n.jsx(dh,{className:"h-5 w-5"}),e("myOffers.offerNumber")," #",t.id.slice(0,8)]}),n.jsx(Xf,{variant:a(t.status),children:(s=t.status,e(`myOffers.status.${s}`)||s)})]}),n.jsx(Pu,{className:"line-clamp-2",children:t.description||e("myOffers.noDescription")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"font-medium",children:["$",(null==(r=t.price)?void 0:r.toLocaleString())||e("myOffers.priceNotSet")]})]}),t.delivery_time&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:[t.delivery_time," ",e("myOffers.daysDelivery")]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsxs("span",{children:[e("myOffers.submitted")," ",bj(new Date(t.created_at),"MMM dd, yyyy")]})]}),t.client_approval_status&&n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-xs text-muted-foreground",children:[e("myOffers.clientResponse"),":"]}),n.jsx(Xf,{variant:"approved"===t.client_approval_status?"outline":"rejected"===t.client_approval_status?"destructive":"default",className:"text-xs",children:i(t.client_approval_status)})]})})]})})]},t.id)})})]})},Wee=Ne.memo(()=>{const{userProfile:e}=br(),{language:t,t:r,isRTL:s}=cr();fp();const[a,i]=Ne.useState(""),[o,l]=Ne.useState("all"),[c,d]=Ne.useState([]),{offers:u,loading:m,error:h,updateOfferStatus:p,refetch:f}=uE(),x=Ne.useMemo(()=>u&&0!==u.length?{total:u.length,pending:u.filter(e=>"pending"===e.client_approval_status).length,approved:u.filter(e=>"approved"===e.client_approval_status).length,rejected:u.filter(e=>"rejected"===e.client_approval_status).length}:{total:0,pending:0,approved:0,rejected:0},[u]),g=e=>{switch(e){case"approved":return"default";case"rejected":return"destructive";default:return"warning"}},v=e=>{switch(e){case"approved":return r("offers.status.approved");case"rejected":return r("offers.status.rejected");case"pending":return r("offers.status.pending");default:return e}},y=u.filter(e=>{var t,r,n,s,i,l,c;const d=(null==(t=e.title)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(n=null==(r=e.request)?void 0:r.title)?void 0:n.toLowerCase().includes(a.toLowerCase()))||(null==(i=null==(s=e.vendor)?void 0:s.full_name)?void 0:i.toLowerCase().includes(a.toLowerCase()))||(null==(c=null==(l=e.vendor)?void 0:l.company_name)?void 0:c.toLowerCase().includes(a.toLowerCase())),u="all"===o||e.client_approval_status===o;return d&&u}),j=()=>{c.length===y.length?d([]):d(y.map(e=>e.id))},b=async(e,t,r)=>{const n="approve"===t?"approved":"rejected";await p(e,n,r)&&(d(t=>t.filter(t=>t!==e)),await f())};return m?n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:s?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]})}):h?n.jsx(yS,{children:n.jsx("div",{className:"p-6 space-y-6",dir:s?"rtl":"ltr",children:n.jsx(jC,{icon:dh,title:r("common.error"),description:h,action:{label:r("common.tryAgain"),onClick:()=>f(),variant:"default"}})})}):n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:s?"rtl":"ltr",children:[n.jsxs("div",{className:_u("flex flex-col gap-4 md:flex-row md:justify-between md:items-start mb-8",s&&"md:flex-row-reverse"),children:[n.jsxs("div",{className:_u(s&&"text-right"),children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:r("offers.title")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:"vendor"===(null==e?void 0:e.role)?r("offers.subtitle.vendor"):r("offers.subtitle.client")})]}),n.jsxs("div",{className:"flex gap-2",children:[c.length>1&&"client"===(null==e?void 0:e.role)&&n.jsx(hE,{offers:u.filter(e=>c.includes(e.id)),onOfferAction:b,children:n.jsxs(ku,{className:"gap-2",children:[n.jsx(Ju,{className:"h-4 w-4"}),r("offers.compare")," (",c.length,")"]})}),"vendor"===(null==e?void 0:e.role)&&n.jsx(wC,{children:n.jsxs(ku,{className:"gap-2",children:[n.jsx(fh,{className:"h-4 w-4"}),r("offers.newOffer")]})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:r("offers.totalOffers"),value:x.total,icon:dh,trend:{value:12,label:r("projects.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:r("offers.pendingOffers"),value:x.pending,icon:gm,variant:"warning"}),n.jsx(eS,{title:r("offers.approvedOffers"),value:x.approved,icon:dm,variant:"success"}),n.jsx(eS,{title:r("offers.rejectedOffers"),value:x.rejected,icon:fm,variant:"destructive"})]}),n.jsxs(Eu,{className:"mb-6",children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",s&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),r("offers.filtersAndSearch")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",s?"right-3":"left-3")}),n.jsx($j,{placeholder:r("offers.searchPlaceholder"),value:a,onChange:e=>i(e.target.value),className:_u(s?"pr-10 text-right":"pl-10"),dir:s?"rtl":"ltr"})]})}),n.jsxs(lC,{value:o,onValueChange:l,children:[n.jsx(dC,{className:"w-full md:w-48",children:n.jsx(cC,{placeholder:r("offers.offerStatus")})}),n.jsxs(hC,{align:s?"end":"start",children:[n.jsx(pC,{value:"all",children:r("offers.allStatus")}),n.jsx(pC,{value:"pending",children:r("offers.status.pending")}),n.jsx(pC,{value:"approved",children:r("offers.status.approved")}),n.jsx(pC,{value:"rejected",children:r("offers.status.rejected")})]})]}),"client"===(null==e?void 0:e.role)&&y.length>1&&n.jsxs(ku,{variant:"outline",size:"sm",onClick:j,className:"gap-2",children:[n.jsx(CE,{checked:c.length===y.length,onCheckedChange:j}),c.length===y.length?r("common.deselectAll"):r("common.selectAll")]})]}),(a||"all"!==o)&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",s&&"flex-row-reverse"),children:[n.jsx("span",{children:r("offers.showingResults").replace("{count}",y.length.toString()).replace("{total}",x.total.toString())}),n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>{i(""),l("all")},children:r("offers.clearFilters")})]})]})]}),0===y.length?n.jsx(jC,{icon:dh,title:r(a||"all"!==o?"offers.noOffersFound":"offers.noOffers"),description:a||"all"!==o?r("offers.tryAdjustingFilters"):"vendor"===(null==e?void 0:e.role)?r("offers.noOffersDesc.vendor"):r("offers.noOffersDesc.client"),action:a||"all"!==o||"vendor"!==(null==e?void 0:e.role)?void 0:{label:r("offers.newOffer"),onClick:()=>{},variant:"default"}}):n.jsx("div",{className:"grid gap-6",children:y.map(t=>{var a,i;return n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsx(Ou,{children:n.jsxs("div",{className:_u("flex justify-between items-start",s&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-start gap-3 flex-1",s&&"flex-row-reverse"),children:["client"===(null==e?void 0:e.role)&&n.jsx(CE,{checked:c.includes(t.id),onCheckedChange:e=>{return r=t.id,void d(e?e=>[...e,r]:e=>e.filter(e=>e!==r));var r},className:"mt-1"}),n.jsxs("div",{className:_u("flex-1",s&&"text-right"),children:[n.jsx(Mu,{className:"text-lg mb-2",children:t.title}),n.jsxs(Pu,{className:"mb-2",children:[r("offers.forRequest")," ",null==(a=t.request)?void 0:a.title]}),t.vendor&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[r("offers.vendor")," ",t.vendor.company_name||t.vendor.full_name]})]})]}),n.jsxs("div",{className:_u("flex flex-col items-end gap-2",s&&"items-start"),children:[n.jsx(Xf,{variant:g(t.client_approval_status),children:v(t.client_approval_status)}),n.jsxs("div",{className:"text-lg font-bold text-primary",children:[null==(i=t.price)?void 0:i.toLocaleString()," ",t.currency]}),n.jsxs("div",{className:_u("flex items-center gap-1 text-sm text-muted-foreground",s&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-3 w-3"}),t.delivery_time_days," ",r("offers.days")]})]})]})}),n.jsxs(Au,{children:[n.jsx("p",{className:_u("text-sm text-muted-foreground mb-4 line-clamp-2",s&&"text-right"),children:t.description}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.jsx(mE,{offerId:t.id,userRole:null==e?void 0:e.role,onUpdated:f,children:n.jsxs(ku,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(Mm,{className:"h-4 w-4"}),r("offers.viewDetails")]})}),t.vendor&&n.jsx(CC,{recipientId:t.vendor_id,recipientName:t.vendor.company_name||t.vendor.full_name,requestId:t.request_id,offerId:t.id,children:n.jsxs(ku,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(nh,{className:"h-4 w-4"}),r("offers.messageVendor")]})}),"client"===(null==e?void 0:e.role)&&"pending"===t.client_approval_status&&n.jsxs(n.Fragment,{children:[n.jsxs(ku,{size:"sm",onClick:()=>b(t.id,"approve"),className:"gap-2",children:[n.jsx(dm,{className:"h-4 w-4"}),r("offers.accept")]}),n.jsxs(ku,{variant:"destructive",size:"sm",onClick:()=>b(t.id,"reject"),className:"gap-2",children:[n.jsx(fm,{className:"h-4 w-4"}),r("offers.reject")]})]})]})]})]},t.id)})})]})})});Wee.displayName="OffersPage";const Hee=Ne.memo(()=>{br();const{t:e,isRTL:t}=cr(),{orders:r,loading:s}=LE(),a=Ne.useMemo(()=>r&&0!==r.length?{total:r.length,pending:r.filter(e=>"pending"===e.status).length,confirmed:r.filter(e=>"confirmed"===e.status).length,completed:r.filter(e=>"completed"===e.status).length}:{total:0,pending:0,confirmed:0,completed:0},[r]),i=e=>{switch(e){case"pending":case"in_progress":default:return"warning";case"confirmed":case"completed":return"default";case"cancelled":return"destructive"}};return s?n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]})}):n.jsx(yS,{children:n.jsxs("div",{className:_u("p-6 space-y-6",t&&"rtl-text-right"),dir:t?"rtl":"ltr",children:[n.jsx("div",{className:_u("flex flex-col gap-4 md:flex-row md:justify-between md:items-start mb-8",t&&"md:flex-row-reverse"),children:n.jsxs("div",{className:_u("w-full",t&&"rtl-text-right"),children:[n.jsx("h1",{className:_u("text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight w-full",t&&"rtl-text-right"),children:e("orders.title")}),n.jsx("p",{className:_u("text-foreground opacity-75 text-sm sm:text-base max-w-2xl w-full",t&&"rtl-text-right"),children:e("orders.subtitle")})]})}),n.jsxs("div",{className:_u("grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",t&&"rtl-text-right"),children:[n.jsx(eS,{title:e("orders.totalOrders"),value:a.total,icon:kh,trend:{value:8,label:e("projects.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:e("orders.pending"),value:a.pending,icon:gm,variant:"warning"}),n.jsx(eS,{title:e("orders.confirmed"),value:a.confirmed,icon:dm,variant:"success"}),n.jsx(eS,{title:e("orders.completed"),value:a.completed,icon:dh,variant:"success"})]}),r&&0===r.length?n.jsx("div",{className:_u(t&&"text-right"),children:n.jsx(jC,{icon:kh,title:e("orders.noOrders"),description:e("orders.noOrdersDesc"),action:{label:e("orders.browseRequests"),onClick:()=>window.location.href="/requests",variant:"default"}})}):n.jsx("div",{className:_u("grid gap-6 md:grid-cols-2 lg:grid-cols-3",t&&"text-right"),children:null==r?void 0:r.map(r=>{var s,a;return n.jsxs(Eu,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(Ou,{children:[n.jsxs("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:[n.jsxs(Mu,{className:_u("text-lg flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(kh,{className:"h-5 w-5"}),e("orders.orderNumber")," #",r.id.slice(0,8)]}),n.jsx(Xf,{variant:i(r.status),children:(a=r.status,e(`orders.status.${a}`)||a)})]}),n.jsx(Pu,{className:_u("line-clamp-2",t&&"text-right"),children:r.description||e("orders.noDescription")})]}),n.jsx(Au,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:_u("flex items-center gap-2 text-sm",t&&"flex-row-reverse"),children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"font-medium",children:["$",(null==(s=r.amount)?void 0:s.toLocaleString())||e("orders.amountNotSet")]})]}),r.delivery_date&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-4 w-4"}),n.jsxs("span",{children:[e("orders.deliveryDate")," ",bj(new Date(r.delivery_date),"MMM dd, yyyy")]})]}),n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx(Zu,{className:"h-4 w-4"}),n.jsxs("span",{children:[e("orders.ordered")," ",bj(new Date(r.date),"MMM dd, yyyy")]})]}),n.jsx("div",{className:"flex gap-2 pt-2",children:n.jsxs(ku,{variant:"outline",size:"sm",className:_u("gap-2 flex-1",t&&"flex-row-reverse"),children:[n.jsx(Mm,{className:"h-4 w-4"}),e("orders.viewDetails")]})})]})})]},r.id)})})]})})});Hee.displayName="OrdersPage";const Yee=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!1),{user:s}=br(),{toast:a}=fp(),i=async()=>{if(s)try{n(!0);const{data:e,error:r}=await mr.from("rfqs").select("\n          *,\n          procurement_categories!category_id(name, name_ar),\n          procurement_categories!subcategory_id(name, name_ar)\n        ").order("created_at",{ascending:!1});if(r)return void a({title:"Error",description:"Failed to fetch RFQs",variant:"destructive"});t(e||[])}catch(e){a({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{n(!1)}};return Ne.useEffect(()=>{i()},[s]),{rfqs:e,loading:r,createRFQ:async e=>{if(!s)return a({title:"Error",description:"You must be logged in to create an RFQ",variant:"destructive"}),null;try{const{data:t,error:r}=await mr.from("rfqs").insert([{client_id:s.id,title:e.title,description:e.description,category_id:e.category_id,subcategory_id:e.subcategory_id,budget_min:e.budget_min,budget_max:e.budget_max,currency:e.currency||"SAR",delivery_location:e.delivery_location,submission_deadline:e.submission_deadline,project_start_date:e.project_start_date,project_end_date:e.project_end_date,priority:e.priority||"medium",is_public:e.is_public??!0,invited_vendors:e.invited_vendors||[],requirements:e.requirements||{},evaluation_criteria:e.evaluation_criteria||{},terms_and_conditions:e.terms_and_conditions}]).select().single();return r?(a({title:"Error",description:r.message||"Failed to create RFQ",variant:"destructive"}),null):(a({title:"Success",description:"RFQ created successfully"}),i(),t)}catch(t){return a({title:"Error",description:"An unexpected error occurred while creating the RFQ",variant:"destructive"}),null}},updateRFQ:async(e,t)=>{try{const{error:r}=await mr.from("rfqs").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);return r?(a({title:"Error",description:"Failed to update RFQ",variant:"destructive"}),!1):(a({title:"Success",description:"RFQ updated successfully"}),i(),!0)}catch(r){return!1}},deleteRFQ:async e=>{try{const{error:t}=await mr.from("rfqs").delete().eq("id",e);return t?(a({title:"Error",description:"Failed to delete RFQ",variant:"destructive"}),!1):(a({title:"Success",description:"RFQ deleted successfully"}),i(),!0)}catch(t){return!1}},refreshRFQs:i}},Kee=({rfq:e,onView:t,onEdit:r,onDelete:s,showActions:a=!0,compact:i=!1})=>{const{language:o}=cr(),l=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-700 border-gray-200";case"published":return"bg-blue-100 text-blue-700 border-blue-200";case"in_progress":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"evaluation":return"bg-purple-100 text-purple-700 border-purple-200";case"awarded":return"bg-green-100 text-green-700 border-green-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";case"completed":return"bg-emerald-100 text-emerald-700 border-emerald-200"}},c=e=>{switch(e){case"low":return"bg-blue-50 text-blue-600 border-blue-200";case"medium":return"bg-yellow-50 text-yellow-600 border-yellow-200";case"high":return"bg-orange-50 text-orange-600 border-orange-200";case"urgent":return"bg-red-50 text-red-600 border-red-200";default:return"bg-gray-50 text-gray-600 border-gray-200"}},d=e=>({draft:"ar"===o?"مسودة":"Draft",published:"ar"===o?"منشور":"Published",in_progress:"ar"===o?"قيد التنفيذ":"In Progress",evaluation:"ar"===o?"تحت التقييم":"Evaluation",awarded:"ar"===o?"تم الترسية":"Awarded",cancelled:"ar"===o?"ملغي":"Cancelled",completed:"ar"===o?"مكتمل":"Completed"}[e]||e),u=e=>({low:"ar"===o?"منخفضة":"Low",medium:"ar"===o?"متوسطة":"Medium",high:"ar"===o?"عالية":"High",urgent:"ar"===o?"عاجل":"Urgent"}[e]||e),m=()=>e.budget_min||e.budget_max?e.budget_min&&e.budget_max?`${e.budget_min.toLocaleString()} - ${e.budget_max.toLocaleString()} ${e.currency}`:e.budget_min?`${"ar"===o?"من":"From"} ${e.budget_min.toLocaleString()} ${e.currency}`:e.budget_max?`${"ar"===o?"حتى":"Up to"} ${e.budget_max.toLocaleString()} ${e.currency}`:"ar"===o?"قابل للتفاوض":"Negotiable":"ar"===o?"قابل للتفاوض":"Negotiable",h=()=>{const t=new Date(e.submission_deadline),r=new Date,n=(t.getTime()-r.getTime())/864e5;return n<=3&&n>0},p=()=>new Date(e.submission_deadline)<new Date;return i?n.jsx(Eu,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>null==t?void 0:t(e),children:n.jsxs(Au,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("h3",{className:"font-semibold text-lg truncate flex-1 mr-2",children:e.title}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Xf,{className:`text-xs px-2 py-1 ${l(e.status)}`,children:d(e.status)}),n.jsx(Xf,{className:`text-xs px-2 py-1 ${c(e.priority)}`,children:u(e.priority)})]})]}),n.jsx("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:e.description}),n.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Zu,{className:"h-3 w-3"}),n.jsx("span",{children:bj(new Date(e.submission_deadline),"MMM dd, yyyy")})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_m,{className:"h-3 w-3"}),n.jsx("span",{children:m()})]})]})]})}):n.jsxs(Eu,{className:"hover:shadow-lg transition-all duration-200",children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(Mu,{className:"text-xl mb-2 flex items-center gap-2",children:[e.title,!e.is_public&&n.jsx(Xf,{variant:"outline",className:"text-xs",children:"ar"===o?"خاص":"Private"})]}),n.jsx(Pu,{className:"line-clamp-2",children:e.description})]}),n.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[n.jsx(Xf,{className:`text-xs px-2 py-1 ${l(e.status)}`,children:d(e.status)}),n.jsx(Xf,{className:`text-xs px-2 py-1 ${c(e.priority)}`,children:u(e.priority)})]})]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-background rounded-md",children:n.jsx(_m,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ar"===o?"الميزانية":"Budget"}),n.jsx("p",{className:"font-semibold text-sm",children:m()})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg "+(p()?"bg-red-50 border border-red-200":h()?"bg-amber-50 border border-amber-200":"bg-muted/50"),children:[n.jsx("div",{className:"p-2 bg-background rounded-md",children:p()?n.jsx(cm,{className:"h-4 w-4 text-red-600"}):n.jsx(Zu,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ar"===o?"الموعد النهائي":"Deadline"}),n.jsxs("p",{className:"font-semibold text-sm "+(p()?"text-red-600":h()?"text-amber-600":""),children:[bj(new Date(e.submission_deadline),"PPP"),p()&&n.jsxs("span",{className:"ml-1 text-xs",children:["(","ar"===o?"منتهي":"Expired",")"]})]})]})]}),e.delivery_location&&n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-background rounded-md",children:n.jsx(Jm,{className:"h-4 w-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ar"===o?"موقع التسليم":"Delivery Location"}),n.jsx("p",{className:"font-semibold text-sm",children:e.delivery_location})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[n.jsx("div",{className:"p-2 bg-background rounded-md",children:n.jsx(gm,{className:"h-4 w-4 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"ar"===o?"تاريخ الإنشاء":"Created"}),n.jsx("p",{className:"font-semibold text-sm",children:bj(new Date(e.created_at),"MMM dd, yyyy")})]})]})]}),(e.project_start_date||e.project_end_date)&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[n.jsx(Tm,{className:"h-4 w-4"}),"ar"===o?"الجدول الزمني للمشروع":"Project Timeline"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.project_start_date&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"ar"===o?"البداية:":"Start:"}),n.jsx("span",{className:"ml-1 font-medium",children:bj(new Date(e.project_start_date),"MMM dd, yyyy")})]}),e.project_end_date&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"ar"===o?"النهاية:":"End:"}),n.jsx("span",{className:"ml-1 font-medium",children:bj(new Date(e.project_end_date),"MMM dd, yyyy")})]})]})]}),a&&n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>null==t?void 0:t(e),className:"flex-1",children:[n.jsx(Mm,{className:"h-4 w-4 mr-2"}),"ar"===o?"عرض":"View"]}),r&&n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>r(e),children:[n.jsx(Ph,{className:"h-4 w-4 mr-2"}),"ar"===o?"تعديل":"Edit"]}),s&&n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>s(e),className:"text-destructive hover:text-destructive",children:[n.jsx(zh,{className:"h-4 w-4 mr-2"}),"ar"===o?"حذف":"Delete"]})]})]})]})},Gee=()=>{const{t:e,isRTL:t}=cr(),{rfqs:r,loading:s}=Yee(),a=St(),[i,o]=Ne.useState(""),[l,c]=Ne.useState("all"),d=Ne.useMemo(()=>r?{total:r.length,published:r.filter(e=>"published"===e.status).length,in_progress:r.filter(e=>"in_progress"===e.status).length,draft:r.filter(e=>"draft"===e.status).length}:{total:0,published:0,in_progress:0,draft:0},[r]),u=Ne.useMemo(()=>r?r.filter(e=>{var t,r;const n=(null==(t=e.title)?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null==(r=e.description)?void 0:r.toLowerCase().includes(i.toLowerCase())),s="all"===l||e.status===l;return n&&s}):[],[r,i,l]);return s?n.jsxs(y9,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):n.jsxs(y9,{title:e("rfq.management"),description:e("rfq.managementDescription"),headerActions:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(ku,{size:"lg",className:"w-full sm:w-auto gap-2",onClick:()=>a("/client/create-rfq"),children:[n.jsx(fh,{className:"h-4 w-4"}),e("rfq.createNewRFQ")]}),n.jsxs(ku,{variant:"outline",size:"lg",className:"w-full sm:w-auto gap-2",onClick:()=>a("/client/create-multiple-rfqs"),children:[n.jsx(fh,{className:"h-4 w-4"}),e("rfq.createMultipleRequests")]})]}),children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:e("rfq.totalRFQs"),value:d.total,icon:Tm,trend:{value:15,label:e("rfq.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:e("rfq.published"),value:d.published,icon:$h,trend:{value:5,label:e("rfq.thisWeek"),isPositive:!0},variant:"success"}),n.jsx(eS,{title:e("rfq.inProgress"),value:d.in_progress,icon:Zh,variant:"default"}),n.jsx(eS,{title:e("rfq.draft"),value:d.draft,icon:mh,variant:"warning"})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("rfq.filtersSearch")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4 rtl:md:space-x-reverse",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("rfq.searchRFQs"),value:i,onChange:e=>o(e.target.value),className:_u(t?"pr-10 text-right":"pl-10")})]})}),n.jsxs(lC,{value:l,onValueChange:c,children:[n.jsx(dC,{className:"w-full md:w-48",children:n.jsx(cC,{placeholder:e("rfq.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:e("rfq.allStatus")}),n.jsx(pC,{value:"draft",children:e("rfq.draft")}),n.jsx(pC,{value:"published",children:e("rfq.published")}),n.jsx(pC,{value:"in_progress",children:e("rfq.inProgress")}),n.jsx(pC,{value:"evaluation",children:e("rfq.evaluation")}),n.jsx(pC,{value:"awarded",children:e("rfq.awarded")}),n.jsx(pC,{value:"cancelled",children:e("rfq.cancelled")}),n.jsx(pC,{value:"completed",children:e("rfq.completed")})]})]})]}),(i||"all"!==l)&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx("span",{children:e("rfq.showingResults").replace("{0}",u.length.toString()).replace("{1}",d.total.toString())}),(i||"all"!==l)&&n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>{o(""),c("all")},children:e("rfq.clearFilters")})]})]})]}),u.length>0?n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(e=>n.jsx(Kee,{rfq:e,showActions:!0,onEdit:()=>a(`/rfqs/${e.id}/edit`),onView:()=>a(`/rfqs/${e.id}`)},e.id))}):n.jsx(Eu,{className:"border-dashed",children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx("div",{className:"mx-auto w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:n.jsx(Tm,{className:"h-12 w-12 text-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:e(i||"all"!==l?"rfq.noRFQsFound":"rfq.createFirstRFQ")}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:e(i||"all"!==l?"rfq.adjustCriteria":"rfq.createFirstRFQDesc")}),!i&&"all"===l&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm max-w-2xl mx-auto mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("rfq.structuredProcurement")})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("rfq.transparentBidding")})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(dm,{className:"h-4 w-4 text-success"}),n.jsx("span",{children:e("rfq.easyComparison")})]})]}),n.jsxs(ku,{size:"lg",className:"w-full md:w-auto gap-2",onClick:()=>a("/client/create-rfq"),children:[n.jsx(fh,{className:"h-4 w-4"}),e("rfq.createFirstRFQ")]})]}),(i||"all"!==l)&&n.jsxs(ku,{variant:"outline",onClick:()=>{o(""),c("all")},className:"gap-2",children:[n.jsx(dh,{className:"h-4 w-4"}),e("rfq.clearFilters")]})]})})]})};function Xee(){var e,t;const{id:r}=function(){let{matches:e}=Ne.useContext(jt),t=e[e.length-1];return t?t.params:{}}(),s=St(),{t:a,isRTL:i}=cr(),{userProfile:o}=br(),{toast:l}=fp(),[c,d]=Ne.useState(null),[u,m]=Ne.useState([]),[h,p]=Ne.useState(!0),[f,x]=Ne.useState(null),[g,v]=Ne.useState({}),[y,j]=Ne.useState({});Ne.useEffect(()=>{r&&b()},[r]);const b=async()=>{try{p(!0);const{data:e,error:t}=await mr.from("rfqs").select("*").eq("id",r).eq("client_id",null==o?void 0:o.user_id).single();if(t)throw t;d(e);const{data:n,error:s}=await mr.from("bids").select("\n          *,\n          vendor:user_profiles!bids_vendor_id_fkey (\n            full_name,\n            company_name,\n            avatar_url,\n            rating,\n            verification_status\n          )\n        ").eq("rfq_id",r).order("created_at",{ascending:!1});if(s)throw s;m(n||[]);const a={},i={};(n||[]).forEach(t=>{var r;a[t.id]={},i[t.id]=t.evaluation_notes||"",null==(r=e.evaluation_criteria)||r.forEach(e=>{a[t.id][e.criterion]=0})}),v(a),j(i)}catch(e){l({title:a("common.error"),description:e.message||a("rfq.failedToLoadBids"),variant:"destructive"})}finally{p(!1)}},w=e=>{if(!(null==c?void 0:c.evaluation_criteria))return 0;let t=0,r=0;return c.evaluation_criteria.forEach(n=>{var s;const a=(null==(s=g[e])?void 0:s[n.criterion])||0;t+=a*n.weight/100,r+=n.weight}),r>0?Math.round(t/r*100):0},N=e=>{switch(e){case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"shortlisted":return"bg-purple-100 text-purple-800";case"awarded":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return h?n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c?n.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>s("/client/rfq-management"),className:"gap-2",children:[n.jsx(zu,{className:"h-4 w-4"}),a("common.back")]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:a("rfq.bidEvaluation")}),n.jsx("p",{className:"text-muted-foreground",children:c.title})]})]}),n.jsx(Xf,{variant:"outline",className:N(c.status),children:a(`rfq.${c.status}`)})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2",children:[n.jsx(Tm,{className:"h-5 w-5"}),a("rfq.rfqSummary")]})}),n.jsx(Au,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.budget")}),n.jsxs("p",{className:"font-semibold",children:[c.budget_min.toLocaleString()," - ",c.budget_max.toLocaleString()," ",c.currency]})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.submissionDeadline")}),n.jsx("p",{className:"font-semibold",children:new Date(c.submission_deadline).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.totalBids")}),n.jsx("p",{className:"font-semibold",children:u.length})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.evaluationCriteria")}),n.jsx("p",{className:"font-semibold",children:(null==(e=c.evaluation_criteria)?void 0:e.length)||0})]})]})})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map(e=>n.jsxs(Eu,{className:_u("transition-all duration-200",(null==f?void 0:f.id)===e.id&&"ring-2 ring-primary"),children:[n.jsx(Ou,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Xh,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:e.vendor.company_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.vendor.full_name})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xf,{variant:"outline",className:N(e.status),children:a(`rfq.${e.status}`)}),e.score&&n.jsxs(Xf,{variant:"secondary",children:[e.score,"%"]})]})]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.bidAmount")}),n.jsxs("p",{className:"font-semibold text-lg",children:[e.amount.toLocaleString()," ",e.currency]})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.deliveryTime")}),n.jsxs("p",{className:"font-semibold",children:[e.delivery_time_days," ",a("rfq.days")]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Th,{className:"h-4 w-4 text-yellow-500"}),n.jsxs("span",{className:"text-sm",children:[e.vendor.rating,"/5"]}),n.jsx(Xf,{variant:"outline",className:"text-xs",children:a(`rfq.${e.vendor.verification_status}`)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ku,{variant:"outline",size:"sm",onClick:()=>x(e),className:"flex-1",children:[n.jsx(Mm,{className:"h-4 w-4 mr-2"}),a("rfq.evaluate")]}),"awarded"===e.status&&n.jsxs(ku,{variant:"default",size:"sm",className:"flex-1",disabled:!0,children:[n.jsx(Vu,{className:"h-4 w-4 mr-2"}),a("rfq.awarded")]})]})]})]},e.id))}),f&&n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Th,{className:"h-5 w-5"}),a("rfq.evaluatingBid")," - ",f.vendor.company_name]}),n.jsx(ku,{variant:"outline",size:"sm",onClick:()=>x(null),children:n.jsx(fm,{className:"h-4 w-4"})})]})}),n.jsxs(Au,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.bidAmount")}),n.jsxs("p",{className:"font-semibold text-lg",children:[f.amount.toLocaleString()," ",f.currency]})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.deliveryTime")}),n.jsxs("p",{className:"font-semibold",children:[f.delivery_time_days," ",a("rfq.days")]})]}),n.jsxs("div",{children:[n.jsx(j_,{className:"text-sm text-muted-foreground",children:a("rfq.currentScore")}),n.jsxs("p",{className:"font-semibold text-lg text-primary",children:[w(f.id),"%"]})]})]}),null==(t=c.evaluation_criteria)?void 0:t.map((e,t)=>{var r,s;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(j_,{className:"font-medium",children:e.criterion}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[a("rfq.weight"),": ",e.weight,"%"]})]}),n.jsx("div",{className:"w-32",children:n.jsx($j,{type:"number",min:"0",max:"100",value:(null==(r=g[f.id])?void 0:r[e.criterion])||0,onChange:t=>{return r=f.id,n=e.criterion,s=Number(t.target.value),void v(e=>({...e,[r]:{...e[r],[n]:s}}));var r,n,s},placeholder:"0"})})]}),n.jsx(G_,{value:(null==(s=g[f.id])?void 0:s[e.criterion])||0,className:"h-2"})]},t)}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(j_,{htmlFor:"evaluation-notes",children:a("rfq.evaluationNotes")}),n.jsx(bC,{id:"evaluation-notes",value:y[f.id]||"",onChange:e=>{return t=f.id,r=e.target.value,void j(e=>({...e,[t]:r}));var t,r},placeholder:a("rfq.enterEvaluationNotes"),rows:4})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ku,{onClick:()=>(async e=>{try{const t=w(e),{error:r}=await mr.from("bids").update({score:t,evaluation_notes:y[e],status:"under_review"}).eq("id",e);if(r)throw r;m(r=>r.map(r=>r.id===e?{...r,score:t,evaluation_notes:y[e],status:"under_review"}:r)),l({title:a("rfq.evaluationSaved"),description:a("rfq.evaluationSavedSuccessfully")})}catch(t){l({title:a("common.error"),description:t.message||a("rfq.failedToSaveEvaluation"),variant:"destructive"})}})(f.id),className:"flex-1",children:[n.jsx(dm,{className:"h-4 w-4 mr-2"}),a("rfq.saveEvaluation")]}),n.jsxs(ku,{variant:"default",onClick:()=>(async e=>{try{const{error:t}=await mr.from("bids").update({status:"awarded"}).eq("id",e);if(t)throw t;const{error:n}=await mr.from("bids").update({status:"rejected"}).eq("rfq_id",r).neq("id",e);if(n)throw n;const{error:s}=await mr.from("rfqs").update({status:"awarded"}).eq("id",r);if(s)throw s;m(t=>t.map(t=>({...t,status:t.id===e?"awarded":"rejected"}))),d(e=>e?{...e,status:"awarded"}:null),l({title:a("rfq.bidAwarded"),description:a("rfq.bidAwardedSuccessfully")})}catch(t){l({title:a("common.error"),description:t.message||a("rfq.failedToAwardBid"),variant:"destructive"})}})(f.id),className:"flex-1",disabled:"awarded"===f.status,children:[n.jsx(Vu,{className:"h-4 w-4 mr-2"}),a("rfq.awardBid")]})]})]})]})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:a("rfq.rfqNotFound")}),n.jsx("p",{className:"text-muted-foreground mb-4",children:a("rfq.rfqNotFoundDescription")}),n.jsx(ku,{onClick:()=>s("/client/rfq-management"),children:a("common.back")})]})}const Qee=Ne.memo(()=>{const{userProfile:e,updateProfile:t}=br(),{t:r,language:s,setLanguage:a,isRTL:i}=cr(),[o,l]=Ne.useState(!1),[c,d]=Ne.useState(!0),[u,m]=Ne.useState({email:!0,push:!0,sms:!1}),{toast:h}=fp(),p=Ne.useMemo(()=>{const t=[null==e?void 0:e.full_name,null==e?void 0:e.company_name,null==e?void 0:e.phone,null==e?void 0:e.address].filter(Boolean).length;return{profileCompletion:Math.round(t/4*100),activeNotifications:Object.values(u).filter(Boolean).length,securityScore:"approved"===(null==e?void 0:e.verification_status)?85:60,lastUpdate:r("settings.lastUpdated")}},[e,u,r]);if("admin"===(null==e?void 0:e.role))return n.jsx(Lt,{to:"/admin/settings",replace:!0});const f=async(t,n)=>{if(!e)return;const s={...u,[t]:n};m(s);try{const{error:t}=await mr.from("user_notification_settings").upsert({user_id:e.user_id,email_notifications:s.email,push_notifications:s.push,sms_notifications:s.sms});t?(m(u),h({title:r("common.error"),description:r("settings.notificationError"),variant:"destructive"})):h({title:r("settings.settingsSaved"),description:r("settings.notificationPrefsUpdated")})}catch(a){m(u),h({title:r("common.error"),description:r("settings.notificationError"),variant:"destructive"})}};return Ne.useEffect(()=>{e&&(async()=>{if(e)try{const{data:t,error:r}=await mr.from("user_notification_settings").select("*").eq("user_id",e.user_id).maybeSingle();if(r&&"PGRST116"!==r.code)return;t&&m({email:t.email_notifications,push:t.push_notifications,sms:t.sms_notifications})}catch(t){}finally{d(!1)}})()},[e]),c?n.jsx(yS,{children:n.jsxs("div",{className:"p-6 space-y-6",dir:i?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]})}):n.jsx(yS,{children:n.jsxs("div",{className:_u("p-6 space-y-6",i&&"text-right"),dir:i?"rtl":"ltr",style:i?{textAlign:"right !important"}:{},children:[n.jsx("div",{className:_u("flex flex-col gap-4 md:flex-row md:justify-between md:items-start mb-8",i&&"md:flex-row-reverse"),children:n.jsxs("div",{className:_u(i&&"text-right"),style:i?{textAlign:"right !important",direction:"rtl",width:"100%"}:{},children:[n.jsx("h1",{className:_u("text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",i&&"text-right"),style:i?{textAlign:"right !important",display:"block !important"}:{},children:r("settings.title")}),n.jsx("p",{className:_u("text-foreground opacity-75 text-sm sm:text-base max-w-2xl",i&&"text-right"),style:i?{textAlign:"right !important",display:"block !important"}:{},children:r("settings.subtitle")})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:r("settings.profileCompletion"),value:`${p.profileCompletion}%`,icon:Xh,variant:p.profileCompletion>=75?"success":"warning",className:_u(i&&"text-right")}),n.jsx(eS,{title:r("settings.activeNotifications"),value:p.activeNotifications,icon:Wu,description:r("settings.enabledNotificationTypes"),className:_u(i&&"text-right")}),n.jsx(eS,{title:r("settings.securityScore"),value:`${p.securityScore}/100`,icon:Sh,variant:p.securityScore>=80?"success":"warning",className:_u(i&&"text-right")}),n.jsx(eS,{title:r("settings.lastUpdated"),value:p.lastUpdate,icon:gm,className:_u(i&&"text-right")})]}),n.jsxs("div",{className:"grid gap-6",children:[n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(i&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",i&&"flex-row-reverse"),children:[n.jsx(Im,{className:"h-5 w-5"}),r("settings.languageAndRegion")]}),n.jsx(Pu,{className:_u(i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:r("settings.languageDescription")})]}),n.jsx(Au,{className:_u(i&&"text-right"),children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:_u(i&&"text-right"),style:i?{textAlign:"right !important",direction:"rtl"}:{},children:[n.jsx(j_,{className:_u(i&&"text-right block"),style:i?{textAlign:"right !important",display:"block !important"}:{},children:r("settings.language")}),n.jsx("div",{className:_u(i&&"rtl-language-selector"),style:i?{direction:"rtl"}:{},children:n.jsxs(lC,{value:s,onValueChange:a,children:[n.jsx(dC,{className:_u("w-full",i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:n.jsx(cC,{})}),n.jsxs(hC,{align:i?"end":"start",className:_u(i&&"text-right rtl-select-content"),style:i?{textAlign:"right !important",direction:"rtl"}:{},children:[n.jsx(pC,{value:"en",className:_u(i&&"text-right flex-row-reverse pr-8 pl-2 rtl-select-item"),style:i?{textAlign:"right !important",direction:"rtl",paddingLeft:"0.5rem !important",paddingRight:"2rem !important"}:{},children:"English"}),n.jsx(pC,{value:"ar",className:_u(i&&"text-right flex-row-reverse pr-8 pl-2 rtl-select-item"),style:i?{textAlign:"right !important",direction:"rtl",paddingLeft:"0.5rem !important",paddingRight:"2rem !important"}:{},children:"العربية"})]})]})})]})})})]}),n.jsxs(Eu,{children:[n.jsxs(Ou,{className:_u(i&&"text-right"),children:[n.jsxs(Mu,{className:_u("flex items-center gap-2",i&&"flex-row-reverse"),children:[n.jsx(Wu,{className:"h-5 w-5"}),r("settings.notifications")]}),n.jsx(Pu,{className:_u(i&&"text-right"),style:i?{textAlign:"right !important"}:{},children:r("settings.notificationsDescription")})]}),n.jsxs(Au,{className:_u("space-y-4",i&&"text-right"),children:[n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(i&&"text-right"),style:i?{textAlign:"right !important",direction:"rtl",flex:"1",marginRight:"16px"}:{flex:"1"},children:[n.jsx(j_,{className:_u(i&&"text-right block w-full"),style:i?{textAlign:"right !important",display:"block !important",width:"100% !important"}:{},children:r("settings.emailNotifications")}),n.jsx("p",{className:_u("text-sm text-muted-foreground",i&&"text-right block w-full"),style:i?{textAlign:"right !important",display:"block !important",width:"100% !important"}:{},children:r("settings.emailNotificationsDesc")})]}),n.jsx(O5,{checked:u.email,onCheckedChange:e=>f("email",e),disabled:o,style:i?{marginLeft:"0",marginRight:"auto"}:{}})]}),n.jsxs("div",{className:_u("flex items-center justify-between",i&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u(i&&"text-right"),style:i?{textAlign:"right !important",direction:"rtl",flex:"1",marginRight:"16px"}:{flex:"1"},children:[n.jsx(j_,{className:_u(i&&"text-right block w-full"),style:i?{textAlign:"right !important",display:"block !important",width:"100% !important"}:{},children:r("settings.pushNotifications")}),n.jsx("p",{className:_u("text-sm text-muted-foreground",i&&"text-right block w-full"),style:i?{textAlign:"right !important",display:"block !important",width:"100% !important"}:{},children:r("settings.pushNotificationsDesc")})]}),n.jsx(O5,{checked:u.push,onCheckedChange:e=>f("push",e),disabled:o,style:i?{marginLeft:"0",marginRight:"auto"}:{}})]})]})]})]})]})})});Qee.displayName="SettingsPage";const Zee=({value:e,onValueChange:t,placeholder:r="Select a category",includeSubcategories:s=!0,className:a})=>{const{categories:i,loading:o}=gC(),{language:l}=cr();if(o)return n.jsx("div",{className:"flex items-center justify-center p-4",children:n.jsx(lb,{size:"sm"})});return n.jsxs(lC,{value:e,onValueChange:t,children:[n.jsx(dC,{className:a,children:n.jsx(cC,{placeholder:r})}),n.jsx(hC,{children:(()=>{const e=[];return i.forEach(t=>{t.slug&&"string"==typeof t.slug&&""!==t.slug.trim()&&e.push(t),s&&t.children&&t.children.length>0&&t.children.forEach(r=>{r.slug&&"string"==typeof r.slug&&""!==r.slug.trim()&&e.push({...r,isChild:!0,parentName:"ar"===l?t.name_ar:t.name_en})})}),e})().map(e=>{const t=e.slug&&""!==e.slug.trim()?e.slug:`category-${e.id}`;return n.jsxs(pC,{value:t,children:[e.isChild&&"  ↳ ","ar"===l?e.name_ar:e.name_en,e.isChild&&` (${e.parentName})`]},e.id)})})]})},Jee=({open:e,onOpenChange:t,vendorId:r,vendorName:s})=>{const{t:a,isRTL:i,language:o}=cr(),l="ar"===o,{createRequest:c}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!0),{user:s}=br(),a=async()=>{if(s)try{n(!0);const{data:e,error:r}=await mr.from("requests").select("\n          *,\n          offers (*)\n        ").eq("client_id",s.id).order("created_at",{ascending:!1});if(r)throw r;const a=(e||[]).map(e=>({...e,user_id:e.client_id}));t(a)}catch(e){}finally{n(!1)}};Ne.useEffect(()=>{a()},[s]);const i=async e=>{try{await mr.from("activity_feed").insert(e)}catch(t){}};return{requests:e,loading:r,refetch:a,formatBudget:e=>e.budget_min||e.budget_max?e.budget_min&&e.budget_max?`${e.budget_min.toLocaleString()} - ${e.budget_max.toLocaleString()}`:e.budget_min?`From ${e.budget_min.toLocaleString()}`:e.budget_max?`Up to ${e.budget_max.toLocaleString()}`:"Budget not specified":"Budget not specified",getOffersCount:e=>{var t;return(null==(t=e.offers)?void 0:t.length)||0},createRequest:async e=>{if(!s)throw new Error("User not authenticated");try{const t={client_id:s.id,title:e.title,description:e.description,category:e.category,budget_min:e.budget_min,budget_max:e.budget_max,location:e.location,deadline:e.deadline,urgency:e.urgency,currency:e.currency||"SAR",requirements:e.requirements||{}},{data:r,error:n}=await mr.from("requests").insert([t]).select().single();if(n)throw n;return await i({user_id:s.id,activity_type:"request_created",description:`Created request: ${e.title}`,title:`New ${e.category} request`,metadata:{category:e.category,budget_range:`${e.budget_min||0} - ${e.budget_max||0}`,urgency:e.urgency}}),await a(),r}catch(t){throw t}},updateRequest:async(e,t)=>{if(!s)throw new Error("User not authenticated");try{const{data:r,error:n}=await mr.from("requests").update(t).eq("id",e).eq("client_id",s.id).select().single();if(n)throw n;return await i({user_id:s.id,activity_type:"request_updated",description:`Updated request: ${t.title||"Request"}`,title:"Request updated",metadata:{request_id:e,updated_fields:Object.keys(t)}}),await a(),r}catch(r){throw r}},deleteRequest:async e=>{if(!s)throw new Error("User not authenticated");try{const{error:t}=await mr.from("requests").delete().eq("id",e).eq("client_id",s.id);if(t)throw t;await i({user_id:s.id,activity_type:"request_deleted",description:"Deleted request",title:"Request deleted",metadata:{request_id:e}}),await a()}catch(t){throw t}}}})(),{toast:d}=fp(),[u,m]=Ne.useState({title:"",description:"",category:"",budgetMin:"",budgetMax:"",currency:"SAR",deadline:"",location:"",urgency:"medium"}),[h,p]=Ne.useState(!1);return n.jsx(Sb,{open:e,onOpenChange:t,children:n.jsxs(Ob,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsxs(Ab,{className:"flex items-center gap-2",children:[n.jsx(Tm,{className:"h-5 w-5"}),l?`طلب خاص إلى ${s}`:`Private Request to ${s}`]})}),n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u.title.trim()&&u.description.trim()&&u.category){p(!0);try{await c({title:u.title,description:u.description,category:u.category,budget_min:u.budgetMin?parseFloat(u.budgetMin):void 0,budget_max:u.budgetMax?parseFloat(u.budgetMax):void 0,location:u.location,deadline:u.deadline,urgency:u.urgency}),d({title:l?"تم الإرسال":"Request Sent",description:l?`تم إرسال الطلب الخاص إلى ${s}`:`Private request sent to ${s}`}),t(!1),m({title:"",description:"",category:"",budgetMin:"",budgetMax:"",currency:"SAR",deadline:"",location:"",urgency:"medium"})}catch(r){d({title:l?"خطأ":"Error",description:l?"فشل في إرسال الطلب":"Failed to send request",variant:"destructive"})}finally{p(!1)}}else d({title:l?"خطأ":"Error",description:l?"يرجى ملء جميع الحقول المطلوبة":"Please fill in all required fields",variant:"destructive"})},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"title",children:[l?"عنوان الطلب":"Request Title"," *"]}),n.jsx($j,{id:"title",value:u.title,onChange:e=>m({...u,title:e.target.value}),placeholder:l?"أدخل عنوان الطلب":"Enter request title",required:!0})]}),n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"category",children:[l?"الفئة":"Category"," *"]}),n.jsx(Zee,{value:u.category,onValueChange:e=>m({...u,category:e}),placeholder:l?"اختر فئة":"Select a category"})]}),n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"location",className:"flex items-center gap-2",children:[n.jsx(Jm,{className:"h-4 w-4"}),l?"الموقع":"Location"]}),n.jsx($j,{id:"location",value:u.location,onChange:e=>m({...u,location:e.target.value}),placeholder:l?"أدخل الموقع":"Enter location"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"budgetMin",className:"flex items-center gap-2",children:[n.jsx(_m,{className:"h-4 w-4"}),l?"الحد الأدنى":"Min Budget"]}),n.jsx($j,{id:"budgetMin",type:"number",value:u.budgetMin,onChange:e=>m({...u,budgetMin:e.target.value}),placeholder:"0"})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"budgetMax",children:l?"الحد الأقصى":"Max Budget"}),n.jsx($j,{id:"budgetMax",type:"number",value:u.budgetMax,onChange:e=>m({...u,budgetMax:e.target.value}),placeholder:"0"})]})]}),n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"deadline",className:"flex items-center gap-2",children:[n.jsx(Zu,{className:"h-4 w-4"}),l?"الموعد النهائي":"Deadline"]}),n.jsx($j,{id:"deadline",type:"date",value:u.deadline,onChange:e=>m({...u,deadline:e.target.value})})]}),n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"urgency",className:"flex items-center gap-2",children:[n.jsx(gm,{className:"h-4 w-4"}),l?"مستوى الأولوية":"Urgency Level"]}),n.jsxs("select",{id:"urgency",className:"w-full p-2 border rounded-md",value:u.urgency,onChange:e=>m({...u,urgency:e.target.value}),children:[n.jsx("option",{value:"low",children:l?"منخفض":"Low"}),n.jsx("option",{value:"medium",children:l?"متوسط":"Medium"}),n.jsx("option",{value:"high",children:l?"عالي":"High"}),n.jsx("option",{value:"urgent",children:l?"عاجل":"Urgent"})]})]})]})]}),n.jsxs("div",{children:[n.jsxs(j_,{htmlFor:"description",children:[l?"وصف الطلب":"Request Description"," *"]}),n.jsx(bC,{id:"description",value:u.description,onChange:e=>m({...u,description:e.target.value}),placeholder:l?"اوصف متطلباتك بالتفصيل...":"Describe your requirements in detail...",className:"min-h-24",required:!0})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(ku,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:l?"إلغاء":"Cancel"}),n.jsx(ku,{type:"submit",disabled:h,children:h?l?"جاري الإرسال...":"Sending...":l?"إرسال الطلب الخاص":"Send Private Request"})]})]})]})})},ete=()=>{const{user:e}=br(),{showSuccess:t,showError:r}=dy(),[n,s]=Ne.useState({callId:null,status:"idle",isVideo:!0,isMuted:!1,isVideoEnabled:!0,isScreenSharing:!1,duration:0,remoteUserId:null,error:null}),a=Ne.useRef(null),i=Ne.useRef(null),o=Ne.useRef(null),l=Ne.useRef(null),c=Ne.useRef(null),d=Ne.useRef(null),u=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}],m=Ne.useCallback(()=>{a.current||(a.current=new RTCPeerConnection({iceServers:u}),a.current.onicecandidate=t=>{t.candidate&&l.current&&l.current.send(JSON.stringify({type:"ice-candidate",callId:n.callId,targetUserId:n.remoteUserId,userId:null==e?void 0:e.id,data:t.candidate}))},a.current.ontrack=e=>{o.current=e.streams[0]},a.current.onconnectionstatechange=()=>{var e;const t=null==(e=a.current)?void 0:e.connectionState;"connected"===t?(s(e=>({...e,status:"connected",error:null})),f()):"failed"!==t&&"disconnected"!==t||(s(e=>({...e,error:"Connection failed"})),_())})},[n.callId,n.remoteUserId,null==e?void 0:e.id]),h=Ne.useCallback(()=>{if(l.current)return;l.current=new WebSocket("wss://jpxqywtitjjphkiuokov.functions.supabase.co/functions/v1/webrtc-signaling"),l.current.onopen=()=>{},l.current.onmessage=async e=>{const t=JSON.parse(e.data);switch(t.type){case"offer":await g(t.data);break;case"answer":await v(t.data);break;case"ice-candidate":await y(t.data);break;case"call-response":j(t);break;case"user-joined":break;case"user-left":_();break;case"error":s(e=>({...e,error:t.message}))}},l.current.onclose=()=>{l.current=null},l.current.onerror=e=>{s(e=>({...e,error:"Signaling connection failed"}))}},[]),p=Ne.useCallback(async(e=!0)=>{try{return i.current=await navigator.mediaDevices.getUserMedia({video:!!e,audio:!0}),i.current}catch(t){throw s(e=>({...e,error:"Failed to access camera/microphone"})),t}},[]),f=Ne.useCallback(()=>{d.current=new Date,c.current=setInterval(()=>{if(d.current){const e=Math.floor((Date.now()-d.current.getTime())/1e3);s(t=>({...t,duration:e}))}},1e3)},[]),x=Ne.useCallback(()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),g=Ne.useCallback(async t=>{if(!a.current)return;await a.current.setRemoteDescription(t),i.current&&i.current.getTracks().forEach(e=>{a.current.addTrack(e,i.current)});const r=await a.current.createAnswer();await a.current.setLocalDescription(r),l.current&&l.current.send(JSON.stringify({type:"answer",callId:n.callId,targetUserId:n.remoteUserId,userId:null==e?void 0:e.id,data:r}))},[n.callId,n.remoteUserId,null==e?void 0:e.id]),v=Ne.useCallback(async e=>{a.current&&await a.current.setRemoteDescription(e)},[]),y=Ne.useCallback(async e=>{a.current&&await a.current.addIceCandidate(e)},[]),j=Ne.useCallback(t=>{t.accepted?(s(e=>({...e,status:"connecting"})),l.current&&l.current.send(JSON.stringify({type:"join-room",callId:n.callId,userId:null==e?void 0:e.id}))):(s(e=>({...e,status:"ended",error:"Call declined"})),r("Call was declined"),_())},[n.callId,null==e?void 0:e.id,r]),b=Ne.useCallback(async(t,n=!0,a)=>{var i;try{s(e=>({...e,status:"calling",remoteUserId:t,isVideo:n,error:null})),await p(n),h(),m(),await new Promise(e=>{const t=()=>{var r;(null==(r=l.current)?void 0:r.readyState)===WebSocket.OPEN?e(!0):setTimeout(t,100)};t()}),l.current.send(JSON.stringify({type:"call-invitation",userId:null==e?void 0:e.id,targetUserId:t,data:{callType:n?"video":"audio",callerName:(null==(i=null==e?void 0:e.user_metadata)?void 0:i.full_name)||"Unknown",conversationId:a}}))}catch(o){s(e=>({...e,error:"Failed to start call",status:"idle"})),r("Failed to start call")}},[e,p,h,m,r]),w=Ne.useCallback(async(t,n,a,i=!0)=>{try{s(e=>({...e,callId:t,status:"connecting",remoteUserId:a,isVideo:i,error:null})),await p(i),h(),m(),await new Promise(e=>{const t=()=>{var r;(null==(r=l.current)?void 0:r.readyState)===WebSocket.OPEN?e(!0):setTimeout(t,100)};t()}),l.current.send(JSON.stringify({type:"call-response",userId:null==e?void 0:e.id,data:{invitationId:n,callId:t,accepted:!0}})),l.current.send(JSON.stringify({type:"join-room",callId:t,userId:null==e?void 0:e.id}))}catch(o){s(e=>({...e,error:"Failed to answer call",status:"idle"})),r("Failed to answer call")}},[e,p,h,m,r]),N=Ne.useCallback((t,r)=>{l.current&&l.current.send(JSON.stringify({type:"call-response",userId:null==e?void 0:e.id,data:{invitationId:r,callId:t,accepted:!1}}))},[null==e?void 0:e.id]),_=Ne.useCallback(async()=>{if(x(),n.callId&&"connected"===n.status){const e=new Date,t=d.current?Math.floor((e.getTime()-d.current.getTime())/1e3):0;await mr.from("video_calls").update({status:"ended",ended_at:e.toISOString(),duration:t}).eq("id",n.callId)}l.current&&n.callId&&l.current.send(JSON.stringify({type:"leave-room",callId:n.callId,userId:null==e?void 0:e.id})),i.current&&(i.current.getTracks().forEach(e=>e.stop()),i.current=null),a.current&&(a.current.close(),a.current=null),l.current&&(l.current.close(),l.current=null),s({callId:null,status:"idle",isVideo:!0,isMuted:!1,isVideoEnabled:!0,isScreenSharing:!1,duration:0,remoteUserId:null,error:null}),t("Call ended")},[n,null==e?void 0:e.id,x,t]),S=Ne.useCallback(()=>{if(i.current){const e=i.current.getAudioTracks()[0];e&&(e.enabled=!e.enabled,s(t=>({...t,isMuted:!e.enabled})))}},[]),k=Ne.useCallback(()=>{if(i.current){const e=i.current.getVideoTracks()[0];e&&(e.enabled=!e.enabled,s(t=>({...t,isVideoEnabled:e.enabled})))}},[]),C=Ne.useCallback(()=>i.current,[]),E=Ne.useCallback(()=>o.current,[]);return Ne.useEffect(()=>()=>{_()},[]),{callState:n,startCall:b,answerCall:w,declineCall:N,endCall:_,toggleMute:S,toggleVideo:k,getLocalStream:C,getRemoteStream:E}},tte=({isOpen:e,onClose:t,recipientId:r,recipientName:s,recipientAvatar:a,isIncoming:i=!1,incomingCall:o,conversationId:l})=>{const{callState:c,startCall:d,answerCall:u,declineCall:m,endCall:h,toggleMute:p,toggleVideo:f,getLocalStream:x,getRemoteStream:g}=ete(),[v,y]=Ne.useState(!1),[j,b]=Ne.useState(!1),w=Ne.useRef(null),N=Ne.useRef(null),_=()=>{h(),t()};Ne.useEffect(()=>{const e=()=>{const e=x(),t=g();w.current&&e&&(w.current.srcObject=e),N.current&&t&&(N.current.srcObject=t)};if("connected"===c.status||"connecting"===c.status){e();const t=setInterval(e,1e3);return()=>clearInterval(t)}},[c.status,x,g]),Ne.useEffect(()=>{e&&!i&&"idle"===c.status&&r&&(async(e=!0)=>{r&&await d(r,e,l)})(!0)},[e,i,c.status,r]),Ne.useEffect(()=>{if("ended"===c.status&&e){const e=setTimeout(()=>{t()},2e3);return()=>clearTimeout(e)}},[c.status,e,t]);return n.jsx(Sb,{open:e,onOpenChange:t,children:n.jsx(Ob,{className:_u("max-w-4xl w-full p-0 border-0 bg-black text-white overflow-hidden",v?"h-64":"h-[600px]"),children:n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),"connected"!==c.status&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-primary/20 to-accent/20",children:n.jsxs("div",{className:"text-center",children:[n.jsxs(Qx,{className:"h-24 w-24 mx-auto mb-4 border-4 border-white/20",children:[n.jsx(Zx,{src:a,alt:s}),n.jsx(Jx,{className:"text-2xl bg-primary text-primary-foreground",children:s.charAt(0).toUpperCase()})]}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:s}),n.jsx("p",{className:"text-white/70",children:(()=>{switch(c.status){case"calling":return"Calling...";case"ringing":return i?"Incoming call":"Ringing...";case"connecting":return"Connecting...";case"connected":return"Connected";case"ended":return"Call ended";default:return"Initializing..."}})()}),c.error&&n.jsx("p",{className:"text-red-400 text-sm mt-2",children:c.error})]})}),(c.isVideo||"connected"===c.status)&&n.jsxs("div",{className:"absolute top-4 right-4 w-48 h-36 bg-black rounded-lg overflow-hidden border-2 border-white/20",children:[n.jsx("video",{ref:w,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),!c.isVideoEnabled&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:n.jsx(Jh,{className:"h-8 w-8 text-white/70"})})]}),"connected"===c.status&&n.jsx("div",{className:"absolute top-4 left-4 bg-black/50 backdrop-blur-sm px-3 py-2 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm font-medium",children:(e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`})(c.duration)})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-6",children:n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i&&("idle"===c.status||"ringing"===c.status)&&n.jsxs(n.Fragment,{children:[n.jsx(ku,{variant:"destructive",size:"lg",className:"rounded-full w-16 h-16",onClick:()=>{o&&m(o.callId,o.id),t()},children:n.jsx(hh,{className:"h-6 w-6"})}),n.jsx(ku,{variant:"default",size:"lg",className:"rounded-full w-16 h-16 bg-green-600 hover:bg-green-700",onClick:async()=>{o&&await u(o.callId,o.id,o.inviterId,"video"===o.callType)},children:n.jsx(ph,{className:"h-6 w-6"})})]}),"connected"===c.status&&n.jsxs(n.Fragment,{children:[n.jsx(ku,{variant:c.isMuted?"destructive":"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:p,children:c.isMuted?n.jsx(sh,{className:"h-5 w-5"}):n.jsx(ah,{className:"h-5 w-5"})}),n.jsx(ku,{variant:c.isVideoEnabled?"secondary":"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:f,children:c.isVideoEnabled?n.jsx(ep,{className:"h-5 w-5"}):n.jsx(Jh,{className:"h-5 w-5"})}),n.jsx(ku,{variant:j?"default":"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>b(!j),children:n.jsx(lh,{className:"h-5 w-5"})}),n.jsx(ku,{variant:"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>y(!v),children:v?n.jsx(eh,{className:"h-5 w-5"}):n.jsx(ih,{className:"h-5 w-5"})}),n.jsx(ku,{variant:"destructive",size:"lg",className:"rounded-full w-16 h-16",onClick:_,children:n.jsx(hh,{className:"h-6 w-6"})})]}),("connecting"===c.status||"calling"===c.status)&&n.jsx(ku,{variant:"destructive",size:"lg",className:"rounded-full w-16 h-16",onClick:_,children:n.jsx(hh,{className:"h-6 w-6"})})]})})]})})})},rte=({children:e,vendorId:t})=>{var r;const{t:s,isRTL:a,language:i}=cr(),o="ar"===i,{user:l}=br(),c=St(),{toast:d}=fp(),{startConversation:u}=_C(),{startCall:m}=ete(),[h,p]=Ne.useState(!1),[f,x]=Ne.useState(!1),[g,v]=Ne.useState(!1),[y,j]=Ne.useState(!1),[b,w]=Ne.useState(!1),{vendorProfile:N,loading:_,error:S}=(e=>{const[t,r]=Ne.useState(null),[n,s]=Ne.useState(!0),[a,i]=Ne.useState(null),o=or("VendorProfile"),l=async()=>{var t,n,a;if(e)try{s(!0),i(null),o.debug("Fetching vendor profile",{vendorId:e});const{data:l,error:c}=await mr.from("user_profiles").select("*").eq("id",e).eq("role","vendor").single();if(c)throw c;o.debug("Profile data fetched",{profileData:l});const{data:d}=await mr.from("vendor_profiles_extended").select("*").eq("vendor_id",e).single();o.debug("Extended data fetched",{extendedData:d});const{data:u,error:m}=await mr.from("vendor_categories").select("\n          categories (\n            id,\n            name_en,\n            name_ar,\n            slug\n          )\n        ").eq("vendor_id",e);o.debug("Categories data from vendor_categories table",{categoriesData:u,categoriesError:m});const h=(null==l?void 0:l.categories)||[];o.debug("Legacy categories from user_profiles",{legacyCategories:h});const[p,f]=await Promise.all([mr.from("offers").select("id, status").eq("vendor_id",e),mr.from("orders").select("id, status").eq("vendor_id",e)]),x=(null==(t=p.data)?void 0:t.length)||0,g=(null==(n=f.data)?void 0:n.filter(e=>"completed"===e.status).length)||0,v=(null==(a=f.data)||a.length,x>0?Math.min(95,70+g/x*25):0);let y=[];u&&u.length>0&&(y=u.map(e=>e.categories).filter(Boolean)),0===y.length&&h.length>0&&(y=h.map(e=>({id:`legacy-${e}`,name_en:e,name_ar:e,slug:e.toLowerCase().replace(/\s+/g,"-")}))),o.debug("Final processed categories",{processedCategories:y});const j={...l,...d,categories:y,total_offers:x,total_completed_orders:g,avg_rating:4.2+.6*Math.random(),total_reviews:Math.floor(.8*g),response_rate:v,avg_response_time_hours:Math.floor(12*Math.random())+1};o.debug("Final combined profile",{combinedProfile:j}),r(j)}catch(hte){o.error("Error fetching vendor profile",{error:hte,vendorId:e}),i(hte.message)}finally{s(!1)}};return Ne.useEffect(()=>{l()},[e]),{vendorProfile:t,loading:n,error:a,refetch:l}})(t);return _?n.jsxs(Sb,{open:h,onOpenChange:p,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsx(Ob,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(lb,{})})})]}):S||!N?n.jsxs(Sb,{open:h,onOpenChange:p,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsx(Ob,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("p",{className:"text-muted-foreground",children:o?"فشل في تحميل بيانات المورد":"Failed to load vendor profile"})})})]}):n.jsxs(n.Fragment,{children:[n.jsxs(Sb,{open:h,onOpenChange:p,children:[n.jsx(kb,{asChild:!0,children:e}),n.jsxs(Ob,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsx(Ab,{className:"text-2xl font-bold",children:o?"ملف المورد":"Vendor Profile"})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-6 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs(Qx,{className:"h-24 w-24 border-4 border-white shadow-lg",children:[n.jsx(Zx,{src:N.avatar_url,alt:N.full_name}),n.jsx(Jx,{className:"text-xl font-bold bg-primary text-primary-foreground",children:(null==(r=N.company_name)?void 0:r.charAt(0))||N.full_name.charAt(0)})]})}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:N.company_name||N.full_name}),N.company_name&&n.jsx("p",{className:"text-lg text-muted-foreground",children:N.full_name})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("div",{className:"flex items-center",children:[(k=N.avg_rating,Array.from({length:5},(e,t)=>n.jsx(Th,{className:"h-4 w-4 "+(t<Math.floor(k)?"fill-yellow-400 text-yellow-400":"text-gray-300")},t))),n.jsx("span",{className:"ml-2 font-medium",children:N.avg_rating.toFixed(1)}),n.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",N.total_reviews," ",o?"تقييم":"reviews",")"]})]}),(e=>{const t={verified:{color:"bg-green-100 text-green-800",icon:um,text:o?"موثق":"Verified"},pending:{color:"bg-yellow-100 text-yellow-800",icon:gm,text:o?"قيد المراجعة":"Pending"},rejected:{color:"bg-red-100 text-red-800",icon:Sh,text:o?"مرفوض":"Rejected"}},r=t[e]||t.pending,s=r.icon;return n.jsxs(Xf,{className:r.color,children:[n.jsx(s,{className:"h-3 w-3 mr-1"}),r.text]})})(N.verification_status)]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[N.address&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Jm,{className:"h-4 w-4 mr-1"}),N.address]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Zu,{className:"h-4 w-4 mr-1"}),o?"عضو منذ":"Member since"," ",bj(new Date(N.created_at),"MMM yyyy")]}),N.established_year&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Gu,{className:"h-4 w-4 mr-1"}),o?`تأسست في ${N.established_year}`:`Est. ${N.established_year}`]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 min-w-[140px]",children:[n.jsx(ku,{onClick:async()=>{if(l&&N){j(!0);try{await u(N.user_id)&&(d({title:o?"تم بدء المحادثة":"Conversation Started",description:o?"تم توجيهك إلى الرسائل":"Redirected to messages"}),p(!1),c("/messages"))}catch(e){d({title:o?"خطأ":"Error",description:o?"فشل في بدء المحادثة":"Failed to start conversation",variant:"destructive"})}finally{j(!1)}}},disabled:y||!l,className:"w-full",children:y?n.jsx(lb,{}):n.jsxs(n.Fragment,{children:[n.jsx(rh,{className:"h-4 w-4 mr-2"}),o?"رسالة مباشرة":"Direct Message"]})}),n.jsx(ku,{variant:"outline",onClick:async()=>{if(l&&N){w(!0);try{await m(N.user_id,!0),v(!0),d({title:o?"تم بدء المكالمة":"Call Started",description:o?"جاري الاتصال...":"Connecting..."})}catch(e){d({title:o?"خطأ":"Error",description:o?"فشل في بدء المكالمة":"Failed to start call",variant:"destructive"})}finally{w(!1)}}},disabled:b||!l,className:"w-full",children:b?n.jsx(lb,{}):n.jsxs(n.Fragment,{children:[n.jsx(ep,{className:"h-4 w-4 mr-2"}),o?"مكالمة مرئية":"Video Call"]})})]})]}),n.jsxs(BS,{defaultValue:"overview",className:"w-full",children:[n.jsxs($S,{className:"grid w-full grid-cols-4",children:[n.jsx(US,{value:"overview",children:o?"نظرة عامة":"Overview"}),n.jsx(US,{value:"details",children:o?"التفاصيل":"Details"}),n.jsx(US,{value:"portfolio",children:o?"أعمال سابقة":"Portfolio"}),n.jsx(US,{value:"stats",children:o?"إحصائيات":"Statistics"})]}),n.jsx(VS,{value:"overview",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Tm,{className:"h-5 w-5 mr-2"}),o?"نبذة عنا":"About"]})}),n.jsx(Au,{children:n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:N.bio||(o?"لا توجد معلومات متاحة":"No information available")})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Lh,{className:"h-5 w-5 mr-2"}),o?"التخصصات":"Specializations"]})}),n.jsx(Au,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:N.categories&&N.categories.length>0?N.categories.map((e,t)=>n.jsx(Xf,{variant:"secondary",children:o?e.name_ar:e.name_en},e.id||t)):n.jsx("p",{className:"text-muted-foreground text-sm",children:o?"لم يتم تحديد تخصصات":"No specializations specified"})})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(ph,{className:"h-5 w-5 mr-2"}),o?"معلومات التواصل":"Contact Information"]})}),n.jsxs(Au,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Zm,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsx("span",{children:N.email})]}),N.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(ph,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsx("span",{children:N.phone})]}),N.portfolio_url&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Im,{className:"h-4 w-4 mr-2 text-muted-foreground"}),n.jsxs("a",{href:N.portfolio_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center",children:[o?"موقع الشركة":"Website",n.jsx(Em,{className:"h-3 w-3 ml-1"})]})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx($h,{className:"h-5 w-5 mr-2"}),o?"إحصائيات سريعة":"Quick Stats"]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"معدل الاستجابة":"Response Rate"}),n.jsxs("span",{className:"font-medium",children:[N.response_rate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"وقت الاستجابة":"Response Time"}),n.jsxs("span",{className:"font-medium",children:[N.avg_response_time_hours,"h"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"المشاريع المكتملة":"Completed Projects"}),n.jsx("span",{className:"font-medium",children:N.total_completed_orders})]})]})]})]})}),n.jsx(VS,{value:"details",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Gu,{className:"h-5 w-5 mr-2"}),o?"معلومات الشركة":"Business Information"]})}),n.jsxs(Au,{className:"space-y-3",children:[N.business_size&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"حجم الشركة":"Business Size"}),n.jsx("span",{children:N.business_size})]}),N.employee_count&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"عدد الموظفين":"Employee Count"}),n.jsx("span",{children:N.employee_count})]}),N.experience_years&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:o?"سنوات الخبرة":"Years of Experience"}),n.jsxs("span",{children:[N.experience_years," ",o?"سنة":"years"]})]})]})]}),N.certifications&&N.certifications.length>0&&n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Vu,{className:"h-5 w-5 mr-2"}),o?"الشهادات والاعتمادات":"Certifications"]})}),n.jsx(Au,{children:n.jsx("div",{className:"space-y-2",children:N.certifications.map((e,t)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx(dm,{className:"h-4 w-4 mr-2 text-green-500"}),n.jsx("span",{children:e})]},t))})})]}),N.equipment&&N.equipment.length>0&&n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(np,{className:"h-5 w-5 mr-2"}),o?"المعدات والأدوات":"Equipment & Tools"]})}),n.jsx(Au,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:N.equipment.map((e,t)=>n.jsx(Xf,{variant:"outline",children:e},t))})})]}),N.coverage_locations&&N.coverage_locations.length>0&&n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Jm,{className:"h-5 w-5 mr-2"}),o?"مناطق التغطية":"Service Areas"]})}),n.jsx(Au,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:N.coverage_locations.map((e,t)=>n.jsx(Xf,{variant:"secondary",children:e},t))})})]})]})}),n.jsx(VS,{value:"portfolio",className:"space-y-6",children:n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center",children:[n.jsx(Ku,{className:"h-5 w-5 mr-2"}),o?"الأعمال السابقة":"Previous Work"]})}),n.jsx(Au,{children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(dh,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:o?"لا توجد أعمال سابقة متاحة للعرض":"No portfolio items available to display"})]})})]})}),n.jsx(VS,{value:"stats",className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:o?"إجمالي العروض":"Total Offers"}),n.jsx("p",{className:"text-2xl font-bold",children:N.total_offers})]}),n.jsx(Tm,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:o?"المشاريع المكتملة":"Completed Projects"}),n.jsx("p",{className:"text-2xl font-bold",children:N.total_completed_orders})]}),n.jsx(dm,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(Eu,{children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:o?"معدل النجاح":"Success Rate"}),n.jsxs("p",{className:"text-2xl font-bold",children:[N.total_offers>0?(N.total_completed_orders/N.total_offers*100).toFixed(0):0,"%"]})]}),n.jsx($h,{className:"h-8 w-8 text-primary"})]})})}),n.jsxs(Eu,{className:"md:col-span-2 lg:col-span-3",children:[n.jsx(Ou,{children:n.jsx(Mu,{children:o?"تقييم الأداء":"Performance Metrics"})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{children:o?"معدل الاستجابة":"Response Rate"}),n.jsxs("span",{children:[N.response_rate.toFixed(0),"%"]})]}),n.jsx(G_,{value:N.response_rate,className:"h-2"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between mb-2",children:[n.jsx("span",{children:o?"تقييم العملاء":"Customer Rating"}),n.jsxs("span",{children:[N.avg_rating.toFixed(1),"/5.0"]})]}),n.jsx(G_,{value:N.avg_rating/5*100,className:"h-2"})]})]})]})]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4 border-t",children:[n.jsx(ku,{variant:"outline",onClick:()=>x(!0),className:"flex-1",children:o?"طلب خاص":"Private Request"}),n.jsx(ku,{onClick:()=>{p(!1),setTimeout(()=>{c("/requests/create")},100)},className:"flex-1",children:o?"طلب عام":"Public Request"})]})]})]}),n.jsx(Jee,{open:f,onOpenChange:x,vendorId:t,vendorName:N.company_name||N.full_name}),n.jsx(tte,{isOpen:g,onClose:()=>v(!1),recipientId:t,recipientName:N.company_name||N.full_name,recipientAvatar:N.avatar_url||""})]});var k},nte=or("VendorDirectory"),ste=()=>{const{t:e,isRTL:t,language:r}=cr(),s=St(),{vendors:a,loading:i,totalCount:o,fetchVendors:l}=(()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!1),[s,a]=Ne.useState(0);br();const{toast:i}=fp(),o=async(e={},r=1,s=20,o="created_at",l="desc")=>{try{n(!0);let i=mr.from("user_profiles").select("\n          *,\n          vendor_categories(\n            id,\n            category_id,\n            categories(id, slug, name_en, name_ar, parent_id)\n          )\n        ",{count:"exact"}).eq("role","vendor").eq("status","approved");if(e.categories&&e.categories.length>0){const{data:r}=await mr.from("vendor_categories").select("vendor_id").in("category_id",e.categories);if(!(r&&r.length>0))return t([]),void a(0);i=i.in("id",r.map(e=>e.vendor_id))}e.location&&(i=i.ilike("address",`%${e.location}%`)),e.search&&(i=i.or(`\n          full_name.ilike.%${e.search}%,\n          company_name.ilike.%${e.search}%,\n          bio.ilike.%${e.search}%\n        `));const c=(r-1)*s,d=c+s-1;i=i.range(c,d),i=i.order(o,{ascending:"asc"===l});const{data:u,error:m,count:h}=await i;if(m)throw m;t(u||[]),a(h||0)}catch(c){i({title:"Error",description:"Failed to fetch vendors",variant:"destructive"})}finally{n(!1)}};return{vendors:e,loading:r,totalCount:s,fetchVendors:o,getVendorById:async e=>{try{const{data:t,error:r}=await mr.from("user_profiles").select("\n          *,\n          vendor_categories(\n            id,\n            category_id,\n            categories(id, slug, name_en, name_ar, parent_id)\n          )\n        ").eq("id",e).eq("role","vendor").single();if(r)throw r;return t}catch(t){return null}},assignCategoryToVendor:async(e,t)=>{try{const{error:r}=await mr.from("vendor_categories").insert([{vendor_id:e,category_id:t}]);if(r)throw r;i({title:"Success",description:"Category assigned to vendor successfully"})}catch(r){throw i({title:"Error",description:"Failed to assign category",variant:"destructive"}),r}},removeCategoryFromVendor:async(e,t)=>{try{const{error:r}=await mr.from("vendor_categories").delete().eq("vendor_id",e).eq("category_id",t);if(r)throw r;i({title:"Success",description:"Category removed from vendor successfully"})}catch(r){throw i({title:"Error",description:"Failed to remove category",variant:"destructive"}),r}},getVendorsByCategory:async e=>{try{const{data:t,error:r}=await mr.from("user_profiles").select("\n          *,\n          vendor_categories!inner(category_id)\n        ").eq("role","vendor").eq("status","approved").eq("vendor_categories.category_id",e);if(r)throw r;return t||[]}catch(t){return[]}},refetch:()=>o()}})(),{categories:c}=gC(),{startConversation:d}=_C(),[u,m]=Ne.useState({}),[h,p]=Ne.useState(1),[f,x]=Ne.useState("created_at"),[g,v]=Ne.useState("desc");Ne.useState(!1),Ne.useState(null);const[y,j]=Ne.useState(null);Ne.useEffect(()=>{l(u,h,20,f,g)},[u,h,f,g]);const b=(e,t)=>{m(r=>({...r,[e]:t})),p(1)},w=()=>{m({}),p(1)},N=Ne.useMemo(()=>a?{total:o||a.length,verified:a.filter(e=>"approved"===e.verification_status).length,available:a.length,categories:c.length}:{total:0,verified:0,available:0,categories:0},[a,o,c]);return i?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-64 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):n.jsxs("div",{className:_u("space-y-6",t&&"rtl-text-right"),style:t?{textAlign:"right !important"}:{},children:[n.jsxs("div",{className:_u("grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",t&&"rtl-text-right"),style:t?{textAlign:"right !important"}:{},children:[n.jsx(eS,{title:e("vendors.totalVendors"),value:N.total,icon:Gu,description:e("vendors.registeredVendors")}),n.jsx(eS,{title:e("vendors.verifiedVendors"),value:N.verified,icon:Sh,variant:"success",description:e("vendors.qualityAssuredPartners")}),n.jsx(eS,{title:e("vendors.availableNow"),value:N.available,icon:Zh,description:e("vendors.readyForNewProjects")}),n.jsx(eS,{title:e("vendors.serviceCategories"),value:N.categories,icon:qm,description:e("vendors.differentSpecializations")})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-4",children:[n.jsx("div",{className:"lg:col-span-1 space-y-6",children:n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),style:t?{textAlign:"right !important"}:{},children:[n.jsx(qm,{className:"h-5 w-5"}),e("vendors.filterResults")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("vendors.searchVendors"),value:u.search||"",onChange:e=>b("search",e.target.value),className:_u(t?"pr-10 text-right":"pl-10"),style:t?{textAlign:"right !important"}:{}})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",style:t?{textAlign:"right !important"}:{},children:e("vendors.sortBy")}),n.jsxs(lC,{value:f,onValueChange:x,children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"created_at",children:e("vendors.newest")}),n.jsx(pC,{value:"rating",children:e("vendors.rating")}),n.jsx(pC,{value:"company_name",children:e("vendors.companyName")})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",style:t?{textAlign:"right !important"}:{},children:e("vendors.budgetRange")}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsx($j,{type:"number",placeholder:e("vendors.min"),value:u.budgetMin||"",onChange:e=>b("budgetMin",parseFloat(e.target.value)||void 0),style:t?{textAlign:"right !important"}:{}}),n.jsx($j,{type:"number",placeholder:e("vendors.max"),value:u.budgetMax||"",onChange:e=>b("budgetMax",parseFloat(e.target.value)||void 0),style:t?{textAlign:"right !important"}:{}})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",style:t?{textAlign:"right !important"}:{},children:e("vendors.categories")}),n.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:c.map(e=>n.jsxs("div",{className:_u("flex items-center space-x-2",t&&"flex-row-reverse space-x-reverse"),children:[n.jsx(CE,{id:`category-${e.id}`,checked:(u.categories||[]).includes(e.id),onCheckedChange:t=>((e,t)=>{const r=u.categories||[],n=t?[...r,e]:r.filter(t=>t!==e);b("categories",n)})(e.id,t)}),n.jsx("label",{htmlFor:`category-${e.id}`,className:"text-sm cursor-pointer flex-1",style:t?{textAlign:"right !important"}:{},children:t?e.name_ar:e.name_en})]},e.id))})]}),n.jsx(ku,{onClick:w,variant:"outline",size:"sm",className:"w-full",style:t?{textAlign:"right !important"}:{},children:e("vendors.clearAllFilters")})]})]})}),n.jsxs("div",{className:"lg:col-span-3",children:[a.length>0?n.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:a.map(r=>{var a,i;return n.jsxs(Eu,{className:"hover:shadow-lg transition-all duration-200",children:[n.jsx(Ou,{className:"pb-3",children:n.jsxs("div",{className:_u("flex items-start justify-between",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-3",t&&"flex-row-reverse"),children:[n.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:r.avatar_url?n.jsx("img",{src:r.avatar_url,alt:"",className:"w-full h-full rounded-lg object-cover"}):n.jsx("div",{className:"w-full h-full rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-primary font-semibold text-lg",children:(null==(a=r.company_name)?void 0:a[0])||(null==(i=r.full_name)?void 0:i[0])||"V"})})}),n.jsxs("div",{children:[n.jsx(Mu,{className:"text-lg",style:t?{textAlign:"right !important"}:{},children:r.company_name||r.full_name}),n.jsxs("div",{className:_u("flex items-center gap-2 mt-1",t&&"flex-row-reverse"),children:[r.address&&n.jsxs("div",{className:_u("flex items-center gap-1",t&&"flex-row-reverse"),children:[n.jsx(Jm,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",style:t?{textAlign:"right !important"}:{},children:r.address})]}),"approved"===r.verification_status&&n.jsxs(n.Fragment,{children:[r.address&&n.jsx("span",{className:"text-muted-foreground",children:"•"}),n.jsxs("div",{className:_u("flex items-center gap-1",t&&"flex-row-reverse"),children:[n.jsx(Sh,{className:"h-3 w-3 text-green-600"}),n.jsx("span",{className:"text-sm text-green-600",style:t?{textAlign:"right !important"}:{},children:e("vendors.verified")})]})]})]})]})]}),n.jsx(Xf,{variant:"secondary",className:"bg-green-100 text-green-700",style:t?{textAlign:"right !important"}:{},children:e("vendors.available")})]})}),n.jsxs(Au,{className:"space-y-4",children:[r.bio&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",style:t?{textAlign:"right !important"}:{},children:r.bio}),r.vendor_categories&&r.vendor_categories.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",style:t?{textAlign:"right !important"}:{},children:e("vendors.specialties")}),n.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.vendor_categories.slice(0,3).map(e=>n.jsx(Xf,{variant:"outline",className:"text-xs",style:t?{textAlign:"right !important"}:{},children:t?e.categories.name_ar:e.categories.name_en},e.id)),r.vendor_categories.length>3&&n.jsxs(Xf,{variant:"outline",className:"text-xs",style:t?{textAlign:"right !important"}:{},children:["+",r.vendor_categories.length-3," ",e("vendors.more")]})]})]}),n.jsxs("div",{className:_u("flex items-center justify-between pt-3 border-t text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsxs("div",{className:_u("flex items-center gap-1",t&&"flex-row-reverse"),children:[n.jsx(gm,{className:"h-3 w-3"}),n.jsxs("span",{style:t?{textAlign:"right !important"}:{},children:[e("vendors.joined")," ",bj(new Date(r.created_at),"MMM yyyy")]})]}),r.portfolio_url&&n.jsx("a",{href:r.portfolio_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",style:t?{textAlign:"right !important"}:{},children:e("vendors.portfolio")})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(rte,{vendorId:r.id.toString(),children:n.jsx(ku,{variant:"outline",size:"sm",className:"flex-1",style:t?{textAlign:"right !important"}:{},children:e("vendors.viewProfile")})}),n.jsx(ku,{variant:"secondary",size:"sm",className:"flex-1",onClick:async()=>{try{nte.debug("Starting direct conversation",{vendorId:r.id});await d(r.id.toString())&&s("/messages")}catch(e){nte.error("Error starting conversation",{error:e,vendorId:r.id})}},style:t?{textAlign:"right !important"}:{},children:e("vendors.message")}),n.jsx(ku,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>j(r),style:t?{textAlign:"right !important"}:{},children:e("vendors.privateRequest")}),n.jsx(ku,{size:"sm",className:"flex-1",onClick:()=>s("/requests/create"),style:t?{textAlign:"right !important"}:{},children:e("vendors.publicRequest")})]})]})]},r.id)})}):n.jsx(jC,{icon:Gu,title:e("vendors.noVendorsFound"),description:e("vendors.tryAdjustingSearch"),action:{label:e("vendors.clearFilters"),onClick:w,variant:"outline"}}),o>20&&n.jsx("div",{className:"flex justify-center mt-8",children:n.jsxs("div",{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(ku,{variant:"outline",onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===h,style:t?{textAlign:"right !important"}:{},children:e("vendors.previous")}),n.jsxs("span",{className:"text-sm text-muted-foreground px-4",style:t?{textAlign:"right !important"}:{},children:[e("vendors.page")," ",h," ",e("vendors.of")," ",Math.ceil(o/20)]}),n.jsx(ku,{variant:"outline",onClick:()=>p(e=>e+1),disabled:h>=Math.ceil(o/20),style:t?{textAlign:"right !important"}:{},children:e("vendors.next")})]})})]})]}),y&&n.jsx(Jee,{open:!!y,onOpenChange:e=>!e&&j(null),vendorId:y.id,vendorName:y.name})]})},ate=()=>{const{t:e,isRTL:t}=cr();return n.jsx(y9,{title:e("vendors.title")||"Vendor Directory",description:e("vendors.description")||"Browse and connect with qualified vendors",children:n.jsx(ste,{})})},ite=()=>{const[e,t]=Ne.useState([]),[r,n]=Ne.useState(!1),{user:s}=br(),{toast:a}=fp(),i=async e=>{if(s)try{n(!0);let r=mr.from("bids").select("*").order("created_at",{ascending:!1});e&&(r=r.eq("rfq_id",e));const{data:s,error:i}=await r;if(i)return void a({title:"Error",description:"Failed to fetch bids",variant:"destructive"});t(s||[])}catch(r){a({title:"Error",description:"An unexpected error occurred",variant:"destructive"})}finally{n(!1)}};return Ne.useEffect(()=>{i()},[s]),{bids:e,loading:r,createBid:async e=>{if(!s)return a({title:"Error",description:"You must be logged in to create a bid",variant:"destructive"}),null;try{const{data:t}=await mr.from("bids").select("id").eq("rfq_id",e.rfq_id).eq("vendor_id",s.id);if(t&&t.length>0)return a({title:"Error",description:"You have already submitted a bid for this RFQ",variant:"destructive"}),null;const{data:r,error:n}=await mr.from("bids").insert([{rfq_id:e.rfq_id,vendor_id:s.id,total_price:e.total_price,currency:e.currency||"SAR",delivery_timeline_days:e.delivery_timeline_days,proposal:e.proposal,technical_specifications:e.technical_specifications||{},warranty_period_months:e.warranty_period_months,payment_terms:e.payment_terms,status:"submitted",submitted_at:(new Date).toISOString(),expires_at:new Date(Date.now()+2592e6).toISOString()}]).select().single();return n?(a({title:"Error",description:n.message||"Failed to create bid",variant:"destructive"}),null):(a({title:"Success",description:"Bid submitted successfully"}),i(),r)}catch(t){return a({title:"Error",description:"An unexpected error occurred while creating the bid",variant:"destructive"}),null}},updateBid:async(e,t)=>{try{const{error:r}=await mr.from("bids").update({...t,updated_at:(new Date).toISOString()}).eq("id",e);return r?(a({title:"Error",description:"Failed to update bid",variant:"destructive"}),!1):(a({title:"Success",description:"Bid updated successfully"}),i(),!0)}catch(r){return!1}},withdrawBid:async e=>{try{const{error:t}=await mr.from("bids").update({status:"withdrawn",updated_at:(new Date).toISOString()}).eq("id",e);return t?(a({title:"Error",description:"Failed to withdraw bid",variant:"destructive"}),!1):(a({title:"Success",description:"Bid withdrawn successfully"}),i(),!0)}catch(t){return!1}},getBidsByRFQ:async e=>{try{const{data:t,error:r}=await mr.from("bids").select("*").eq("rfq_id",e).order("created_at",{ascending:!1});return r?[]:t||[]}catch(t){return[]}},refreshBids:i}},ote=({rfq:e,children:t})=>{const[r,s]=Ne.useState(!1),[a,i]=Ne.useState({rfq_id:e.id,currency:e.currency||"SAR",delivery_timeline_days:30,warranty_period_months:12,payment_terms:"30% advance, 70% on completion"}),[o,l]=Ne.useState(!1),{createBid:c}=ite(),{toast:d}=fp(),u=(e,t)=>{i(r=>({...r,[e]:t}))},m=new Date>new Date(e.submission_deadline);return n.jsxs(Sb,{open:r,onOpenChange:s,children:[n.jsx(kb,{asChild:!0,children:t}),n.jsxs(Ob,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Mb,{children:n.jsxs(Ab,{className:"flex items-center gap-2",children:[n.jsx(bh,{className:"h-5 w-5"}),"Submit Bid - ",e.title]})}),m?n.jsx(Eu,{className:"border-destructive",children:n.jsxs(Au,{className:"p-6 text-center",children:[n.jsx(cm,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-destructive mb-2",children:"Submission Deadline Passed"}),n.jsxs("p",{className:"text-muted-foreground",children:["The submission deadline for this RFQ was ",new Date(e.submission_deadline).toLocaleDateString(),". You can no longer submit bids for this request."]})]})}):n.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),a.total_price&&a.delivery_timeline_days&&a.proposal){l(!0);try{await c(a)&&(s(!1),i({rfq_id:e.id,currency:e.currency||"SAR",delivery_timeline_days:30,warranty_period_months:12,payment_terms:"30% advance, 70% on completion"}),d({title:"Success",description:"Your bid has been submitted successfully!"}))}catch(r){}finally{l(!1)}}else d({title:"Error",description:"Please fill in all required fields",variant:"destructive"})},className:"space-y-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsx(Mu,{className:"text-lg",children:"RFQ Summary"})}),n.jsx(Au,{className:"space-y-2",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Budget Range:"}),n.jsxs("span",{className:"ml-2",children:[e.budget_min&&e.budget_max?`${e.budget_min.toLocaleString()} - ${e.budget_max.toLocaleString()}`:"Budget negotiable"," ",e.currency]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Submission Deadline:"}),n.jsx("span",{className:"ml-2",children:new Date(e.submission_deadline).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Project Start:"}),n.jsx("span",{className:"ml-2",children:e.project_start_date?new Date(e.project_start_date).toLocaleDateString():"TBD"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Delivery Location:"}),n.jsx("span",{className:"ml-2",children:e.delivery_location||"Not specified"})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2 text-lg",children:[n.jsx(_m,{className:"h-5 w-5"}),"Price Information"]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"total_price",children:"Total Price *"}),n.jsx($j,{id:"total_price",type:"number",step:"0.01",placeholder:"Enter your total bid amount",value:a.total_price||"",onChange:e=>u("total_price",parseFloat(e.target.value)),required:!0})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"currency",children:"Currency"}),n.jsxs(lC,{value:a.currency,onValueChange:e=>u("currency",e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"SAR",children:"SAR - Saudi Riyal"}),n.jsx(pC,{value:"USD",children:"USD - US Dollar"}),n.jsx(pC,{value:"EUR",children:"EUR - Euro"})]})]})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2 text-lg",children:[n.jsx(gm,{className:"h-5 w-5"}),"Timeline & Terms"]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"delivery_timeline",children:"Delivery Timeline (Days) *"}),n.jsx($j,{id:"delivery_timeline",type:"number",placeholder:"Number of days for completion",value:a.delivery_timeline_days||"",onChange:e=>u("delivery_timeline_days",parseInt(e.target.value)),required:!0})]}),n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"warranty_period",children:"Warranty Period (Months)"}),n.jsx($j,{id:"warranty_period",type:"number",placeholder:"Warranty period in months",value:a.warranty_period_months||"",onChange:e=>u("warranty_period_months",parseInt(e.target.value))})]})]})]})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Tm,{className:"h-5 w-5"}),"Proposal & Technical Specifications"]})}),n.jsx(Au,{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"proposal",children:"Detailed Proposal *"}),n.jsx(bC,{id:"proposal",placeholder:"Describe your approach, methodology, deliverables, and value proposition...",rows:6,value:a.proposal||"",onChange:e=>u("proposal",e.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Provide a comprehensive description of how you will fulfill the RFQ requirements"})]})})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:"flex items-center gap-2 text-lg",children:[n.jsx(bm,{className:"h-5 w-5"}),"Payment Terms"]})}),n.jsx(Au,{children:n.jsxs("div",{children:[n.jsx(j_,{htmlFor:"payment_terms",children:"Payment Terms"}),n.jsxs(lC,{value:a.payment_terms,onValueChange:e=>u("payment_terms",e),children:[n.jsx(dC,{children:n.jsx(cC,{})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"100% advance",children:"100% Advance Payment"}),n.jsx(pC,{value:"50% advance, 50% on completion",children:"50% Advance, 50% on Completion"}),n.jsx(pC,{value:"30% advance, 70% on completion",children:"30% Advance, 70% on Completion"}),n.jsx(pC,{value:"Net 30",children:"Net 30 Days"}),n.jsx(pC,{value:"Net 60",children:"Net 60 Days"}),n.jsx(pC,{value:"Custom",children:"Custom Terms"})]})]})]})})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[n.jsx(ku,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"}),n.jsx(ku,{type:"submit",disabled:o,className:"flex-1 gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx(lb,{size:"sm"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bh,{className:"h-4 w-4"}),"Submit Bid"]})})]})]})]})]})},lte=ke.memo(()=>{const{t:e,isRTL:t,formatCurrency:r}=cr(),{rfqs:s,loading:a}=Yee(),{bids:i,loading:o}=ite(),{categories:l,loading:c}=gC(),[d,u]=Ne.useState(""),[m,h]=Ne.useState("all"),[p,f]=Ne.useState("all"),x=Ne.useMemo(()=>s?s.filter(e=>"published"===e.status&&e.is_public&&new Date(e.submission_deadline)>new Date):[],[s]),g=Ne.useMemo(()=>x&&i?x.map(e=>({...e,hasBid:i.some(t=>t.rfq_id===e.id)})):[],[x,i]),v=Ne.useMemo(()=>{if(!g)return{total:0,newThisWeek:0,highPriority:0,submitted:0};const e=new Date((new Date).getTime()-6048e5);return{total:g.length,newThisWeek:g.filter(t=>new Date(t.created_at)>e).length,highPriority:g.filter(e=>"high"===e.priority||"urgent"===e.priority).length,submitted:g.filter(e=>e.hasBid).length}},[g]),y=Ne.useMemo(()=>g?g.filter(e=>{var t,r;const n=(null==(t=e.title)?void 0:t.toLowerCase().includes(d.toLowerCase()))||(null==(r=e.description)?void 0:r.toLowerCase().includes(d.toLowerCase()));let s=!0;"available"===m?s=!e.hasBid:"submitted"===m&&(s=e.hasBid);const a="all"===p||e.category_id===p;return n&&s&&a}):[],[g,d,m,p]),j=e=>{switch(e){case"urgent":case"high":return"destructive";case"medium":default:return"default";case"low":return"secondary"}},b=t=>{switch(t){case"urgent":return e("vendor.rfqs.urgent");case"high":return e("vendor.rfqs.high");case"medium":return e("vendor.rfqs.medium");case"low":return e("vendor.rfqs.low");default:return t}};return a||o||c?n.jsxs(y9,{children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-8 w-48 bg-muted rounded animate-pulse mb-2"}),n.jsx("div",{className:"h-4 w-32 bg-muted rounded animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map((e,t)=>n.jsx(eS,{title:"",value:"",loading:!0},t))})]}):n.jsxs("div",{className:_u("space-y-6",t&&"rtl"),dir:t?"rtl":"ltr",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 leading-tight",children:e("vendor.rfqs.availableRFQs")}),n.jsx("p",{className:"text-foreground opacity-75 text-sm sm:text-base max-w-2xl",children:e("vendor.rfqs.browseRFQs")})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx(eS,{title:e("vendor.rfqs.totalRFQs"),value:v.total,icon:Tm,trend:{value:15,label:e("vendor.rfqs.vsLastMonth"),isPositive:!0}}),n.jsx(eS,{title:e("vendor.rfqs.newThisWeek"),value:v.newThisWeek,icon:$h,trend:{value:5,label:e("vendor.rfqs.thisWeek"),isPositive:!0},variant:"success"}),n.jsx(eS,{title:e("vendor.rfqs.highPriority"),value:v.highPriority,icon:cm,variant:"warning"}),n.jsx(eS,{title:e("vendor.rfqs.bidsSubmitted"),value:v.submitted,icon:bh,variant:"default"})]}),n.jsxs(Eu,{children:[n.jsx(Ou,{children:n.jsxs(Mu,{className:_u("flex items-center gap-2",t&&"flex-row-reverse"),children:[n.jsx(qm,{className:"h-5 w-5"}),e("vendor.rfqs.filtersSearch")]})}),n.jsxs(Au,{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4 rtl:md:space-x-reverse",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(jh,{className:_u("absolute top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",t?"right-3":"left-3")}),n.jsx($j,{placeholder:e("vendor.rfqs.searchRFQs"),value:d,onChange:e=>u(e.target.value),className:_u(t?"pr-10 text-right":"pl-10")})]})}),n.jsxs(lC,{value:m,onValueChange:h,children:[n.jsx(dC,{className:"w-full md:w-48",children:n.jsx(cC,{placeholder:e("vendor.rfqs.filterByStatus")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:e("vendor.rfqs.allRFQs")}),n.jsx(pC,{value:"available",children:e("vendor.rfqs.availableToBid")}),n.jsx(pC,{value:"submitted",children:e("vendor.rfqs.alreadySubmitted")})]})]}),n.jsxs(lC,{value:p,onValueChange:f,children:[n.jsx(dC,{className:"w-full md:w-48",children:n.jsx(cC,{placeholder:e("vendor.rfqs.filterByCategory")})}),n.jsxs(hC,{children:[n.jsx(pC,{value:"all",children:e("vendor.rfqs.allCategories")}),l.map(e=>n.jsx(pC,{value:e.id,children:t?e.name_ar:e.name_en},e.id))]})]})]}),(d||"all"!==m||"all"!==p)&&n.jsxs("div",{className:_u("flex items-center gap-2 text-sm text-muted-foreground",t&&"flex-row-reverse"),children:[n.jsx("span",{children:e("vendor.rfqs.showingResults").replace("{0}",y.length.toString()).replace("{1}",v.total.toString())}),n.jsx(ku,{variant:"ghost",size:"sm",onClick:()=>{u(""),h("all"),f("all")},children:e("vendor.rfqs.clearFilters")})]})]})]}),y.length>0?n.jsx("div",{className:"space-y-4",children:y.map(s=>n.jsx(Eu,{className:"hover:shadow-lg transition-shadow",children:n.jsx(Au,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:_u("flex justify-between items-start",t&&"flex-row-reverse"),children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:_u("flex items-start justify-between mb-2",t&&"flex-row-reverse"),children:[n.jsx("h3",{className:"text-lg font-semibold",children:s.title}),n.jsxs("div",{className:_u("flex gap-2",t&&"flex-row-reverse"),children:[n.jsx(Xf,{variant:j(s.priority),children:b(s.priority)}),s.hasBid&&n.jsx(Xf,{variant:"outline",className:"text-success border-success",children:e("vendor.rfqs.bidAlreadySubmitted")})]})]}),n.jsx("p",{className:"text-muted-foreground mb-2 line-clamp-2",children:s.description})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(_m,{className:"h-4 w-4 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.rfqs.budget")}),n.jsx("p",{className:"font-semibold text-sm",children:s.budget_min&&s.budget_max?`${r(s.budget_min)} - ${r(s.budget_max)}`:e("vendor.rfqs.negotiable")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(Zu,{className:"h-4 w-4 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.rfqs.deadline")}),n.jsx("p",{className:"font-semibold text-sm",children:bj(new Date(s.submission_deadline),"MMM dd, yyyy")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(Jm,{className:"h-4 w-4 text-orange-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.rfqs.location")}),n.jsx("p",{className:"font-semibold text-sm",children:s.delivery_location||e("vendor.rfqs.notSpecified")})]})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[n.jsx(gm,{className:"h-4 w-4 text-purple-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e("vendor.rfqs.posted")}),n.jsx("p",{className:"font-semibold text-sm",children:bj(new Date(s.created_at),"MMM dd")})]})]})]}),n.jsxs("div",{className:_u("flex gap-2 pt-2",t&&"flex-row-reverse"),children:[s.hasBid?n.jsxs(ku,{variant:"outline",className:_u("flex-1 gap-2",t&&"flex-row-reverse"),disabled:!0,children:[n.jsx(bh,{className:"h-4 w-4"}),e("vendor.rfqs.bidAlreadySubmitted")]}):n.jsx(ote,{rfq:s,children:n.jsxs(ku,{className:_u("flex-1 gap-2",t&&"flex-row-reverse"),children:[n.jsx(bh,{className:"h-4 w-4"}),e("vendor.rfqs.submitBid")]})}),n.jsxs(ku,{variant:"outline",className:_u("gap-2",t&&"flex-row-reverse"),children:[n.jsx(Mm,{className:"h-4 w-4"}),e("vendor.rfqs.viewDetails")]})]})]})})},s.id))}):n.jsx(Eu,{className:"border-dashed",children:n.jsxs(Au,{className:"p-12 text-center",children:[n.jsx("div",{className:"mx-auto w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:n.jsx(Tm,{className:"h-12 w-12 text-primary"})}),n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:e(d||"all"!==m||"all"!==p?"vendor.rfqs.noRFQsFound":"vendor.rfqs.noAvailableRFQs")}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:e(d||"all"!==m||"all"!==p?"vendor.rfqs.adjustCriteria":"vendor.rfqs.checkBackLater")}),(d||"all"!==m||"all"!==p)&&n.jsxs(ku,{variant:"outline",onClick:()=>{u(""),h("all"),f("all")},className:_u("gap-2",t&&"flex-row-reverse"),children:[n.jsx(dh,{className:"h-4 w-4"}),e("vendor.rfqs.clearFilters")]})]})})]})});lte.displayName="VendorRFQsContent";const cte=ke.memo(()=>n.jsx(y9,{children:n.jsx(yS,{children:n.jsx(lte,{})})})),dte=({children:e,allowedRoles:t})=>{const{userProfile:r,loading:s}=br();return s?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):r&&t.includes(r.role)?n.jsx(n.Fragment,{children:e}):n.jsx(Lt,{to:"/login",replace:!0})};function ute(){return n.jsxs(ip,{showDetails:!1,showHomeButton:!0,children:[n.jsx(pf,{}),n.jsx(jr,{children:n.jsx(ur,{children:n.jsx(Gt,{children:n.jsx(Sr,{children:n.jsxs(Or,{children:[n.jsx(Kf,{children:n.jsx(Ne.Suspense,{fallback:n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:n.jsxs(zt,{children:[n.jsx(It,{path:"/landing",element:n.jsx(rO,{})}),n.jsx(It,{path:"/login",element:n.jsx(__,{})}),n.jsx(It,{path:"/register",element:n.jsx(S_,{})}),n.jsx(It,{path:"/forgot-password",element:n.jsx(k_,{})}),n.jsx(It,{path:"/dashboard",element:n.jsx(dte,{allowedRoles:["client","vendor","admin"],children:n.jsx(rS,{})})}),n.jsxs(It,{path:"/client",element:n.jsx(dte,{allowedRoles:["client"],children:n.jsx(pb,{})}),children:[n.jsx(It,{path:"requests",element:n.jsx(C8,{})}),n.jsx(It,{path:"requests/create",element:n.jsx(Lt,{to:"/client/create-rfq",replace:!0})}),n.jsx(It,{path:"profile",element:n.jsx(KE,{})}),n.jsx(It,{path:"search",element:n.jsx(v9,{})}),n.jsx(It,{path:"analytics",element:n.jsx(b9,{})}),n.jsx(It,{path:"browse-requests",element:n.jsx(w9,{})}),n.jsx(It,{path:"create-rfq",element:n.jsx(S9,{})}),n.jsx(It,{path:"create-multiple-rfqs",element:n.jsx(E9,{})}),n.jsx(It,{path:"create-request",element:n.jsx(Lt,{to:"/client/create-rfq",replace:!0})}),n.jsx(It,{path:"manage-subscription",element:n.jsx(Eee,{})}),n.jsx(It,{path:"messages",element:n.jsx(Uee,{})}),n.jsx(It,{path:"my-offers",element:n.jsx(Vee,{})}),n.jsx(It,{path:"offers",element:n.jsx(Wee,{})}),n.jsx(It,{path:"orders",element:n.jsx(Hee,{})}),n.jsx(It,{path:"rfq-management",element:n.jsx(Gee,{})}),n.jsx(It,{path:"rfqs/:id/bids",element:n.jsx(Xee,{})}),n.jsx(It,{path:"settings",element:n.jsx(Qee,{})}),n.jsx(It,{path:"support",element:n.jsx(Bee,{})}),n.jsx(It,{path:"vendor-rfqs",element:n.jsx(cte,{})}),n.jsx(It,{path:"vendors",element:n.jsx(ate,{})})]}),n.jsx(It,{path:"/requests",element:n.jsx(Lt,{to:"/client/requests",replace:!0})}),n.jsx(It,{path:"/requests/create",element:n.jsx(Lt,{to:"/client/requests/create",replace:!0})}),n.jsx(It,{path:"/profile",element:n.jsx(Lt,{to:"/client/profile",replace:!0})}),n.jsx(It,{path:"/search",element:n.jsx(Lt,{to:"/client/search",replace:!0})}),n.jsx(It,{path:"/analytics",element:n.jsx(Lt,{to:"/client/analytics",replace:!0})}),n.jsx(It,{path:"/browse-requests",element:n.jsx(Lt,{to:"/client/browse-requests",replace:!0})}),n.jsx(It,{path:"/create-rfq",element:n.jsx(Lt,{to:"/client/create-rfq",replace:!0})}),n.jsx(It,{path:"/create-request",element:n.jsx(Lt,{to:"/client/create-request",replace:!0})}),n.jsx(It,{path:"/manage-subscription",element:n.jsx(Lt,{to:"/client/manage-subscription",replace:!0})}),n.jsx(It,{path:"/messages",element:n.jsx(Lt,{to:"/client/messages",replace:!0})}),n.jsx(It,{path:"/my-offers",element:n.jsx(Lt,{to:"/client/my-offers",replace:!0})}),n.jsx(It,{path:"/offers",element:n.jsx(Lt,{to:"/client/offers",replace:!0})}),n.jsx(It,{path:"/orders",element:n.jsx(Lt,{to:"/client/orders",replace:!0})}),n.jsx(It,{path:"/rfq-management",element:n.jsx(Lt,{to:"/client/rfq-management",replace:!0})}),n.jsx(It,{path:"/settings",element:n.jsx(Lt,{to:"/client/settings",replace:!0})}),n.jsx(It,{path:"/support",element:n.jsx(Lt,{to:"/client/support",replace:!0})}),n.jsx(It,{path:"/vendor-rfqs",element:n.jsx(Lt,{to:"/client/vendor-rfqs",replace:!0})}),n.jsx(It,{path:"/vendors",element:n.jsx(Lt,{to:"/client/vendors",replace:!0})}),n.jsx(It,{path:"/vendor/dashboard",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(vS,{})})}),n.jsx(It,{path:"/vendor/analytics",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/reports",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/business-intelligence",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/projects-management",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/portfolio-management",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/browse-requests",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(AE,{})})}),n.jsx(It,{path:"/vendor/offers",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(RE,{})})}),n.jsx(It,{path:"/vendor/orders",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(FE,{})})}),n.jsx(It,{path:"/vendor/products",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/enhanced-bidding",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/order-kanban",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/performance",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/portfolio",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/profile",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(GE,{})})}),n.jsx(It,{path:"/vendor/settings",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(Aee,{})})}),n.jsx(It,{path:"/vendor/messages",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(Mee,{})})}),n.jsx(It,{path:"/vendor/support",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx($ee,{})})}),n.jsx(It,{path:"/vendor/cr-management",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(wS,{})})}),n.jsx(It,{path:"/vendor/subscription",element:n.jsx(dte,{allowedRoles:["vendor"],children:n.jsx(HS,{})})}),n.jsx(It,{path:"/vendor/transactions",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/rfqs",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/notifications",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/clients",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor/documents",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/vendor-dashboard",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsxs(It,{path:"/admin",element:n.jsx(dte,{allowedRoles:["admin"],children:n.jsx(x_,{})}),children:[n.jsx(It,{path:"dashboard",element:n.jsx(W3,{})}),n.jsx(It,{path:"users",element:n.jsx(J3,{})}),n.jsx(It,{path:"requests",element:n.jsx(t5,{})}),n.jsx(It,{path:"offers",element:n.jsx(d5,{})}),n.jsx(It,{path:"analytics",element:n.jsx(m5,{})}),n.jsx(It,{path:"performance-monitor",element:n.jsx(p5,{})}),n.jsx(It,{path:"orders",element:n.jsx(f5,{})}),n.jsx(It,{path:"verification",element:n.jsx(x5,{})}),n.jsx(It,{path:"automation",element:n.jsx(P5,{})}),n.jsx(It,{path:"financial-transactions",element:n.jsx(A5,{})}),n.jsx(It,{path:"subscriptions",element:n.jsx(D5,{})}),n.jsx(It,{path:"support",element:n.jsx(R5,{})}),n.jsx(It,{path:"communications",element:n.jsx(V5,{})}),n.jsx(It,{path:"category-management",element:n.jsx(Y5,{})}),n.jsx(It,{path:"expert-consultations",element:n.jsx(K5,{})}),n.jsx(It,{path:"settings",element:n.jsx(G5,{})}),n.jsx(It,{path:"profile",element:n.jsx(Q5,{})})]}),n.jsx(It,{path:"/vendor",element:n.jsx(Lt,{to:"/vendor/dashboard",replace:!0})}),n.jsx(It,{path:"/",element:n.jsx(Lt,{to:"/landing",replace:!0})}),n.jsx(It,{path:"*",element:n.jsx(nO,{})})]})})}),n.jsx(uf,{})]})})})})})]})}ir.info("Application starting"),e(document.getElementById("root")).render(n.jsx(ute,{}));export{Of as I,Pf as N,wf as W};
